import{$ as c}from"./api-ea761cca.js";import{b as n,c as y}from"./notifications-b6da0b75.js";import{r as t,k as h,a2 as m}from"./index-7ea6e93c.js";const v=async s=>await c("/customer/register/prospect",{method:"POST",body:s}),C=async s=>await c(`/customer/perfil/${s}`,{method:"GET"}),w=async s=>await c("customer/list-paginated",{method:"GET",params:s});function I(){const s=t(!1),r=t(null),a=t(null),l=t([]),i=t(0),p=h(),g=async o=>{if(!o.name||!o.phone){n("Falta Informacion","El nombre y el celular son obligatorios");return}s.value=!0,r.value=null;try{const e={name:o.name,phone:o.phone,email:o.email,ci:o.ci,cod_phone:o.countryCode.replace(/\+/g,""),description:o.description};console.log(e);const u=await v(e);console.log("Respuesta del servidor:",u),y("Cliente agregado exitosamente","El cliente ha sido registrado en el sistema correctamente."),a.value=u.data,p.push("/customers/listCustomers")}catch(e){console.log(e),e.response&&e.response.status==422&&n("Falta Informacion","El nombre y el celular son obligatorios"),e.response&&e.response.status==409&&n("Advertencia",e.response._data.message),r.value=e.message}finally{s.value=!1}},d=async o=>{try{const e=await w(o);console.log(e),l.value=e.data.data,i.value=e.data.total}catch(e){console.log(e)}},f=async o=>{try{const e=await C(o);a.value=e.data,console.log(quote.value)}catch(e){console.error(e)}};return{loading:s,error:r,customer:a,customers:m(()=>l.value),totalCustomers:m(()=>i.value),addCustomer:g,allCustomerPaginate:d,getPerfilCutomerbyId:f}}export{I as u};
