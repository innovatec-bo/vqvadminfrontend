import{r as c}from"./validators-dea6e3a5.js";import{f as z}from"./currencyFormatter-92ad4b3c.js";import{_ as Y}from"./AppTextarea-cad16e31.js";import{_ as j}from"./AppSelect-efaf9105.js";import{_ as I}from"./AppTextField-29b22b24.js";import{_ as F}from"./AppDateTimePicker-f811ee84.js";import{P as y,a as B,_ as S}from"./InvoiceAddMoney-7bae0c04.js";import{V as E}from"./VNodeRenderer-c6452534.js";import{r as U,w as K,H as L,o as v,f as D,e as o,d as p,c as $,F as O,i as H,b as l,n as d,x as q,v as C,z as Q,a4 as h,$ as G,I as N,a0 as J}from"./index-c2e96262.js";import{_ as W}from"./AppAutocomplete-73517056.js";import{u as X}from"./useProperty-f00a9a2f.js";import{V as k}from"./VRow-7348eabc.js";import{V as r}from"./VCol-11309398.js";import{V as M}from"./VCard-f5bbdae8.js";import{V as A}from"./VCardText-df626bb1.js";import{V as R}from"./VDivider-88128b79.js";const Z={class:"pa-5 flex-grow-1"},ee={key:0,style:{"font-size":"small","padding-block":""}},le={class:"d-flex justify-end mt-3"},ae={__name:"InvoiceAddProperty",props:{properties:{type:Array,required:!0}},emits:["removeProduct","totalAmount","addProperty"],setup(x,{emit:T}){const a=x,_=T,{propertiesForType:P}=X(),b=U([]),V=U([]),g=()=>{const e={property_id:null,price:null,property_type:y.PARK.value,property_type_name:y.PARK.label};_("addProperty",e)},w=e=>{_("removeProduct",e)},t=e=>{if(console.log("entra a update price"),e.property_type===y.DEPARTAMENT.value){const i=V.value.find(u=>u.id===e.property_id);i&&(e.price=i.base_price)}else if(e.property_type===y.PARK.value){const i=b.value.find(u=>u.id===e.property_id);i&&(e.price=i.base_price)}};return K(()=>a.properties.map(e=>e.property_id),(e,i)=>{e.forEach((u,f)=>{const n=a.properties[f];u!==i[f]&&t(n)})}),L(async()=>{try{const e=await P(y.DEPARTAMENT.value);V.value=e;const i=await P(y.PARK.value);b.value=i}catch(e){console.error("Error al obtener las propiedades:",e)}}),(e,i)=>{const u=W,f=I;return v(),D(M,{flat:"",border:"",class:"d-flex flex-row"},{default:o(()=>[p("div",Z,[(v(!0),$(O,null,H(a.properties,(n,s)=>(v(),D(k,{key:s,class:"mb-4"},{default:o(()=>[l(r,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:n.property_id,"onUpdate:modelValue":m=>n.property_id=m,rules:["requiredValidator"in e?e.requiredValidator:d(c)],label:n.property_type_name,placeholder:"Selecciona una propiedad",items:n.property_type===d(y).DEPARTAMENT.value?d(V):d(b),"item-title":"title","item-value":"id",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue","rules","label","items"]),n.property_id&&n.property_type===d(y).DEPARTAMENT.value?(v(),$("span",ee,[p("strong",null,q(d(V).find(m=>m.id===n.property_id).departament.isfacade===1?"En fachada":"Orientacion sur")+", ",1),C(" "+q(d(V).find(m=>m.id===n.property_id).surface),1),i[0]||(i[0]=p("strong",null," m2",-1)),i[1]||(i[1]=p("br",null,null,-1)),C(" "+q(d(V).find(m=>m.id===n.property_id).departament.number_bedrooms)+" Dormitorio(s) ",1)])):Q("",!0)]),_:2},1024),l(r,{cols:"12",sm:"2",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(f,{modelValue:n.price,"onUpdate:modelValue":m=>n.price=m,rules:["requiredValidator"in e?e.requiredValidator:d(c)],label:"Precio *",placeholder:"$us",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),l(r,{cols:"12",sm:"2",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(f,{modelValue:n.price_it,"onUpdate:modelValue":m=>n.price_it=m,rules:["requiredValidator"in e?e.requiredValidator:d(c)],label:"3% (IT) *",placeholder:"%",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),l(r,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(f,{modelValue:n.price_contrato,"onUpdate:modelValue":m=>n.price_contrato=m,rules:["requiredValidator"in e?e.requiredValidator:d(c)],label:"Precio Contrato *",placeholder:"Escribe el precio",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),l(r,{cols:"12",sm:"1",class:"my-4"},{default:o(()=>[l(h,{color:"error",size:"small",onClick:m=>w(s)},{default:o(()=>[l(G,{icon:"tabler-square-x"})]),_:2},1032,["onClick"])]),_:2},1024),l(r,{cols:"12",style:{"font-size":"small","padding-block":"0","padding-inline":"4px"}})]),_:2},1024))),128)),p("div",le,[l(h,{color:"secondary",onClick:g},{default:o(()=>i[2]||(i[2]=[C(" Agregar Parqueo ")])),_:1})])])]),_:1})}}},oe={class:"d-flex align-center justify-sm-end mx-2"},de={style:{"inline-size":"9.5rem"}},te={class:"d-flex align-center justify-sm-end"},se={style:{"inline-size":"9.5rem"}},ie={class:"text-center my-4"},qe={__name:"AddQuoteInvoice",props:{data:{type:null,required:!0}},emits:["push","remove"],setup(x,{emit:T}){const a=x,_=T,P=t=>{_("push",t)},b=t=>{_("remove",t)},V=["20","30","40","50","70","80","100"],g=U("30"),w=t=>(a.data.initial_fee=t*g.value/100,a.data.percentage_initial_fee=g.value,a.data.balance=t-a.data.initial_fee,t*g.value/100);return(t,e)=>{const i=F,u=I,f=j,n=Y;return v(),D(M,null,{default:o(()=>[l(A,{class:"d-flex flex-wrap justify-space-between gap-y-5 flex-column flex-sm-row align-center"},{default:o(()=>[l(d(E),{nodes:d(N).app.logo,class:"me-3",style:{"align-self":"center"}},null,8,["nodes"]),e[12]||(e[12]=p("h4",{class:"font-weight-bold text-h3 d-flex align-center"}," Formulario de Cotizacion ",-1)),l(d(E),{nodes:d(N).app.logopora,class:"me-3",style:{"align-self":"center"}},null,8,["nodes"])]),_:1}),l(d(k),{class:"justify-end ma-sm-2"},{default:o(()=>[p("div",oe,[e[13]||(e[13]=p("span",{style:{"inline-size":"6rem"}},"Emisión ",-1)),p("span",de,[l(i,{modelValue:a.data.creation_date,"onUpdate:modelValue":e[0]||(e[0]=s=>a.data.creation_date=s),rules:["requiredValidator"in t?t.requiredValidator:d(c)],density:"compact",placeholder:"YYYY-MM-DD",config:{position:"auto right"}},null,8,["modelValue","rules"])])]),p("div",te,[e[14]||(e[14]=p("span",{class:"mx-2"},"Válido ",-1)),p("span",se,[l(i,{modelValue:a.data.expiration_date,"onUpdate:modelValue":e[1]||(e[1]=s=>a.data.expiration_date=s),rules:["requiredValidator"in t?t.requiredValidator:d(c)],density:"compact",placeholder:"YYYY-MM-DD",config:{position:"auto right"}},null,8,["modelValue","rules"])])])]),_:1}),l(R,{thickness:"12"}),l(A,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-y-5 gap-4"},{default:o(()=>[l(d(k),null,{default:o(()=>[l(r,{cols:"12",sm:"8",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.social_reason,"onUpdate:modelValue":e[2]||(e[2]=s=>a.data.social_reason=s),rules:["requiredValidator"in t?t.requiredValidator:d(c)],label:"Cliente *",placeholder:"Canzza",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.nit,"onUpdate:modelValue":e[3]||(e[3]=s=>a.data.nit=s),rules:["requiredValidator"in t?t.requiredValidator:d(c)],label:"C.I./NIT *",placeholder:"0000000",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","rules"])]),_:1}),l(r,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.workplace,"onUpdate:modelValue":e[4]||(e[4]=s=>a.data.workplace=s),label:"Lugar de Trabajo",placeholder:"Placeholder Text",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.email,"onUpdate:modelValue":e[5]||(e[5]=s=>a.data.email=s),label:"Correo *",placeholder:"email@gmail.com",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.address,"onUpdate:modelValue":e[6]||(e[6]=s=>a.data.address=s),label:"Dirección",placeholder:"Av/ Equipetrol ....",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.phone,"onUpdate:modelValue":e[7]||(e[7]=s=>a.data.phone=s),rules:["requiredValidator"in t?t.requiredValidator:d(c)],label:"Celular *",placeholder:"77049267",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),l(R,{thickness:"12"}),l(A,{class:"add-products-form"},{default:o(()=>[l(d(k),null,{default:o(()=>[l(r,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"},class:"mb-2"},{default:o(()=>[l(ae,{properties:a.data.properties,onAddProperty:P,onRemoveProduct:b},null,8,["properties"])]),_:1}),l(r,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(f,{modelValue:a.data.payment_method,"onUpdate:modelValue":e[8]||(e[8]=s=>a.data.payment_method=s),rules:["requiredValidator"in t?t.requiredValidator:d(c)],label:"Tipo de Pago *",placeholder:"Seleccione ",items:Object.values(d(B)),class:"custom-salesforce-input"},null,8,["modelValue","rules","items"])]),_:1}),l(r,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(u,{modelValue:a.data.amount,"onUpdate:modelValue":e[9]||(e[9]=s=>a.data.amount=s),value:a.data.amount,rules:["requiredValidator"in t?t.requiredValidator:d(c)],label:"Total *",placeholder:"1000.000,00",outlined:"",dense:""},null,8,["modelValue","value","rules"])]),_:1}),l(r,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(f,{modelValue:d(g),"onUpdate:modelValue":e[10]||(e[10]=s=>J(g)?g.value=s:null),items:V,label:"Anticipo: %",placeholder:"% Anticipo",class:"mb-2"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[p("div",ie,[e[15]||(e[15]=p("h4",null," Saldo por pagar: ",-1)),p("span",null,q(("formatCurrency"in t?t.formatCurrency:d(z))(a.data.amount-a.data.initial_fee)),1)])]),_:1})]),_:1})]),_:1}),l(A,{class:"add-products-form"},{default:o(()=>[l(d(k),null,{default:o(()=>[l(r,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(S,{title:" Anticipo ",amount:w(a.data.amount),differs:a.data.differs_initial_fee,type:t.INITIAL_PAYMENT},null,8,["amount","differs","type"])]),_:1}),l(r,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[l(n,{modelValue:a.data.observations,"onUpdate:modelValue":e[11]||(e[11]=s=>a.data.observations=s),"auto-grow":"",label:"Observaciones del Cliente",rows:"3",placeholder:"Descripción...","row-height":"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{qe as _};
