import{_ as N}from"./AppSelect-e68dd25c.js";import{_ as F}from"./AppTextField-6b4dd3fe.js";import{u as R}from"./useConversation-ac827514.js";import{u as U}from"./useSales-e14cd3c2.js";import{p as E}from"./paginationMeta-4ad053a4.js";import{l as $}from"./lodash-87e1f296.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{V as j}from"./VCard-b235f28f.js";import{V as z}from"./VCardText-2182b6b6.js";import{V as y}from"./VDivider-7b130088.js";import{V as H}from"./VDataTableServer-6963629f.js";import{V as K}from"./VPagination-00319be1.js";import{r as c,w as O,a as P,o as p,c as d,b as l,e as i,d as a,n as u,F as v,i as x,x as s,a4 as S,s as b,v as g,$ as Q}from"./index-58ddfcb5.js";import"./form-d7616de9.js";import"./VSelect-e9d4d82f.js";import"./VTextField-6e57fb09.js";/* empty css                   */import"./VCounter-961cae3c.js";import"./VImg-8966969b.js";import"./VField-12118d36.js";import"./easing-9f15041e.js";import"./VInput-177e801d.js";import"./forwardRefs-8348545e.js";import"./VList-7ae1745a.js";import"./ssrBoot-cffaea7c.js";import"./VAvatar-15d76695.js";import"./dialog-transition-ca47a9b3.js";import"./VMenu-b8ecf363.js";import"./VOverlay-08dd500e.js";import"./lazy-29843bc1.js";import"./scopeId-f9a2c9e4.js";import"./VCheckboxBtn-a279f651.js";import"./VSelectionControl-a9e226b9.js";import"./VChip-c467351c.js";import"./api-746fe373.js";import"./index-9c720871.js";import"./constants-f3b5ca65.js";import"./notifications-81bc0416.js";import"./VDataTable-0bb91b64.js";import"./VTable-143d3a29.js";import"./filter-9074054f.js";const q={class:"d-flex justify-space-between flex-wrap gap-y-4"},G={class:"d-flex flex-row gap-4 align-center flex-wrap"},J={class:"v-data-table__tr"},W=["colspan"],X={class:"mb-2"},Y={class:"mb-2"},Z={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ee={class:"text-sm text-disabled mb-0"},te={class:"d-flex items-center gap-x-2"},ae={__name:"listSales",setup(oe){R();const{AllSalesPaginated:k,loadingSale:le,sales:C,totalSales:_}=U(),f=c(""),n=c(10),m=c(1);c(),c();const V=[{title:"",key:"data-table-expand"},{title:"Nit/CI",key:"nit"},{title:"Razón Social",key:"social_reason"},{title:"Método de Pago",key:"payment_method"},{title:"Total de Contrato",key:"amount"},{title:"Acción",key:"action"}],w=r=>r==="CASH"?"Al Contado":r==="DIRECTCREDIT"?"Crédito Directo":r==="BANKCREDIT"?"Crédito Bancario":r,h=r=>{m.value=r.page,n.value=r.itemsPerPage},A=()=>{k({page:m.value,itemsPerPage:n.value,search:f.value})},B=$.debounce(A,300);return O([f,n,m],B,{immediate:!0}),(r,t)=>{const I=F,M=N,T=P("IconBtn"),D=P("RouterLink");return p(),d("div",null,[l(j,{title:"Lista de Ventas"},{default:i(()=>[l(z,null,{default:i(()=>[a("div",q,[l(I,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Buscar...",density:"compact"},null,8,["modelValue"]),a("div",G,[l(M,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"])])])]),_:1}),l(y),l(u(H),{"items-per-page":n.value,"onUpdate:itemsPerPage":t[3]||(t[3]=e=>n.value=e),page:m.value,"onUpdate:page":t[4]||(t[4]=e=>m.value=e),items:u(C),headers:V,"items-length":u(_),class:"text-no-wrap","expand-on-click":"","onUpdate:options":h},{"expanded-row":i(({item:e})=>[a("tr",J,[a("td",{colspan:V.length},[a("div",X,[t[5]||(t[5]=a("strong",null,"Propiedades:",-1)),a("ul",null,[(p(!0),d(v,null,x(e.properties,o=>(p(),d("li",{key:o.id},s(o.title)+" - "+s(o.code)+" ("+s(o.surface)+" m²) ",1))),128))])]),a("div",Y,[t[6]||(t[6]=a("strong",null,"Pagos Iniciales:",-1)),a("ul",null,[(p(!0),d(v,null,x(e.initial_payments,o=>(p(),d("li",{key:o.id}," Fecha: "+s(o.date)+", Monto: "+s(o.amount)+", Pagado: "+s(o.is_paid?"Sí":"No"),1))),128))])]),a("div",null,[t[7]||(t[7]=a("strong",null,"Pagos de Saldo:",-1)),a("ul",null,[(p(!0),d(v,null,x(e.balance_payments,o=>(p(),d("li",{key:o.id}," Fecha: "+s(o.date)+", Monto: "+s(o.amount)+", Pagado: "+s(o.is_paid?"Sí":"No"),1))),128))])])],8,W)])]),bottom:i(()=>[l(y),a("div",Z,[a("p",ee,s(u(E)({page:m.value,itemsPerPage:n.value},u(_))),1),l(K,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),length:Math.ceil(u(_)/n.value),"total-visible":r.$vuetify.display.xs?1:Math.min(Math.ceil(u(_)/n.value),5)},{prev:i(e=>[l(S,b({variant:"tonal",color:"default"},e,{icon:!1}),{default:i(()=>t[8]||(t[8]=[g(" Anterior ")])),_:2},1040)]),next:i(e=>[l(S,b({variant:"tonal",color:"default"},e,{icon:!1}),{default:i(()=>t[9]||(t[9]=[g(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.payment_method":i(({item:e})=>[g(s(w(e.payment_method)),1)]),"item.amount":i(({item:e})=>[g(s(e.amount)+" $ ",1)]),"item.action":i(({item:e})=>[a("div",te,[l(D,{to:{name:"sale-id",params:{id:e.id}}},{default:i(()=>[l(T,null,{default:i(()=>[l(Q,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})])}}},Qe=L(ae,[["__scopeId","data-v-11d8055a"]]);export{Qe as default};
