import{f as v}from"./currencyFormatter-92ad4b3c.js";import{_ as F}from"./AppSelect-fa39d2c4.js";import{_ as U}from"./AppTextField-a0f17f96.js";import{u as E}from"./useConversation-e407f827.js";import{u as R}from"./useSales-8229786c.js";import{p as L}from"./paginationMeta-4ad053a4.js";import{l as $}from"./lodash-cb6d2d7b.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{V as z}from"./VCard-22de6f72.js";import{V as H}from"./VCardText-e684c635.js";import{V as C}from"./VDivider-28d64a52.js";import{V as K}from"./VDataTableServer-df5e4675.js";import{V as O}from"./VPagination-22e451fa.js";import{r as c,w as Q,a as P,o as d,c as u,b as s,e as l,d as a,n as m,F as y,i as x,x as n,a4 as S,s as b,v as g,$ as q}from"./index-3cd3f830.js";import"./form-624ae54d.js";import"./VSelect-f80c5130.js";import"./VTextField-b9252724.js";/* empty css                   */import"./VCounter-0c01e569.js";import"./VImg-6b2a49fd.js";import"./VField-9afe8dbc.js";import"./easing-9f15041e.js";import"./VInput-f64ff79c.js";import"./forwardRefs-8348545e.js";import"./VList-7b985441.js";import"./ssrBoot-cd5ad573.js";import"./VAvatar-46583585.js";import"./dialog-transition-a432878a.js";import"./VMenu-a09ba739.js";import"./VOverlay-885bc793.js";import"./lazy-154653c9.js";import"./scopeId-ddb5abdc.js";import"./VCheckboxBtn-6f933f36.js";import"./VSelectionControl-07c79a34.js";import"./VChip-5553f561.js";import"./api-2a7c2368.js";import"./index-9c720871.js";import"./constants-f3b5ca65.js";import"./notifications-81bc0416.js";import"./VDataTable-8b152dc8.js";import"./VTable-804e0986.js";import"./filter-68086a89.js";const G={class:"d-flex justify-space-between flex-wrap gap-y-4"},J={class:"d-flex flex-row gap-4 align-center flex-wrap"},W={class:"v-data-table__tr"},X=["colspan"],Y={class:"mb-2 mx-10"},Z={class:"mb-2 mx-10"},ee={class:"mb-2 mx-10"},te={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ae={class:"text-sm text-disabled mb-0"},oe={class:"d-flex items-center gap-x-2"},ie={__name:"listSales",setup(se){E();const{AllSalesPaginated:k,loadingSale:le,sales:h,totalSales:f}=R(),_=c(""),r=c(10),p=c(1);c(),c();const V=[{title:"",key:"data-table-expand"},{title:"Nit/CI",key:"nit"},{title:"Cliente",key:"social_reason"},{title:"Método de Pago",key:"payment_method"},{title:"Total de Contrato",key:"amount"},{title:"Acción",key:"action"}],w=o=>o==="CASH"?"Al Contado":o==="DIRECTCREDIT"?"Crédito Directo":o==="BANKCREDIT"?"Crédito Bancario":o,A=o=>{p.value=o.page,r.value=o.itemsPerPage},B=()=>{k({page:p.value,itemsPerPage:r.value,search:_.value})},I=$.debounce(B,300);return Q([_,r,p],I,{immediate:!0}),(o,t)=>{const M=U,T=F,D=P("IconBtn"),N=P("RouterLink");return d(),u("div",null,[s(z,{title:"Lista de Ventas"},{default:l(()=>[s(H,null,{default:l(()=>[a("div",G,[s(M,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Buscar...",density:"compact"},null,8,["modelValue"]),a("div",J,[s(T,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"])])])]),_:1}),s(C),s(m(K),{"items-per-page":r.value,"onUpdate:itemsPerPage":t[3]||(t[3]=e=>r.value=e),page:p.value,"onUpdate:page":t[4]||(t[4]=e=>p.value=e),items:m(h),headers:V,"items-length":m(f),class:"text-no-wrap","expand-on-click":"","onUpdate:options":A},{"expanded-row":l(({item:e})=>[a("tr",W,[a("td",{colspan:V.length},[a("div",Y,[t[5]||(t[5]=a("strong",null,"Propiedades:",-1)),a("ul",null,[(d(!0),u(y,null,x(e.properties,i=>(d(),u("li",{key:i.id},n(i.title)+" - "+n(i.code)+" ("+n(i.surface)+" m²) ",1))),128))])]),a("div",Z,[t[6]||(t[6]=a("strong",null,"Pagos Iniciales:",-1)),a("ul",null,[(d(!0),u(y,null,x(e.initial_payments,i=>(d(),u("li",{key:i.id}," Fecha: "+n(i.date)+" | Monto: "+n(("formatCurrency"in o?o.formatCurrency:m(v))(i.amount))+" | Pagado: "+n(i.is_paid?"Sí":"No"),1))),128))])]),a("div",ee,[t[7]||(t[7]=a("strong",null,"Pagos de Saldo:",-1)),a("ul",null,[(d(!0),u(y,null,x(e.balance_payments,i=>(d(),u("li",{key:i.id}," Fecha: "+n(i.date)+" | Monto: "+n(("formatCurrency"in o?o.formatCurrency:m(v))(i.amount))+" | Pagado: "+n(i.is_paid?"Sí":"No"),1))),128))])])],8,X)])]),bottom:l(()=>[s(C),a("div",te,[a("p",ae,n(m(L)({page:p.value,itemsPerPage:r.value},m(f))),1),s(O,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=e=>p.value=e),length:Math.ceil(m(f)/r.value),"total-visible":o.$vuetify.display.xs?1:Math.min(Math.ceil(m(f)/r.value),5)},{prev:l(e=>[s(S,b({variant:"tonal",color:"default"},e,{icon:!1}),{default:l(()=>t[8]||(t[8]=[g(" Anterior ")])),_:2},1040)]),next:l(e=>[s(S,b({variant:"tonal",color:"default"},e,{icon:!1}),{default:l(()=>t[9]||(t[9]=[g(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.payment_method":l(({item:e})=>[g(n(w(e.payment_method)),1)]),"item.amount":l(({item:e})=>[g(n(("formatCurrency"in o?o.formatCurrency:m(v))(e.amount)),1)]),"item.action":l(({item:e})=>[a("div",oe,[s(N,{to:{name:"sale-id",params:{id:e.id}}},{default:l(()=>[s(D,null,{default:l(()=>[s(q,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})])}}},Je=j(ie,[["__scopeId","data-v-f29e71e7"]]);export{Je as default};
