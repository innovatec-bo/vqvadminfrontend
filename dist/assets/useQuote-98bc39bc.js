import{$ as n}from"./api-ea761cca.js";import{c as p,b as v,d as w,a as l}from"./notifications-b6da0b75.js";import{r,k as Q,a2 as i}from"./index-7ea6e93c.js";const b=async a=>await n("/quote/register",{method:"POST",body:a}),q=async(a,e)=>await n(`/quote/${a}/change_status`,{method:"PATCH",body:e}),S=async(a,e)=>await n(`/quote/${a}/change_status_customer`,{method:"PATCH",body:e}),z=async a=>await n("quote/list-paginated",{method:"GET",params:a}),C=async a=>await n(`/quote/${a}`,{method:"GET"});function P(){const a=r(!1),e=r(null),c=r([]),d=Q(),u=r(0),g=async o=>{try{const t=await C(o);e.value=t.data,console.log(e.value)}catch(t){console.error(t)}},h=async o=>{a.value=!0;try{const t=await b(o);console.log(t),e.value=t.data,p("¡Cotización registrada exitosamente!","La cotización ha sido generada y registrada en el sistema. ¡Buen trabajo!"),d.push(`/quote/${e.value.id}`)}catch(t){return t.response&&t.response.status==422?(v("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(w("Advertencia","Hubo un problema al registrar la Cotizacion. Contactese con Soporte."),{success:!1,message:"Error al Registrar"})}finally{a.value=!1}},y=async(o,t)=>{a.value=!0;try{const s=await q(o,t);e.value=s.data,console.log(s),l("¡El estado de la cotización ha cambiado! ","La cotización ha pasado a un nuevo estado")}catch(s){console.log(s)}finally{a.value=!1}},m=async(o,t)=>{a.value=!0;try{const s=await S(o,t);e.value=s.data,console.log(s),l("¡El estado de la cotización ha cambiado! ","La cotización ha pasado a un nuevo estado")}catch(s){console.log(s)}finally{a.value=!1}},f=async o=>{a.value=!0;try{const t=await z(o);console.log(t),c.value=t.data.data,u.value=t.data.total}catch(t){console.log(t)}finally{a.value=!1}};return{changeStatusQuotes:y,changeStatusQuotesCustomer:m,getQuotebyId:g,loadingQuote:a,quote:e,quotes:i(()=>c.value),totalQuotes:i(()=>u.value),generateQuote:h,allQuotePaginate:f}}export{P as u};
