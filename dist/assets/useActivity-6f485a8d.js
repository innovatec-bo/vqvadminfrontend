import{$ as c}from"./api-23eb8e44.js";import{r as l,k as p,a2 as r}from"./index-c17c0958.js";import{a as u,b as d}from"./notifications-9301c65a.js";const h=async t=>await c("/activity",{method:"POST",body:t}),m=async t=>await c(`/activity/${t}`,{method:"GET"}),f=async()=>await c("/typeActivities",{method:"GET"}),w=async(t,e)=>await c(`/activity/${t}/status`,{method:"PATCH",body:e}),F=async(t,e)=>await c(`/activity/${t}`,{method:"PATCH",body:e}),B=async(t,e)=>await c(`/activity/asesor/${t}/fecha`,{method:"GET",params:e}),T=async t=>await c(`/activity/asesor/${t}/fecha-future`,{method:"GET"}),$=async t=>await c(`/activity/asesor/${t}/fecha-past`,{method:"GET"}),P=async(t,e)=>await c(`/activity/asesor/${t}/fecha-rango`,{method:"GET",params:e}),S=async(t,e)=>await c(`/activity/${t}/change_status`,{method:"PATCH",body:e});function _(){const t=l(!1),e=l(null),n=l(null),o=l([]),v=l([]),y=l([]),g=l([]);return l(0),p(),{loadingActivity:t,error:e,registerActivity:async i=>{t.value=!0,e.value=null;try{const a=await h(i);n.value=a.data,u("Cita agendada correctamente",a.data.message)}catch(a){console.log(a),a.response&&a.response.status==422&&d("Advertencia","Faltan Datos por Rellenar"),e.value=a.message}finally{t.value=!1}},getActivityId:async i=>{t.value=!0,e.value=null;try{const a=await m(i);n.value=a.data}catch(a){e.value=a.message}finally{t.value=!1}},getallTypeActivities:async()=>{try{const i=await f();console.log(i.data),g.value=i.data}catch(i){console.log(i)}},changeStatusActivity:async(i,a)=>{t.value=!0,e.value=null;try{const s=await w(i,a);console.log(s),n.value=s.data,u("Actividad Completada","")}catch(s){console.log(s),e.value=s.message}finally{t.value=!1}},getallActivitiesByOportunity:async(i,a)=>{t.value=!0,e.value=null;try{const s=await getByOportunity(i,a);o.value=s.data,console.log(o)}catch(s){e.value=s.message}finally{t.value=!1}},getallActivitiesByAsesorFecha:async i=>{t.value=!0,e.value=null;const a=new Date().toISOString().split("T")[0];try{const A=await B(i,{fecha:a});o.value=A.data}catch(s){e.value=s.message}finally{t.value=!1}},getallActivitiesByAsesorRangoFecha:async(i,a)=>{t.value=!0,e.value=null;try{const s=await P(i,a);o.value=s.data.data}catch(s){e.value=s.message}finally{t.value=!1}},getallActivitiesByFechaPast:async i=>{t.value=!0,e.value=null;try{const a=await $(i);v.value=a.data}catch(a){e.value=a.message}finally{t.value=!1}},getallActivitiesByFechaFuture:async i=>{t.value=!0,e.value=null;try{const a=await T(i);y.value=a.data}catch(a){e.value=a.message}finally{t.value=!1}},updateActivity:async(i,a)=>{t.value=!0,e.value=null;try{const s=await F(i,a);console.log(s),n.value=s.data,u("Actividad Actualizada correctamente","Se actualizo una actividad")}catch(s){console.log(s),s.response&&s.response.status==422&&d("Advertencia","Faltan Datos por Rellenar"),e.value=s.message}finally{t.value=!1}},completedActivityAndRegister:async(i,a)=>{t.value=!0;try{const s=await S(i,a);u("Nueva actividad registrada","Se completó la actividad anterior y se agregó una nueva."),console.log(s)}catch(s){e.value=s.message}finally{t.value=!1}},activity:n,activities:r(()=>o.value),activitiesPast:r(()=>v.value),activitiesFuture:r(()=>y.value),typeActivities:r(()=>g.value)}}export{_ as u};
