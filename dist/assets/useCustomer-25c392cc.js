import{$ as m}from"./api-ebe57097.js";import{b as r,a as f}from"./notifications-81bc0416.js";import{r as t,k as h,a2 as u}from"./index-abca3b05.js";const v=async s=>await m("/customer/register",{method:"POST",body:s}),y=async s=>await m("customer/list-paginated",{method:"GET",params:s});function E(){const s=t(!1),a=t(null),n=t(null),l=t([]),c=t(0),p=h(),g=async o=>{if(!o.name||!o.phone){r("Falta Informacion","El nombre y el celular son obligatorios");return}s.value=!0,a.value=null;try{const e={name:o.name,phone:o.phone,email:o.email,ci:o.ci,cod_phone:o.countryCode.replace(/\+/g,""),description:o.description};console.log(e);const i=await v(e);console.log("Respuesta del servidor:",i),f("Cliente agregado exitosamente","El cliente ha sido registrado en el sistema correctamente."),n.value=i.data,p.push("/customers/listCustomers")}catch(e){console.log(e),e.response&&e.response.status==422&&r("Falta Informacion","El nombre y el celular son obligatorios"),e.response&&e.response.status==409&&r("Advertencia",e.response._data.message),a.value=e.message}finally{s.value=!1}},d=async o=>{try{const e=await y(o);console.log(e),l.value=e.data.data,c.value=e.data.total}catch(e){console.log(e)}};return{loading:s,error:a,customer:n,customers:u(()=>l.value),totalCustomers:u(()=>c.value),addCustomer:g,allCustomerPaginate:d}}export{E as u};
