import{$ as r}from"./api-2a7c2368.js";import{s as d,c,e as i,a as g}from"./notifications-81bc0416.js";import{r as t}from"./index-3cd3f830.js";const f=async e=>await r("/sale",{method:"POST",body:e}),S=async e=>await r("/sale/changeStage",{method:"POST",body:e}),v=async e=>await r(`/sale/${e}`,{method:"GET"}),y=async e=>await r("sales/list-paginated",{method:"GET",params:e});function P(){const e=t(!1),n=t([]),o=t(0),u=t(null),l=t(null);return{loadingSale:e,sales:n,error:u,sale:l,totalSales:o,generateSale:async s=>{e.value=!0;try{const a=await f(s);g("Venta generada con Exito","Se registro una nueva venta"),console.log("venta: ",a),l.value=a.data}catch(a){return a.response&&a.response.status==422?(c("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(i("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},generateSaleChangeStage:async s=>{e.value=!0;try{const a=await S(s);d("Creacion Exitosa","La venta ha sido creada correctamente."),console.log("venta: ",a),l.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422?(c("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(i("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},getSalebyId:async s=>{e.value=!0;try{const a=await v(s);console.log(a.data),l.value=a.data}catch(a){console.log(a)}finally{e.value=!1}},AllSalesPaginated:async s=>{e.value=!0;try{const a=await y(s);n.value=a.data.data,o.value=a.data.total}catch(a){console.log(a)}finally{e.value=!1}}}}export{P as u};
