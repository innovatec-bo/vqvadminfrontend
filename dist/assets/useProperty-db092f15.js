import{$ as s}from"./api-05ec387b.js";import{s as m,a as f}from"./notifications-1f494767.js";import{ac as A,r as a,k as v,a2 as P}from"./index-7410be13.js";import{D as y,L as u}from"./constants-ebd1a512.js";const h=async o=>await s("/property",{method:"POST",body:o}),I=async o=>await s(`/property/${o}`,{method:"GET"}),N=async o=>await s("/properties",{method:"GET",params:o}),R=async(o,p)=>await s(`/project/${p}/properties`,{method:"GET",params:o}),b=async o=>await s(`/property${o}`,{method:"DELETE"}),w=async o=>await s(`/properties/${o}`,{method:"GET"});function G(){A("userData").value;const o=a(!1),p=a(null),E=v(),i=a(null),l=a([]),c=a(0);return{loadingProperty:o,error:p,addProperty:async e=>{o.value=!0,p.value=null;try{console.log("este es el formulario:",e);const t={1:"DEPARTAMENT",2:"PARK"}[e.propertyDetails.propertyType.value]||"UNKNOWN";console.log(t);const d={code:e.propertyDetails.code,surface:e.propertyFeatures.surface,description:e.propertyDetails.description,delivery_date:e.propertyDetails.deliveryDate,base_price:e.propertyDetails.price,percentage_initial_fee:e.propertyDetails.percentageinitialfee,property_type:t,property_type_id:e.propertyDetails.propertyType.value,project_id:e.propertyDetails.projectType.value,benefits:e.propertyFeatures.benefitsDetails.map(n=>n.value),features:e.propertyFeatures.featureDetails.map(n=>n.value),type_department_id:t===y?e.propertyFeatures.typeDepartmentsDetails.value:null,number_bathrooms:t!==u?e.propertyFeatures.bathroomCount:"",number_bedrooms:t!==u?e.propertyFeatures.bedroomCount:"",number_floors:t!==u&&t!==y?e.propertyFeatures.floorNo:"",floors:t===y?e.propertyFeatures.floor:"",number_rooms:""};console.log(d);const T=await h(d);console.log("Respuesta del servidor:",T),m("CREACION EXITOSA","LA PROPIEDAD FUE REGISTRADA EXITOSAMENTE"),E.push("/realty/property/list")}catch(r){console.log(r),r.response&&r.response.status==422&&f("ERROR","FALTAN DATOS POR RELLENAR")}finally{o.value=!1}},getPropertyId:async e=>{try{const r=await I(e);i.value=r.data}catch(r){console.log(r)}},allProperty:async e=>{try{const r=await N(e);console.log("respuesta",r),l.value=r.data.data,c.value=r.data.total}catch(r){console.log(r)}},allPropertybyProject:async(e,r)=>{try{const t=await R(e,r);console.log("respuesta",t),l.value=t.data.data,c.value=t.data.total}catch(t){console.log(t)}},propertiesForType:async e=>{try{const r=await w(e);return console.log("propertyfortype ",r.data),r.data}catch(r){console.log(r)}},removeProperty:async e=>{try{const r=await b(e);console.log(r),m("ELIMINACION EXITOSA","LA PROPIEDAD FUE ELIMINADA EXITOSAMENTE")}catch(r){console.log(r)}},properties:P(()=>l.value),property:i,totalProperties:P(()=>c.value)}}export{G as u};
