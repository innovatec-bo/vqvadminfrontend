import{$ as c}from"./api-0b9a9d14.js";import{r,k as d,ac as E,a2 as p}from"./index-020f2097.js";import{s as y,a as P}from"./notifications-73ea9381.js";const j=async t=>await c("/project",{method:"POST",body:t}),v=async t=>await c("/projects",{method:"GET",params:t}),A=async(t,a)=>await c(`/project/${t}`,{method:"PUT",body:a}),R=async t=>await c(`/project/${t}`,{method:"GET"});function I(){const t=r(!1),a=r(null),l=d(),n=r(null),u=r([]),i=r(0);return E("userData").value,{loadingProject:t,error:a,addProyect:async o=>{t.value=!0,a.value=null;try{const e=await j(o);console.log("Respuesta del servidor:",e),y("CREACION EXITOSA","EL PROYECTO FUE REGISTRADO EXITOSAMENTE"),l.push("/realty/project/list-projects")}catch(e){console.log(e),e.response&&e.response.status==422&&P("ERROR","FALTAN DATOS POR RELLENAR")}finally{t.value=!1}},editProyect:async(o,e)=>{t.value=!0,a.value=null;try{console.log("entro aqui"),console.log(e,o);const s=await A(o,e);console.log("Respuesta del servidor:",s),y("ACTUALIZACION EXITOSA","EL PROYECTO FUE ACTUALIZADO EXITOSAMENTE"),l.push("/realty/project/list-projects")}catch(s){console.log(s),s.response&&s.response.status==422&&P("ERROR","FALTAN DATOS POR RELLENAR")}finally{t.value=!1}},getProjectId:async o=>{t.value=!0;try{const e=await R(o);n.value=e.data}catch(e){console.log(e)}finally{t.value=!1}},getallProjects:async o=>{try{const e={itemsPerPage:o.itemsPerPage.value,page:o.page.value,orderBy:o.orderBy.value,sortBy:o.sortBy.value,search:o.q.value},s=await v(e);console.log(s),u.value=s.data.data,i.value=s.data.total}catch(e){console.log(e)}},project:n,projects:p(()=>u.value),totalProjects:p(()=>i.value)}}export{I as u};
