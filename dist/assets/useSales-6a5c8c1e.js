import{$ as r}from"./api-dda96ee4.js";import{s as i,c as u,e as o,a as g}from"./notifications-81bc0416.js";import{r as l}from"./index-2eb1505d.js";const f=async e=>await r("/sale",{method:"POST",body:e}),S=async e=>await r("/sale/changeStage",{method:"POST",body:e}),v=async e=>await r(`/sale/${e}`,{method:"GET"}),y=async e=>await r(`/sale/${e}/discard`,{method:"PATCH"}),p=async e=>await r("sales/list-paginated",{method:"GET",params:e});function z(){const e=l(!1),n=l([]),c=l(0),d=l(null),t=l(null);return{loadingSale:e,sales:n,error:d,sale:t,totalSales:c,generateSale:async s=>{e.value=!0;try{const a=await f(s);g("Venta generada con Exito","Se registro una nueva venta"),console.log("venta: ",a),t.value=a.data}catch(a){return a.response&&a.response.status==422?(u("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(o("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},generateSaleChangeStage:async s=>{e.value=!0;try{const a=await S(s);i("Creacion Exitosa","La venta ha sido creada correctamente."),console.log("venta: ",a),t.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422?(u("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(o("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},getSalebyId:async s=>{e.value=!0;try{const a=await v(s);console.log(a.data),t.value=a.data}catch(a){console.log(a)}finally{e.value=!1}},AllSalesPaginated:async s=>{e.value=!0;try{const a=await p(s);n.value=a.data.data,console.log(n),c.value=a.data.total}catch(a){console.log(a)}finally{e.value=!1}},SaleChangeStageDiscard:async s=>{e.value=!0;try{const a=await y(s);i("Actualizacion Exitosa","La venta fue descartada"),console.log("venta: ",a),t.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422,o("Error","Hubo un problema al actualizar la venta."),{success:!1,message:"Error de actualización"}}finally{e.value=!1}}}}export{z as u};
