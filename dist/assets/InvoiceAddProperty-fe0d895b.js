import{V as v}from"./VTextField-c76833be.js";import{r as g,a2 as U,w,o as i,f as E,e as o,d as f,x as R,b as e,c as x,F as k,i as I,a4 as _,$ as B,v as V,H as F,n as T}from"./index-42509b9d.js";import{V as N}from"./VCard-c73cbc46.js";import{_ as K}from"./AppTextField-fa13298f.js";import{_ as $}from"./AppSelect-da834b00.js";import{u as h}from"./useProperty-7e09e4e4.js";import{V as S,a as b}from"./VRow-e1b7bb27.js";const X={CASH:{value:"CASH",title:"Contado"},DIRECTCREDIT:{value:"DIRECTCREDIT",title:"Credito Directo"},BANKCREDIT:{value:"BANKCREDIT",title:"Credito Bancario"}},u={DEPARTAMENT:{label:"Departamento",value:"DEPARTAMENT"},PARK:{label:"Parqueo",value:"PARK"}},q={class:"mt-4"},Y={__name:"InvoiceAddMoney",props:{title:{type:String,default:""},amount:{type:Number,default:0},differs:{type:Array,default:()=>[]}},setup(P){const d=P,s=g([...d.differs]),y=()=>{s.value.push({id:s.value.length+1,amount:"",date:""})},C=r=>{s.value.splice(r,1)},c=U(()=>s.value.reduce((r,t)=>{const l=parseFloat(t.amount)||0;return r+l},0));return w(c,r=>{r>d.amount&&alert("El total de los pagos no puede exceder el monto total.")}),(r,t)=>(i(),E(N,{flat:"",border:"",class:"d-flex flex-column pa-5"},{default:o(()=>[f("h3",null,R(d.title),1),e(v,{modelValue:d.amount,"onUpdate:modelValue":t[0]||(t[0]=l=>d.amount=l),label:"Monto Total a Diferir",type:"number",class:"mb-4"},null,8,["modelValue"]),(i(!0),x(k,null,I(s.value,(l,A)=>(i(),x("div",{key:l.id,class:"d-flex align-center mb-4"},[e(v,{modelValue:l.amount,"onUpdate:modelValue":a=>l.amount=a,label:"Monto",type:"number",class:"mr-4",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),e(v,{modelValue:l.date,"onUpdate:modelValue":a=>l.date=a,label:"Fecha de Pago",type:"date",class:"mr-3",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),e(_,{color:"error",onClick:a=>C(A)},{default:o(()=>[e(B,{icon:"tabler-square-x"})]),_:2},1032,["onClick"])]))),128)),f("div",q,[t[1]||(t[1]=f("strong",null,"Suma Actual de Pagos: ",-1)),V(" $"+R(c.value.toFixed(2)),1)]),e(_,{color:"secondary",class:"mt-4",onClick:y},{default:o(()=>t[2]||(t[2]=[V(" Agregar Pago ")])),_:1})]),_:1}))}},H={class:"pa-5 flex-grow-1"},j={class:"d-flex justify-end mt-4"},Z={__name:"InvoiceAddProperty",props:{properties:{type:Array,required:!0}},emits:["removeProduct","totalAmount","addProperty"],setup(P,{emit:d}){const s=P,y=d,{properties:C,propertiesForType:c}=h(),r=g([]),t=g([]),l=()=>{const a={property_id:null,price:null,property_type:u.PARK.value,property_type_name:u.PARK.label};y("addProperty",a)},A=()=>{const a={property_id:null,price:null,property_type:u.DEPARTAMENT.value,property_type_name:u.DEPARTAMENT.label};y("addProperty",a)};return F(async()=>{try{const a=await c(u.DEPARTAMENT.value);t.value=a;const p=await c(u.PARK.value);r.value=p}catch(a){console.error("Error al obtener las propiedades:",a)}}),(a,p)=>{const D=K;return i(),E(N,{flat:"",border:"",class:"d-flex flex-row"},{default:o(()=>[f("div",H,[(i(!0),x(k,null,I(s.properties,(n,M)=>(i(),E(S,{key:M},{default:o(()=>[e(b,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[e($,{modelValue:n.property_id,"onUpdate:modelValue":m=>n.property_id=m,label:n.property_type_name,placeholder:"Selecciona una propiedad",items:n.property_type===T(u).DEPARTAMENT.value?T(t):T(r),"item-title":"title","item-value":"id",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue","label","items"])]),_:2},1024),e(b,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[e(D,{modelValue:n.price,"onUpdate:modelValue":m=>n.price=m,label:"Precio:",placeholder:"Escribe el precio",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:o(()=>[e(D,{modelValue:n.priceIt,"onUpdate:modelValue":m=>n.priceIt=m,label:"3% (IT):",placeholder:"Porcentaje IT",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128)),f("div",j,[e(_,{color:"secondary",class:"me-2",onClick:A},{default:o(()=>p[0]||(p[0]=[V(" Agregar Departamento ")])),_:1}),e(_,{color:"secondary",onClick:l},{default:o(()=>p[1]||(p[1]=[V(" Agregar Parqueo ")])),_:1})])])]),_:1})}}};export{u as P,Y as _,Z as a,X as b};
