import{u as ye}from"./useActivity-04541226.js";import{r as M,e as Pe}from"./validators-dea6e3a5.js";import{_ as fe}from"./AppTextarea-01f7cf78.js";import{_ as he}from"./AppDateTimePicker-1a11bb38.js";import{_ as oe}from"./AppTextField-d804375b.js";import{_ as ae}from"./AppSelect-b5014cb4.js";import{u as Y,p as ve,S as _e,_ as Se}from"./PreSaleForm-466b521b.js";import{$ as ie}from"./api-66699b1a.js";import{s as ge}from"./notifications-73ea9381.js";import{r as V,o as n,c as v,d as l,F as E,i as R,b as e,e as t,n as a,v as k,x as f,z as B,f as O,$ as H,a4 as T,w as ee,a3 as be,a as se,a0 as q,am as W,an as pe,ac as Ae,H as ce}from"./index-816a661b.js";import{V as Ve}from"./VAvatar-d614caad.js";import{b as J,c as Q,V as ze,a as X}from"./VList-eb1d0a14.js";import{a as y,V as N}from"./VRow-fa209193.js";import{V as G}from"./VChip-03393460.js";import{V as L}from"./VCardText-1def5bdf.js";import{a as xe}from"./formatters-b3558c7d.js";import{_ as Oe}from"./AppAutocomplete-b838a52d.js";import{_ as ne}from"./DialogCloseBtn-231eaac8.js";import{u as Ue}from"./useProperty-725469c2.js";import{V as K,b as re,c as Fe}from"./VCard-1894ee78.js";import{V as ke}from"./VForm-0fd20cb7.js";import{V as de}from"./VDialog-3d955343.js";import{V as le}from"./VCheckbox-fa9c85a6.js";import{V as Z}from"./VTable-6f46add2.js";import{V as qe}from"./VTextField-32924262.js";import{_ as je}from"./InvoiceAddProperty-0330700f.js";import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as Te}from"./AppDrawerHeaderSection-acc256ff.js";import{P as Ee}from"./vue3-perfect-scrollbar.esm-345cadd2.js";import{V as Ie}from"./VNavigationDrawer-069ebf95.js";import{V as De,a as Ne}from"./VWindowItem-1790b37a.js";import{V as Re,a as me}from"./VRadioGroup-d5c01298.js";import{V as Le}from"./VDivider-2c100dde.js";import{V as Be,a as Me}from"./VTabs-1c43f880.js";import{V as He}from"./VOverlay-e7fb22b0.js";import"./helpers-61e4df1a.js";import"./form-744e17c0.js";/* empty css                   */import"./VCounter-bc510ab1.js";import"./VImg-15c4c61a.js";import"./VField-24962273.js";import"./easing-9f15041e.js";import"./VInput-9739e434.js";import"./forwardRefs-8348545e.js";import"./VSelect-12f51a2f.js";import"./dialog-transition-df4f28a9.js";import"./VMenu-1c28a0fd.js";import"./scopeId-8c74fab9.js";import"./VCheckboxBtn-e1ddd655.js";import"./VSelectionControl-247fb0a3.js";import"./VNodeRenderer-891b213d.js";import"./index-9c720871.js";import"./constants-d5c22183.js";import"./ssrBoot-68fabe7d.js";import"./filter-5b2c8222.js";import"./VSpacer-ecf3a403.js";import"./lazy-c3e9cd6e.js";import"./VSlideGroup-711542f5.js";const Ge=async(S,C)=>await ie(`/opportunity/${S}/stage/${C}`,{method:"GET"}),Ke=async(S,C,o)=>await ie(`/opportunity/${S}/procedure/${C}`,{method:"PATCH",body:o});function te(){const S=V(null),C=V(!1),o=V(!1),_=V([]);return{process:S,loadingProcess:C,errorProcess:o,processes:_,allProcessesOpportunityForStage:async(r,u)=>{try{const w=await Ge(r,u);_.value=w.data}catch(w){console.log(w)}},checkProcessForOpportunity:async(r,u,w)=>{try{console.log(w);const m=await Ke(r,u,w);ge("Marcado Exitoso","Se Actualizo el estado del proceso")}catch(m){console.log(m)}}}}const Je={class:"mb-5"},Qe={key:0},We=["src"],Ye={class:"my-5"},Xe={key:0,class:"d-flex flex-wrap gap-2 my-5"},Ze={key:1},et={__name:"EditDeliveryOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId","complet"],setup(S,{emit:C}){const o=S,_=C,{changeStatusByOpportunity:P}=Y(),{checkProcessForOpportunity:b}=te(),r=async()=>{try{await P(o.opportunity.id,7,{}),_("complet")}catch(w){console.error("Error updating customer:",w)}},u=(w,m)=>{console.log(`Procedimiento ${w} marcado como: ${m?"realizado":"no realizado"}`),b(o.opportunity.id,w,{is_check:!m}),_("updateStageId",o.opportunity.id)};return(w,m)=>(n(),v(E,null,[l("div",Je,[m[0]||(m[0]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),o.opportunity.sales.properties&&o.opportunity.sales.properties.length>0?(n(),v("div",Qe,[(n(!0),v(E,null,R(o.opportunity.sales.properties,p=>(n(),v("div",{key:p.id,class:"d-flex align-center justify-between"},[e(Ve,{size:"50",rounded:""},{default:t(()=>[l("img",{src:a(ve),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,We)]),_:1}),e(y,{cols:"12",md:"7"},{default:t(()=>[e(J,{class:"font-weight-medium"},{default:t(()=>[k(f(p.project_title)+" | "+f(p.title),1)]),_:2},1024),e(Q,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",null,"$ "+f(p.pivot_price),1)]),_:2},1024)]),_:2},1024)]))),128))])):B("",!0)]),l("div",Ye,[m[2]||(m[2]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(n(),v("div",Xe,[(n(!0),v(E,null,R(o.opportunity.procedure,p=>(n(),v("div",{key:p.id},[e(G,{color:p.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:x=>u(p.id,p.pivot.is_check)},{default:t(()=>[p.pivot.is_check?(n(),O(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),k(" "+f(p.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(n(),v("div",Ze,m[1]||(m[1]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(L,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(T,{color:"primary",size:"small",onClick:r},{default:t(()=>m[3]||(m[3]=[k(" Finalizar Oportunidad ")])),_:1})]),_:1})],64))}},Ce={__name:"EditCustomerDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(S,{emit:C}){const o=S,_=C;Object.values(_e).map(s=>({title:s.label,value:s.value}));const{allProperty:P,properties:b}=Ue(),{getOpportunitybyId:r,opportunity:u,changeOpportunity:w,loadingOpportunity:m}=Y(),p=()=>{_("update:isDialogVisible",!1)},x=async()=>{console.log("antes del save:",u);const s={id:u.value.id,description:u.value.description,property_id:u.value.property_id,customer:{id:u.value.customer.id,name:u.value.customer.name,email:u.value.customer.email,ci:u.value.customer.ci,cod_phone:u.value.cod_phone,phone:u.value.customer.phone}};await w(u.value.id,s),_("update:isDialogVisible",!1)},i=async()=>{var s;(s=o.opportunityKanban)!=null&&s.id&&await r(o.opportunityKanban.id)},U=async()=>{await P({page:1,itemsPerPage:100})};return ee(()=>o.isDialogVisible,async s=>{s===!0&&(i(),await U())}),(s,d)=>{const g=ne,F=oe,$=ae,D=Oe,j=fe;return n(),O(de,{"max-width":"800","model-value":o.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":p},{default:t(()=>[e(g,{onClick:p}),e(K,{title:"Información del Cliente y Oportunidad",class:"pa-sm-8 pa-5"},{default:t(()=>[e(L,null,{default:t(()=>[e(ke,{onSubmit:be(x,["prevent"])},{default:t(()=>[e(N,{dense:""},{default:t(()=>[e(y,{cols:"12",md:"6"},{default:t(()=>[e(F,{modelValue:a(u).customer.name,"onUpdate:modelValue":d[0]||(d[0]=c=>a(u).customer.name=c),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:t(()=>[e(F,{modelValue:a(u).customer.email,"onUpdate:modelValue":d[1]||(d[1]=c=>a(u).customer.email=c),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[e($,{modelValue:a(u).customer.cod_phone,"onUpdate:modelValue":d[2]||(d[2]=c=>a(u).customer.cod_phone=c),label:"Código",items:["+591","+1","+52"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),e(y,{cols:"8"},{default:t(()=>[e(F,{modelValue:a(u).customer.phone,"onUpdate:modelValue":d[3]||(d[3]=c=>a(u).customer.phone=c),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",md:"6"},{default:t(()=>[e(F,{modelValue:a(u).customer.ci,"onUpdate:modelValue":d[4]||(d[4]=c=>a(u).customer.ci=c),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(u).property_id,"onUpdate:modelValue":d[5]||(d[5]=c=>a(u).property_id=c),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:a(b).map(c=>({title:c.title,value:c.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(j,{modelValue:a(u).description,"onUpdate:modelValue":d[6]||(d[6]=c=>a(u).description=c),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"3","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",class:"text-center"},{default:t(()=>[e(T,{type:"submit",color:"primary",class:"me-3",disabled:a(m),loading:a(m)},{default:t(()=>d[7]||(d[7]=[k(" Guardar ")])),_:1},8,["disabled","loading"]),e(T,{color:"secondary",variant:"tonal",onClick:p},{default:t(()=>d[8]||(d[8]=[k(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},tt={class:"d-flex align-bottom flex-sm-row flex-column"},lt={class:"user-profile-info"},ot={class:"d-flex align-center justify-center justify-sm-space-between flex-wrap gap-4"},at={class:"d-flex align-center gap-x-3"},it={class:"text-4xl font-weight-medium"},st={class:"d-flex flex-column py-2",style:{"font-size":"14px"}},nt={class:"text-sm text-disabled"},rt={key:0,class:"d-flex flex-wrap gap-2 my-5"},dt={key:1},ut={key:0,class:"d-flex flex-wrap gap-2 my-5"},pt={key:1},ct={__name:"EditPreSaleOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId"],setup(S,{emit:C}){const o=S,_=C,{checkProcessForOpportunity:P}=te(),b=V(!1),r=V(!1),u=()=>{b.value=!0},w=()=>{r.value=!0},m=async x=>{_("updateStageId",x)},p=async(x,i)=>{console.log(`Procedimiento ${x} marcado como: ${i?"realizado":"no realizado"}`),await P(o.opportunity.id,x,{is_check:!i}),_("updateStageId",o.opportunity.id)};return(x,i)=>{const U=se("RouterLink");return n(),v(E,null,[l("div",tt,[l("div",lt,[i[3]||(i[3]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Perfil ",-1)),l("div",ot,[l("div",at,[l("span",it,f(("avatarText"in x?x.avatarText:a(xe))(o.opportunity.customer.name)),1),l("div",st,[e(U,{to:{name:"apps-ecommerce-customer-details-id",params:{id:1}},class:"font-weight-base"},{default:t(()=>[k(f(o.opportunity.customer.name),1)]),_:1}),l("span",nt,f(o.opportunity.customer.phone),1)]),e(T,{color:"secondary",variant:"tonal",size:"small",onClick:u},{default:t(()=>i[2]||(i[2]=[k(" Editar Perfil ")])),_:1})])])])]),l("div",null,[i[5]||(i[5]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(n(),v("div",rt,[(n(!0),v(E,null,R(o.opportunity.procedure,s=>(n(),v("div",{key:s.id},[e(G,{color:s.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:d=>p(s.id,s.pivot.is_check)},{default:t(()=>[s.pivot.is_check?(n(),O(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),k(" "+f(s.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(n(),v("div",dt,i[4]||(i[4]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),l("div",null,[i[8]||(i[8]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Cotizaciones ",-1)),o.opportunity.quotes&&o.opportunity.quotes.length>0?(n(),v("div",ut,[e(Z,{density:"compact",class:"text-no-wrap",style:{"font-size":"12px"}},{default:t(()=>[i[6]||(i[6]=l("thead",null,[l("tr",null,[l("th",null," Nombre "),l("th",null," Fecha "),l("th",null," Monto "),l("th")])],-1)),l("tbody",null,[(n(!0),v(E,null,R(o.opportunity.quotes,s=>(n(),v("tr",{key:s.id},[l("td",null,f(s.social_reason),1),l("td",null,f(new Date(s.created_at).toLocaleDateString()),1),l("td",null,f(s.amount),1),l("td",null,[e(N,null,{default:t(()=>[e(le,{modelValue:s.is_paid,"onUpdate:modelValue":d=>s.is_paid=d,"true-value":1,"false-value":0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]))),128))])]),_:1})])):(n(),v("div",pt,i[7]||(i[7]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(L,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(T,{color:"primary",class:"mx-1",variant:"tonal",size:"small",onClick:x.generateQuote},{default:t(()=>i[9]||(i[9]=[k(" Agregar Cotizacion ")])),_:1},8,["onClick"]),e(T,{color:"primary",class:"mx-auto",size:"small",onClick:w},{default:t(()=>i[10]||(i[10]=[k(" Generar Venta ")])),_:1})]),_:1}),e(Ce,{"is-dialog-visible":a(b),"onUpdate:isDialogVisible":i[0]||(i[0]=s=>q(b)?b.value=s:null),"opportunity-kanban":o.opportunity},null,8,["is-dialog-visible","opportunity-kanban"]),e(Se,{"is-dialog-visible":a(r),"onUpdate:isDialogVisible":i[1]||(i[1]=s=>q(r)?r.value=s:null),opportunity:o.opportunity,onRegisterSale:m},null,8,["is-dialog-visible","opportunity"])],64)}}},mt={class:"d-flex align-bottom flex-sm-row flex-column"},yt={class:"user-profile-info"},ft={class:"d-flex align-center justify-center justify-sm-space-between flex-wrap gap-4"},vt={class:"d-flex align-center gap-x-3"},_t={class:"text-4xl font-weight-medium"},gt={class:"d-flex flex-column py-2",style:{"font-size":"14px"}},bt={class:"text-sm text-disabled"},Vt={key:0,class:"d-flex flex-wrap gap-2 my-5"},xt={key:1},kt={key:0,class:"d-flex flex-wrap gap-2 my-5"},wt={key:1},Dt={__name:"EditProspectOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId"],setup(S,{emit:C}){const o=S,_=C,{checkProcessForOpportunity:P}=te(),{changeStatusByOpportunity:b,loadingOpportunity:r}=Y(),u=V(!1),w=()=>{u.value=!0},m=async x=>{b(x,_e.PRESALE.value,{}),_("updateStageId",x)},p=(x,i)=>{console.log(`Procedimiento ${x} marcado como: ${i?"realizado":"no realizado"}`),P(o.opportunity.id,x,{is_check:!i}),_("updateStageId",o.opportunity.id)};return(x,i)=>{const U=se("RouterLink");return n(),v(E,null,[l("div",mt,[l("div",yt,[i[3]||(i[3]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Perfil ",-1)),l("div",ft,[l("div",vt,[l("span",_t,f(("avatarText"in x?x.avatarText:a(xe))(o.opportunity.customer.name)),1),l("div",gt,[e(U,{to:{name:"apps-ecommerce-customer-details-id",params:{id:1}},class:"font-weight-base"},{default:t(()=>[k(f(o.opportunity.customer.name),1)]),_:1}),l("span",bt,f(o.opportunity.customer.phone),1)]),l("div",null,[e(T,{color:"secondary",variant:"tonal",size:"small",onClick:w},{default:t(()=>i[2]||(i[2]=[k(" Editar Perfil ")])),_:1})])])])])]),l("div",null,[i[5]||(i[5]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(n(),v("div",Vt,[(n(!0),v(E,null,R(o.opportunity.procedure,s=>(n(),v("div",{key:s.id},[e(G,{color:s.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:d=>p(s.id,s.pivot.is_check)},{default:t(()=>[s.pivot.is_check?(n(),O(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),k(" "+f(s.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(n(),v("div",xt,i[4]||(i[4]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),l("div",null,[i[8]||(i[8]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Cotizaciones ",-1)),o.opportunity.quotes&&o.opportunity.quotes.length>0?(n(),v("div",kt,[e(Z,{density:"compact",class:"text-no-wrap",style:{"font-size":"12px"}},{default:t(()=>[i[6]||(i[6]=l("thead",null,[l("tr",null,[l("th",null," Nombre "),l("th",null," Fecha "),l("th",null," Monto "),l("th")])],-1)),l("tbody",null,[(n(!0),v(E,null,R(o.opportunity.quotes,s=>(n(),v("tr",{key:s.id},[l("td",null,f(s.social_reason),1),l("td",null,f(new Date(s.created_at).toLocaleDateString()),1),l("td",null,f(s.amount),1),l("td",null,[e(H,{icon:"tabler-eye"})])]))),128))])]),_:1})])):(n(),v("div",wt,i[7]||(i[7]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(L,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(T,{color:"primary",class:"mx-1",variant:"tonal",size:"small",onClick:x.generateQuote},{default:t(()=>i[9]||(i[9]=[k(" Generar Cotización ")])),_:1},8,["onClick"]),e(T,{color:"primary",class:"mx-auto",size:"small",disabled:a(r),loading:a(r),onClick:i[0]||(i[0]=s=>m(o.opportunity.id))},{default:t(()=>i[10]||(i[10]=[k(" Siguiente Etapa ")])),_:1},8,["disabled","loading"])]),_:1}),e(Ce,{"is-dialog-visible":a(u),"onUpdate:isDialogVisible":i[1]||(i[1]=s=>q(u)?u.value=s:null),"opportunity-kanban":o.opportunity},null,8,["is-dialog-visible","opportunity-kanban"])],64)}}},Ct=async S=>await ie(`/sale/paymentPlans/${S}/confirm`,{method:"PATCH"});function $t(){const S=V(!1),C=V([]),o=V(null),_=V(null);return{loadingPaymentPlans:S,paymentPlan:_,error:o,paymentPlans:C,confirmPaymentPlans:async b=>{try{const r=await Ct(b);ge("Actualizacion Exitosa","Se confirmo el pago")}catch(r){console.log(r)}}}}const Pt={__name:"DeliveryForm",props:{isDialogVisible:{type:Boolean,required:!0},opportunity:{type:Object,required:!0}},emits:["update:isDialogVisible","updateDeliveryDate"],setup(S,{emit:C}){const o=S,_=C,{changeStatusByOpportunity:P}=Y(),b=m=>{_("update:isDialogVisible",m)},r=V(structuredClone(W(o.opportunity)));ee(o,()=>{r.value=structuredClone(W(o.opportunity))});const u=async()=>{_("update:isDialogVisible",!1);try{await P(o.opportunity.id,5,{delivery_date:r.value.sales.delivery_date}),_("updateDeliveryDate",r.value.id)}catch(m){console.error("Error updating customer:",m)}},w=()=>{_("update:isDialogVisible",!1)};return(m,p)=>{const x=ne;return n(),O(de,{"model-value":o.isDialogVisible,"max-width":"800","onUpdate:modelValue":b},{default:t(()=>[e(x,{onClick:p[0]||(p[0]=i=>m.$emit("update:isDialogVisible",!1))}),e(K,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(re,{class:"text-h3 text-center"},{default:t(()=>p[2]||(p[2]=[k(" Confirmar Fecha ")])),_:1}),e(L,null,{default:t(()=>[e(L,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:t(()=>[e(qe,{modelValue:a(r).sales.delivery_date,"onUpdate:modelValue":p[1]||(p[1]=i=>a(r).sales.delivery_date=i),label:"Fecha de Entrega",type:"date",rules:["requiredValidator"in m?m.requiredValidator:a(M)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(T,{onClick:u},{default:t(()=>p[3]||(p[3]=[k(" Pasar a Entrega ")])),_:1}),e(T,{color:"secondary",variant:"tonal",onClick:w},{default:t(()=>p[4]||(p[4]=[k(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ht={__name:"PaymentPlanEdit",props:{isDialogVisible:{type:Boolean,required:!0},opportunity:{type:Object,required:!0}},emits:["update:isDialogVisible","updateDeliveryDate"],setup(S,{emit:C}){const o=S,_=C,{changeStatusByOpportunity:P}=Y(),b=m=>{_("update:isDialogVisible",m)},r=V(structuredClone(W(o.opportunity)));ee(o,()=>{r.value=structuredClone(W(o.opportunity))});const u=async()=>{_("update:isDialogVisible",!1);try{await P(o.opportunity.id,5,{delivery_date:r.value.sales.delivery_date}),_("updateDeliveryDate",r.value.id)}catch(m){console.error("Error updating customer:",m)}},w=()=>{_("update:isDialogVisible",!1)};return(m,p)=>{const x=ne;return n(),O(de,{"model-value":o.isDialogVisible,"max-width":"800","onUpdate:modelValue":b},{default:t(()=>[e(x,{onClick:p[0]||(p[0]=i=>m.$emit("update:isDialogVisible",!1))}),e(K,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(re,{class:"text-h3 text-center"},{default:t(()=>p[1]||(p[1]=[k(" Confirmar Fecha ")])),_:1}),e(L,null,{default:t(()=>[e(L,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:t(()=>[l("span",null," Monto a Pagar : "+f(a(r).amount),1),e(je,{title:"Saldo",amount:a(r).amount},null,8,["amount"])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(T,{onClick:u},{default:t(()=>p[2]||(p[2]=[k(" Pasar a Entrega ")])),_:1}),e(T,{color:"secondary",variant:"tonal",onClick:w},{default:t(()=>p[3]||(p[3]=[k(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},St={class:"text-h6"},At={class:"text-h6"},zt={class:"text-h6"},Ot={class:"my-5"},Ut={key:0},Ft=["src"],qt=["onClick"],jt=["onClick"],Tt={class:"my-5"},Et={key:0,class:"d-flex flex-wrap gap-2 my-5"},It={key:1},Nt={__name:"EditSaleOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId"],setup(S,{emit:C}){const o=S,_=C,{checkProcessForOpportunity:P}=te(),{confirmPaymentPlans:b}=$t(),r=V(!1),u=V(!1),w=V(""),m=()=>{r.value=!0},p=s=>{console.log("entro aqui"),u.value=!0,w.value={...s}},x=async(s,d)=>{console.log(`Procedimiento ${s} marcado como: ${d?"realizado":"no realizado"}`),await P(o.opportunity.id,s,{is_check:!d}),_("updateStageId",o.opportunity.id)},i=s=>{console.log(s),b(s)},U=async s=>{_("updateStageId",s)};return(s,d)=>(n(),v(E,null,[l("div",null,[e(K,null,{default:t(()=>[e(L,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"4",class:"border rounded-sm mx-1"},{default:t(()=>[e(J,{class:"font-weight-medium"},{default:t(()=>d[2]||(d[2]=[k(" Saldo ")])),_:1}),e(Q,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",St,"$ "+f(o.opportunity.sales.amount-o.opportunity.sales.initial_fee),1)]),_:1})]),_:1}),e(y,{cols:"3",class:"border rounded-sm mx-1"},{default:t(()=>[e(J,{class:"font-weight-medium"},{default:t(()=>d[3]||(d[3]=[k(" Anticipo ")])),_:1}),e(Q,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",At,"$ "+f(o.opportunity.sales.initial_fee),1)]),_:1})]),_:1}),e(y,{cols:"4",class:"border rounded-sm mx-1"},{default:t(()=>[e(J,{class:"font-weight-medium"},{default:t(()=>d[4]||(d[4]=[k(" Precio Final ")])),_:1}),e(Q,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",zt,"$"+f(o.opportunity.sales.amount),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),l("div",Ot,[d[5]||(d[5]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),o.opportunity.sales.properties&&o.opportunity.sales.properties.length>0?(n(),v("div",Ut,[(n(!0),v(E,null,R(o.opportunity.sales.properties,g=>(n(),v("div",{key:g.id,class:"d-flex align-center justify-between"},[e(Ve,{size:"50",rounded:""},{default:t(()=>[l("img",{src:a(ve),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,Ft)]),_:1}),e(y,{cols:"12",md:"7"},{default:t(()=>[e(J,{class:"font-weight-medium"},{default:t(()=>[k(f(g.project_title)+" | "+f(g.title),1)]),_:2},1024),e(Q,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",null,"$ "+f(g.pivot_price),1)]),_:2},1024)]),_:2},1024)]))),128))])):B("",!0)]),l("div",null,[d[7]||(d[7]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Cuota Inicial ",-1)),e(Z,{density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:t(()=>[d[6]||(d[6]=l("thead",null,[l("tr",null,[l("th",null," Tipo "),l("th",null," Fecha "),l("th",null," Monto "),l("th",null," Action ")])],-1)),l("tbody",null,[(n(!0),v(E,null,R(o.opportunity.sales.initial_payments,g=>(n(),v("tr",{key:g.id},[l("td",null,f(g.type),1),l("td",null,f(new Date(g.date).toLocaleDateString()),1),l("td",null,f(g.amount),1),l("td",null,[e(N,null,{default:t(()=>[e(le,{modelValue:g.is_paid,"onUpdate:modelValue":F=>g.is_paid=F,"true-value":1,"false-value":0,onChange:F=>i(g.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l("div",{"fill-dot":"",onClick:F=>p(g)},[e(H,{size:"25",icon:"tabler-edit"})],8,qt)]),_:2},1024)])]))),128))])]),_:1})]),l("div",null,[d[9]||(d[9]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Saldo ",-1)),e(Z,{density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:t(()=>[d[8]||(d[8]=l("thead",null,[l("tr",null,[l("th",null," Tipo "),l("th",null," Fecha "),l("th",null," Monto "),l("th",null," Action ")])],-1)),l("tbody",null,[(n(!0),v(E,null,R(o.opportunity.sales.balance_payments,g=>(n(),v("tr",{key:g.id},[l("td",null,f(g.type),1),l("td",null,f(new Date(g.date).toLocaleDateString()),1),l("td",null,f(g.amount),1),l("td",null,[e(N,null,{default:t(()=>[e(le,{modelValue:g.is_paid,"onUpdate:modelValue":F=>g.is_paid=F,"true-value":1,"false-value":0,onChange:F=>i(g.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l("div",{"fill-dot":"",onClick:F=>p(g)},[e(H,{size:"25",icon:"tabler-edit"})],8,jt)]),_:2},1024)])]))),128))])]),_:1})]),l("div",Tt,[d[11]||(d[11]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(n(),v("div",Et,[(n(!0),v(E,null,R(o.opportunity.procedure,g=>(n(),v("div",{key:g.id},[e(G,{color:g.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:F=>x(g.id,g.pivot.is_check)},{default:t(()=>[g.pivot.is_check?(n(),O(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),k(" "+f(g.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(n(),v("div",It,d[10]||(d[10]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(L,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(T,{color:"primary",class:"mx-auto",onClick:m},{default:t(()=>d[12]||(d[12]=[k(" Siguiente Etapa ")])),_:1})]),_:1}),e(Pt,{"is-dialog-visible":a(r),"onUpdate:isDialogVisible":d[0]||(d[0]=g=>q(r)?r.value=g:null),opportunity:o.opportunity,onUpdateDeliveryDate:U},null,8,["is-dialog-visible","opportunity"]),e(ht,{"is-dialog-visible":a(u),"onUpdate:isDialogVisible":d[1]||(d[1]=g=>q(u)?u.value=g:null),opportunity:a(w),onUpdateDeliveryDate:U},null,8,["is-dialog-visible","opportunity"])],64))}};const Rt={__name:"SellerReport",setup(S){const C=V([{title:"Actividad 1",date:"2024-10-09",status:"Pendiente"},{title:"Actividad 2",date:"2024-10-10",status:"Completada"},{title:"Actividad 3",date:"2024-10-11",status:"En Progreso"}]),o=()=>{console.log("Reporte actualizado")};return(_,P)=>(n(),O(K,{class:"report-card"},{default:t(()=>[e(re,{class:"text-h5"},{default:t(()=>P[0]||(P[0]=[k(" Reporte de Actividades ")])),_:1}),e(L,null,{default:t(()=>[P[1]||(P[1]=l("p",null,"No hay actividades seleccionadas. Aquí tienes un resumen de las actividades:",-1)),e(ze,null,{default:t(()=>[(n(!0),v(E,null,R(C.value,(b,r)=>(n(),O(X,{key:r},{default:t(()=>[e(J,null,{default:t(()=>[k(f(b.title),1)]),_:2},1024),e(Q,null,{default:t(()=>[k(" Fecha: "+f(b.date)+" | Estado: "+f(b.status),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(Fe,null,{default:t(()=>[e(T,{color:"primary",onClick:o},{default:t(()=>P[2]||(P[2]=[k(" Actualizar Reporte ")])),_:1})]),_:1})]),_:1}))}},Lt=we(Rt,[["__scopeId","data-v-8ff6d2fe"]]),Bt={__name:"CustomerHistory",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(S,{emit:C}){const o=S,_=C,P=V(!1),b=V(),r=V(""),u=V(""),w=V(""),m=V(""),p=V(),x=V(""),i=V(),U=V(),s=V(),d=()=>{_("update:isDrawerOpen",!1),pe(()=>{var $,D;($=b.value)==null||$.reset(),(D=b.value)==null||D.resetValidation()})},g=()=>{var $;($=b.value)==null||$.validate().then(({valid:D})=>{D&&(_("userData",{id:0,fullName:r.value,company:m.value,role:i.value,country:p.value,contact:x.value,email:w.value,currentPlan:U.value,status:s.value,avatar:"",billing:"Auto Debit"}),_("update:isDrawerOpen",!1),pe(()=>{var j,c;(j=b.value)==null||j.reset(),(c=b.value)==null||c.resetValidation()}))})},F=$=>{_("update:isDrawerOpen",$)};return($,D)=>{const j=Te,c=oe,h=ae;return n(),O(Ie,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":o.isDrawerOpen,"onUpdate:modelValue":F},{default:t(()=>[e(j,{title:"Historial del Cliente",onCancel:d}),e(a(Ee),{options:{wheelPropagation:!1}},{default:t(()=>[e(K,{flat:""},{default:t(()=>[e(L,null,{default:t(()=>[e(ke,{ref_key:"refForm",ref:b,modelValue:a(P),"onUpdate:modelValue":D[9]||(D[9]=z=>q(P)?P.value=z:null),onSubmit:be(g,["prevent"])},{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(c,{modelValue:a(r),"onUpdate:modelValue":D[0]||(D[0]=z=>q(r)?r.value=z:null),rules:["requiredValidator"in $?$.requiredValidator:a(M)],label:"Full Name",placeholder:"John Doe"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(c,{modelValue:a(u),"onUpdate:modelValue":D[1]||(D[1]=z=>q(u)?u.value=z:null),rules:["requiredValidator"in $?$.requiredValidator:a(M)],label:"Username",placeholder:"Johndoe"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(c,{modelValue:a(w),"onUpdate:modelValue":D[2]||(D[2]=z=>q(w)?w.value=z:null),rules:["requiredValidator"in $?$.requiredValidator:a(M),"emailValidator"in $?$.emailValidator:a(Pe)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(c,{modelValue:a(m),"onUpdate:modelValue":D[3]||(D[3]=z=>q(m)?m.value=z:null),rules:["requiredValidator"in $?$.requiredValidator:a(M)],label:"Company",placeholder:"PixInvent"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(h,{modelValue:a(p),"onUpdate:modelValue":D[4]||(D[4]=z=>q(p)?p.value=z:null),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in $?$.requiredValidator:a(M)],items:["USA","UK","India","Australia"]},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(c,{modelValue:a(x),"onUpdate:modelValue":D[5]||(D[5]=z=>q(x)?x.value=z:null),type:"number",rules:["requiredValidator"in $?$.requiredValidator:a(M)],label:"Contact",placeholder:"+1-541-754-3010"},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(h,{modelValue:a(i),"onUpdate:modelValue":D[6]||(D[6]=z=>q(i)?i.value=z:null),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in $?$.requiredValidator:a(M)],items:["Admin","Author","Editor","Maintainer","Subscriber"]},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(h,{modelValue:a(U),"onUpdate:modelValue":D[7]||(D[7]=z=>q(U)?U.value=z:null),label:"Select Plan",placeholder:"Select Plan",rules:["requiredValidator"in $?$.requiredValidator:a(M)],items:["Basic","Company","Enterprise","Team"]},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(h,{modelValue:a(s),"onUpdate:modelValue":D[8]||(D[8]=z=>q(s)?s.value=z:null),label:"Select Status",placeholder:"Select Status",rules:["requiredValidator"in $?$.requiredValidator:a(M)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Pending",value:"pending"}]},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(T,{type:"submit",class:"me-3"},{default:t(()=>D[10]||(D[10]=[k(" Submit ")])),_:1}),e(T,{type:"reset",variant:"outlined",color:"secondary",onClick:d},{default:t(()=>D[11]||(D[11]=[k(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Mt={class:"mb-2"},Ht={__name:"AddActivity",props:{activitiesData:{type:Object,required:!0,default:()=>({title:"",description:"",schedule_at:""})},isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","refreshActivities"],setup(S,{emit:C}){const o=S,_=C,P=V(!1);V(!1);const b=V("radio-1"),r=V({title:"",description:"",type_activity_id:null,opportunity_id:null,assigned_to:null,scheduled_at:null,status:"COMPLETED"}),{completedActivityAndRegister:u,getallTypeActivities:w,typeActivities:m,loadingActivity:p}=ye(),{getOpportunitybyId:x,opportunity:i}=Y(),U=V(structuredClone(W(o.activitiesData))),s=j=>{console.log("esta consultando de nuevo despues de cambiar etapa "),x(j)};ee(o,()=>{U.value=structuredClone(W(o.activitiesData)),x(U.value.opportunity_id),d()});const d=async()=>{await w()},g=()=>{x(U.value.opportunity_id)},F=()=>{_("update:isDrawerOpen",!1),r.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null,status:"COMPLETED"}},$=async()=>{let j="";b.value==="radio-1"?j="COMPLETED":b.value==="radio-2"&&(j="CANCELLED"),u(U.value.id,{title:r.value.title,description:r.value.description,type_activity_id:r.value.type_activity_id,scheduled_at:r.value.scheduled_at,assigned_to:i.value.user_id,property_id:i.value.property_id,opportunity_id:i.value.id,status:j}),_("refreshActivities"),F()},D=async()=>{_("refreshActivities"),_("update:isDrawerOpen",!1)};return(j,c)=>{const h=oe,z=he,I=fe;return n(),O(N,{class:"d-flex justify-space-between"},{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[S.isDrawerOpen?(n(),O(K,{key:0},{default:t(()=>[e(L,null,{default:t(()=>[e(De,{class:"mx-2 my-2"},{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12",sm:"5"},{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>c[6]||(c[6]=[l("span",{style:{"font-size":"18px","font-weight":"500"}}," Actividad ",-1)])),_:1}),e(y,{cols:"12"},{default:t(()=>[l("div",Mt,[l("span",null,f(o.activitiesData.type_activity)+"   •   "+f(o.activitiesData.title),1)]),e(Re,{modelValue:a(b),"onUpdate:modelValue":c[0]||(c[0]=A=>q(b)?b.value=A:null),style:{"font-size":"10px"}},{default:t(()=>[e(me,{label:"Completar Actividad",value:"radio-1",density:"compact"}),e(me,{label:"Cancelar Actividad",value:"radio-2",density:"compact"})]),_:1},8,["modelValue"]),e(Le,{class:"mt-2"})]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(h,{modelValue:a(r).title,"onUpdate:modelValue":c[1]||(c[1]=A=>a(r).title=A),label:"Titulo de la actividad",placeholder:"..."},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(ae,{modelValue:a(r).type_activity_id,"onUpdate:modelValue":c[2]||(c[2]=A=>a(r).type_activity_id=A),label:"Tipo de Actividad",placeholder:"Selecciona el Tipo de Actividad",items:a(m).map(A=>({title:A.name,value:A.id}))},null,8,["modelValue","items"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(z,{modelValue:a(r).scheduled_at,"onUpdate:modelValue":c[3]||(c[3]=A=>a(r).scheduled_at=A),label:"Seleccione la Fecha y Hora",placeholder:"Select date and time",config:{enableTime:!0,dateFormat:"Y-m-d H:i"},rules:["requiredValidator"in j?j.requiredValidator:a(M)]},null,8,["modelValue","rules"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(I,{modelValue:a(r).description,"onUpdate:modelValue":c[4]||(c[4]=A=>a(r).description=A),label:"Descripcion",rows:"3",rules:["requiredValidator"in j?j.requiredValidator:a(M)]},null,8,["modelValue","rules"])]),_:1}),e(y,null,{default:t(()=>[e(T,{size:"small",color:"prymary",variant:"tonal",class:"mx-auto",loading:a(p),disabled:a(p),onClick:$},{default:t(()=>c[7]||(c[7]=[k(" Crear Actividad ")])),_:1},8,["loading","disabled"]),e(T,{size:"small",color:"error",variant:"tonal",class:"my-2 mx-2"},{default:t(()=>c[8]||(c[8]=[k(" Dar de Baja ")])),_:1})]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",sm:"7",style:{"align-items":"center"}},{default:t(()=>[e(N,{class:"mb-2"},{default:t(()=>[e(y,{cols:"6"},{default:t(()=>c[9]||(c[9]=[l("span",{style:{"font-size":"18px","font-weight":"500"}}," Etapa ",-1)])),_:1}),e(y,{cols:"12",md:"6",class:"d-flex justify-end align-center"},{default:t(()=>[e(G,{label:"",color:"primary"},{default:t(()=>[k(f(a(i).stage.title),1)]),_:1})]),_:1})]),_:1}),a(i).stage_id===2?(n(),O(Dt,{key:0,opportunity:a(i),onUpdateStageId:s},null,8,["opportunity"])):B("",!0),a(i).stage_id===3?(n(),O(ct,{key:1,opportunity:a(i),onUpdateStageId:s},null,8,["opportunity"])):B("",!0),a(i).stage_id===4?(n(),O(Nt,{key:2,opportunity:a(i),onRefreshActivities:g,onUpdateStageId:s},null,8,["opportunity"])):B("",!0),a(i).stage_id===5?(n(),O(et,{key:3,opportunity:a(i),onRefreshActivities:g,onUpdateStageId:s,onComplet:D},null,8,["opportunity"])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(n(),O(Lt,{key:1}))]),_:1}),e(y,{cols:"12",md:"6"},{default:t(()=>[e(Bt,{"is-drawer-open":a(P),"onUpdate:isDrawerOpen":c[5]||(c[5]=A=>q(P)?P.value=A:null)},null,8,["is-drawer-open"])]),_:1})]),_:1})}}};const Gt={style:{"font-size":"14px"}},Kt={key:0,class:"no-activities-message d-flex flex-column justify-center align-center",style:{"min-block-size":"200px","text-align":"center"}},Jt=["onClick"],Qt={class:"mx-2"},Wt={class:"d-flex justify-content-between",style:{"font-size":"0.9em"}},Yt={__name:"list",setup(S){const C=V("New");V(["Todos","PORA"]),V("Todos");const{getallActivitiesByAsesorFecha:o,getallActivitiesByFechaPast:_,getallActivitiesByFechaFuture:P,activities:b,activitiesPast:r,activitiesFuture:u}=ye(),w=V(""),m=Ae("userData").value,p=V(!0),x=async()=>{await o(m.id),console.log("Actividades de hoy:",b)},i=async()=>{await _(m.id),console.log("Actividades pasadas:",r)},U=async()=>{await P(m.id),console.log("Actividades futuras:",u)};ce(async()=>{await x(),await i(),await U(),p.value=!1});const s=V(!1),d=c=>{s.value=!0,w.value={...c}},g=()=>{ce()},F=[{tabName:"Hoy",icon:"tabler-edit",actividades:b,badge:b.value.length},{tabName:"Anteriores",icon:"tabler-calendar",actividades:r,badge:r.value.length},{tabName:"Futuros",icon:"tabler-calendar",actividades:u,badge:u.value.length}],$=[{type:"Visita",icon:"tabler-current-location"},{type:"Llamada",icon:"tabler-phone"},{type:"Cotizacion",icon:"tabler-cash"},{type:"Otro",icon:"tabler-table"}],D=c=>{const h=$.find(z=>z.type===c);return h?h.icon:"tabler-default"},j=c=>{const h=new Date(c),z=h.getDate(),A=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][h.getMonth()],ue=h.getHours().toString().padStart(2,"0"),$e=h.getMinutes().toString().padStart(2,"0");return`${z} de ${A}, ${ue}:${$e}`};return(c,h)=>{const z=se("VCircularProgress");return n(),O(N,{class:"match-height",style:{display:"flex","block-size":"100vh"}},{default:t(()=>[e(y,{cols:"12",md:"4",style:{display:"flex","flex-direction":"column"}},{default:t(()=>[e(K,{title:"Lista de Actividades",class:"flex-grow-1"},{default:t(()=>[e(Be,{modelValue:a(C),"onUpdate:modelValue":h[0]||(h[0]=I=>q(C)?C.value=I:null),grow:""},{default:t(()=>[(n(),v(E,null,R(F,I=>e(Me,{key:I.tabName},{default:t(()=>[l("span",Gt,f(I.tabName),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),h[7]||(h[7]=l("br",null,null,-1)),e(L,{style:{"flex-grow":"1","overflow-y":"auto"}},{default:t(()=>[a(p)?(n(),O(He,{key:0,absolute:"",opacity:"0.7"},{default:t(()=>[e(z,{indeterminate:"",size:"70"})]),_:1})):B("",!0),e(De,{modelValue:a(C),"onUpdate:modelValue":h[1]||(h[1]=I=>q(C)?C.value=I:null),class:"disable-tab-transition",style:{"max-block-size":"500px","overflow-y":"auto"}},{default:t(()=>[(n(),v(E,null,R(F,I=>e(Ne,{key:I.tabName,value:I.tabName},{default:t(()=>[I.actividades.value.length===0?(n(),v("div",Kt,[e(H,{size:"64",color:"grey",icon:"tabler-calendar-off",class:"mb-4",style:{animation:"bounce 1s infinite"}}),h[4]||(h[4]=l("div",{style:{color:"#888","font-size":"1.2em"}}," ¡No tienes actividades pendientes! ",-1)),h[5]||(h[5]=l("div",{style:{color:"#aaa","font-size":"0.9em","margin-block-start":"8px"}}," ¡Relájate y disfruta tu día! ",-1))])):(n(!0),v(E,{key:1},R(I.actividades.value,A=>(n(),v("div",{key:A.id,"fill-dot":"",class:"border mb-2 rounded-sm py-2",onClick:ue=>d(A)},[e(X,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12",md:"2",style:{"padding-inline-end":"0"}},{default:t(()=>[e(G,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"36px","inline-size":"36px"}},{default:t(()=>[e(H,{size:"25",icon:"tabler-home"})]),_:1})]),_:1}),A.project_name?(n(),O(y,{key:0,cols:"12",md:"5",class:"d-flex flex-column align-start",style:{"padding-inline-start":"0"}},{default:t(()=>[e(Q,{class:"text-left"},{default:t(()=>[l("strong",null,f(A.property_title),1)]),_:2},1024),e(J,{class:"font-weight-medium text-left"},{default:t(()=>[l("span",null,"$ "+f(A.price),1)]),_:2},1024)]),_:2},1024)):B("",!0),A.project_name?B("",!0):(n(),O(y,{key:1,cols:"12",md:"5"})),e(y,{cols:"12",md:"5",class:"d-flex justify-end align-center"},{default:t(()=>[e(G,{label:"",color:"primary",class:"ml-auto",style:{"font-size":"10px"}},{default:t(()=>[k(f(A.stage),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(X,{class:""},{default:t(()=>[e(G,{label:"",color:"secondary",class:"w-100 h-48"},{default:t(()=>[e(H,{size:"20",icon:D(A.type_activity)},null,8,["icon"]),l("div",Qt,f(A.type_activity)+"   •   "+f(A.name_opportunity),1)]),_:2},1024)]),_:2},1024),e(X,null,{default:t(()=>[l("div",Wt,[h[6]||(h[6]=l("div",{style:{"flex-grow":"1"}}," Ver ",-1)),l("div",null,f(j(A.scheduled_at)),1)])]),_:2},1024)],8,Jt))),128))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",md:"8",style:{display:"flex","flex-direction":"column"}},{default:t(()=>[e(Ht,{"is-drawer-open":a(s),"onUpdate:isDrawerOpen":h[2]||(h[2]=I=>q(s)?s.value=I:null),"activities-data":a(w),class:"flex-grow-1",onRefreshActivities:g,onLoaded:h[3]||(h[3]=I=>p.value=!1)},null,8,["is-drawer-open","activities-data"])]),_:1})]),_:1})}}},lo=we(Yt,[["__scopeId","data-v-a0646bf6"]]);export{lo as default};
