import{$ as c}from"./api-23eb8e44.js";import{r as s,k as v,ac as P,a2 as p}from"./index-c17c0958.js";import{a as d,b as y}from"./notifications-9301c65a.js";const j=async t=>await c("/project",{method:"POST",body:t}),g=async t=>await c("/projects",{method:"GET",params:t}),m=async(t,r)=>await c(`/project/${t}`,{method:"PUT",body:r}),f=async t=>await c(`/project/${t}`,{method:"GET"});function T(){const t=s(!1),r=s(null),l=v(),n=s(null),u=s([]),i=s(0);return P("userData").value,{loadingProject:t,error:r,addProyect:async o=>{t.value=!0,r.value=null;try{const e=await j(o);console.log("Respuesta del servidor:",e),d("El proyecto se agrego correctamente","Se acaba de registrar un nuevo proyecto al sistema de inventario."),l.push("/realty/project/list-projects")}catch(e){console.log(e),e.response&&e.response.status==422&&y("Advertencia","Faltan Datos por Rellenar")}finally{t.value=!1}},editProyect:async(o,e)=>{t.value=!0,r.value=null;try{console.log("entro aqui"),console.log(e,o);const a=await m(o,e);console.log("Respuesta del servidor:",a),d("Se Actualizo correctamente el Proyecto","El proyecto fue actualizado correctamente en el sistema."),l.push("/realty/project/list-projects")}catch(a){console.log(a),a.response&&a.response.status==422&&y("Advertencia","Faltan Datos por Rellenar")}finally{t.value=!1}},getProjectId:async o=>{t.value=!0;try{const e=await f(o);n.value=e.data}catch(e){console.log(e)}finally{t.value=!1}},getallProjects:async o=>{try{const e={itemsPerPage:o.itemsPerPage.value,page:o.page.value,orderBy:o.orderBy.value,sortBy:o.sortBy.value,search:o.q.value},a=await g(e);console.log(a),u.value=a.data.data,i.value=a.data.total}catch(e){console.log(e)}},project:n,projects:p(()=>u.value),totalProjects:p(()=>i.value)}}export{T as u};
