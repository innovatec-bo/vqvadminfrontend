import{$ as l}from"./api-82cd37b3.js";import{c,s as i,e as n,a as d}from"./notifications-e0287a8c.js";import{r}from"./index-00f4ab0f.js";const f=async e=>await l("/sale",{method:"POST",body:e}),S=async e=>await l("/sale/changeStage",{method:"POST",body:e}),v=async e=>await l(`/sale/${e}`,{method:"GET"}),y=async e=>await l(`/sale/${e}/status/signature`,{method:"PATCH"}),p=async e=>await l(`/sale/${e}/discard`,{method:"PATCH"}),h=async e=>await l("sales/list-paginated",{method:"GET",params:e});function H(){const e=r(!1),o=r([]),u=r(0),g=r(null),t=r(null);return{loadingSale:e,sales:o,error:g,sale:t,totalSales:u,generateSale:async s=>{e.value=!0;try{const a=await f(s);d("Venta generada con Exito","Se registro una nueva venta"),console.log("venta: ",a),t.value=a.data}catch(a){return a.response&&a.response.status==422?(i("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(n("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},generateSaleChangeStage:async s=>{e.value=!0;try{const a=await S(s);c("Creacion Exitosa","La venta ha sido creada correctamente."),console.log("venta: ",a),t.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422?(i("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(n("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},getSalebyId:async s=>{e.value=!0;try{const a=await v(s);console.log(a.data),t.value=a.data}catch(a){console.log(a)}finally{e.value=!1}},AllSalesPaginated:async s=>{e.value=!0;try{const a=await h(s);o.value=a.data.data,console.log(o),u.value=a.data.total}catch(a){console.log(a)}finally{e.value=!1}},SaleChangeStageDiscard:async s=>{e.value=!0;try{const a=await p(s);c("Actualizacion Exitosa","La venta fue descartada"),console.log("venta: ",a),t.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422,n("Error","Hubo un problema al actualizar la venta."),{success:!1,message:"Error de actualización"}}finally{e.value=!1}},SaleChangeSignature:async s=>{e.value=!0;try{const a=await y(s);c("Actualizacion Exitosa","La venta fue actualizada"),console.log("venta: ",a),t.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422,n("Error","Hubo un problema al actualizar la venta."),{success:!1,message:"Error de actualización"}}finally{e.value=!1}}}}export{H as u};
