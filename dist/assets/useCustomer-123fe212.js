import{$ as p,a as f}from"./api-c3bdf505.js";import{b as r,a as v}from"./notifications-81bc0416.js";import{r as t,k as y,a2 as m}from"./index-71bee35f.js";const C=async s=>await p("/customer/register",{method:"POST",body:s}),w=async s=>await p("customer/list-paginated",{method:"GET",params:s}),b=async()=>await f("/openai/thread/create-thread",{method:"POST"});function S(){const s=t(!1),a=t(null),n=t(null),c=t([]),l=t(0),d=y(),g=async o=>{if(!o.name||!o.phone){r("Falta Informacion","El nombre y el celular son obligatorios");return}s.value=!0,a.value=null;try{const e=await b(),i={name:o.name,phone:o.phone,thread:e.id,email:o.email,ci:o.ci,cod_phone:o.countryCode.replace(/\+/g,""),description:o.description};console.log(i);const u=await C(i);console.log("Respuesta del servidor:",u),v("Cliente agregado exitosamente","El cliente ha sido registrado en el sistema correctamente."),n.value=u.data,d.push("/customers/listCustomers")}catch(e){console.log(e),e.response&&e.response.status==422&&r("Falta Informacion","El nombre y el celular son obligatorios"),e.response&&e.response.status==409&&r("Advertencia",e.response._data.message),a.value=e.message}finally{s.value=!1}},h=async o=>{try{const e=await w(o);console.log(e),c.value=e.data.data,l.value=e.data.total}catch(e){console.log(e)}};return{loading:s,error:a,customer:n,customers:m(()=>c.value),totalCustomers:m(()=>l.value),addCustomer:g,allCustomerPaginate:h}}export{S as u};
