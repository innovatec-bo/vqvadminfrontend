import{u as me}from"./useActivity-a6b9b4be.js";import{r as M,e as Ce}from"./validators-dea6e3a5.js";import{_ as ye}from"./AppTextarea-d9c3d38b.js";import{_ as $e}from"./AppDateTimePicker-e4ad3c79.js";import{_ as ae}from"./AppTextField-fdd2cc07.js";import{_ as ie}from"./AppSelect-77e7c63f.js";import{u as X,p as fe,S as ve,_ as he}from"./PreSaleForm-37ffaf07.js";import{$ as Y}from"./api-776d8cc1.js";import{s as se}from"./notifications-73ea9381.js";import{r as b,o as u,c as g,d as l,F as I,i as L,b as e,e as t,n as a,v as C,x as _,z as B,f as F,$ as H,a4 as E,w as ee,a3 as ge,a as ne,a0 as q,am as W,an as pe,ac as Se,H as Ae}from"./index-dee4a701.js";import{V as _e}from"./VAvatar-b8da8b69.js";import{b as K,c as J,a as le}from"./VList-22810ece.js";import{a as f,V as N}from"./VRow-9af63ff8.js";import{V as Q}from"./VChip-437b27f4.js";import{V as R}from"./VCardText-eabb87b2.js";import{a as be}from"./formatters-b3558c7d.js";import{_ as ze}from"./AppAutocomplete-5fd84d95.js";import{_ as re}from"./DialogCloseBtn-856f3d26.js";import{u as Oe}from"./useProperty-603d23e4.js";import{V as G,b as Ve}from"./VCard-32284142.js";import{V as xe}from"./VForm-70184de1.js";import{V as ue}from"./VDialog-b68fa2c4.js";import{V as oe}from"./VCheckbox-f9afee6a.js";import{V as Z}from"./VTable-e657a751.js";import{V as Ue}from"./VTextField-02b357c3.js";import{_ as qe}from"./InvoiceAddProperty-6aaa57ef.js";import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as Fe}from"./AppDrawerHeaderSection-fb05fdfa.js";import{P as je}from"./vue3-perfect-scrollbar.esm-9e9ec4b6.js";import{V as Ee}from"./VNavigationDrawer-c0bdf9a7.js";import{V as ke,a as Te}from"./VWindowItem-6f7d1584.js";import{V as Ie,a as ce}from"./VRadioGroup-7866a913.js";import{V as Ne}from"./VDivider-ac90928d.js";import{V as Re,a as Le}from"./VTabs-4ce895eb.js";import{V as Be}from"./VOverlay-8f5f905e.js";import"./helpers-61e4df1a.js";import"./form-e260a8d7.js";/* empty css                   */import"./VCounter-dbcc6c04.js";import"./VImg-febcf7af.js";import"./VField-c99decc2.js";import"./easing-9f15041e.js";import"./VInput-2b4c20b5.js";import"./forwardRefs-8348545e.js";import"./VSelect-1a382cc0.js";import"./dialog-transition-984e100c.js";import"./VMenu-998f8b2a.js";import"./scopeId-09887f23.js";import"./VCheckboxBtn-0ea0d066.js";import"./VSelectionControl-09acc118.js";import"./VNodeRenderer-3ec36e2c.js";import"./index-9c720871.js";import"./constants-d5c22183.js";import"./ssrBoot-33892ced.js";import"./filter-c3f23aac.js";import"./VSpacer-27ef1684.js";import"./lazy-d07c8f8e.js";import"./VSlideGroup-4c10bb80.js";const Me=async(V,x)=>await Y(`/opportunity/${V}/stage/${x}`,{method:"GET"}),He=async(V,x,o)=>await Y(`/opportunity/${V}/procedure/${x}`,{method:"PATCH",body:o});function te(){const V=b(null),x=b(!1),o=b(!1),v=b([]);return{process:V,loadingProcess:x,errorProcess:o,processes:v,allProcessesOpportunityForStage:async(s,n)=>{try{const k=await Me(s,n);v.value=k.data}catch(k){console.log(k)}},checkProcessForOpportunity:async(s,n,k)=>{try{console.log(k);const y=await He(s,n,k);se("Marcado Exitoso","Se Actualizo el estado del proceso")}catch(y){console.log(y)}}}}const Qe={class:"mb-5"},Ge={key:0},Ke=["src"],Je={class:"my-5"},We={key:0,class:"d-flex flex-wrap gap-2 my-5"},Xe={key:1},Ye={__name:"EditDeliveryOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId","complet"],setup(V,{emit:x}){const o=V,v=x,{changeStatusByOpportunity:O}=X(),{checkProcessForOpportunity:w}=te(),s=async()=>{try{await O(o.opportunity.id,7,{}),v("complet")}catch(k){console.error("Error updating customer:",k)}},n=async(k,y)=>{console.log(`Procedimiento ${k} marcado como: ${y?"realizado":"no realizado"}`),await w(o.opportunity.id,k,{is_check:!y}),v("updateStageId",o.opportunity.id)};return(k,y)=>(u(),g(I,null,[l("div",Qe,[y[0]||(y[0]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),o.opportunity.sales.properties&&o.opportunity.sales.properties.length>0?(u(),g("div",Ge,[(u(!0),g(I,null,L(o.opportunity.sales.properties,c=>(u(),g("div",{key:c.id,class:"d-flex align-center justify-between"},[e(_e,{size:"50",rounded:""},{default:t(()=>[l("img",{src:a(fe),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,Ke)]),_:1}),e(f,{cols:"12",md:"7"},{default:t(()=>[e(K,{class:"font-weight-medium"},{default:t(()=>[C(_(c.project_title)+" | "+_(c.title),1)]),_:2},1024),e(J,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",null,"$ "+_(c.pivot_price),1)]),_:2},1024)]),_:2},1024)]))),128))])):B("",!0)]),l("div",Je,[y[2]||(y[2]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(u(),g("div",We,[(u(!0),g(I,null,L(o.opportunity.procedure,c=>(u(),g("div",{key:c.id},[e(Q,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:$=>n(c.id,c.pivot.is_check)},{default:t(()=>[c.pivot.is_check?(u(),F(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),C(" "+_(c.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(u(),g("div",Xe,y[1]||(y[1]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(R,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(E,{color:"primary",size:"small",onClick:s},{default:t(()=>y[3]||(y[3]=[C(" Finalizar Oportunidad ")])),_:1})]),_:1})],64))}},Ze=async V=>await Y("/quote/register",{method:"POST",body:V}),et=async(V,x)=>await Y(`/quote/${V}/change_status`,{method:"PATCH",body:x});function tt(){const V=b(!1),x=b(null),o=b([]);return{changeStatusQuotes:async(w,s)=>{V.value=!0;try{const n=await et(w,s);x.value=n.data,console.log(n),se("ACTUALIZACION EXITOSA","Cotizacion Actualizada")}catch(n){console.log(n)}finally{V.value=!1}},loadingQuote:V,quote:x,quotes:o,generateQuote:async w=>{V.value=!0;try{const s=await Ze(w);console.log(s),x.value=s.data}catch(s){console.error(s)}finally{V.value=!1}}}}const De={__name:"EditCustomerDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(V,{emit:x}){const o=V,v=x;Object.values(ve).map(i=>({title:i.label,value:i.value}));const{allProperty:O,properties:w}=Oe(),{getOpportunitybyId:s,opportunity:n,changeOpportunity:k,loadingOpportunity:y}=X(),c=()=>{v("update:isDialogVisible",!1)},$=async()=>{console.log("antes del save:",n);const i={id:n.value.id,description:n.value.description,property_id:n.value.property_id,customer:{id:n.value.customer.id,name:n.value.customer.name,email:n.value.customer.email,ci:n.value.customer.ci,cod_phone:n.value.cod_phone,phone:n.value.customer.phone}};await k(n.value.id,i),v("update:isDialogVisible",!1)},p=async()=>{var i;(i=o.opportunityKanban)!=null&&i.id&&await s(o.opportunityKanban.id)},h=async()=>{await O({page:1,itemsPerPage:100})};return ee(()=>o.isDialogVisible,async i=>{i===!0&&(p(),await h())}),(i,d)=>{const r=re,U=ae,P=ie,D=ze,j=ye;return u(),F(ue,{"max-width":"800","model-value":o.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":c},{default:t(()=>[e(r,{onClick:c}),e(G,{title:"Información del Cliente y Oportunidad",class:"pa-sm-8 pa-5"},{default:t(()=>[e(R,null,{default:t(()=>[e(xe,{onSubmit:ge($,["prevent"])},{default:t(()=>[e(N,{dense:""},{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(U,{modelValue:a(n).customer.name,"onUpdate:modelValue":d[0]||(d[0]=m=>a(n).customer.name=m),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(U,{modelValue:a(n).customer.email,"onUpdate:modelValue":d[1]||(d[1]=m=>a(n).customer.email=m),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"4"},{default:t(()=>[e(P,{modelValue:a(n).customer.cod_phone,"onUpdate:modelValue":d[2]||(d[2]=m=>a(n).customer.cod_phone=m),label:"Código",items:["+591","+1","+52"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),e(f,{cols:"8"},{default:t(()=>[e(U,{modelValue:a(n).customer.phone,"onUpdate:modelValue":d[3]||(d[3]=m=>a(n).customer.phone=m),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(U,{modelValue:a(n).customer.ci,"onUpdate:modelValue":d[4]||(d[4]=m=>a(n).customer.ci=m),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(D,{modelValue:a(n).property_id,"onUpdate:modelValue":d[5]||(d[5]=m=>a(n).property_id=m),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:a(w).map(m=>({title:m.title,value:m.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(j,{modelValue:a(n).description,"onUpdate:modelValue":d[6]||(d[6]=m=>a(n).description=m),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"3","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",class:"text-center"},{default:t(()=>[e(E,{type:"submit",color:"primary",class:"me-3",disabled:a(y),loading:a(y)},{default:t(()=>d[7]||(d[7]=[C(" Guardar ")])),_:1},8,["disabled","loading"]),e(E,{color:"secondary",variant:"tonal",onClick:c},{default:t(()=>d[8]||(d[8]=[C(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},lt={class:"d-flex align-bottom flex-sm-row flex-column"},ot={class:"user-profile-info"},at={class:"d-flex align-center justify-center justify-sm-space-between flex-wrap gap-4"},it={class:"d-flex align-center gap-x-3"},st={class:"text-4xl font-weight-medium"},nt={class:"d-flex flex-column py-2",style:{"font-size":"14px"}},rt={class:"text-sm text-disabled"},ut={key:0,class:"d-flex flex-wrap gap-2 my-5"},dt={key:1},pt={key:0,class:"d-flex flex-wrap gap-2 my-5"},ct={key:1},mt={__name:"EditPreSaleOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId"],setup(V,{emit:x}){const o=V,v=x,{checkProcessForOpportunity:O}=te(),{changeStatusQuotes:w}=tt(),s=b(!1),n=b(!1),k=()=>{s.value=!0},y=()=>{n.value=!0},c=async h=>{v("updateStageId",h)},$=async(h,i)=>{console.log(`Procedimiento ${h} marcado como: ${i?"realizado":"no realizado"}`),await O(o.opportunity.id,h,{is_check:!i}),v("updateStageId",o.opportunity.id)},p=async(h,i)=>{const d=i==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${h} marcado como: ${i}`),await w(h,{status:d}),v("updateStageId",o.opportunity.id)};return(h,i)=>{const d=ne("RouterLink");return u(),g(I,null,[l("div",lt,[l("div",ot,[i[3]||(i[3]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Perfil ",-1)),l("div",at,[l("div",it,[l("span",st,_(("avatarText"in h?h.avatarText:a(be))(o.opportunity.customer.name)),1),l("div",nt,[e(d,{to:{name:"apps-ecommerce-customer-details-id",params:{id:1}},class:"font-weight-base"},{default:t(()=>[C(_(o.opportunity.customer.name),1)]),_:1}),l("span",rt,_(o.opportunity.customer.phone),1)]),e(E,{color:"secondary",variant:"tonal",size:"small",onClick:k},{default:t(()=>i[2]||(i[2]=[C(" Editar Perfil ")])),_:1})])])])]),l("div",null,[i[5]||(i[5]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(u(),g("div",ut,[(u(!0),g(I,null,L(o.opportunity.procedure,r=>(u(),g("div",{key:r.id},[e(Q,{color:r.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:U=>$(r.id,r.pivot.is_check)},{default:t(()=>[r.pivot.is_check?(u(),F(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),C(" "+_(r.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(u(),g("div",dt,i[4]||(i[4]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),l("div",null,[i[8]||(i[8]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Cotizaciones ",-1)),o.opportunity.quotes&&o.opportunity.quotes.length>0?(u(),g("div",pt,[e(Z,{density:"compact",class:"text-no-wrap",style:{"font-size":"12px"}},{default:t(()=>[i[6]||(i[6]=l("thead",null,[l("tr",null,[l("th",null," Nombre "),l("th",null," Fecha "),l("th",null," Monto "),l("th")])],-1)),l("tbody",null,[(u(!0),g(I,null,L(o.opportunity.quotes,r=>(u(),g("tr",{key:r.id},[l("td",null,_(r.social_reason),1),l("td",null,_(new Date(r.created_at).toLocaleDateString()),1),l("td",null,_(r.amount),1),l("td",null,[e(N,null,{default:t(()=>[e(oe,{modelValue:r.status,"onUpdate:modelValue":U=>r.status=U,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:U=>p(r.id,r.status)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024)])]))),128))])]),_:1})])):(u(),g("div",ct,i[7]||(i[7]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(R,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(E,{color:"primary",class:"mx-1",variant:"tonal",size:"small",onClick:h.generateQuote},{default:t(()=>i[9]||(i[9]=[C(" Agregar Cotizacion ")])),_:1},8,["onClick"]),e(E,{color:"primary",class:"mx-auto",size:"small",onClick:y},{default:t(()=>i[10]||(i[10]=[C(" Generar Venta ")])),_:1})]),_:1}),e(De,{"is-dialog-visible":a(s),"onUpdate:isDialogVisible":i[0]||(i[0]=r=>q(s)?s.value=r:null),"opportunity-kanban":o.opportunity},null,8,["is-dialog-visible","opportunity-kanban"]),e(he,{"is-dialog-visible":a(n),"onUpdate:isDialogVisible":i[1]||(i[1]=r=>q(n)?n.value=r:null),opportunity:o.opportunity,onRegisterSale:c},null,8,["is-dialog-visible","opportunity"])],64)}}},yt={class:"d-flex align-bottom flex-sm-row flex-column"},ft={class:"user-profile-info"},vt={class:"d-flex align-center justify-center justify-sm-space-between flex-wrap gap-4"},gt={class:"d-flex align-center gap-x-3"},_t={class:"text-4xl font-weight-medium"},bt={class:"d-flex flex-column py-2",style:{"font-size":"14px"}},Vt={class:"text-sm text-disabled"},xt={key:0,class:"d-flex flex-wrap gap-2 my-5"},wt={key:1},kt={key:0,class:"d-flex flex-wrap gap-2 my-5"},Dt={key:1},Pt={__name:"EditProspectOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId"],setup(V,{emit:x}){const o=V,v=x,{checkProcessForOpportunity:O}=te(),{changeStatusByOpportunity:w,loadingOpportunity:s}=X(),n=b(!1),k=()=>{n.value=!0},y=async $=>{w($,ve.PRESALE.value,{}),v("updateStageId",$)},c=($,p)=>{console.log(`Procedimiento ${$} marcado como: ${p?"realizado":"no realizado"}`),O(o.opportunity.id,$,{is_check:!p}),v("updateStageId",o.opportunity.id)};return($,p)=>{const h=ne("RouterLink");return u(),g(I,null,[l("div",yt,[l("div",ft,[p[3]||(p[3]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Perfil ",-1)),l("div",vt,[l("div",gt,[l("span",_t,_(("avatarText"in $?$.avatarText:a(be))(o.opportunity.customer.name)),1),l("div",bt,[e(h,{to:{name:"apps-ecommerce-customer-details-id",params:{id:1}},class:"font-weight-base"},{default:t(()=>[C(_(o.opportunity.customer.name),1)]),_:1}),l("span",Vt,_(o.opportunity.customer.phone),1)]),l("div",null,[e(E,{color:"secondary",variant:"tonal",size:"small",onClick:k},{default:t(()=>p[2]||(p[2]=[C(" Editar Perfil ")])),_:1})])])])])]),l("div",null,[p[5]||(p[5]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(u(),g("div",xt,[(u(!0),g(I,null,L(o.opportunity.procedure,i=>(u(),g("div",{key:i.id},[e(Q,{color:i.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:d=>c(i.id,i.pivot.is_check)},{default:t(()=>[i.pivot.is_check?(u(),F(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),C(" "+_(i.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(u(),g("div",wt,p[4]||(p[4]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),l("div",null,[p[8]||(p[8]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Cotizaciones ",-1)),o.opportunity.quotes&&o.opportunity.quotes.length>0?(u(),g("div",kt,[e(Z,{density:"compact",class:"text-no-wrap",style:{"font-size":"12px"}},{default:t(()=>[p[6]||(p[6]=l("thead",null,[l("tr",null,[l("th",null," Nombre "),l("th",null," Fecha "),l("th",null," Monto "),l("th")])],-1)),l("tbody",null,[(u(!0),g(I,null,L(o.opportunity.quotes,i=>(u(),g("tr",{key:i.id},[l("td",null,_(i.social_reason),1),l("td",null,_(new Date(i.created_at).toLocaleDateString()),1),l("td",null,_(i.amount),1),l("td",null,[e(H,{icon:"tabler-eye"})])]))),128))])]),_:1})])):(u(),g("div",Dt,p[7]||(p[7]=[l("span",null,"No hay cotizaciones disponibles.",-1)])))]),e(R,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(E,{color:"primary",class:"mx-1",variant:"tonal",size:"small",onClick:$.generateQuote},{default:t(()=>p[9]||(p[9]=[C(" Generar Cotización ")])),_:1},8,["onClick"]),e(E,{color:"primary",class:"mx-auto",size:"small",disabled:a(s),loading:a(s),onClick:p[0]||(p[0]=i=>y(o.opportunity.id))},{default:t(()=>p[10]||(p[10]=[C(" Siguiente Etapa ")])),_:1},8,["disabled","loading"])]),_:1}),e(De,{"is-dialog-visible":a(n),"onUpdate:isDialogVisible":p[1]||(p[1]=i=>q(n)?n.value=i:null),"opportunity-kanban":o.opportunity},null,8,["is-dialog-visible","opportunity-kanban"])],64)}}},Ct=async V=>await Y(`/sale/paymentPlans/${V}/confirm`,{method:"PATCH"});function $t(){const V=b(!1),x=b([]),o=b(null),v=b(null);return{loadingPaymentPlans:V,paymentPlan:v,error:o,paymentPlans:x,confirmPaymentPlans:async w=>{try{const s=await Ct(w);se("Actualizacion Exitosa","Se confirmo el pago")}catch(s){console.log(s)}}}}const ht={__name:"DeliveryForm",props:{isDialogVisible:{type:Boolean,required:!0},opportunity:{type:Object,required:!0}},emits:["update:isDialogVisible","updateDeliveryDate"],setup(V,{emit:x}){const o=V,v=x,{changeStatusByOpportunity:O}=X(),w=y=>{v("update:isDialogVisible",y)},s=b(structuredClone(W(o.opportunity)));ee(o,()=>{s.value=structuredClone(W(o.opportunity))});const n=async()=>{v("update:isDialogVisible",!1);try{await O(o.opportunity.id,5,{delivery_date:s.value.sales.delivery_date}),v("updateDeliveryDate",s.value.id)}catch(y){console.error("Error updating customer:",y)}},k=()=>{v("update:isDialogVisible",!1)};return(y,c)=>{const $=re;return u(),F(ue,{"model-value":o.isDialogVisible,"max-width":"800","onUpdate:modelValue":w},{default:t(()=>[e($,{onClick:c[0]||(c[0]=p=>y.$emit("update:isDialogVisible",!1))}),e(G,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(Ve,{class:"text-h3 text-center"},{default:t(()=>c[2]||(c[2]=[C(" Confirmar Fecha ")])),_:1}),e(R,null,{default:t(()=>[e(R,null,{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:t(()=>[e(Ue,{modelValue:a(s).sales.delivery_date,"onUpdate:modelValue":c[1]||(c[1]=p=>a(s).sales.delivery_date=p),label:"Fecha de Entrega",type:"date",rules:["requiredValidator"in y?y.requiredValidator:a(M)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(E,{onClick:n},{default:t(()=>c[3]||(c[3]=[C(" Pasar a Entrega ")])),_:1}),e(E,{color:"secondary",variant:"tonal",onClick:k},{default:t(()=>c[4]||(c[4]=[C(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},St={__name:"PaymentPlanEdit",props:{isDialogVisible:{type:Boolean,required:!0},opportunity:{type:Object,required:!0}},emits:["update:isDialogVisible","updateDeliveryDate"],setup(V,{emit:x}){const o=V,v=x,{changeStatusByOpportunity:O}=X(),w=y=>{v("update:isDialogVisible",y)},s=b(structuredClone(W(o.opportunity)));ee(o,()=>{s.value=structuredClone(W(o.opportunity))});const n=async()=>{v("update:isDialogVisible",!1);try{await O(o.opportunity.id,5,{delivery_date:s.value.sales.delivery_date}),v("updateDeliveryDate",s.value.id)}catch(y){console.error("Error updating customer:",y)}},k=()=>{v("update:isDialogVisible",!1)};return(y,c)=>{const $=re;return u(),F(ue,{"model-value":o.isDialogVisible,"max-width":"800","onUpdate:modelValue":w},{default:t(()=>[e($,{onClick:c[0]||(c[0]=p=>y.$emit("update:isDialogVisible",!1))}),e(G,{class:"pa-sm-8 pa-5"},{default:t(()=>[e(Ve,{class:"text-h3 text-center"},{default:t(()=>c[1]||(c[1]=[C(" Confirmar Fecha ")])),_:1}),e(R,null,{default:t(()=>[e(R,null,{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:t(()=>[l("span",null," Monto a Pagar : "+_(a(s).amount),1),e(qe,{title:"Saldo",amount:a(s).amount},null,8,["amount"])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(E,{onClick:n},{default:t(()=>c[2]||(c[2]=[C(" Pasar a Entrega ")])),_:1}),e(E,{color:"secondary",variant:"tonal",onClick:k},{default:t(()=>c[3]||(c[3]=[C(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},At={class:"text-h6"},zt={class:"text-h6"},Ot={class:"text-h6"},Ut={class:"my-5"},qt={key:0},Ft=["src"],jt=["onClick"],Et=["onClick"],Tt={class:"my-5"},It={key:0,class:"d-flex flex-wrap gap-2 my-5"},Nt={key:1},Rt={__name:"EditSaleOpportunity",props:{opportunity:{type:Object,required:!0}},emits:["updateStageId"],setup(V,{emit:x}){const o=V,v=x,{checkProcessForOpportunity:O}=te(),{confirmPaymentPlans:w}=$t(),s=b(!1),n=b(!1),k=b(""),y=()=>{s.value=!0},c=i=>{console.log("entro aqui"),n.value=!0,k.value={...i}},$=async(i,d)=>{console.log(`Procedimiento ${i} marcado como: ${d?"realizado":"no realizado"}`),await O(o.opportunity.id,i,{is_check:!d}),v("updateStageId",o.opportunity.id)},p=async i=>{console.log(i),await w(i),v("updateStageId",o.opportunity.id)},h=async i=>{v("updateStageId",i)};return(i,d)=>(u(),g(I,null,[l("div",null,[e(G,null,{default:t(()=>[e(R,null,{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"4",class:"border rounded-sm mx-1"},{default:t(()=>[e(K,{class:"font-weight-medium"},{default:t(()=>d[2]||(d[2]=[C(" Saldo ")])),_:1}),e(J,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",At,"$ "+_(o.opportunity.sales.amount-o.opportunity.sales.initial_fee),1)]),_:1})]),_:1}),e(f,{cols:"3",class:"border rounded-sm mx-1"},{default:t(()=>[e(K,{class:"font-weight-medium"},{default:t(()=>d[3]||(d[3]=[C(" Anticipo ")])),_:1}),e(J,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",zt,"$ "+_(o.opportunity.sales.initial_fee),1)]),_:1})]),_:1}),e(f,{cols:"4",class:"border rounded-sm mx-1"},{default:t(()=>[e(K,{class:"font-weight-medium"},{default:t(()=>d[4]||(d[4]=[C(" Precio Final ")])),_:1}),e(J,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",Ot,"$"+_(o.opportunity.sales.amount),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),l("div",Ut,[d[5]||(d[5]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),o.opportunity.sales.properties&&o.opportunity.sales.properties.length>0?(u(),g("div",qt,[(u(!0),g(I,null,L(o.opportunity.sales.properties,r=>(u(),g("div",{key:r.id,class:"d-flex align-center justify-between"},[e(_e,{size:"50",rounded:""},{default:t(()=>[l("img",{src:a(fe),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,Ft)]),_:1}),e(f,{cols:"12",md:"7"},{default:t(()=>[e(K,{class:"font-weight-medium"},{default:t(()=>[C(_(r.project_title)+" | "+_(r.title),1)]),_:2},1024),e(J,{class:"text-disabled d-flex justify-between mt-1"},{default:t(()=>[l("span",null,"$ "+_(r.pivot_price),1)]),_:2},1024)]),_:2},1024)]))),128))])):B("",!0)]),l("div",null,[d[7]||(d[7]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Cuota Inicial ",-1)),e(Z,{density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:t(()=>[d[6]||(d[6]=l("thead",null,[l("tr",null,[l("th",null," Propiedad "),l("th",null," Fecha "),l("th",null," Monto "),l("th",null," Action ")])],-1)),l("tbody",null,[(u(!0),g(I,null,L(o.opportunity.sales.initial_payments,r=>(u(),g("tr",{key:r.id},[l("td",null,_(r.property_title),1),l("td",null,_(new Date(r.date).toLocaleDateString()),1),l("td",null,_(r.amount),1),l("td",null,[e(N,null,{default:t(()=>[e(oe,{modelValue:r.is_paid,"onUpdate:modelValue":U=>r.is_paid=U,"true-value":1,"false-value":0,disabled:r.is_paid===1,onChange:U=>p(r.id)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"]),l("div",{"fill-dot":"",onClick:U=>c(r)},[e(H,{size:"25",icon:"tabler-edit"})],8,jt)]),_:2},1024)])]))),128))])]),_:1})]),l("div",null,[d[9]||(d[9]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Saldo ",-1)),e(Z,{density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:t(()=>[d[8]||(d[8]=l("thead",null,[l("tr",null,[l("th",null," Propiedad "),l("th",null," Fecha "),l("th",null," Monto "),l("th",null," Action ")])],-1)),l("tbody",null,[(u(!0),g(I,null,L(o.opportunity.sales.balance_payments,r=>(u(),g("tr",{key:r.id},[l("td",null,_(r.property_title),1),l("td",null,_(new Date(r.date).toLocaleDateString()),1),l("td",null,_(r.amount),1),l("td",null,[e(N,null,{default:t(()=>[e(oe,{modelValue:r.is_paid,"onUpdate:modelValue":U=>r.is_paid=U,"true-value":1,"false-value":0,disabled:r.is_paid===1,onChange:U=>p(r.id)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"]),l("div",{"fill-dot":"",onClick:U=>c(r)},[e(H,{size:"25",icon:"tabler-edit"})],8,Et)]),_:2},1024)])]))),128))])]),_:1})]),l("div",Tt,[d[11]||(d[11]=l("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),o.opportunity.procedure&&o.opportunity.procedure.length>0?(u(),g("div",It,[(u(!0),g(I,null,L(o.opportunity.procedure,r=>(u(),g("div",{key:r.id},[e(Q,{color:r.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:U=>$(r.id,r.pivot.is_check)},{default:t(()=>[r.pivot.is_check?(u(),F(H,{key:0,icon:"tabler-check",class:"mr-2"})):B("",!0),C(" "+_(r.title),1)]),_:2},1032,["color","onClick"])]))),128))])):(u(),g("div",Nt,d[10]||(d[10]=[l("span",null,"No hay procedimientos disponibles.",-1)])))]),e(R,{class:"d-flex justify-center mt-4"},{default:t(()=>[e(E,{color:"primary",class:"mx-auto",onClick:y},{default:t(()=>d[12]||(d[12]=[C(" Siguiente Etapa ")])),_:1})]),_:1}),e(ht,{"is-dialog-visible":a(s),"onUpdate:isDialogVisible":d[0]||(d[0]=r=>q(s)?s.value=r:null),opportunity:o.opportunity,onUpdateDeliveryDate:h},null,8,["is-dialog-visible","opportunity"]),e(St,{"is-dialog-visible":a(n),"onUpdate:isDialogVisible":d[1]||(d[1]=r=>q(n)?n.value=r:null),opportunity:a(k),onUpdateDeliveryDate:h},null,8,["is-dialog-visible","opportunity"])],64))}};const Lt={__name:"SellerReport",setup(V){return b([{title:"Actividad 1",date:"2024-10-09",status:"Pendiente"},{title:"Actividad 2",date:"2024-10-10",status:"Completada"},{title:"Actividad 3",date:"2024-10-11",status:"En Progreso"}]),(x,o)=>(u(),F(R,null,{default:t(()=>o[0]||(o[0]=[l("p",null,"No hay actividades seleccionadas. Aquí tienes un resumen de las actividades:",-1)])),_:1}))}},Bt=we(Lt,[["__scopeId","data-v-c9cbe3f1"]]),Mt={__name:"CustomerHistory",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(V,{emit:x}){const o=V,v=x,O=b(!1),w=b(),s=b(""),n=b(""),k=b(""),y=b(""),c=b(),$=b(""),p=b(),h=b(),i=b(),d=()=>{v("update:isDrawerOpen",!1),pe(()=>{var P,D;(P=w.value)==null||P.reset(),(D=w.value)==null||D.resetValidation()})},r=()=>{var P;(P=w.value)==null||P.validate().then(({valid:D})=>{D&&(v("userData",{id:0,fullName:s.value,company:y.value,role:p.value,country:c.value,contact:$.value,email:k.value,currentPlan:h.value,status:i.value,avatar:"",billing:"Auto Debit"}),v("update:isDrawerOpen",!1),pe(()=>{var j,m;(j=w.value)==null||j.reset(),(m=w.value)==null||m.resetValidation()}))})},U=P=>{v("update:isDrawerOpen",P)};return(P,D)=>{const j=Fe,m=ae,S=ie;return u(),F(Ee,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":o.isDrawerOpen,"onUpdate:modelValue":U},{default:t(()=>[e(j,{title:"Historial del Cliente",onCancel:d}),e(a(je),{options:{wheelPropagation:!1}},{default:t(()=>[e(G,{flat:""},{default:t(()=>[e(R,null,{default:t(()=>[e(xe,{ref_key:"refForm",ref:w,modelValue:a(O),"onUpdate:modelValue":D[9]||(D[9]=z=>q(O)?O.value=z:null),onSubmit:ge(r,["prevent"])},{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(s),"onUpdate:modelValue":D[0]||(D[0]=z=>q(s)?s.value=z:null),rules:["requiredValidator"in P?P.requiredValidator:a(M)],label:"Full Name",placeholder:"John Doe"},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(n),"onUpdate:modelValue":D[1]||(D[1]=z=>q(n)?n.value=z:null),rules:["requiredValidator"in P?P.requiredValidator:a(M)],label:"Username",placeholder:"Johndoe"},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(k),"onUpdate:modelValue":D[2]||(D[2]=z=>q(k)?k.value=z:null),rules:["requiredValidator"in P?P.requiredValidator:a(M),"emailValidator"in P?P.emailValidator:a(Ce)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(y),"onUpdate:modelValue":D[3]||(D[3]=z=>q(y)?y.value=z:null),rules:["requiredValidator"in P?P.requiredValidator:a(M)],label:"Company",placeholder:"PixInvent"},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(c),"onUpdate:modelValue":D[4]||(D[4]=z=>q(c)?c.value=z:null),label:"Select Country",placeholder:"Select Country",rules:["requiredValidator"in P?P.requiredValidator:a(M)],items:["USA","UK","India","Australia"]},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(m,{modelValue:a($),"onUpdate:modelValue":D[5]||(D[5]=z=>q($)?$.value=z:null),type:"number",rules:["requiredValidator"in P?P.requiredValidator:a(M)],label:"Contact",placeholder:"+1-541-754-3010"},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(p),"onUpdate:modelValue":D[6]||(D[6]=z=>q(p)?p.value=z:null),label:"Select Role",placeholder:"Select Role",rules:["requiredValidator"in P?P.requiredValidator:a(M)],items:["Admin","Author","Editor","Maintainer","Subscriber"]},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(h),"onUpdate:modelValue":D[7]||(D[7]=z=>q(h)?h.value=z:null),label:"Select Plan",placeholder:"Select Plan",rules:["requiredValidator"in P?P.requiredValidator:a(M)],items:["Basic","Company","Enterprise","Team"]},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(i),"onUpdate:modelValue":D[8]||(D[8]=z=>q(i)?i.value=z:null),label:"Select Status",placeholder:"Select Status",rules:["requiredValidator"in P?P.requiredValidator:a(M)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Pending",value:"pending"}]},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(E,{type:"submit",class:"me-3"},{default:t(()=>D[10]||(D[10]=[C(" Submit ")])),_:1}),e(E,{type:"reset",variant:"outlined",color:"secondary",onClick:d},{default:t(()=>D[11]||(D[11]=[C(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Ht={class:"mb-2"},Qt={__name:"AddActivity",props:{activitiesData:{type:Object,required:!0,default:()=>({title:"",description:"",schedule_at:""})},isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","refreshActivities"],setup(V,{emit:x}){const o=V,v=x,O=b(!1);b(!1);const w=b("radio-1"),s=b({title:"",description:"",type_activity_id:null,opportunity_id:null,assigned_to:null,scheduled_at:null,status:"COMPLETED"}),{completedActivityAndRegister:n,getallTypeActivities:k,typeActivities:y,loadingActivity:c}=me(),{getOpportunitybyId:$,opportunity:p}=X(),h=b(structuredClone(W(o.activitiesData))),i=j=>{console.log("esta consultando de nuevo despues de cambiar etapa "),$(j)};ee(o,()=>{h.value=structuredClone(W(o.activitiesData)),$(h.value.opportunity_id),d()});const d=async()=>{await k()},r=()=>{$(h.value.opportunity_id)},U=()=>{v("update:isDrawerOpen",!1),s.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null,status:"COMPLETED"},v("refreshActivities")},P=async()=>{let j="";w.value==="radio-1"?j="COMPLETED":w.value==="radio-2"&&(j="CANCELLED"),n(h.value.id,{title:s.value.title,description:s.value.description,type_activity_id:s.value.type_activity_id,scheduled_at:s.value.scheduled_at,assigned_to:p.value.user_id,property_id:p.value.property_id,opportunity_id:p.value.id,status:j}),U()},D=async()=>{v("update:isDrawerOpen",!1),v("refreshActivities")};return(j,m)=>{const S=ae,z=$e,T=ye;return u(),F(N,{class:"d-flex justify-space-between"},{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[V.isDrawerOpen?(u(),F(G,{key:0},{default:t(()=>[e(R,null,{default:t(()=>[e(ke,{class:"mx-2 my-2"},{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"12",sm:"5"},{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>m[6]||(m[6]=[l("span",{style:{"font-size":"18px","font-weight":"500"}}," Actividad ",-1)])),_:1}),e(f,{cols:"12"},{default:t(()=>[l("div",Ht,[l("span",null,_(o.activitiesData.type_activity)+"   •   "+_(o.activitiesData.title),1)]),e(Ie,{modelValue:a(w),"onUpdate:modelValue":m[0]||(m[0]=A=>q(w)?w.value=A:null),style:{"font-size":"10px"}},{default:t(()=>[e(ce,{label:"Completar Actividad",value:"radio-1",density:"compact"}),e(ce,{label:"Cancelar Actividad",value:"radio-2",density:"compact"})]),_:1},8,["modelValue"]),e(Ne,{class:"mt-2"})]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(s).title,"onUpdate:modelValue":m[1]||(m[1]=A=>a(s).title=A),label:"Titulo de la actividad",placeholder:"..."},null,8,["modelValue"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(ie,{modelValue:a(s).type_activity_id,"onUpdate:modelValue":m[2]||(m[2]=A=>a(s).type_activity_id=A),label:"Tipo de Actividad",placeholder:"Selecciona el Tipo de Actividad",items:a(y).map(A=>({title:A.name,value:A.id}))},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(z,{modelValue:a(s).scheduled_at,"onUpdate:modelValue":m[3]||(m[3]=A=>a(s).scheduled_at=A),label:"Seleccione la Fecha y Hora",placeholder:"Select date and time",config:{enableTime:!0,dateFormat:"Y-m-d H:i"},rules:["requiredValidator"in j?j.requiredValidator:a(M)]},null,8,["modelValue","rules"])]),_:1}),e(f,{cols:"12"},{default:t(()=>[e(T,{modelValue:a(s).description,"onUpdate:modelValue":m[4]||(m[4]=A=>a(s).description=A),label:"Descripcion",rows:"3",rules:["requiredValidator"in j?j.requiredValidator:a(M)]},null,8,["modelValue","rules"])]),_:1}),e(f,null,{default:t(()=>[e(E,{size:"small",color:"prymary",variant:"tonal",class:"mx-auto",loading:a(c),disabled:a(c),onClick:P},{default:t(()=>m[7]||(m[7]=[C(" Crear Actividad ")])),_:1},8,["loading","disabled"]),e(E,{size:"small",color:"error",variant:"tonal",class:"my-2 mx-2"},{default:t(()=>m[8]||(m[8]=[C(" Dar de Baja ")])),_:1})]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",sm:"7",style:{"align-items":"center"}},{default:t(()=>[e(N,{class:"mb-2"},{default:t(()=>[e(f,{cols:"6"},{default:t(()=>m[9]||(m[9]=[l("span",{style:{"font-size":"18px","font-weight":"500"}}," Etapa ",-1)])),_:1}),e(f,{cols:"12",md:"6",class:"d-flex justify-end align-center"},{default:t(()=>[e(Q,{label:"",color:"primary"},{default:t(()=>[C(_(a(p).stage.title),1)]),_:1})]),_:1})]),_:1}),a(p).stage_id===2?(u(),F(Pt,{key:0,opportunity:a(p),onUpdateStageId:i},null,8,["opportunity"])):B("",!0),a(p).stage_id===3?(u(),F(mt,{key:1,opportunity:a(p),onUpdateStageId:i},null,8,["opportunity"])):B("",!0),a(p).stage_id===4?(u(),F(Rt,{key:2,opportunity:a(p),onRefreshActivities:r,onUpdateStageId:i},null,8,["opportunity"])):B("",!0),a(p).stage_id===5?(u(),F(Ye,{key:3,opportunity:a(p),onRefreshActivities:r,onUpdateStageId:i,onComplet:D},null,8,["opportunity"])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(u(),F(G,{key:1,title:"Reporte de Actividades"},{default:t(()=>[e(Bt)]),_:1}))]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(Mt,{"is-drawer-open":a(O),"onUpdate:isDrawerOpen":m[5]||(m[5]=A=>q(O)?O.value=A:null)},null,8,["is-drawer-open"])]),_:1})]),_:1})}}};const Gt={style:{"font-size":"14px"}},Kt={key:0,class:"no-activities-message d-flex flex-column justify-center align-center",style:{"min-block-size":"200px","text-align":"center"}},Jt=["onClick"],Wt={class:"mx-2"},Xt={class:"d-flex justify-content-between",style:{"font-size":"0.9em"}},Yt={__name:"list",setup(V){const x=b("New");b(["Todos","PORA"]),b("Todos");const{getallActivitiesByAsesorFecha:o,getallActivitiesByFechaPast:v,getallActivitiesByFechaFuture:O,activities:w,activitiesPast:s,activitiesFuture:n}=me(),k=b(""),y=Se("userData").value,c=b(!0),$=async()=>{await o(y.id),console.log("Actividades de hoy:",w)},p=async()=>{await v(y.id),console.log("Actividades pasadas:",s)},h=async()=>{await O(y.id),console.log("Actividades futuras:",n)};Ae(async()=>{await $(),await p(),await h(),c.value=!1});const i=b(!1),d=m=>{i.value=!0,k.value={...m}},r=async()=>{await $(),await p(),await h(),c.value=!1},U=[{tabName:"Hoy",icon:"tabler-edit",actividades:w,badge:w.value.length},{tabName:"Anteriores",icon:"tabler-calendar",actividades:s,badge:s.value.length},{tabName:"Futuros",icon:"tabler-calendar",actividades:n,badge:n.value.length}],P=[{type:"Visita",icon:"tabler-current-location"},{type:"Llamada",icon:"tabler-phone"},{type:"Cotizacion",icon:"tabler-cash"},{type:"Otro",icon:"tabler-table"}],D=m=>{const S=P.find(z=>z.type===m);return S?S.icon:"tabler-default"},j=m=>{const S=new Date(m),z=S.getDate(),A=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][S.getMonth()],de=S.getHours().toString().padStart(2,"0"),Pe=S.getMinutes().toString().padStart(2,"0");return`${z} de ${A}, ${de}:${Pe}`};return(m,S)=>{const z=ne("VCircularProgress");return u(),F(N,{class:"match-height",style:{display:"flex","block-size":"100vh"}},{default:t(()=>[e(f,{cols:"12",md:"4",style:{display:"flex","flex-direction":"column"}},{default:t(()=>[e(G,{title:"Lista de Actividades",class:"flex-grow-1"},{default:t(()=>[e(Re,{modelValue:a(x),"onUpdate:modelValue":S[0]||(S[0]=T=>q(x)?x.value=T:null),grow:""},{default:t(()=>[(u(),g(I,null,L(U,T=>e(Le,{key:T.tabName},{default:t(()=>[l("span",Gt,_(T.tabName),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),S[7]||(S[7]=l("br",null,null,-1)),e(R,{style:{"flex-grow":"1","overflow-y":"auto"}},{default:t(()=>[a(c)?(u(),F(Be,{key:0,absolute:"",opacity:"0.7"},{default:t(()=>[e(z,{indeterminate:"",size:"70"})]),_:1})):B("",!0),e(ke,{modelValue:a(x),"onUpdate:modelValue":S[1]||(S[1]=T=>q(x)?x.value=T:null),class:"disable-tab-transition",style:{"max-block-size":"500px","overflow-y":"auto"}},{default:t(()=>[(u(),g(I,null,L(U,T=>e(Te,{key:T.tabName,value:T.tabName},{default:t(()=>[T.actividades.value.length===0?(u(),g("div",Kt,[e(H,{size:"64",color:"grey",icon:"tabler-calendar-off",class:"mb-4",style:{animation:"bounce 1s infinite"}}),S[4]||(S[4]=l("div",{style:{color:"#888","font-size":"1.2em"}}," ¡No tienes actividades pendientes! ",-1)),S[5]||(S[5]=l("div",{style:{color:"#aaa","font-size":"0.9em","margin-block-start":"8px"}}," ¡Relájate y disfruta tu día! ",-1))])):(u(!0),g(I,{key:1},L(T.actividades.value,A=>(u(),g("div",{key:A.id,"fill-dot":"",class:"border mb-2 rounded-sm py-2",onClick:de=>d(A)},[e(le,null,{default:t(()=>[e(N,null,{default:t(()=>[e(f,{cols:"12",md:"2",style:{"padding-inline-end":"0"}},{default:t(()=>[e(Q,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"36px","inline-size":"36px"}},{default:t(()=>[e(H,{size:"25",icon:"tabler-home"})]),_:1})]),_:1}),A.project_name?(u(),F(f,{key:0,cols:"12",md:"5",class:"d-flex flex-column align-start",style:{"padding-inline-start":"0"}},{default:t(()=>[e(J,{class:"text-left"},{default:t(()=>[l("strong",null,_(A.property_title),1)]),_:2},1024),e(K,{class:"font-weight-medium text-left"},{default:t(()=>[l("span",null,"$ "+_(A.price),1)]),_:2},1024)]),_:2},1024)):B("",!0),A.project_name?B("",!0):(u(),F(f,{key:1,cols:"12",md:"5"})),e(f,{cols:"12",md:"5",class:"d-flex justify-end align-center"},{default:t(()=>[e(Q,{label:"",color:"primary",class:"ml-auto",style:{"font-size":"10px"}},{default:t(()=>[C(_(A.stage),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(le,{class:""},{default:t(()=>[e(Q,{label:"",color:"secondary",class:"w-100 h-48"},{default:t(()=>[e(H,{size:"20",icon:D(A.type_activity)},null,8,["icon"]),l("div",Wt,_(A.type_activity)+"   •   "+_(A.name_opportunity),1)]),_:2},1024)]),_:2},1024),e(le,null,{default:t(()=>[l("div",Xt,[S[6]||(S[6]=l("div",{style:{"flex-grow":"1"}}," Ver ",-1)),l("div",null,_(j(A.scheduled_at)),1)])]),_:2},1024)],8,Jt))),128))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"8",style:{display:"flex","flex-direction":"column"}},{default:t(()=>[e(Qt,{"is-drawer-open":a(i),"onUpdate:isDrawerOpen":S[2]||(S[2]=T=>q(i)?i.value=T:null),"activities-data":a(k),class:"flex-grow-1",onRefreshActivities:r,onLoaded:S[3]||(S[3]=T=>c.value=!1)},null,8,["is-drawer-open","activities-data"])]),_:1})]),_:1})}}},oo=we(Yt,[["__scopeId","data-v-0bd1e790"]]);export{oo as default};
