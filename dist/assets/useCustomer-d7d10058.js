import{$ as c,a as y}from"./api-5e105e76.js";import{b as n,a as v}from"./notifications-e0287a8c.js";import{r as t,k as C,a2 as p}from"./index-b40b785d.js";const w=async s=>await c("/customer/register/prospect",{method:"POST",body:s}),b=async s=>await c(`/customer/perfil/${s}`,{method:"GET"}),P=async s=>await c("customer/list-paginated",{method:"GET",params:s}),E=async()=>await y("/openai/thread/create-thread",{method:"POST"});function S(){const s=t(!1),a=t(null),r=t(null),l=t([]),i=t(0),d=C(),g=async o=>{if(!o.name||!o.phone){n("Falta Informacion","El nombre y el celular son obligatorios");return}s.value=!0,a.value=null;try{const e=await E(),u={name:o.name,phone:o.phone,thread:e.id,email:o.email,ci:o.ci,cod_phone:o.countryCode.replace(/\+/g,""),description:o.description};console.log(u);const m=await w(u);console.log("Respuesta del servidor:",m),v("Cliente agregado exitosamente","El cliente ha sido registrado en el sistema correctamente."),r.value=m.data,d.push("/customers/listCustomers")}catch(e){console.log(e),e.response&&e.response.status==422&&n("Falta Informacion","El nombre y el celular son obligatorios"),e.response&&e.response.status==409&&n("Advertencia",e.response._data.message),a.value=e.message}finally{s.value=!1}},h=async o=>{try{const e=await P(o);console.log(e),l.value=e.data.data,i.value=e.data.total}catch(e){console.log(e)}},f=async o=>{try{const e=await b(o);r.value=e.data,console.log(quote.value)}catch(e){console.error(e)}};return{loading:s,error:a,customer:r,customers:p(()=>l.value),totalCustomers:p(()=>i.value),addCustomer:g,allCustomerPaginate:h,getPerfilCutomerbyId:f}}export{S as u};
