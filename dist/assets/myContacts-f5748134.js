import{_ as Qt}from"./AppTextField-935152ba.js";import{M as en,a2 as Ne,cr as tn,n as _,r as te,bS as on,N as nn,cm as Jt,w as Qe,cW as ln,H as So,an as To,a0 as Nt,o as k,f as Ee,e as d,b as s,a4 as de,v as ee,a3 as Le,a as ao,c as M,F as ve,i as be,x as R,$ as Ae,d as m,z as Se,y as an}from"./index-29b7cc60.js";import{u as Zt,p as rn,_ as sn}from"./PreSaleForm-ae780973.js";import{u as kt,S as Me,a as un,b as dn}from"./usePaymentPlans-56ac6f18.js";import{f as bt}from"./currencyFormatter-92ad4b3c.js";import{s as io,S as ct}from"./notifications-cae4d01c.js";import{_ as eo}from"./DialogCloseBtn-819078ea.js";import{_ as cn}from"./AddQuoteInvoice-35e49cc1.js";import{u as Vo}from"./useQuote-a4a99f30.js";import{P as pt}from"./InvoiceAddMoney-55ddbddb.js";import{V as ke,a as pn,b as xo}from"./VCard-bf13d430.js";import{V as Ue}from"./VCardText-39037d93.js";import{V as Oe}from"./VRow-e48c256c.js";import{V as j}from"./VCol-d1606abf.js";import{V as to}from"./VDialog-f47f8ae9.js";import{_ as ko}from"./AppTextarea-b7b7b024.js";import{_ as Oo}from"./AppDateTimePicker-64c8e961.js";import{_ as Po}from"./AppSelect-d2c3c05f.js";import{V as jt}from"./VForm-c5c832c7.js";import{_ as mn}from"./AppAutocomplete-da8d7d8a.js";import{u as fn}from"./useProperty-5690e7d0.js";import{u as vn}from"./useSales-b645b44d.js";import{V as hn,a as gn}from"./VTabs-d1ca7168.js";import{V as bn,a as ze}from"./VWindowItem-55d07c06.js";import{V as yn}from"./VDataTable-a6bdddc5.js";import{V as mt}from"./VTable-a1e760ad.js";import{V as et}from"./VCheckbox-56057c4b.js";import{V as je}from"./VTooltip-27de8f06.js";import{V as Xt}from"./VChip-4c549402.js";import{V as _n}from"./VAvatar-3429543c.js";import{b as wn,c as En}from"./VList-ff95fa1b.js";import{_ as Cn}from"./_plugin-vue_export-helper-c27b6911.js";import"./form-46c7b9be.js";import"./VTextField-5eb6a6dc.js";/* empty css                   */import"./VCounter-c63caf4b.js";import"./VImg-1c591935.js";import"./VField-1605a089.js";import"./easing-9f15041e.js";import"./VInput-43c70c11.js";import"./forwardRefs-8348545e.js";import"./api-d30cbc93.js";import"./index-9c720871.js";import"./constants-0978c720.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./VNodeRenderer-1a91a6ef.js";import"./VDivider-6245c6f4.js";import"./VOverlay-713169b3.js";import"./lazy-4fe66c8e.js";import"./scopeId-a1937037.js";import"./dialog-transition-bd818187.js";import"./VSelect-5cdd201b.js";import"./VMenu-4729b7db.js";import"./VCheckboxBtn-7b31fbd9.js";import"./VSelectionControl-7e5360d8.js";import"./filter-db890500.js";import"./VSlideGroup-674eea9a.js";import"./ssrBoot-380d8664.js";var Dn=Object.defineProperty,Dt=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,ro=(e,o,t)=>o in e?Dn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,We=(e,o)=>{for(var t in o||(o={}))No.call(o,t)&&ro(e,t,o[t]);if(Dt)for(var t of Dt(o))Io.call(o,t)&&ro(e,t,o[t]);return e},Mo=(e,o)=>{var t={};for(var n in e)No.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&Dt)for(var n of Dt(e))o.indexOf(n)<0&&Io.call(e,n)&&(t[n]=e[n]);return t};const Ro="[vue-draggable-plus]: ";function An(e){console.warn(Ro+e)}function Sn(e){console.error(Ro+e)}function so(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function Tn(e){return e.replace(/-(\w)/g,(o,t)=>t?t.toUpperCase():"")}function Vn(e){return Object.keys(e).reduce((o,t)=>(typeof e[t]<"u"&&(o[Tn(t)]=e[t]),o),{})}function uo(e,o){return Array.isArray(e)&&e.splice(o,1),e}function co(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function xn(e){return typeof e>"u"}function kn(e){return typeof e=="string"}function po(e,o,t){const n=e.children[t];e.insertBefore(o,n)}function It(e){e.parentNode&&e.parentNode.removeChild(e)}function On(e,o=document){var t;let n=null;return typeof(o==null?void 0:o.querySelector)=="function"?n=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):n=document.querySelector(e),n||An(`Element not found: ${e}`),n}function Pn(e,o,t=null){return function(...n){return e.apply(t,n),o.apply(t,n)}}function Nn(e,o){const t=We({},e);return Object.keys(o).forEach(n=>{t[n]?t[n]=Pn(e[n],o[n]):t[n]=o[n]}),t}function In(e){return e instanceof HTMLElement}function mo(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function Mn(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const Rn=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function fo(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function De(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?fo(Object(t),!0).forEach(function(n){Fn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function yt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yt=function(o){return typeof o}:yt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yt(e)}function Fn(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function Ve(){return Ve=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ve.apply(this,arguments)}function $n(e,o){if(e==null)return{};var t={},n=Object.keys(e),l,i;for(i=0;i<n.length;i++)l=n[i],!(o.indexOf(l)>=0)&&(t[l]=e[l]);return t}function Bn(e,o){if(e==null)return{};var t=$n(e,o),n,l;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Un="1.15.2";function Te(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var xe=Te(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ut=Te(/Edge/i),vo=Te(/firefox/i),lt=Te(/safari/i)&&!Te(/chrome/i)&&!Te(/android/i),Fo=Te(/iP(ad|od|hone)/i),$o=Te(/chrome/i)&&Te(/android/i),Bo={capture:!1,passive:!1};function B(e,o,t){e.addEventListener(o,t,!xe&&Bo)}function F(e,o,t){e.removeEventListener(o,t,!xe&&Bo)}function At(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function Ln(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function we(e,o,t,n){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&At(e,o):At(e,o))||n&&e===t)return e;if(e===t)break}while(e=Ln(e))}return null}var ho=/\s+/g;function me(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var n=(" "+e.className+" ").replace(ho," ").replace(" "+o+" "," ");e.className=(n+(t?" "+o:"")).replace(ho," ")}}function S(e,o,t){var n=e&&e.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in n)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),n[o]=t+(typeof t=="string"?"":"px")}}function qe(e,o){var t="";if(typeof e=="string")t=e;else do{var n=S(e,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!o&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Uo(e,o,t){if(e){var n=e.getElementsByTagName(o),l=0,i=n.length;if(t)for(;l<i;l++)t(n[l],l);return n}return[]}function Ce(){var e=document.scrollingElement;return e||document.documentElement}function ne(e,o,t,n,l){if(!(!e.getBoundingClientRect&&e!==window)){var i,r,u,a,v,y,g;if(e!==window&&e.parentNode&&e!==Ce()?(i=e.getBoundingClientRect(),r=i.top,u=i.left,a=i.bottom,v=i.right,y=i.height,g=i.width):(r=0,u=0,a=window.innerHeight,v=window.innerWidth,y=window.innerHeight,g=window.innerWidth),(o||t)&&e!==window&&(l=l||e.parentNode,!xe))do if(l&&l.getBoundingClientRect&&(S(l,"transform")!=="none"||t&&S(l,"position")!=="static")){var O=l.getBoundingClientRect();r-=O.top+parseInt(S(l,"border-top-width")),u-=O.left+parseInt(S(l,"border-left-width")),a=r+i.height,v=u+i.width;break}while(l=l.parentNode);if(n&&e!==window){var w=qe(l||e),h=w&&w.a,P=w&&w.d;w&&(r/=P,u/=h,g/=h,y/=P,a=r+y,v=u+g)}return{top:r,left:u,bottom:a,right:v,width:g,height:y}}}function go(e,o,t){for(var n=Re(e,!0),l=ne(e)[o];n;){var i=ne(n)[t],r=void 0;if(r=l>=i,!r)return n;if(n===Ce())break;n=Re(n,!1)}return!1}function Je(e,o,t,n){for(var l=0,i=0,r=e.children;i<r.length;){if(r[i].style.display!=="none"&&r[i]!==T.ghost&&(n||r[i]!==T.dragged)&&we(r[i],t.draggable,e,!1)){if(l===o)return r[i];l++}i++}return null}function oo(e,o){for(var t=e.lastElementChild;t&&(t===T.ghost||S(t,"display")==="none"||o&&!At(t,o));)t=t.previousElementSibling;return t||null}function ye(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==T.clone&&(!o||At(e,o))&&t++;return t}function bo(e){var o=0,t=0,n=Ce();if(e)do{var l=qe(e),i=l.a,r=l.d;o+=e.scrollLeft*i,t+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[o,t]}function Yn(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var n in o)if(o.hasOwnProperty(n)&&o[n]===e[t][n])return Number(t)}return-1}function Re(e,o){if(!e||!e.getBoundingClientRect)return Ce();var t=e,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=S(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ce();if(n||o)return t;n=!0}}while(t=t.parentNode);return Ce()}function zn(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function Mt(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var at;function Lo(e,o){return function(){if(!at){var t=arguments,n=this;t.length===1?e.call(n,t[0]):e.apply(n,t),at=setTimeout(function(){at=void 0},o)}}}function jn(){clearTimeout(at),at=void 0}function Yo(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function zo(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function jo(e,o,t){var n={};return Array.from(e.children).forEach(function(l){var i,r,u,a;if(!(!we(l,o.draggable,e,!1)||l.animated||l===t)){var v=ne(l);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,v.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,v.top),n.right=Math.max((u=n.right)!==null&&u!==void 0?u:-1/0,v.right),n.bottom=Math.max((a=n.bottom)!==null&&a!==void 0?a:-1/0,v.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var he="Sortable"+new Date().getTime();function Xn(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(n){if(!(S(n,"display")==="none"||n===T.ghost)){e.push({target:n,rect:ne(n)});var l=De({},e[e.length-1].rect);if(n.thisAnimationDuration){var i=qe(n,!0);i&&(l.top-=i.f,l.left-=i.e)}n.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Yn(e,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var l=!1,i=0;e.forEach(function(r){var u=0,a=r.target,v=a.fromRect,y=ne(a),g=a.prevFromRect,O=a.prevToRect,w=r.rect,h=qe(a,!0);h&&(y.top-=h.f,y.left-=h.e),a.toRect=y,a.thisAnimationDuration&&Mt(g,y)&&!Mt(v,y)&&(w.top-y.top)/(w.left-y.left)===(v.top-y.top)/(v.left-y.left)&&(u=Kn(w,g,O,n.options)),Mt(y,v)||(a.prevFromRect=v,a.prevToRect=y,u||(u=n.options.animation),n.animate(a,w,y,u)),u&&(l=!0,i=Math.max(i,u),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},u),a.thisAnimationDuration=u)}),clearTimeout(o),l?o=setTimeout(function(){typeof t=="function"&&t()},i):typeof t=="function"&&t(),e=[]},animate:function(t,n,l,i){if(i){S(t,"transition",""),S(t,"transform","");var r=qe(this.el),u=r&&r.a,a=r&&r.d,v=(n.left-l.left)/(u||1),y=(n.top-l.top)/(a||1);t.animatingX=!!v,t.animatingY=!!y,S(t,"transform","translate3d("+v+"px,"+y+"px,0)"),this.forRepaintDummy=Hn(t),S(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),S(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){S(t,"transition",""),S(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}function Hn(e){return e.offsetWidth}function Kn(e,o,t,n){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*n.animation}var Xe=[],Rt={initializeByDefault:!0},dt={mount:function(e){for(var o in Rt)Rt.hasOwnProperty(o)&&!(o in e)&&(e[o]=Rt[o]);Xe.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xe.push(e)},pluginEvent:function(e,o,t){var n=this;this.eventCanceled=!1,t.cancel=function(){n.eventCanceled=!0};var l=e+"Global";Xe.forEach(function(i){o[i.pluginName]&&(o[i.pluginName][l]&&o[i.pluginName][l](De({sortable:o},t)),o.options[i.pluginName]&&o[i.pluginName][e]&&o[i.pluginName][e](De({sortable:o},t)))})},initializePlugins:function(e,o,t,n){Xe.forEach(function(r){var u=r.pluginName;if(!(!e.options[u]&&!r.initializeByDefault)){var a=new r(e,o,e.options);a.sortable=e,a.options=e.options,e[u]=a,Ve(t,a.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var i=this.modifyOption(e,l,e.options[l]);typeof i<"u"&&(e.options[l]=i)}},getEventProperties:function(e,o){var t={};return Xe.forEach(function(n){typeof n.eventProperties=="function"&&Ve(t,n.eventProperties.call(o[n.pluginName],e))}),t},modifyOption:function(e,o,t){var n;return Xe.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(n=l.optionListeners[o].call(e[l.pluginName],t))}),n}};function Wn(e){var o=e.sortable,t=e.rootEl,n=e.name,l=e.targetEl,i=e.cloneEl,r=e.toEl,u=e.fromEl,a=e.oldIndex,v=e.newIndex,y=e.oldDraggableIndex,g=e.newDraggableIndex,O=e.originalEvent,w=e.putSortable,h=e.extraEventProperties;if(o=o||t&&t[he],!!o){var P,W=o.options,E="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!xe&&!ut?P=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(P=document.createEvent("Event"),P.initEvent(n,!0,!0)),P.to=r||t,P.from=u||t,P.item=l||t,P.clone=i,P.oldIndex=a,P.newIndex=v,P.oldDraggableIndex=y,P.newDraggableIndex=g,P.originalEvent=O,P.pullMode=w?w.lastPutMode:void 0;var $=De(De({},h),dt.getEventProperties(n,o));for(var V in $)P[V]=$[V];t&&t.dispatchEvent(P),W[E]&&W[E].call(o,P)}}var Gn=["evt"],ce=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.evt,l=Bn(t,Gn);dt.pluginEvent.bind(T)(e,o,De({dragEl:b,parentEl:J,ghostEl:x,rootEl:K,nextEl:Be,lastDownEl:_t,cloneEl:G,cloneHidden:Ie,dragStarted:tt,putSortable:ae,activeSortable:T.active,originalEvent:n,oldIndex:Ge,oldDraggableIndex:it,newIndex:fe,newDraggableIndex:Pe,hideGhostForTarget:Wo,unhideGhostForTarget:Go,cloneNowHidden:function(){Ie=!0},cloneNowShown:function(){Ie=!1},dispatchSortableEvent:function(i){ue({sortable:o,name:i,originalEvent:n})}},l))};function ue(e){Wn(De({putSortable:ae,cloneEl:G,targetEl:b,rootEl:K,oldIndex:Ge,oldDraggableIndex:it,newIndex:fe,newDraggableIndex:Pe},e))}var b,J,x,K,Be,_t,G,Ie,Ge,fe,it,Pe,ft,ae,Ke=!1,St=!1,Tt=[],Fe,_e,Ft,$t,yo,_o,tt,He,rt,st=!1,vt=!1,wt,re,Bt=[],Ht=!1,Vt=[],Ot=typeof document<"u",ht=Fo,wo=ut||xe?"cssFloat":"float",qn=Ot&&!$o&&!Fo&&"draggable"in document.createElement("div"),Xo=function(){if(Ot){if(xe)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ho=function(e,o){var t=S(e),n=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Je(e,0,o),i=Je(e,1,o),r=l&&S(l),u=i&&S(i),a=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ne(l).width,v=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ne(i).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&r.float&&r.float!=="none"){var y=r.float==="left"?"left":"right";return i&&(u.clear==="both"||u.clear===y)?"vertical":"horizontal"}return l&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||a>=n&&t[wo]==="none"||i&&t[wo]==="none"&&a+v>n)?"vertical":"horizontal"},Qn=function(e,o,t){var n=t?e.left:e.top,l=t?e.right:e.bottom,i=t?e.width:e.height,r=t?o.left:o.top,u=t?o.right:o.bottom,a=t?o.width:o.height;return n===r||l===u||n+i/2===r+a/2},Jn=function(e,o){var t;return Tt.some(function(n){var l=n[he].options.emptyInsertThreshold;if(!(!l||oo(n))){var i=ne(n),r=e>=i.left-l&&e<=i.right+l,u=o>=i.top-l&&o<=i.bottom+l;if(r&&u)return t=n}}),t},Ko=function(e){function o(l,i){return function(r,u,a,v){var y=r.options.group.name&&u.options.group.name&&r.options.group.name===u.options.group.name;if(l==null&&(i||y))return!0;if(l==null||l===!1)return!1;if(i&&l==="clone")return l;if(typeof l=="function")return o(l(r,u,a,v),i)(r,u,a,v);var g=(i?r:u).options.group.name;return l===!0||typeof l=="string"&&l===g||l.join&&l.indexOf(g)>-1}}var t={},n=e.group;(!n||yt(n)!="object")&&(n={name:n}),t.name=n.name,t.checkPull=o(n.pull,!0),t.checkPut=o(n.put),t.revertClone=n.revertClone,e.group=t},Wo=function(){!Xo&&x&&S(x,"display","none")},Go=function(){!Xo&&x&&S(x,"display","")};Ot&&!$o&&document.addEventListener("click",function(e){if(St)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),St=!1,!1},!0);var $e=function(e){if(b){e=e.touches?e.touches[0]:e;var o=Jn(e.clientX,e.clientY);if(o){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[he]._onDragOver(t)}}},Zn=function(e){b&&b.parentNode[he]._isOutsideThisEl(e.target)};function T(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=Ve({},o),e[he]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ho(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:T.supportPointer!==!1&&"PointerEvent"in window&&!lt,emptyInsertThreshold:5};dt.initializePlugins(this,e,t);for(var n in t)!(n in o)&&(o[n]=t[n]);Ko(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:qn,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?B(e,"pointerdown",this._onTapStart):(B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),Tt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),Ve(this,Xn())}T.prototype={constructor:T,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(He=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,b):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,n=this.options,l=n.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(r||e).target,a=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,v=n.filter;if(rl(t),!b&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||n.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&lt&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=we(u,n.draggable,t,!1),!(u&&u.animated)&&_t!==u)){if(Ge=ye(u),it=ye(u,n.draggable),typeof v=="function"){if(v.call(this,e,u,this)){ue({sortable:o,rootEl:a,name:"filter",targetEl:u,toEl:t,fromEl:t}),ce("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(y){if(y=we(a,y.trim(),t,!1),y)return ue({sortable:o,rootEl:y,name:"filter",targetEl:u,fromEl:t,toEl:t}),ce("filter",o,{evt:e}),!0}),v)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!we(a,n.handle,t,!1)||this._prepareDragStart(e,r,u)}}},_prepareDragStart:function(e,o,t){var n=this,l=n.el,i=n.options,r=l.ownerDocument,u;if(t&&!b&&t.parentNode===l){var a=ne(t);if(K=l,b=t,J=b.parentNode,Be=b.nextSibling,_t=t,ft=i.group,T.dragged=b,Fe={target:b,clientX:(o||e).clientX,clientY:(o||e).clientY},yo=Fe.clientX-a.left,_o=Fe.clientY-a.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,b.style["will-change"]="all",u=function(){if(ce("delayEnded",n,{evt:e}),T.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!vo&&n.nativeDraggable&&(b.draggable=!0),n._triggerDragStart(e,o),ue({sortable:n,name:"choose",originalEvent:e}),me(b,i.chosenClass,!0)},i.ignore.split(",").forEach(function(v){Uo(b,v.trim(),Ut)}),B(r,"dragover",$e),B(r,"mousemove",$e),B(r,"touchmove",$e),B(r,"mouseup",n._onDrop),B(r,"touchend",n._onDrop),B(r,"touchcancel",n._onDrop),vo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,b.draggable=!0),ce("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(ut||xe))){if(T.eventCanceled){this._onDrop();return}B(r,"mouseup",n._disableDelayedDrag),B(r,"touchend",n._disableDelayedDrag),B(r,"touchcancel",n._disableDelayedDrag),B(r,"mousemove",n._delayedDragTouchMoveHandler),B(r,"touchmove",n._delayedDragTouchMoveHandler),i.supportPointer&&B(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(u,i.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){b&&Ut(b),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):o?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(b,"dragend",this),B(K,"dragstart",this._onDragStart));try{document.selection?Et(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(Ke=!1,K&&b){ce("dragStarted",this,{evt:o}),this.nativeDraggable&&B(document,"dragover",Zn);var t=this.options;!e&&me(b,t.dragClass,!1),me(b,t.ghostClass,!0),T.active=this,e&&this._appendGhost(),ue({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(_e){this._lastX=_e.clientX,this._lastY=_e.clientY,Wo();for(var e=document.elementFromPoint(_e.clientX,_e.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(_e.clientX,_e.clientY),e!==o);)o=e;if(b.parentNode[he]._isOutsideThisEl(e),o)do{if(o[he]){var t=void 0;if(t=o[he]._onDragOver({clientX:_e.clientX,clientY:_e.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);Go()}},_onTouchMove:function(e){if(Fe){var o=this.options,t=o.fallbackTolerance,n=o.fallbackOffset,l=e.touches?e.touches[0]:e,i=x&&qe(x,!0),r=x&&i&&i.a,u=x&&i&&i.d,a=ht&&re&&bo(re),v=(l.clientX-Fe.clientX+n.x)/(r||1)+(a?a[0]-Bt[0]:0)/(r||1),y=(l.clientY-Fe.clientY+n.y)/(u||1)+(a?a[1]-Bt[1]:0)/(u||1);if(!T.active&&!Ke){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(x){i?(i.e+=v-(Ft||0),i.f+=y-($t||0)):i={a:1,b:0,c:0,d:1,e:v,f:y};var g="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");S(x,"webkitTransform",g),S(x,"mozTransform",g),S(x,"msTransform",g),S(x,"transform",g),Ft=v,$t=y,_e=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:K,o=ne(b,!0,ht,!0,e),t=this.options;if(ht){for(re=e;S(re,"position")==="static"&&S(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=Ce()),o.top+=re.scrollTop,o.left+=re.scrollLeft):re=Ce(),Bt=bo(re)}x=b.cloneNode(!0),me(x,t.ghostClass,!1),me(x,t.fallbackClass,!0),me(x,t.dragClass,!0),S(x,"transition",""),S(x,"transform",""),S(x,"box-sizing","border-box"),S(x,"margin",0),S(x,"top",o.top),S(x,"left",o.left),S(x,"width",o.width),S(x,"height",o.height),S(x,"opacity","0.8"),S(x,"position",ht?"absolute":"fixed"),S(x,"zIndex","100000"),S(x,"pointerEvents","none"),T.ghost=x,e.appendChild(x),S(x,"transform-origin",yo/parseInt(x.style.width)*100+"% "+_o/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,n=e.dataTransfer,l=t.options;if(ce("dragStart",this,{evt:e}),T.eventCanceled){this._onDrop();return}ce("setupClone",this),T.eventCanceled||(G=zo(b),G.removeAttribute("id"),G.draggable=!1,G.style["will-change"]="",this._hideClone(),me(G,this.options.chosenClass,!1),T.clone=G),t.cloneId=Et(function(){ce("clone",t),!T.eventCanceled&&(t.options.removeCloneOnHide||K.insertBefore(G,b),t._hideClone(),ue({sortable:t,name:"clone"}))}),!o&&me(b,l.dragClass,!0),o?(St=!0,t._loopId=setInterval(t._emulateDragOver,50)):(F(document,"mouseup",t._onDrop),F(document,"touchend",t._onDrop),F(document,"touchcancel",t._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(t,n,b)),B(document,"drop",t),S(b,"transform","translateZ(0)")),Ke=!0,t._dragStartId=Et(t._dragStarted.bind(t,o,e)),B(document,"selectstart",t),tt=!0,lt&&S(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,n,l,i,r=this.options,u=r.group,a=T.active,v=ft===u,y=r.sort,g=ae||a,O,w=this,h=!1;if(Ht)return;function P(D,f){ce(D,w,De({evt:e,isOwner:v,axis:O?"vertical":"horizontal",revert:i,dragRect:n,targetRect:l,canSort:y,fromSortable:g,target:t,completed:E,onMove:function(c,A){return gt(K,o,b,n,c,ne(c),e,A)},changed:$},f))}function W(){P("dragOverAnimationCapture"),w.captureAnimationState(),w!==g&&g.captureAnimationState()}function E(D){return P("dragOverCompleted",{insertion:D}),D&&(v?a._hideClone():a._showClone(w),w!==g&&(me(b,ae?ae.options.ghostClass:a.options.ghostClass,!1),me(b,r.ghostClass,!0)),ae!==w&&w!==T.active?ae=w:w===T.active&&ae&&(ae=null),g===w&&(w._ignoreWhileAnimating=t),w.animateAll(function(){P("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(t===b&&!b.animated||t===o&&!t.animated)&&(He=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(b.parentNode[he]._isOutsideThisEl(e.target),!D&&$e(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function $(){fe=ye(b),Pe=ye(b,r.draggable),ue({sortable:w,name:"change",toEl:o,newIndex:fe,newDraggableIndex:Pe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=we(t,r.draggable,o,!0),P("dragOver"),T.eventCanceled)return h;if(b.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||w._ignoreWhileAnimating===t)return E(!1);if(St=!1,a&&!r.disabled&&(v?y||(i=J!==K):ae===this||(this.lastPutMode=ft.checkPull(this,a,b,e))&&u.checkPut(this,a,b,e))){if(O=this._getDirection(e,t)==="vertical",n=ne(b),P("dragOverValid"),T.eventCanceled)return h;if(i)return J=K,W(),this._hideClone(),P("revert"),T.eventCanceled||(Be?K.insertBefore(b,Be):K.appendChild(b)),E(!0);var V=oo(o,r.draggable);if(!V||nl(e,O,this)&&!V.animated){if(V===b)return E(!1);if(V&&o===e.target&&(t=V),t&&(l=ne(t)),gt(K,o,b,n,t,l,e,!!t)!==!1)return W(),V&&V.nextSibling?o.insertBefore(b,V.nextSibling):o.appendChild(b),J=o,$(),E(!0)}else if(V&&ol(e,O,this)){var U=Je(o,0,r,!0);if(U===b)return E(!1);if(t=U,l=ne(t),gt(K,o,b,n,t,l,e,!1)!==!1)return W(),o.insertBefore(b,U),J=o,$(),E(!0)}else if(t.parentNode===o){l=ne(t);var L=0,pe,ge=b.parentNode!==o,C=!Qn(b.animated&&b.toRect||n,t.animated&&t.toRect||l,O),N=O?"top":"left",z=go(t,"top","top")||go(b,"top","top"),q=z?z.scrollTop:void 0;He!==t&&(pe=l[N],st=!1,vt=!C&&r.invertSwap||ge),L=ll(e,t,l,O,C?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,vt,He===t);var Y;if(L!==0){var X=ye(b);do X-=L,Y=J.children[X];while(Y&&(S(Y,"display")==="none"||Y===x))}if(L===0||Y===t)return E(!1);He=t,rt=L;var Z=t.nextElementSibling,Q=!1;Q=L===1;var se=gt(K,o,b,n,t,l,e,Q);if(se!==!1)return(se===1||se===-1)&&(Q=se===1),Ht=!0,setTimeout(tl,30),W(),Q&&!Z?o.appendChild(b):t.parentNode.insertBefore(b,Q?Z:t),z&&Yo(z,0,q-z.scrollTop),J=b.parentNode,pe!==void 0&&!vt&&(wt=Math.abs(pe-ne(t)[N])),$(),E(!0)}if(o.contains(b))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",$e),F(document,"mousemove",$e),F(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(fe=ye(b),Pe=ye(b,t.draggable),ce("drop",this,{evt:e}),J=b&&b.parentNode,fe=ye(b),Pe=ye(b,t.draggable),T.eventCanceled){this._nulling();return}Ke=!1,vt=!1,st=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Kt(this.cloneId),Kt(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),lt&&S(document.body,"user-select",""),S(b,"transform",""),e&&(tt&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(K===J||ae&&ae.lastPutMode!=="clone")&&G&&G.parentNode&&G.parentNode.removeChild(G),b&&(this.nativeDraggable&&F(b,"dragend",this),Ut(b),b.style["will-change"]="",tt&&!Ke&&me(b,ae?ae.options.ghostClass:this.options.ghostClass,!1),me(b,this.options.chosenClass,!1),ue({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==J?(fe>=0&&(ue({rootEl:J,name:"add",toEl:J,fromEl:K,originalEvent:e}),ue({sortable:this,name:"remove",toEl:J,originalEvent:e}),ue({rootEl:J,name:"sort",toEl:J,fromEl:K,originalEvent:e}),ue({sortable:this,name:"sort",toEl:J,originalEvent:e})),ae&&ae.save()):fe!==Ge&&fe>=0&&(ue({sortable:this,name:"update",toEl:J,originalEvent:e}),ue({sortable:this,name:"sort",toEl:J,originalEvent:e})),T.active&&((fe==null||fe===-1)&&(fe=Ge,Pe=it),ue({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ce("nulling",this),K=b=J=x=Be=G=_t=Ie=Fe=_e=tt=fe=Pe=Ge=it=He=rt=ae=ft=T.dragged=T.ghost=T.clone=T.active=null,Vt.forEach(function(e){e.checked=!0}),Vt.length=Ft=$t=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":b&&(this._onDragOver(e),el(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,n=0,l=t.length,i=this.options;n<l;n++)o=t[n],we(o,i.draggable,this.el,!1)&&e.push(o.getAttribute(i.dataIdAttr)||il(o));return e},sort:function(e,o){var t={},n=this.el;this.toArray().forEach(function(l,i){var r=n.children[i];we(r,this.options.draggable,n,!1)&&(t[l]=r)},this),o&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(n.removeChild(t[l]),n.appendChild(t[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return we(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var n=dt.modifyOption(this,e,o);typeof n<"u"?t[e]=n:t[e]=o,e==="group"&&Ko(t)},destroy:function(){ce("destroy",this);var e=this.el;e[he]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Tt.splice(Tt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ie){if(ce("hideClone",this),T.eventCanceled)return;S(G,"display","none"),this.options.removeCloneOnHide&&G.parentNode&&G.parentNode.removeChild(G),Ie=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ie){if(ce("showClone",this),T.eventCanceled)return;b.parentNode==K&&!this.options.group.revertClone?K.insertBefore(G,b):Be?K.insertBefore(G,Be):K.appendChild(G),this.options.group.revertClone&&this.animate(b,G),S(G,"display",""),Ie=!1}}};function el(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function gt(e,o,t,n,l,i,r,u){var a,v=e[he],y=v.options.onMove,g;return window.CustomEvent&&!xe&&!ut?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=o,a.from=e,a.dragged=t,a.draggedRect=n,a.related=l||o,a.relatedRect=i||ne(o),a.willInsertAfter=u,a.originalEvent=r,e.dispatchEvent(a),y&&(g=y.call(v,a,r)),g}function Ut(e){e.draggable=!1}function tl(){Ht=!1}function ol(e,o,t){var n=ne(Je(t.el,0,t.options,!0)),l=jo(t.el,t.options,x),i=10;return o?e.clientX<l.left-i||e.clientY<n.top&&e.clientX<n.right:e.clientY<l.top-i||e.clientY<n.bottom&&e.clientX<n.left}function nl(e,o,t){var n=ne(oo(t.el,t.options.draggable)),l=jo(t.el,t.options,x),i=10;return o?e.clientX>l.right+i||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>l.bottom+i||e.clientX>n.right&&e.clientY>n.top}function ll(e,o,t,n,l,i,r,u){var a=n?e.clientY:e.clientX,v=n?t.height:t.width,y=n?t.top:t.left,g=n?t.bottom:t.right,O=!1;if(!r){if(u&&wt<v*l){if(!st&&(rt===1?a>y+v*i/2:a<g-v*i/2)&&(st=!0),st)O=!0;else if(rt===1?a<y+wt:a>g-wt)return-rt}else if(a>y+v*(1-l)/2&&a<g-v*(1-l)/2)return al(o)}return O=O||r,O&&(a<y+v*i/2||a>g-v*i/2)?a>y+v/2?1:-1:0}function al(e){return ye(b)<ye(e)?1:-1}function il(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,n=0;t--;)n+=o.charCodeAt(t);return n.toString(36)}function rl(e){Vt.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var n=o[t];n.checked&&Vt.push(n)}}function Et(e){return setTimeout(e,0)}function Kt(e){return clearTimeout(e)}Ot&&B(document,"touchmove",function(e){(T.active||Ke)&&e.cancelable&&e.preventDefault()});T.utils={on:B,off:F,css:S,find:Uo,is:function(e,o){return!!we(e,o,e,!1)},extend:zn,throttle:Lo,closest:we,toggleClass:me,clone:zo,index:ye,nextTick:Et,cancelNextTick:Kt,detectDirection:Ho,getChild:Je};T.get=function(e){return e[he]};T.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(T.utils=De(De({},T.utils),n.utils)),dt.mount(n)})};T.create=function(e,o){return new T(e,o)};T.version=Un;var oe=[],ot,Wt,Gt=!1,Lt,Yt,xt,nt;function sl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):t.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),Eo(),Ct(),jn()},nulling:function(){xt=Wt=ot=Gt=nt=Lt=Yt=null,oe.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var n=this,l=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,r=document.elementFromPoint(l,i);if(xt=o,t||this.options.forceAutoScrollFallback||ut||xe||lt){zt(o,this.options,r,t);var u=Re(r,!0);Gt&&(!nt||l!==Lt||i!==Yt)&&(nt&&Eo(),nt=setInterval(function(){var a=Re(document.elementFromPoint(l,i),!0);a!==u&&(u=a,Ct()),zt(o,n.options,a,t)},10),Lt=l,Yt=i)}else{if(!this.options.bubbleScroll||Re(r,!0)===Ce()){Ct();return}zt(o,this.options,Re(r,!1),!1)}}},Ve(e,{pluginName:"scroll",initializeByDefault:!0})}function Ct(){oe.forEach(function(e){clearInterval(e.pid)}),oe=[]}function Eo(){clearInterval(nt)}var zt=Lo(function(e,o,t,n){if(o.scroll){var l=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=o.scrollSensitivity,u=o.scrollSpeed,a=Ce(),v=!1,y;Wt!==t&&(Wt=t,Ct(),ot=o.scroll,y=o.scrollFn,ot===!0&&(ot=Re(t,!0)));var g=0,O=ot;do{var w=O,h=ne(w),P=h.top,W=h.bottom,E=h.left,$=h.right,V=h.width,U=h.height,L=void 0,pe=void 0,ge=w.scrollWidth,C=w.scrollHeight,N=S(w),z=w.scrollLeft,q=w.scrollTop;w===a?(L=V<ge&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),pe=U<C&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(L=V<ge&&(N.overflowX==="auto"||N.overflowX==="scroll"),pe=U<C&&(N.overflowY==="auto"||N.overflowY==="scroll"));var Y=L&&(Math.abs($-l)<=r&&z+V<ge)-(Math.abs(E-l)<=r&&!!z),X=pe&&(Math.abs(W-i)<=r&&q+U<C)-(Math.abs(P-i)<=r&&!!q);if(!oe[g])for(var Z=0;Z<=g;Z++)oe[Z]||(oe[Z]={});(oe[g].vx!=Y||oe[g].vy!=X||oe[g].el!==w)&&(oe[g].el=w,oe[g].vx=Y,oe[g].vy=X,clearInterval(oe[g].pid),(Y!=0||X!=0)&&(v=!0,oe[g].pid=setInterval((function(){n&&this.layer===0&&T.active._onTouchMove(xt);var Q=oe[this.layer].vy?oe[this.layer].vy*u:0,se=oe[this.layer].vx?oe[this.layer].vx*u:0;typeof y=="function"&&y.call(T.dragged.parentNode[he],se,Q,e,xt,oe[this.layer].el)!=="continue"||Yo(oe[this.layer].el,se,Q)}).bind({layer:g}),24))),g++}while(o.bubbleScroll&&O!==a&&(O=Re(O,!1)));Gt=v}},30),qo=function(e){var o=e.originalEvent,t=e.putSortable,n=e.dragEl,l=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var a=t||l;r();var v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,y=document.elementFromPoint(v.clientX,v.clientY);u(),a&&!a.el.contains(y)&&(i("spill"),this.onSpill({dragEl:n,putSortable:t}))}};function no(){}no.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var n=Je(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(o,n):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:qo};Ve(no,{pluginName:"revertOnSpill"});function lo(){}lo.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,n=t||this.sortable;n.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),n.animateAll()},drop:qo};Ve(lo,{pluginName:"removeOnSpill"});T.mount(new sl);T.mount(lo,no);function ul(e){return e==null?e:JSON.parse(JSON.stringify(e))}function dl(e){Jt()&&ln(e)}function cl(e){Jt()?So(e):To(e)}let Qo=null,Jo=null;function Co(e=null,o=null){Qo=e,Jo=o}function pl(){return{data:Qo,clonedData:Jo}}const Do=Symbol("cloneElement");function ml(...e){var o,t;const n=(o=Jt())==null?void 0:o.proxy;let l=null;const i=e[0];let[,r,u]=e;Array.isArray(_(r))||(u=r,r=null);let a=null;const{immediate:v=!0,clone:y=ul,customUpdate:g}=(t=_(u))!=null?t:{};function O(C){var N;const{from:z,oldIndex:q,item:Y}=C;l=Array.from(z.childNodes);const X=_((N=_(r))==null?void 0:N[q]),Z=y(X);Co(X,Z),Y[Do]=Z}function w(C){const N=C.item[Do];if(!xn(N)){if(It(C.item),Nt(r)){const z=[..._(r)];r.value=co(z,C.newDraggableIndex,N);return}co(_(r),C.newDraggableIndex,N)}}function h(C){const{from:N,item:z,oldIndex:q,oldDraggableIndex:Y,pullMode:X,clone:Z}=C;if(po(N,z,q),X==="clone"){It(Z);return}if(Nt(r)){const Q=[..._(r)];r.value=uo(Q,Y);return}uo(_(r),Y)}function P(C){if(g){g(C);return}const{from:N,item:z,oldIndex:q,newIndex:Y}=C;if(It(z),po(N,z,q),Nt(r)){const X=[..._(r)];r.value=so(X,q,Y);return}so(_(r),q,Y)}function W(C){const{newIndex:N,oldIndex:z,from:q,to:Y}=C;let X=null;const Z=N===z&&q===Y;try{if(Z){let Q=null;l==null||l.some((se,D)=>{if(Q&&(l==null?void 0:l.length)!==Y.childNodes.length)return q.insertBefore(Q,se.nextSibling),!0;const f=Y.childNodes[D];Q=Y==null?void 0:Y.replaceChild(se,f)})}}catch(Q){X=Q}finally{l=null}To(()=>{if(Co(),X)throw X})}const E={onUpdate:P,onStart:O,onAdd:w,onRemove:h,onEnd:W};function $(C){const N=_(i);return C||(C=kn(N)?On(N,n==null?void 0:n.$el):N),C&&!In(C)&&(C=C.$el),C||Sn("Root element not found"),C}function V(){var C;const N=(C=_(u))!=null?C:{},z=Mo(N,["immediate","clone"]);return mo(z,(q,Y)=>{Mn(q)&&(z[q]=(X,...Z)=>{const Q=pl();return Rn(X,Q),Y(X,...Z)})}),Nn(r===null?{}:E,z)}const U=C=>{C=$(C),a&&L.destroy(),a=new T(C,V())};Qe(()=>u,()=>{a&&mo(V(),(C,N)=>{a==null||a.option(C,N)})},{deep:!0});const L={option:(C,N)=>a==null?void 0:a.option(C,N),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...C)=>a==null?void 0:a.closest(...C)},pe=()=>L==null?void 0:L.option("disabled",!0),ge=()=>L==null?void 0:L.option("disabled",!1);return cl(()=>{v&&U()}),dl(L.destroy),We({start:U,pause:pe,resume:ge},L)}const qt=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],fl=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...qt.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)],vl=en({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:fl,emits:["update:modelValue",...qt],setup(e,{slots:o,emit:t,expose:n,attrs:l}){const i=qt.reduce((y,g)=>{const O=`on${g.replace(/^\S/,w=>w.toUpperCase())}`;return y[O]=(...w)=>t(g,...w),y},{}),r=Ne(()=>{const y=tn(e),g=Mo(y,["modelValue"]),O=Object.entries(g).reduce((w,[h,P])=>{const W=_(P);return W!==void 0&&(w[h]=W),w},{});return We(We({},i),Vn(We(We({},l),O)))}),u=Ne({get:()=>e.modelValue,set:y=>t("update:modelValue",y)}),a=te(),v=on(ml(e.target||a,u,r));return n(v),()=>{var y;return nn(e.tag||"div",{ref:a},(y=o==null?void 0:o.default)==null?void 0:y.call(o,v))}}}),hl={__name:"AddQuoteDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:String,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,{generateQuote:n}=Vo(),{getOpportunitybyId:l,opportunity:i,changeStatusByOpportunity:r}=kt(),u=te(!1),a=te({social_reason:"",nit:"",address:"",email:"",phone:"",landline:"",workplace:"",expiration_date:null,creation_date:new Date().toISOString().split("T")[0],observations:"",payment_method:null,amount:null,initial_fee:null,percentage_initial_fee:null,balance:null,opportunity_id:null,customer_id:null,properties:[{property_id:null,price:null,price_it:null,price_contrato:null,property_type:pt.DEPARTAMENT.value,property_type_name:pt.DEPARTAMENT.label},{property_id:null,price:null,price_it:null,price_contrato:null,property_type:pt.PARK.value,property_type_name:pt.PARK.label}],differs_initial_fee:[],differs_balance:[]}),v=Ne(()=>a.value.social_reason&&a.value.nit&&a.value.phone&&a.value.amount&&a.value.creation_date&&a.value.expiration_date&&a.value.payment_method&&a.value.customer_id),y=Ne(()=>a.value.properties.every(E=>E.property_id!==null&&E.price!==null&&E.price_it!==null&&E.price_contrato!==null)),g=Ne(()=>a.value.differs_initial_fee.length===0?!0:a.value.differs_initial_fee.every(E=>E.amount!==null)),O=Ne(()=>{if(a.value.differs_initial_fee.length===0)return!0;const E=a.value.differs_initial_fee.reduce((U,L)=>U+(L.amount||0),0),$=parseFloat(E),V=parseFloat(a.value.initial_fee);return $===V}),w=Ne(()=>v.value&&y.value&&g.value),h=E=>{a.value.properties.push(E)},P=E=>{a.value.properties.splice(E,1)},W=async()=>{if(!w.value){io("Validación fallida","Completa todos los campos obligatorios.");return}if(!O.value){io("Validación fallida","La suma de las diferencias del anticipo no son correctas");return}u.value=!0;try{console.log(a),await n(a.value),await r(t.opportunityKanban.id,Me.PRESALE.value,{})}catch(E){console.error("Error generando la venta:",E)}finally{u.value=!1}};return Qe(()=>a.value.properties,E=>{let $=0;E.forEach(V=>{if(V.price){const U=parseFloat(V.price)||0;V.price_it=U*.03,V.price_contrato=U+V.price_it,$+=V.price_contrato}else V.price_it=null}),a.value.amount=$},{deep:!0}),Qe(()=>t.isDialogVisible,async E=>{E&&(console.log("El diálogo se ha abierto"),await l(t.opportunityKanban.id),console.log("Datos de la oportunidad cargados:",i.value),a.value.customer_id=i.value.customer.id,i.value&&(a.value.social_reason=i.value.customer.name,a.value.email=i.value.customer.email,a.value.phone=i.value.customer.phone,a.value.nit=i.value.customer.ci,a.value.opportunity_id=i.value.id,i.value.property_id!==null?(i.value.property.property_type==="PARK"&&(a.value.properties[1].property_id=i.value.property_id,a.value.properties[0].property_id=null,a.value.properties[0].price=null,a.value.properties[0].price_it=null,a.value.properties[0].price_contrato=null),i.value.property.property_type==="DEPARTAMENT"&&(a.value.properties[0].property_id=i.value.property_id,a.value.properties[1].property_id=null,a.value.properties[1].price=null,a.value.properties[1].price_it=null,a.value.properties[1].price_contrato=null)):(a.value.properties[1].property_id=null,a.value.properties[1].price=null,a.value.properties[1].price_it=null,a.value.properties[1].price_contrato=null,a.value.properties[0].property_id=null,a.value.properties[0].price=null,a.value.properties[0].price_it=null,a.value.properties[0].price_contrato=null)))}),(E,$)=>{const V=eo;return k(),Ee(to,{"max-width":"987","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":$[2]||($[2]=U=>E.$emit("update:isDialogVisible",U))},{default:d(()=>[s(V,{onClick:$[0]||($[0]=U=>E.$emit("update:isDialogVisible",!1))}),s(ke,null,{default:d(()=>[s(Ue,null,{default:d(()=>[s(Oe,null,{default:d(()=>[s(j,{cols:"12"},{default:d(()=>[s(cn,{data:a.value,onPush:h,onRemove:P},null,8,["data"])]),_:1}),s(j,{cols:"12",class:"d-flex justify-end align-center gap-x-4"},{default:d(()=>[s(de,{loading:u.value,disabled:u.value,color:"primary",onClick:W},{default:d(()=>$[3]||($[3]=[ee(" Guardar Cotizaciónasa ")])),_:1},8,["loading","disabled"]),s(de,{text:"",color:"error",onClick:$[1]||($[1]=U=>E.$emit("update:isDialogVisible",!1))},{default:d(()=>$[4]||($[4]=[ee(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},gl={__name:"AddActivity",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0},typeActivities:{type:Array,default:()=>[]}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{registerActivity:l,loadingActivity:i}=Zt(),{generateProspect:r}=kt(),u=te({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),a=()=>{n("formCancelled"),n("update:isDialogVisible",!1)},v=async()=>{await l(u.value),console.log("opportunityKanban",t.opportunityKanban.stage),t.opportunityKanban.stage==="LEAD"&&await r(t.opportunityKanban.id,{}),u.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},n("update:isDialogVisible",!1)};return Qe(()=>t.isDialogVisible,async y=>{var g,O;y===!0&&(u.value.opportunity_id=((g=t.opportunityKanban)==null?void 0:g.id)??null,u.value.assigned_to=((O=t.opportunityKanban)==null?void 0:O.user_id)??null,console.log(t.opportunityKanban))}),(y,g)=>{const O=eo,w=Qt,h=Po,P=Oo,W=ko;return k(),Ee(to,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":a},{default:d(()=>[s(O,{onClick:a}),s(ke,{class:"pa-sm-8"},{default:d(()=>[s(pn,null,{default:d(()=>[s(xo,{class:"text-h3 font-weight-medium mb-3"},{default:d(()=>g[4]||(g[4]=[ee(" Agregar Actividad ")])),_:1}),s(Ue,null,{default:d(()=>[s(jt,{onSubmit:Le(v,["prevent"])},{default:d(()=>[s(Oe,null,{default:d(()=>[s(j,{cols:"12"},{default:d(()=>[s(w,{modelValue:u.value.title,"onUpdate:modelValue":g[0]||(g[0]=E=>u.value.title=E),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(h,{modelValue:u.value.type_activity_id,"onUpdate:modelValue":g[1]||(g[1]=E=>u.value.type_activity_id=E),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:t.typeActivities.map(E=>({title:E.name,value:E.id}))},null,8,["modelValue","items"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(P,{modelValue:u.value.scheduled_at,"onUpdate:modelValue":g[2]||(g[2]=E=>u.value.scheduled_at=E),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),s(j,{cols:"12"},{default:d(()=>[s(W,{modelValue:u.value.description,"onUpdate:modelValue":g[3]||(g[3]=E=>u.value.description=E),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",class:"text-center"},{default:d(()=>[s(de,{type:"submit",class:"me-3",disabled:_(i),loading:_(i)},{default:d(()=>g[5]||(g[5]=[ee(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),s(de,{color:"secondary",variant:"tonal",onClick:a},{default:d(()=>g[6]||(g[6]=[ee(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Ao={PENDING:{value:"PENDING",label:"PENDIENTE"},COMPLETED:{value:"COMPLETED",label:"COMPLETADO"},CANCELED:{value:"CANCELED",label:"CANCELADO"}},bl={key:0},yl={key:1,class:"text-center my-5"},_l={class:"d-flex"},wl={class:"my-5"},El={key:0,class:"d-flex flex-wrap gap-2 my-5"},Cl={key:1},Dl={class:"mb-4"},Al={class:"my-5"},Sl={key:0},Tl=["src"],Vl={class:"my-5"},xl={key:0,class:"d-flex flex-wrap gap-2 my-5"},kl={key:1},Ol={__name:"TaskKanban",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{changeStatusQuotesCustomer:l}=Vo(),{checkProcessForOpportunity:i}=un(),{propertiesAvailbles:r,properties:u}=fn(),{getallTypeActivities:a,typeActivities:v,registerActivity:y,loadingActivity:g,changeStatusActivity:O}=Zt(),{getOpportunitybyId:w,opportunity:h,changeOpportunity:P,loadingOpportunity:W}=kt(),{SaleChangeSignature:E}=vn(),{confirmPaymentPlans:$}=dn(),V=te({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:h.value.id,assigned_to:null}),U=()=>{n("update:isDialogVisible",!1)},L=te([{title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}]),pe=f=>f==="CASH"?"Al Contado":f==="DIRECTCREDIT"?"Crédito Directo":f==="BANKCREDIT"?"Crédito Bancario":f,ge=f=>f==="SALE"?"VENDIDO":f==="DISCARD"?"CANCELADO":f==="DELIVERY"?"ENTREGADO":f,C=te(L.value[0].value),N=async()=>{var f;(f=t.opportunityKanban)!=null&&f.id&&await w(t.opportunityKanban.id)},z=async()=>{V.value.opportunity_id=h.value.id,await y(V.value),V.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},U()},q=async()=>{console.log("antes del save:",h);const f={id:h.value.id,stage_id:h.value.stage_id,description:h.value.description,property_id:h.value.property_id,customer:{id:h.value.customer.id,name:h.value.customer.name,email:h.value.customer.email,ci:h.value.customer.ci,cod_phone:h.value.cod_phone,phone:h.value.customer.phone,type_customer:h.value.customer.type_customer}};await P(h.value.id,f),U()},Y=async f=>{await O(f,{state_activity:Ao.COMPLETED.value}),U()},X=()=>{const f=[];f.push({title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}),t.opportunityKanban.stage===Me.DELIVERY.label&&f.push({title:"Entrega",value:"delivery"}),t.opportunityKanban.stage===Me.SALE.label&&f.push({title:"Ventas",value:"sales"}),t.opportunityKanban.stage===Me.PRESALE.label&&f.push({title:"Cotizaciones",value:"quotations"}),L.value=f,C.value=L.value[0].value};Qe(()=>t.isDialogVisible,async f=>{f&&(await N(),X(),await r(),await a())});const Z=async(f,c)=>{const A=c==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${f} marcado como: ${c}`),await l(f,{status:A})},Q=async f=>{console.log("entra a firma"),await E(f)},se=async f=>{console.log(`Procedimiento ${f.id} marcado como: ${f.pivot.is_check?"realizado":"no realizado"}`),await i(h.value.id,f.id,{is_check:!f.pivot.is_check}),f.pivot.is_check=!f.pivot.is_check},D=async f=>{await $(f)};return(f,c)=>{const A=eo,le=Qt,I=Po,ie=mn,Ye=ko,Pt=Oo,Ze=ao("RouterLink"),Zo=ao("IconBtn");return k(),Ee(to,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":U},{default:d(()=>[s(A,{onClick:U}),s(j,{cols:"12",style:{display:"flex","flex-direction":"column"}},{default:d(()=>[s(ke,{class:"pa-sm-4"},{default:d(()=>[s(hn,{modelValue:C.value,"onUpdate:modelValue":c[0]||(c[0]=p=>C.value=p)},{default:d(()=>[(k(!0),M(ve,null,be(L.value,p=>(k(),Ee(gn,{key:p.value,value:p.value},{default:d(()=>[ee(R(p.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(bn,{modelValue:C.value,"onUpdate:modelValue":c[13]||(c[13]=p=>C.value=p)},{default:d(()=>[s(ze,{value:"information",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[s(ke,{title:"Información del Cliente y Oportunidad"},{default:d(()=>[s(Ue,null,{default:d(()=>[s(jt,{onSubmit:Le(q,["prevent"])},{default:d(()=>[s(Oe,null,{default:d(()=>[s(j,{cols:"12",md:"6"},{default:d(()=>[s(le,{modelValue:_(h).customer.name,"onUpdate:modelValue":c[1]||(c[1]=p=>_(h).customer.name=p),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(le,{modelValue:_(h).customer.email,"onUpdate:modelValue":c[2]||(c[2]=p=>_(h).customer.email=p),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(Oe,null,{default:d(()=>[s(j,{cols:"4"},{default:d(()=>[s(I,{modelValue:_(h).customer.cod_phone,"onUpdate:modelValue":c[3]||(c[3]=p=>_(h).customer.cod_phone=p),label:"Código",items:["+1","+52","+55","+54","+49","+33","+34","+39","+86","+81","+7","+591"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),s(j,{cols:"8"},{default:d(()=>[s(le,{modelValue:_(h).customer.phone,"onUpdate:modelValue":c[4]||(c[4]=p=>_(h).customer.phone=p),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(le,{modelValue:_(h).customer.ci,"onUpdate:modelValue":c[5]||(c[5]=p=>_(h).customer.ci=p),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(ie,{modelValue:_(h).property_id,"onUpdate:modelValue":c[6]||(c[6]=p=>_(h).property_id=p),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:_(u).map(p=>({title:p.title,value:p.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(I,{modelValue:_(h).customer.type_customer,"onUpdate:modelValue":c[7]||(c[7]=p=>_(h).customer.type_customer=p),label:"Tipo de Cliente",items:["Olvidadizo","Familiar","Decidido","Indeciso","Exigente","Referido","Inversionista","Recuperado","Curioso"],placeholder:"Tipo de Cliente",outlined:""},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(Ye,{modelValue:_(h).description,"onUpdate:modelValue":c[8]||(c[8]=p=>_(h).description=p),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"2","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6",class:"text-center mt-5"},{default:d(()=>[s(de,{type:"submit",color:"primary",class:"me-3",disabled:_(W),loading:_(W)},{default:d(()=>c[14]||(c[14]=[ee(" Guardar Cambios ")])),_:1},8,["disabled","loading"]),s(de,{color:"error",onClick:U},{default:d(()=>c[15]||(c[15]=[ee(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(ze,{value:"add_activity",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[s(ke,{title:"Agregar Actividad"},{default:d(()=>[s(Ue,null,{default:d(()=>[s(jt,{onSubmit:Le(z,["prevent"])},{default:d(()=>[s(Oe,null,{default:d(()=>[s(j,{cols:"12",md:"6"},{default:d(()=>[s(le,{modelValue:V.value.title,"onUpdate:modelValue":c[9]||(c[9]=p=>V.value.title=p),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(I,{modelValue:V.value.type_activity_id,"onUpdate:modelValue":c[10]||(c[10]=p=>V.value.type_activity_id=p),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:_(v).map(p=>({title:p.name,value:p.id}))},null,8,["modelValue","items"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(Pt,{modelValue:V.value.scheduled_at,"onUpdate:modelValue":c[11]||(c[11]=p=>V.value.scheduled_at=p),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[s(Ye,{modelValue:V.value.description,"onUpdate:modelValue":c[12]||(c[12]=p=>V.value.description=p),label:"Detalla tu Actividad",rows:"2",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),s(j,{cols:"12",class:"text-center"},{default:d(()=>[s(de,{type:"submit",class:"me-3",disabled:_(g),loading:_(g)},{default:d(()=>c[16]||(c[16]=[ee(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),s(de,{color:"error",onClick:U},{default:d(()=>c[17]||(c[17]=[ee(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(ze,{value:"activity_list",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[s(ke,{title:"Lista de Actividades"},{default:d(()=>[s(_(yn),{headers:[{title:"Actividad",value:"title"},{title:"Fecha",value:"scheduled_at"},{title:"Estado",value:"state_activity"},{title:"Descripción",value:"description"},{title:"Acciones",value:"actions",sortable:!1}],items:_(h).activities,"item-value":"id",class:"elevation-1","items-per-page":5},{"item.actions":d(({item:p})=>[s(de,{title:"Marcar Como Realizada",color:"primary",disabled:p.state_activity!==_(Ao).PENDING.value,onClick:H=>Y(p.id)},{default:d(()=>[s(Ae,{icon:"tabler-checkbox"})]),_:2},1032,["disabled","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),s(ze,{value:"quotations",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[s(ke,null,{default:d(()=>[s(xo,{class:"d-flex justify-space-between align-center"},{default:d(()=>[c[19]||(c[19]=m("span",{class:"text-h5 font-weight-medium"},"Cotizaciones",-1)),s(Ze,{to:{name:"quote-add-quote"},class:"text-white"},{default:d(()=>[s(de,{color:"primary",variant:"outlined",size:"small"},{default:d(()=>[s(Ae,{icon:"tabler-plus"}),c[18]||(c[18]=ee(" Agregar nueva cotización "))]),_:1})]),_:1})]),_:1}),s(Ue,null,{default:d(()=>[m("div",null,[_(h).quotes&&_(h).quotes.length>0?(k(),M("div",bl,[s(mt,{density:"compact",class:"text-no-wrap"},{default:d(()=>[c[20]||(c[20]=m("thead",null,[m("tr",null,[m("th",null,"Propiedad"),m("th",null,"Fecha"),m("th",null,"Monto"),m("th",null,"Acciones")])],-1)),m("tbody",null,[(k(!0),M(ve,null,be(_(h).quotes,p=>(k(),M("tr",{key:p.id},[m("td",null,R(p.properties[0].title),1),m("td",null,R(p.created_at),1),m("td",null,R(_(bt)(p.amount)),1),m("td",null,[s(Oe,{class:"d-flex align-center gap-2"},{default:d(()=>[s(et,{modelValue:p.status,"onUpdate:modelValue":H=>p.status=H,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:""},null,8,["modelValue","onUpdate:modelValue"]),s(et,{modelValue:p.status_customer,"onUpdate:modelValue":H=>p.status_customer=H,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:H=>Z(p.id,p.status_customer)},{default:d(()=>[s(je,{activator:"parent",location:"top"},{default:d(()=>[ee(R(p.status_customer==="NOT_APPROVED"?"No aprobado por cliente":"Aprobado por cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"]),s(Ze,{to:{name:"quote-id",params:{id:p.id}}},{default:d(()=>[s(de,{icon:"",variant:"plain"},{default:d(()=>[s(Ae,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)])]))),128))])]),_:1})])):(k(),M("div",yl,c[21]||(c[21]=[m("span",null,"No hay procedimientos disponibles.",-1)])))])]),_:1})]),_:1})]),_:1}),s(ze,{value:"sales",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[s(ke,{title:"Ventas"},{default:d(()=>[s(Ue,null,{default:d(()=>[s(mt,{density:"compact",class:"text-no-wrap my-2"},{default:d(()=>[c[23]||(c[23]=m("thead",null,[m("tr",null,[m("th",null," ID "),m("th",null," Metodo de Pago "),m("th",null," Propiedades "),m("th",null," Total "),m("th",null," Estado "),m("th",null," Fecha "),m("th",null," Accion ")])],-1)),m("tbody",null,[(k(!0),M(ve,null,be(_(h).sales,p=>(k(),M("tr",{key:p.id},[m("td",null,R(p.id),1),m("td",null,R(pe(p.payment_method)),1),m("td",null,[(k(!0),M(ve,null,be(p.properties,H=>(k(),M("div",{key:H.id,class:"d-flex gap-x-2"},R(H.title)+" | "+R(H.code),1))),128))]),m("td",null,R(_(bt)(p.amount)),1),m("td",null,R(ge(p.status)),1),m("td",null,R(p.creation_date),1),m("td",null,[m("div",_l,[s(Ze,{to:{name:"sale-id",params:{id:p.id}}},{default:d(()=>[s(Zo,null,{default:d(()=>[s(Ae,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"]),s(et,{modelValue:p.confirmation_signature,"onUpdate:modelValue":H=>p.confirmation_signature=H,"true-value":1,"false-value":0,class:"my-2",onChange:H=>Q(p.id)},{default:d(()=>[s(je,{activator:"parent",location:"top"},{default:d(()=>c[22]||(c[22]=[ee(" Confirmar firma ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])])]))),128))])]),_:1}),m("div",wl,[c[25]||(c[25]=m("strong",null," Procesos ",-1)),_(h).procedure&&_(h).procedure.length>0?(k(),M("div",El,[(k(!0),M(ve,null,be(_(h).procedure,p=>(k(),M("div",{key:p.id},[s(Xt,{color:p.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:H=>se(p)},{default:d(()=>[p.pivot.is_check?(k(),Ee(Ae,{key:0,icon:"tabler-check",class:"mr-2"})):Se("",!0),ee(" "+R(p.title),1)]),_:2},1032,["color","onClick"]),s(je,{activator:"parent",location:"top"},{default:d(()=>[ee(R(p.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(k(),M("div",Cl,c[24]||(c[24]=[m("span",null,"No hay procedimientos disponibles.",-1)])))]),s(Oe,null,{default:d(()=>[s(j,{cols:"12",md:"6"},{default:d(()=>[m("div",Dl,[c[28]||(c[28]=m("strong",null," Anticipo ",-1)),_(h).initial_payments&&_(h).initial_payments.length>0?(k(),Ee(mt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[c[27]||(c[27]=m("thead",null,[m("tr",null,[m("th",null," Propiedad "),m("th",null," Fecha "),m("th",null," Monto "),m("th")])],-1)),m("tbody",null,[(k(!0),M(ve,null,be(_(h).initial_payments,p=>(k(),M("tr",{key:p.id},[m("td",null,R(p.property_title),1),m("td",null,R(p.date),1),m("td",null,R(p.amount),1),m("td",null,[s(Oe,null,{default:d(()=>[s(et,{modelValue:p.is_paid,"onUpdate:modelValue":H=>p.is_paid=H,"true-value":1,"false-value":0,disabled:p.is_paid===1,onChange:H=>D(p.id)},{default:d(()=>[s(je,{activator:"parent",location:"top"},{default:d(()=>c[26]||(c[26]=[ee(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:2},1024)])]))),128))])]),_:1})):Se("",!0)])]),_:1}),s(j,{cols:"12",md:"6"},{default:d(()=>[m("div",null,[c[31]||(c[31]=m("strong",null," Saldos ",-1)),_(h).balance_payments&&_(h).balance_payments.length>0?(k(),Ee(mt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[c[30]||(c[30]=m("thead",null,[m("tr",null,[m("th",null," Propiedad "),m("th",null," Fecha "),m("th",null," Monto "),m("th")])],-1)),m("tbody",null,[(k(!0),M(ve,null,be(_(h).balance_payments,p=>(k(),M("tr",{key:p.id},[m("td",null,R(p.property_title),1),m("td",null,R(p.date),1),m("td",null,R(p.amount),1),m("td",null,[s(et,{modelValue:p.is_paid,"onUpdate:modelValue":H=>p.is_paid=H,"true-value":1,"false-value":0,disabled:p.is_paid===1,onChange:H=>D(p.id)},{default:d(()=>[s(je,{activator:"parent",location:"top"},{default:d(()=>c[29]||(c[29]=[ee(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])]))),128))])]),_:1})):Se("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(ze,{value:"delivery",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[m("div",Al,[c[32]||(c[32]=m("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),_(h).sales.length>0?(k(),M("div",Sl,[(k(!0),M(ve,null,be(_(h).sales,p=>(k(),M("div",{key:p.id},[(k(!0),M(ve,null,be(p.properties,H=>(k(),M("div",{key:H.id,class:"d-flex align-center justify-between"},[s(_n,{size:"50",rounded:""},{default:d(()=>[m("img",{src:_(rn),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,Tl)]),_:1}),s(j,{cols:"12",md:"7"},{default:d(()=>[s(wn,{class:"font-weight-medium"},{default:d(()=>[ee(R(H.project_title)+" | "+R(H.title),1)]),_:2},1024),s(En,{class:"text-disabled d-flex justify-between mt-1"},{default:d(()=>[m("span",null,R(_(bt)(H.pivot_price)),1)]),_:2},1024)]),_:2},1024)]))),128))]))),128))])):Se("",!0)]),m("div",Vl,[c[34]||(c[34]=m("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),_(h).procedure&&_(h).procedure.length>0?(k(),M("div",xl,[(k(!0),M(ve,null,be(_(h).procedure,p=>(k(),M("div",{key:p.id},[s(Xt,{color:p.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:H=>se(p.id,p.pivot.is_check)},{default:d(()=>[p.pivot.is_check?(k(),Ee(Ae,{key:0,icon:"tabler-check",class:"mr-2"})):Se("",!0),ee(" "+R(p.title),1)]),_:2},1032,["color","onClick"]),s(je,{activator:"parent",location:"top"},{default:d(()=>[ee(R(p.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(k(),M("div",kl,c[33]||(c[33]=[m("span",null,"No hay procedimientos disponibles.",-1)])))]),s(Ue,{class:"d-flex justify-center mt-4"},{default:d(()=>[s(de,{color:"primary",size:"small"},{default:d(()=>c[35]||(c[35]=[ee(" Finalizar Oportunidad ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Pl={class:"kanban-header-container"},Nl={class:"search-container"},Il={class:"kanban"},Ml=["data-column-title"],Rl={class:"kanban-column-header"},Fl={class:"column-title"},$l={class:"small-badge"},Bl=["onClick"],Ul={class:"d-flex align-center",style:{gap:"10px","margin-block-end":"10px"}},Ll={style:{flex:"7"}},Yl={style:{margin:"0","font-size":"small"}},zl={style:{margin:"0","font-size":"small"}},jl={class:"d-flex align-center justify-end gap-2",style:{flex:"0 1 30%"}},Xl={class:"kanban-header"},Hl={class:"d-flex gap-1"},Kl={class:"label-info"},Wl={class:"project-info"},Gl={key:0,class:"label-name",style:{"font-size":"small"}},ql={key:1,class:"label-name",style:{display:"flex","align-items":"center",gap:"8px"}},Ql={class:"price"},Jl={class:"kanban-details"},Zl={class:"label-info"},ea={style:{color:"rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity))","font-size":"small","font-weight":"700"}},ta={__name:"Kanban",setup(e){const o=te(""),{allOpportunityKanbanForUser:t,kanban:n,getOpportunitybyId:l,opportunity:i,changeStatusByOpportunity:r}=kt(),{getallTypeActivities:u,typeActivities:a}=Zt(),v=te(null),y=te(!1),g=te(!1),O=te(!1),w=te(null),h=te(!1),P=te(!1),W=te(null),E=D=>{const f=new Date(D),c=f.getDate(),le=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][f.getMonth()],I=f.getHours().toString().padStart(2,"0"),ie=f.getMinutes().toString().padStart(2,"0");return`${c} de ${le}, ${I}:${ie}`},$=D=>{W.value={column:D.from.closest(".kanban-column"),index:Array.from(D.from.children).indexOf(D.item)},w.value=D.from.closest(".kanban-column").dataset.columnTitle,console.log("Elemento arrastrado desde:",w.value)},V=D=>{const f=D.data,c=D.from.closest(".kanban-column").dataset.columnTitle,A=D.to.closest(".kanban-column").dataset.columnTitle,le=n.value.find(ie=>ie.title===c),I=n.value.find(ie=>ie.title===A);if(le&&I){const ie=I.items.findIndex(Ye=>Ye.id===f.id);if(ie!==-1){const[Ye]=I.items.splice(ie,1);console.log("Elemento eliminado de la columna de destino"),le.items.push(Ye),le.items.sort((Pt,Ze)=>Pt.id-Ze.id),console.log("Elemento restaurado en la columna de origen")}else console.log("Elemento no encontrado en la columna de destino")}else console.log("No se encontraron las columnas de origen o destino")},U=async D=>{ct.fire({title:"Quieres dar de baja al cliente ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirmar"}).then(f=>{f.isConfirmed&&(L(D,Me.LOSS.value),ge(D),closeNavigationDrawer(),ct.fire({text:"EL cliente fue dado de baja",icon:"success"}))})},L=async(D,f)=>{await r(D.id,f,{}),await t()},pe=async D=>{ct.fire({title:"Quieres completar la oportunidad?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirmar"}).then(f=>{f.isConfirmed&&(r(D.id,Me.FINISHED.value,{}),ge(D),closeNavigationDrawer(),ct.fire({text:"EL cliente fue completado",icon:"success"}))})},ge=D=>{const f=n.value.find(c=>c.items.some(A=>A.id===D.id));if(f){const c=f.items.findIndex(A=>A.id===D.id);c!==-1?(f.items.splice(c,1),console.log("Elemento eliminado")):console.log("Elemento no encontrado en el tablero")}else console.log("El elemento no se encuentra en ningún tablero")},C=()=>{h.value=!0},N=D=>{const f=D.from.closest(".kanban-column").dataset.columnTitle,c=D.to.closest(".kanban-column").dataset.columnTitle;return X(f,c)?(console.log(`Movimiento permitido de ${f} a ${c}`),!0):(console.log(`Movimiento NO permitido de ${f} a ${c}`),!1)},z=async D=>{console.log(D);const f=D.from.closest(".kanban-column").dataset.columnTitle,c=D.to.closest(".kanban-column").dataset.columnTitle;if(!X(f,c))return console.log(`Movimiento NO permitido de ${f} a ${c}`),!1;if(console.log("Elemento movido de",f,"a",c),f!==c){const A=D.data;switch(c){case"LEAD":console.log("Movido a LEAD");break;case"PROSPECTO":console.log("Movido a PROSPECTO"),v.value=A,O.value=!0;break;case"PREVENTA":console.log("Movido a PREVENTA"),v.value=A,L(v.value,Me.PRESALE.value);break;case"VENTA":await l(A.id),console.log("Movido a VENTA"),v.value=i.value,P.value=!0;break;case"ENTREGA":console.log("Movido a ENTREGA"),v.value=A,L(v.value,Me.DELIVERY.value);break;default:console.log("Movimiento a una columna no definida");break}}Qe(h,A=>A&&V(D)),h.value=!1},q=D=>{v.value=D,y.value=!0},Y={LEAD:["PROSPECTO","PREVENTA"],PROSPECTO:["PREVENTA"],PREVENTA:["VENTA"],VENTA:["ENTREGA"],ENTREGA:[]},X=(D,f)=>(Y[D]||[]).includes(f);So(async()=>{await t(),await u()});const Z=async()=>{await t()},Q=()=>{o.value=""},se=Ne(()=>o.value.trim()?n.value.map(D=>{const f=D.items.map(A=>{var le,I,ie;return{...A,isFiltered:(((le=A.name)==null?void 0:le.toLowerCase())||"").includes(o.value.toLowerCase())||(((I=A.type_customer)==null?void 0:I.toLowerCase())||"").includes(o.value.toLowerCase())||(A.phone||"").includes(o.value)||(((ie=A.property)==null?void 0:ie.toLowerCase())||"").includes(o.value.toLowerCase()),isNotFiltered:!1}}).filter(A=>A.isFiltered),c=D.items.map(A=>({...A,isFiltered:!1,isNotFiltered:!0})).filter(A=>!f.some(le=>le.id===A.id));return{...D,items:[...f,...c]}}):n.value);return(D,f)=>{const c=Qt;return k(),M(ve,null,[m("div",Pl,[m("div",Nl,[s(c,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=A=>o.value=A),class:"search-input",placeholder:"Buscar...",density:"compact"},null,8,["modelValue"]),s(de,{class:"clear-search-btn",icon:"tabler-filter-x",onClick:Q})])]),m("div",Il,[(k(!0),M(ve,null,be(_(se),(A,le)=>(k(),M("div",{key:le,class:"kanban-column","data-column-title":A.title},[m("div",Rl,[m("div",Fl,[m("h2",null,R(A.title),1),m("span",$l,R(A.items.length),1)])]),s(_(vl),{modelValue:A.items,"onUpdate:modelValue":I=>A.items=I,group:{name:A.name,pull:!0,put:!0},class:"kanban-items",onStart:$,onMove:N,onEnd:z},{default:d(()=>[(k(!0),M(ve,null,be(A.items,I=>(k(),M("div",{key:I.id,class:an(["kanban-item",{"filtered-item":I.isFiltered,"not-filtered-item":I.isNotFiltered}]),onClick:ie=>q(I)},[m("div",Ul,[m("div",Ll,[m("p",Yl,[m("strong",null,R(I.name),1)]),m("span",zl,R(I.type_customer),1)]),m("div",jl,[I.stage!=="VENTA"&&I.stage!=="ENTREGA"?(k(),Ee(de,{key:0,color:"warning",class:"icon-container",title:"Dar de Baja",variant:"tonal",onClick:[f[1]||(f[1]=Le(()=>{},["stop"])),Le(ie=>U(I),["prevent"])]},{default:d(()=>[s(Ae,{icon:"tabler-trash",class:"icon-small"})]),_:2},1032,["onClick"])):Se("",!0),I.stage==="ENTREGA"?(k(),Ee(de,{key:1,color:"success",title:"Completar Oportunidad",class:"icon-container",variant:"tonal",onClick:[f[2]||(f[2]=Le(()=>{},["stop"])),Le(ie=>pe(I),["prevent"])]},{default:d(()=>[s(Ae,{icon:"tabler-check"})]),_:2},1032,["onClick"])):Se("",!0)])]),m("div",Xl,[m("div",Hl,[m("div",null,[m("p",Kl,R(I.property_type),1),m("div",Wl,[I.property?(k(),M("span",Gl,R(I.project+" | "+I.property),1)):Se("",!0),I.property==null?(k(),M("span",ql,[s(Xt,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"30px","inline-size":"30px"}},{default:d(()=>[s(Ae,{size:"20",icon:"tabler-home"})]),_:1}),f[7]||(f[7]=m("strong",{style:{"font-size":"small"}}," Indefinido ",-1))])):Se("",!0),f[8]||(f[8]=m("h4",{class:"department-code"},null,-1))]),m("p",Ql,[m("strong",null,R(_(bt)(I.price)),1)])])]),m("div",Jl,[m("p",Zl,R(E(I.created_at)),1),m("p",ea,R(I.phone),1)])])],10,Bl))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])],8,Ml))),128))]),s(Ol,{"is-dialog-visible":y.value,"onUpdate:isDialogVisible":f[3]||(f[3]=A=>y.value=A),"opportunity-kanban":v.value,onFormCancelled:C,onFormRefresh:Z},null,8,["is-dialog-visible","opportunity-kanban"]),s(hl,{"is-dialog-visible":g.value,"onUpdate:isDialogVisible":f[4]||(f[4]=A=>g.value=A),"opportunity-kanban":v.value},null,8,["is-dialog-visible","opportunity-kanban"]),s(sn,{"is-dialog-visible":P.value,"onUpdate:isDialogVisible":f[5]||(f[5]=A=>P.value=A),opportunity:v.value,stage:"PRESALE",onFormCancelled:C,onFormRefresh:Z},null,8,["is-dialog-visible","opportunity"]),s(gl,{"is-dialog-visible":O.value,"onUpdate:isDialogVisible":f[6]||(f[6]=A=>O.value=A),"opportunity-kanban":v.value,"type-activities":_(a),onFormCancelled:C},null,8,["is-dialog-visible","opportunity-kanban","type-activities"])],64)}}};const oa={class:""},na={__name:"myContacts",setup(e){return te(!1),te([new Date(2024,9,10),new Date(2024,10,10)]),te(["Todos","PORA"]),te("Todos"),te(),(o,t)=>(k(),M("div",oa,[m("div",null,[s(ta)])]))}},ui=Cn(na,[["__scopeId","data-v-75238964"]]);export{ui as default};
