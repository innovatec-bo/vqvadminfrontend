import{_ as M}from"./AppTextField-4420a89d.js";import{_ as O}from"./AppSelect-449a3a9a.js";import{_ as J}from"./DialogCloseBtn-b33e596b.js";import{r as g,w as j,o as v,f as B,e as l,b as e,a3 as W,n as t,z as T,a4 as E,v as b,a as $,c as R,a0 as _,d as c,x as U,s as L,$ as S}from"./index-71bee35f.js";import{u as q}from"./useProperty-39d76932.js";import{V as F}from"./VCardText-b305c2f2.js";import{V as X}from"./VForm-05d304ed.js";import{V as Y}from"./VRow-81e18c3c.js";import{V as u}from"./VCol-853b67d0.js";import{V as G}from"./VCard-b8681547.js";import{V as Z}from"./VDialog-8db3ce5b.js";import{p as ee}from"./paginationMeta-4ad053a4.js";import{l as te}from"./lodash-f81a73ea.js";import{V as oe}from"./VSpacer-1083c8a5.js";import{V as z}from"./VDivider-7e38f7c6.js";import{V as le}from"./VDataTableServer-4d02a8ef.js";import{V as ae}from"./VChip-94adc2ba.js";import{V as re}from"./VPagination-82b8b213.js";import"./form-ba4edcb0.js";import"./VTextField-4c9fa01e.js";/* empty css                   */import"./VCounter-31e541ce.js";import"./VImg-5084c32c.js";import"./VField-c32aa456.js";import"./easing-9f15041e.js";import"./VInput-fb179cc9.js";import"./forwardRefs-8348545e.js";import"./VSelect-783ad4af.js";import"./VList-72a70c1d.js";import"./ssrBoot-2f933f68.js";import"./VAvatar-5ed8382b.js";import"./dialog-transition-fadc2d54.js";import"./VMenu-6b4624bc.js";import"./VOverlay-3a6897ef.js";import"./lazy-83084984.js";import"./scopeId-bc19fd76.js";import"./VCheckboxBtn-c9dbdf11.js";import"./VSelectionControl-2aecf7f6.js";import"./api-c3bdf505.js";import"./index-9c720871.js";import"./constants-ca8ca994.js";import"./notifications-81bc0416.js";import"./VDataTable-4c75984f.js";import"./VTable-aaf555bd.js";import"./filter-4833258f.js";const ie={__name:"EditPropertyDialog",props:{isDialogVisible:{type:Boolean,required:!0},property:{type:Object,required:!0}},emits:["update:isDialogVisible","propertyUpdated"],setup(I,{emit:w}){const m=I,P=w,V=g([{value:"DEPARTAMENT",title:"Departamento"},{value:"PARK",title:"Parqueo"}]),{loadingProperty:k,editProperty:f}=q(),o=g({...m.property}),p=()=>{P("update:isDialogVisible",!1)},y=async()=>{(await f(o.value)).success&&P("propertyUpdated",o.value),p()};return j(()=>m.property,x=>{o.value={...x}}),(x,i)=>{const D=J,d=M,A=O;return v(),B(Z,{"max-width":"800","model-value":m.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":p},{default:l(()=>[e(D,{onClick:p}),e(G,{title:"Editar propiedad",class:"pa-sm-8 pa-5"},{default:l(()=>[e(F,null,{default:l(()=>[e(X,{onSubmit:W(y,["prevent"])},{default:l(()=>[e(Y,{dense:""},{default:l(()=>[e(u,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:t(o).code,"onUpdate:modelValue":i[0]||(i[0]=s=>t(o).code=s),label:"Código",placeholder:"A1",outlined:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(A,{modelValue:t(o).property_type,"onUpdate:modelValue":i[1]||(i[1]=s=>t(o).property_type=s),label:"Tipo de propiedad",placeholder:"Seleccione un tipo",items:t(V),outlined:""},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:t(o).base_price,"onUpdate:modelValue":i[2]||(i[2]=s=>t(o).base_price=s),label:"Precio de la propiedad",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:t(o).percentage_initial_fee,"onUpdate:modelValue":i[3]||(i[3]=s=>t(o).percentage_initial_fee=s),label:"% Anticipo",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:l(()=>[e(d,{modelValue:t(o).title,"onUpdate:modelValue":i[4]||(i[4]=s=>t(o).title=s),label:"Título comercial",placeholder:"Título comercial",outlined:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:t(o).surface,"onUpdate:modelValue":i[5]||(i[5]=s=>t(o).surface=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(o).property_type=="DEPARTAMENT"?(v(),B(u,{key:0,cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:t(o).departament.number_bedrooms,"onUpdate:modelValue":i[6]||(i[6]=s=>t(o).departament.number_bedrooms=s),label:"Numero de habitaciones",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):T("",!0),t(o).property_type=="DEPARTAMENT"?(v(),B(u,{key:1,cols:"12",md:"6"},{default:l(()=>[e(d,{modelValue:t(o).departament.number_bathrooms,"onUpdate:modelValue":i[7]||(i[7]=s=>t(o).departament.number_bathrooms=s),label:"Numero de baños",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):T("",!0),e(u,{cols:"12",class:"text-right mt-6"},{default:l(()=>[e(E,{color:"secondary",variant:"tonal",class:"me-3",onClick:p},{default:l(()=>i[8]||(i[8]=[b(" Cancelar ")])),_:1}),e(E,{type:"submit",color:"primary",class:"me-3",disabled:t(k),loading:t(k)},{default:l(()=>i[9]||(i[9]=[b(" Guardar ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const se={class:"text-body-1"},pe={class:"d-flex align-center flex-wrap gap-4"},ne={class:"d-flex align-center gap-4"},de={class:"text-capitalize"},ue={key:0,class:"text-capitalize font-weight-medium"},me={key:1,class:"text-capitalize font-weight-medium"},ce={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},fe={class:"text-sm text-disabled mb-0"},it={__name:"list",setup(I){const{allProperty:w,properties:m,property:P,totalProperties:V,removeProperty:k}=q(),f=g(),o=g(20),p=g(1),y=g(!1),x=n=>{p.value=n.page,o.value=n.itemsPerPage},i=[{title:"Titulo",key:"title"},{title:"Code",key:"code"},{title:"Precio",key:"base_price"},{title:"Tipo de Propiedad",key:"typeProperty"},{title:"Proyecto",key:"project"},{title:"Estado",key:"status"},{title:"Accion",key:"actions",sortable:!1}],D=()=>{w({itemsPerPage:o.value,page:p.value,search:f.value})},d=te.debounce(D,300);j([f,o,p],d,{immediate:!0});const A=n=>{switch(n){case"AVAILABLE":return{color:"success",text:"DISPONIBLE"};case"PRESALE":return{color:"warning",text:"PRE VENTA"};case"SALE":return{color:"error",text:"VENDIDO"};case"DELIVERED":return{color:"error",text:"ENTREGADO"};default:return{color:"primary",text:"NOTHING"}}},s=async n=>{await k(n),D()},H=async n=>{y.value=!0,P.value={...n}},K=n=>{const r=m.value.findIndex(C=>C.id===n.id);r!==-1&&(m.value[r]={...n})};return(n,r)=>{const C=M,h=$("RouterLink"),N=$("IconBtn");return v(),R("section",null,[e(G,null,{default:l(()=>[e(F,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[c("div",null,[r[6]||(r[6]=c("h5",{class:"text-h5"}," Mis Propiedades ",-1)),c("div",se," En total son "+U(t(V))+" Propiedades. ",1)]),e(oe),c("div",pe,[e(O,{modelValue:t(o),"onUpdate:modelValue":r[0]||(r[0]=a=>_(o)?o.value=a:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),e(C,{modelValue:t(f),"onUpdate:modelValue":r[1]||(r[1]=a=>_(f)?f.value=a:null),placeholder:"Buscar...",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"]),e(h,{to:{name:"realty-property-register"}},{default:l(()=>[e(E,null,{default:l(()=>r[7]||(r[7]=[b(" Agregar Propiedad ")])),_:1})]),_:1})])]),_:1}),e(z),e(t(le),{"items-per-page":t(o),"onUpdate:itemsPerPage":r[3]||(r[3]=a=>_(o)?o.value=a:null),page:t(p),"onUpdate:page":r[4]||(r[4]=a=>_(p)?p.value=a:null),items:t(m),headers:i,"items-length":t(o).value===-1?t(m).value.length:t(V).valueOf,class:"text-no-wrap","onUpdate:options":x},{"item.base_price":l(({item:a})=>[c("div",ne,[c("span",de,U(a.base_price)+" $ ",1)])]),"item.typeProperty":l(({item:a})=>[a.parking?(v(),R("span",ue,"Parqueo")):T("",!0),a.departament?(v(),R("span",me,"Departamento")):T("",!0)]),"item.status":l(({item:a})=>[e(ae,{label:"",size:"small",class:"text-capitalize",color:A(a.status).color},{default:l(()=>[b(U(A(a.status).text),1)]),_:2},1032,["color"])]),bottom:l(()=>[e(z),c("div",ce,[c("p",fe,U(t(ee)({page:t(p),itemsPerPage:t(o)},t(V))),1),e(re,{modelValue:t(p),"onUpdate:modelValue":r[2]||(r[2]=a=>_(p)?p.value=a:null),length:Math.ceil(t(V)/t(o)),"total-visible":n.$vuetify.display.xs?1:7},{prev:l(a=>[e(E,L({variant:"tonal",color:"default"},a,{icon:!1}),{default:l(()=>r[8]||(r[8]=[b(" Anterior ")])),_:2},1040)]),next:l(a=>[e(E,L({variant:"tonal",color:"default"},a,{icon:!1}),{default:l(()=>r[9]||(r[9]=[b(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":l(({item:a})=>[e(N,null,{default:l(()=>[e(h,{to:{name:"realty-property-id",params:{id:a.id}}},{default:l(()=>[e(S,{icon:"tabler-eye"})]),_:2},1032,["to"])]),_:2},1024),e(N,null,{default:l(()=>[e(S,{icon:"tabler-edit",onClick:Q=>H(a)},null,8,["onClick"])]),_:2},1024),e(N,{onClick:Q=>s(a.id)},{default:l(()=>[e(S,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ie,{"is-dialog-visible":t(y),"onUpdate:isDialogVisible":r[5]||(r[5]=a=>_(y)?y.value=a:null),property:t(P),onPropertyUpdated:K},null,8,["is-dialog-visible","property"])])}}};export{it as default};
