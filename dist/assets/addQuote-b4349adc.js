import{_ as B}from"./AppAutocomplete-f7c172b9.js";import{_ as O}from"./AppTextarea-02ab8922.js";import{_ as F}from"./AppSelect-4c2b73bd.js";import{_ as M}from"./AppTextField-3485eb39.js";import{_ as Y}from"./AppDateTimePicker-a4f20927.js";import{P as V,a as L,_ as I}from"./InvoiceAddMoney-47546044.js";import{V as Q}from"./VNodeRenderer-537147ed.js";import{r as k,H as j,o as x,f as h,e as a,d as n,c as E,F as q,i as K,b as e,n as p,x as C,v as P,z as G,a4 as D,$ as H,I as N,a0 as z,w as R}from"./index-ab8b25a0.js";import{u as J}from"./useProperty-c47e1e0a.js";import{V as w,a as i}from"./VRow-b1465082.js";import{V as $}from"./VCard-833a177d.js";import{V as y}from"./VCardText-7fa4e63b.js";import{V as f}from"./VDivider-c8e4f766.js";import{u as W}from"./useCustomer-09c166f7.js";import{u as X}from"./useQuote-3abe3041.js";import{_ as S}from"./InvoiceSendInvoiceDrawer-0526845b.js";import"./form-7f5e2221.js";import"./VSelect-b6b571c8.js";import"./VTextField-ec83ff20.js";/* empty css                   */import"./VCounter-66fc6e00.js";import"./VImg-fc45f0f5.js";import"./VField-c4db06f5.js";import"./easing-9f15041e.js";import"./VInput-54d08252.js";import"./forwardRefs-8348545e.js";import"./VList-e13835ef.js";import"./ssrBoot-ff441f4c.js";import"./VAvatar-559437b8.js";import"./dialog-transition-61e63000.js";import"./VMenu-422726b1.js";import"./VOverlay-13aa9acd.js";import"./lazy-3e7767a2.js";import"./scopeId-57297bca.js";import"./VCheckboxBtn-8d743729.js";import"./VSelectionControl-ffb37796.js";import"./VChip-e80180cc.js";import"./filter-f2688072.js";import"./api-4b037e27.js";import"./index-9c720871.js";import"./constants-8e30317b.js";import"./notifications-9301c65a.js";import"./AppDrawerHeaderSection-ee63db14.js";import"./VSpacer-68b92512.js";import"./vue3-perfect-scrollbar.esm-4e381a7e.js";import"./VForm-cd3b7a1c.js";import"./VNavigationDrawer-8fee6d48.js";const Z={class:"pa-5 flex-grow-1"},ee={key:0,style:{"font-size":"smaller","padding-block":""}},le={class:"d-flex justify-end mt-3"},ae={__name:"InvoiceAddProperty",props:{properties:{type:Array,required:!0}},emits:["removeProduct","totalAmount","addProperty"],setup(T,{emit:A}){const o=T,_=A,{properties:u,propertiesForType:g}=J(),b=k([]),c=k([]),v=()=>{const l={property_id:null,price:null,property_type:V.PARK.value,property_type_name:V.PARK.label};_("addProperty",l)},m=l=>{_("removeProduct",l)};return j(async()=>{try{const l=await g(V.DEPARTAMENT.value);c.value=l;const d=await g(V.PARK.value);b.value=d}catch(l){console.error("Error al obtener las propiedades:",l)}}),(l,d)=>{const r=M;return x(),h($,{flat:"",border:"",class:"d-flex flex-row"},{default:a(()=>[n("div",Z,[(x(!0),E(q,null,K(o.properties,(t,U)=>(x(),h(w,{key:U},{default:a(()=>[e(i,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(F,{modelValue:t.property_id,"onUpdate:modelValue":s=>t.property_id=s,label:t.property_type_name,placeholder:"Selecciona una propiedad",items:t.property_type===p(V).DEPARTAMENT.value?p(c):p(b),"item-title":"title","item-value":"id",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue","label","items"]),t.property_id&&t.property_type===p(V).DEPARTAMENT.value?(x(),E("span",ee,[n("strong",null,C(p(c)[t.property_id-1].departament.isfacade===1?"Con Fachada":"Sin Fachada")+", ",1),P(" "+C(p(c)[t.property_id-1].surface)+" ",1),d[0]||(d[0]=n("strong",null," m2,",-1)),P(" "+C(p(c)[t.property_id-1].departament.number_bedrooms)+" Habitacion(s), ",1)])):G("",!0)]),_:2},1024),e(i,{cols:"12",sm:"2",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:t.price,"onUpdate:modelValue":s=>t.price=s,label:"Precio",placeholder:"$",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",sm:"2",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:t.price_it,"onUpdate:modelValue":s=>t.price_it=s,label:"3% (IT):",placeholder:"%",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",sm:"3",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:t.price_contrato,"onUpdate:modelValue":s=>t.price_contrato=s,label:"Precio Contrato:",placeholder:"Escribe el precio",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{cols:"12",sm:"1",class:"my-4"},{default:a(()=>[e(D,{color:"error",size:"small",onClick:s=>m(U)},{default:a(()=>[e(H,{icon:"tabler-square-x"})]),_:2},1032,["onClick"])]),_:2},1024),e(i,{cols:"12",style:{"font-size":"small","padding-block":"0","padding-inline":"4px"}})]),_:2},1024))),128)),n("div",le,[e(D,{color:"secondary",onClick:v},{default:a(()=>d[1]||(d[1]=[P(" Agregar Parqueo ")])),_:1})])])]),_:1})}}},oe={class:"ma-sm-4"},te={class:"d-flex align-center mb-6"},se={class:"font-weight-bold text-capitalize text-h3"},ne={class:"mt-4 ma-sm-4"},de={class:"d-flex align-center justify-sm-end mb-3"},ie={style:{"inline-size":"9.5rem"}},re={class:"d-flex mx-sm-4"},pe={style:{"text-decoration":"underline"}},ue={__name:"AddQuoteInvoice",props:{data:{type:null,required:!0}},emits:["push","remove"],setup(T,{emit:A}){const o=T,_=A,u=m=>{_("push",m)},g=m=>{_("remove",m)},b=["10","20","30"],c=k("10"),v=m=>(o.data.initial_fee=m*c.value/100,o.data.balance=m-o.data.initial_fee,m*c.value/100);return(m,l)=>{const d=Y,r=M,t=F,U=O;return x(),h($,null,{default:a(()=>[e(y,{class:"d-flex flex-wrap justify-space-between gap-y-5 flex-column flex-sm-row"},{default:a(()=>[n("div",oe,[n("div",te,[e(p(Q),{nodes:p(N).app.logo,class:"me-3"},null,8,["nodes"]),n("h4",se,C(p(N).app.title),1)]),l[11]||(l[11]=n("p",{class:"mb-0"}," Formulario de Cotizacion ",-1))]),n("div",ne,[n("div",de,[l[12]||(l[12]=n("span",{class:"me-3",style:{"inline-size":"6rem"}},"Vigente hasta",-1)),n("span",ie,[e(d,{modelValue:o.data.expiration_date,"onUpdate:modelValue":l[0]||(l[0]=s=>o.data.expiration_date=s),density:"compact",placeholder:"YYYY-MM-DD",config:{position:"auto right"}},null,8,["modelValue"])])])])]),_:1}),e(f,{thickness:"24"}),e(y,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-y-5 gap-4"},{default:a(()=>[e(w,null,{default:a(()=>[e(i,{cols:"12",sm:"8",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.social_reason,"onUpdate:modelValue":l[1]||(l[1]=s=>o.data.social_reason=s),label:"Razon social:",placeholder:"Canzza",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"4",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.nit,"onUpdate:modelValue":l[2]||(l[2]=s=>o.data.nit=s),label:"C.I./NIT:",placeholder:"0000000",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.workplace,"onUpdate:modelValue":l[3]||(l[3]=s=>o.data.workplace=s),label:"Lugar de Trabajo:",placeholder:"Placeholder Text",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.email,"onUpdate:modelValue":l[4]||(l[4]=s=>o.data.email=s),label:"Correo:",placeholder:"email@gmail.com",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.address,"onUpdate:modelValue":l[5]||(l[5]=s=>o.data.address=s),label:"Direccion:",placeholder:"Av/ Equipetrol ....",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.phone,"onUpdate:modelValue":l[6]||(l[6]=s=>o.data.phone=s),label:"Celular:",placeholder:"77049267",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{label:"Telefono Fijo:",placeholder:"33557292",outlined:"",dense:"",class:"custom-salesforce-input"})]),_:1})]),_:1})]),_:1}),e(f,{thickness:"24"}),e(y,{class:"add-products-form"},{default:a(()=>[e(w,null,{default:a(()=>[e(i,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(ae,{properties:o.data.properties,onAddProperty:u,onRemoveProduct:g},null,8,["properties"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(t,{modelValue:o.data.payment_method,"onUpdate:modelValue":l[7]||(l[7]=s=>o.data.payment_method=s),label:"Tipo de Pago :",placeholder:"Seleccione ",items:Object.values(p(L)),class:"custom-salesforce-input"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(r,{modelValue:o.data.amount,"onUpdate:modelValue":l[8]||(l[8]=s=>o.data.amount=s),label:"Total:",placeholder:"Placeholder Text",outlined:"",dense:"",class:"custom-salesforce-input"},null,8,["modelValue"])]),_:1}),e(f,{thickness:"4",class:"my-3"}),e(i,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>l[13]||(l[13]=[n("span",null," TODO: Seben mandar los descuentos porcentajes de descuentos o el texto para poder introducirlo aqui",-1)])),_:1})]),_:1})]),_:1}),e(f,{thickness:"24"}),e(y,{class:"add-products-form"},{default:a(()=>[e(w,null,{default:a(()=>[e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(t,{modelValue:p(c),"onUpdate:modelValue":l[9]||(l[9]=s=>z(c)?c.value=s:null),label:"% Cuota Inicial",items:b,placeholder:"% Cuota inicial",class:"mb-2"},null,8,["modelValue"]),e(I,{title:"Cuota Inicial: "+v(o.data.amount),amount:v(o.data.amount),differs:o.data.differs_initial_fee,type:m.INITIAL_PAYMENT},null,8,["title","amount","differs","type"])]),_:1}),e(i,{cols:"12",sm:"6",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(I,{title:"Saldo: "+(o.data.amount-o.data.initial_fee),amount:o.data.amount-o.data.initial_fee,differs:o.data.differs_balance,type:m.BALANCE},null,8,["title","amount","differs","type"])]),_:1}),e(i,{cols:"12",sm:"6",class:"mt-15"},{default:a(()=>[e(f,{thickness:"4"}),l[14]||(l[14]=n("div",{class:"text-center my-1"},[n("span",null,[n("strong",null," Firma del Cliente ")])],-1))]),_:1}),e(i,{cols:"12",sm:"6",class:"mt-15"},{default:a(()=>[e(f,{thickness:"4"}),l[15]||(l[15]=n("div",{class:"text-center my-1"},[n("span",null,[n("strong",null," Firma Gerente Administrativo ")])],-1))]),_:1}),e(i,{cols:"12",style:{"padding-block":"0","padding-inline":"8px"}},{default:a(()=>[e(U,{modelValue:o.data.observations,"onUpdate:modelValue":l[10]||(l[10]=s=>o.data.observations=s),"auto-grow":"",label:"Observaciones del Cliente",rows:"2",placeholder:"Descripcion...","row-height":"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{thickness:"24"}),e(y,null,{default:a(()=>l[16]||(l[16]=[n("div",{class:"d-flex mx-sm-4"},[n("span",null,[n("strong",null," El comprador deberá realizar todos los pagos acordados, en las cuentas indicadas de Canzza Desarrolladora Inmobiliaria Srl. y entregar el respectivo comprobante de depósito. ")])],-1)])),_:1}),e(f),e(y,null,{default:a(()=>l[17]||(l[17]=[n("div",{class:"d-flex mx-sm-4"},[n("span",null,[n("strong",null," Todos los gastos administrativos, inscripción en derechos reales y honorarios profesionales para consolidar el derecho de propiedad a favor del comprador deben ser asumidos por el comprador.")])],-1)])),_:1}),e(f),e(y,null,{default:a(()=>[n("div",re,[n("span",null,[n("strong",null,[l[18]||(l[18]=P(" Este documento tiene validez únicamente hasta el ")),n("span",pe,C(o.data.expiration_date),1),l[19]||(l[19]=P(". "))])])])]),_:1})]),_:1})}}},sl={__name:"addQuote",setup(T){const{generateQuote:A}=X(),{allCustomerPaginate:o,customers:_}=W(),u=k({social_reason:"",nit:null,address:"",email:"",phone:"",workplace:"",expiration_date:null,observations:"",payment_method:null,contract_signing_date:null,amount:null,initial_fee:null,balance:null,opportunity_id:null,customer_id:null,properties:[{property_id:null,price:null,price_it:null,price_contrato:null,property_type:V.DEPARTAMENT.value,property_type_name:V.DEPARTAMENT.label}],differs_initial_fee:[{date:null,amount:null}],differs_balance:[{date:null,amount:null}]}),g=k(!1),b=k(!1),c=l=>{u.value.properties.push(l)},v=l=>{u.value.properties.splice(l,1)},m=async()=>{console.log(u),await A(u.value)};return j(async()=>{await o({page:1,itemsPerPage:100})}),R(()=>u.value.properties,l=>{let d=0;l.forEach(r=>{if(r.price){const t=parseFloat(r.price)||0;r.price_it=t*.03,r.price_contrato=t+r.price_it,d+=r.price_contrato}else r.price_it=null}),u.value.amount=d},{deep:!0}),R(()=>u.value.customer_id,l=>{const d=_.value.find(r=>r.id===l);d&&(u.value.social_reason=d.name,u.value.email=d.email,u.value.phone=d.phone,u.value.opportunity_id=d.opportunity_id)}),(l,d)=>{const r=B;return x(),E(q,null,[e(w,null,{default:a(()=>[e(i,{cols:"12",md:"9"},{default:a(()=>[e(ue,{data:p(u),onPush:c,onRemove:v},null,8,["data"])]),_:1}),e(i,{cols:"12",md:"3"},{default:a(()=>[e($,{class:"mb-8"},{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(r,{modelValue:p(u).customer_id,"onUpdate:modelValue":d[0]||(d[0]=t=>p(u).customer_id=t),label:"Clientes",placeholder:"Selecciona un Cliente",items:p(_).map(t=>({title:t.name,value:t.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),e(y,null,{default:a(()=>[e(D,{block:"",class:"mb-2",onClick:m},{default:a(()=>d[3]||(d[3]=[P(" Guardar Cotizacion ")])),_:1})]),_:1})]),_:1}),e(S,{"is-drawer-open":p(g),"onUpdate:isDrawerOpen":d[1]||(d[1]=t=>z(g)?g.value=t:null)},null,8,["is-drawer-open"])]),_:1})]),_:1}),e(S,{"is-drawer-open":p(b),"onUpdate:isDrawerOpen":d[2]||(d[2]=t=>z(b)?b.value=t:null)},null,8,["is-drawer-open"])],64)}}};export{sl as default};
