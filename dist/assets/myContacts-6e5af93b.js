import{_ as Kt}from"./AppDateTimePicker-f0224b1b.js";import{M as Wo,a2 as Oe,cq as Qo,n as y,r as Q,bR as Jo,N as Zo,cl as qt,w as Le,cV as en,H as Gt,an as Eo,a0 as st,o as T,f as fe,e as u,b as s,a4 as Z,v as Y,a3 as Ne,a as tn,c as N,F as ae,i as de,x as j,$ as ve,d as g,z as me,y as on}from"./index-427e7513.js";import{u as Ct,S as Ue,a as Wt,p as eo,_ as nn}from"./PreSaleForm-4f611491.js";import{u as ln}from"./useSales-8b15f2c6.js";import{f as Ft}from"./currencyFormatter-92ad4b3c.js";import{_ as Dt}from"./DialogCloseBtn-ea8f6019.js";import{_ as an}from"./AddQuoteInvoice-2f16f52f.js";import{u as rn}from"./useQuote-1be8b0f5.js";import{P as nt}from"./InvoiceAddMoney-cc40d94e.js";import{s as to}from"./notifications-a0ff4d79.js";import{V as je,a as Ut,b as ut,c as sn}from"./VCard-b50a40fe.js";import{V as Ae}from"./VCardText-5ee6a690.js";import{V as ye}from"./VRow-c3d1a228.js";import{V as L}from"./VCol-8fc37dfa.js";import{V as Et}from"./VDialog-315d9626.js";import{_ as Vo,V as un}from"./AppTextarea-a812f941.js";import{_ as vt}from"./AppSelect-24ac2bef.js";import{_ as Ao}from"./AppTextField-84caa224.js";import{V as Bt}from"./VForm-67168f02.js";import{_ as To}from"./AppAutocomplete-e5867270.js";import{u as So}from"./useProperty-3160cf11.js";import{V as dn,a as cn}from"./VTabs-34725f7b.js";import{V as pn,a as Ie}from"./VWindowItem-8de35f4d.js";import{V as mn}from"./VDataTable-c1a46863.js";import{V as Tt}from"./VTable-a6bf57c0.js";import{V as He}from"./VCheckbox-39708aeb.js";import{V as Me}from"./VTooltip-61d21f95.js";import{V as oo}from"./VAvatar-9fb9e715.js";import{b as no,c as lo}from"./VList-49ed325f.js";import{V as zt}from"./VChip-0841c238.js";import{u as fn}from"./useCustomer-d650f295.js";import{V as vn}from"./VSpacer-4e6e7b2b.js";import{_ as gn}from"./_plugin-vue_export-helper-c27b6911.js";import"./VField-5961e92f.js";import"./form-9bfd9352.js";import"./easing-9f15041e.js";import"./VInput-37ac98b4.js";import"./VImg-d3f6a34a.js";import"./api-6b151283.js";import"./index-9c720871.js";import"./constants-71880aa6.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./VNodeRenderer-12ef79a3.js";import"./VTextField-b8ccce86.js";/* empty css                   */import"./VCounter-74e24d28.js";import"./forwardRefs-8348545e.js";import"./VDivider-932430e1.js";import"./VOverlay-a77d48b6.js";import"./lazy-5fc91b0c.js";import"./scopeId-de5379c9.js";import"./dialog-transition-36ed2d83.js";import"./VSelect-5810a2bd.js";import"./VMenu-cd6def04.js";import"./VCheckboxBtn-e288c3e7.js";import"./VSelectionControl-55d161a2.js";import"./filter-afb65e90.js";import"./VSlideGroup-843da282.js";import"./ssrBoot-b152ba8f.js";var hn=Object.defineProperty,gt=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,ao=(e,o,t)=>o in e?hn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Be=(e,o)=>{for(var t in o||(o={}))ko.call(o,t)&&ao(e,t,o[t]);if(gt)for(var t of gt(o))xo.call(o,t)&&ao(e,t,o[t]);return e},Po=(e,o)=>{var t={};for(var n in e)ko.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&gt)for(var n of gt(e))o.indexOf(n)<0&&xo.call(e,n)&&(t[n]=e[n]);return t};const Oo="[vue-draggable-plus]: ";function bn(e){console.warn(Oo+e)}function yn(e){console.error(Oo+e)}function io(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function _n(e){return e.replace(/-(\w)/g,(o,t)=>t?t.toUpperCase():"")}function wn(e){return Object.keys(e).reduce((o,t)=>(typeof e[t]<"u"&&(o[_n(t)]=e[t]),o),{})}function ro(e,o){return Array.isArray(e)&&e.splice(o,1),e}function so(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function Cn(e){return typeof e>"u"}function Dn(e){return typeof e=="string"}function uo(e,o,t){const n=e.children[t];e.insertBefore(o,n)}function St(e){e.parentNode&&e.parentNode.removeChild(e)}function En(e,o=document){var t;let n=null;return typeof(o==null?void 0:o.querySelector)=="function"?n=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):n=document.querySelector(e),n||bn(`Element not found: ${e}`),n}function Vn(e,o,t=null){return function(...n){return e.apply(t,n),o.apply(t,n)}}function An(e,o){const t=Be({},e);return Object.keys(o).forEach(n=>{t[n]?t[n]=Vn(e[n],o[n]):t[n]=o[n]}),t}function Tn(e){return e instanceof HTMLElement}function co(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function Sn(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const kn=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function po(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function we(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?po(Object(t),!0).forEach(function(n){xn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function dt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(o){return typeof o}:dt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},dt(e)}function xn(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function De(){return De=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},De.apply(this,arguments)}function Pn(e,o){if(e==null)return{};var t={},n=Object.keys(e),l,i;for(i=0;i<n.length;i++)l=n[i],!(o.indexOf(l)>=0)&&(t[l]=e[l]);return t}function On(e,o){if(e==null)return{};var t=Pn(e,o),n,l;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Nn="1.15.2";function Ce(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ee=Ce(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),tt=Ce(/Edge/i),mo=Ce(/firefox/i),We=Ce(/safari/i)&&!Ce(/chrome/i)&&!Ce(/android/i),No=Ce(/iP(ad|od|hone)/i),Io=Ce(/chrome/i)&&Ce(/android/i),Mo={capture:!1,passive:!1};function z(e,o,t){e.addEventListener(o,t,!Ee&&Mo)}function U(e,o,t){e.removeEventListener(o,t,!Ee&&Mo)}function ht(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function In(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function be(e,o,t,n){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&ht(e,o):ht(e,o))||n&&e===t)return e;if(e===t)break}while(e=In(e))}return null}var fo=/\s+/g;function se(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var n=(" "+e.className+" ").replace(fo," ").replace(" "+o+" "," ");e.className=(n+(t?" "+o:"")).replace(fo," ")}}function S(e,o,t){var n=e&&e.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in n)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),n[o]=t+(typeof t=="string"?"":"px")}}function Ye(e,o){var t="";if(typeof e=="string")t=e;else do{var n=S(e,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!o&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Ro(e,o,t){if(e){var n=e.getElementsByTagName(o),l=0,i=n.length;if(t)for(;l<i;l++)t(n[l],l);return n}return[]}function _e(){var e=document.scrollingElement;return e||document.documentElement}function ee(e,o,t,n,l){if(!(!e.getBoundingClientRect&&e!==window)){var i,r,d,a,v,b,f;if(e!==window&&e.parentNode&&e!==_e()?(i=e.getBoundingClientRect(),r=i.top,d=i.left,a=i.bottom,v=i.right,b=i.height,f=i.width):(r=0,d=0,a=window.innerHeight,v=window.innerWidth,b=window.innerHeight,f=window.innerWidth),(o||t)&&e!==window&&(l=l||e.parentNode,!Ee))do if(l&&l.getBoundingClientRect&&(S(l,"transform")!=="none"||t&&S(l,"position")!=="static")){var p=l.getBoundingClientRect();r-=p.top+parseInt(S(l,"border-top-width")),d-=p.left+parseInt(S(l,"border-left-width")),a=r+i.height,v=d+i.width;break}while(l=l.parentNode);if(n&&e!==window){var C=Ye(l||e),I=C&&C.a,V=C&&C.d;C&&(r/=V,d/=I,f/=I,b/=V,a=r+b,v=d+f)}return{top:r,left:d,bottom:a,right:v,width:f,height:b}}}function vo(e,o,t){for(var n=Se(e,!0),l=ee(e)[o];n;){var i=ee(n)[t],r=void 0;if(r=l>=i,!r)return n;if(n===_e())break;n=Se(n,!1)}return!1}function Xe(e,o,t,n){for(var l=0,i=0,r=e.children;i<r.length;){if(r[i].style.display!=="none"&&r[i]!==k.ghost&&(n||r[i]!==k.dragged)&&be(r[i],t.draggable,e,!1)){if(l===o)return r[i];l++}i++}return null}function Qt(e,o){for(var t=e.lastElementChild;t&&(t===k.ghost||S(t,"display")==="none"||o&&!ht(t,o));)t=t.previousElementSibling;return t||null}function pe(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==k.clone&&(!o||ht(e,o))&&t++;return t}function go(e){var o=0,t=0,n=_e();if(e)do{var l=Ye(e),i=l.a,r=l.d;o+=e.scrollLeft*i,t+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[o,t]}function Mn(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var n in o)if(o.hasOwnProperty(n)&&o[n]===e[t][n])return Number(t)}return-1}function Se(e,o){if(!e||!e.getBoundingClientRect)return _e();var t=e,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=S(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return _e();if(n||o)return t;n=!0}}while(t=t.parentNode);return _e()}function Rn(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function kt(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var Qe;function $o(e,o){return function(){if(!Qe){var t=arguments,n=this;t.length===1?e.call(n,t[0]):e.apply(n,t),Qe=setTimeout(function(){Qe=void 0},o)}}}function $n(){clearTimeout(Qe),Qe=void 0}function Fo(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function Uo(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Bo(e,o,t){var n={};return Array.from(e.children).forEach(function(l){var i,r,d,a;if(!(!be(l,o.draggable,e,!1)||l.animated||l===t)){var v=ee(l);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,v.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,v.top),n.right=Math.max((d=n.right)!==null&&d!==void 0?d:-1/0,v.right),n.bottom=Math.max((a=n.bottom)!==null&&a!==void 0?a:-1/0,v.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ce="Sortable"+new Date().getTime();function Fn(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(n){if(!(S(n,"display")==="none"||n===k.ghost)){e.push({target:n,rect:ee(n)});var l=we({},e[e.length-1].rect);if(n.thisAnimationDuration){var i=Ye(n,!0);i&&(l.top-=i.f,l.left-=i.e)}n.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Mn(e,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var l=!1,i=0;e.forEach(function(r){var d=0,a=r.target,v=a.fromRect,b=ee(a),f=a.prevFromRect,p=a.prevToRect,C=r.rect,I=Ye(a,!0);I&&(b.top-=I.f,b.left-=I.e),a.toRect=b,a.thisAnimationDuration&&kt(f,b)&&!kt(v,b)&&(C.top-b.top)/(C.left-b.left)===(v.top-b.top)/(v.left-b.left)&&(d=Bn(C,f,p,n.options)),kt(b,v)||(a.prevFromRect=v,a.prevToRect=b,d||(d=n.options.animation),n.animate(a,C,b,d)),d&&(l=!0,i=Math.max(i,d),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},d),a.thisAnimationDuration=d)}),clearTimeout(o),l?o=setTimeout(function(){typeof t=="function"&&t()},i):typeof t=="function"&&t(),e=[]},animate:function(t,n,l,i){if(i){S(t,"transition",""),S(t,"transform","");var r=Ye(this.el),d=r&&r.a,a=r&&r.d,v=(n.left-l.left)/(d||1),b=(n.top-l.top)/(a||1);t.animatingX=!!v,t.animatingY=!!b,S(t,"transform","translate3d("+v+"px,"+b+"px,0)"),this.forRepaintDummy=Un(t),S(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),S(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){S(t,"transition",""),S(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}function Un(e){return e.offsetWidth}function Bn(e,o,t,n){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*n.animation}var Re=[],xt={initializeByDefault:!0},ot={mount:function(e){for(var o in xt)xt.hasOwnProperty(o)&&!(o in e)&&(e[o]=xt[o]);Re.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,o,t){var n=this;this.eventCanceled=!1,t.cancel=function(){n.eventCanceled=!0};var l=e+"Global";Re.forEach(function(i){o[i.pluginName]&&(o[i.pluginName][l]&&o[i.pluginName][l](we({sortable:o},t)),o.options[i.pluginName]&&o[i.pluginName][e]&&o[i.pluginName][e](we({sortable:o},t)))})},initializePlugins:function(e,o,t,n){Re.forEach(function(r){var d=r.pluginName;if(!(!e.options[d]&&!r.initializeByDefault)){var a=new r(e,o,e.options);a.sortable=e,a.options=e.options,e[d]=a,De(t,a.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var i=this.modifyOption(e,l,e.options[l]);typeof i<"u"&&(e.options[l]=i)}},getEventProperties:function(e,o){var t={};return Re.forEach(function(n){typeof n.eventProperties=="function"&&De(t,n.eventProperties.call(o[n.pluginName],e))}),t},modifyOption:function(e,o,t){var n;return Re.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(n=l.optionListeners[o].call(e[l.pluginName],t))}),n}};function zn(e){var o=e.sortable,t=e.rootEl,n=e.name,l=e.targetEl,i=e.cloneEl,r=e.toEl,d=e.fromEl,a=e.oldIndex,v=e.newIndex,b=e.oldDraggableIndex,f=e.newDraggableIndex,p=e.originalEvent,C=e.putSortable,I=e.extraEventProperties;if(o=o||t&&t[ce],!!o){var V,B=o.options,D="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Ee&&!tt?V=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(V=document.createEvent("Event"),V.initEvent(n,!0,!0)),V.to=r||t,V.from=d||t,V.item=l||t,V.clone=i,V.oldIndex=a,V.newIndex=v,V.oldDraggableIndex=b,V.newDraggableIndex=f,V.originalEvent=p,V.pullMode=C?C.lastPutMode:void 0;var $=we(we({},I),ot.getEventProperties(n,o));for(var O in $)V[O]=$[O];t&&t.dispatchEvent(V),B[D]&&B[D].call(o,V)}}var jn=["evt"],re=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.evt,l=On(t,jn);ot.pluginEvent.bind(k)(e,o,we({dragEl:h,parentEl:W,ghostEl:P,rootEl:H,nextEl:Pe,lastDownEl:ct,cloneEl:G,cloneHidden:Te,dragStarted:Ke,putSortable:oe,activeSortable:k.active,originalEvent:n,oldIndex:ze,oldDraggableIndex:Je,newIndex:ue,newDraggableIndex:Ve,hideGhostForTarget:Lo,unhideGhostForTarget:Xo,cloneNowHidden:function(){Te=!0},cloneNowShown:function(){Te=!1},dispatchSortableEvent:function(i){le({sortable:o,name:i,originalEvent:n})}},l))};function le(e){zn(we({putSortable:oe,cloneEl:G,targetEl:h,rootEl:H,oldIndex:ze,oldDraggableIndex:Je,newIndex:ue,newDraggableIndex:Ve},e))}var h,W,P,H,Pe,ct,G,Te,ze,ue,Je,Ve,lt,oe,Fe=!1,bt=!1,yt=[],ke,he,Pt,Ot,ho,bo,Ke,$e,Ze,et=!1,at=!1,pt,ne,Nt=[],jt=!1,_t=[],Vt=typeof document<"u",it=No,yo=tt||Ee?"cssFloat":"float",Yn=Vt&&!Io&&!No&&"draggable"in document.createElement("div"),zo=function(){if(Vt){if(Ee)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),jo=function(e,o){var t=S(e),n=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Xe(e,0,o),i=Xe(e,1,o),r=l&&S(l),d=i&&S(i),a=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ee(l).width,v=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+ee(i).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&r.float&&r.float!=="none"){var b=r.float==="left"?"left":"right";return i&&(d.clear==="both"||d.clear===b)?"vertical":"horizontal"}return l&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||a>=n&&t[yo]==="none"||i&&t[yo]==="none"&&a+v>n)?"vertical":"horizontal"},Ln=function(e,o,t){var n=t?e.left:e.top,l=t?e.right:e.bottom,i=t?e.width:e.height,r=t?o.left:o.top,d=t?o.right:o.bottom,a=t?o.width:o.height;return n===r||l===d||n+i/2===r+a/2},Xn=function(e,o){var t;return yt.some(function(n){var l=n[ce].options.emptyInsertThreshold;if(!(!l||Qt(n))){var i=ee(n),r=e>=i.left-l&&e<=i.right+l,d=o>=i.top-l&&o<=i.bottom+l;if(r&&d)return t=n}}),t},Yo=function(e){function o(l,i){return function(r,d,a,v){var b=r.options.group.name&&d.options.group.name&&r.options.group.name===d.options.group.name;if(l==null&&(i||b))return!0;if(l==null||l===!1)return!1;if(i&&l==="clone")return l;if(typeof l=="function")return o(l(r,d,a,v),i)(r,d,a,v);var f=(i?r:d).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},n=e.group;(!n||dt(n)!="object")&&(n={name:n}),t.name=n.name,t.checkPull=o(n.pull,!0),t.checkPut=o(n.put),t.revertClone=n.revertClone,e.group=t},Lo=function(){!zo&&P&&S(P,"display","none")},Xo=function(){!zo&&P&&S(P,"display","")};Vt&&!Io&&document.addEventListener("click",function(e){if(bt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),bt=!1,!1},!0);var xe=function(e){if(h){e=e.touches?e.touches[0]:e;var o=Xn(e.clientX,e.clientY);if(o){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[ce]._onDragOver(t)}}},Hn=function(e){h&&h.parentNode[ce]._isOutsideThisEl(e.target)};function k(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=De({},o),e[ce]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return jo(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:k.supportPointer!==!1&&"PointerEvent"in window&&!We,emptyInsertThreshold:5};ot.initializePlugins(this,e,t);for(var n in t)!(n in o)&&(o[n]=t[n]);Yo(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:Yn,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?z(e,"pointerdown",this._onTapStart):(z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),yt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),De(this,Fn())}k.prototype={constructor:k,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&($e=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,n=this.options,l=n.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(r||e).target,a=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,v=n.filter;if(el(t),!h&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||n.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&We&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=be(d,n.draggable,t,!1),!(d&&d.animated)&&ct!==d)){if(ze=pe(d),Je=pe(d,n.draggable),typeof v=="function"){if(v.call(this,e,d,this)){le({sortable:o,rootEl:a,name:"filter",targetEl:d,toEl:t,fromEl:t}),re("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(b){if(b=be(a,b.trim(),t,!1),b)return le({sortable:o,rootEl:b,name:"filter",targetEl:d,fromEl:t,toEl:t}),re("filter",o,{evt:e}),!0}),v)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!be(a,n.handle,t,!1)||this._prepareDragStart(e,r,d)}}},_prepareDragStart:function(e,o,t){var n=this,l=n.el,i=n.options,r=l.ownerDocument,d;if(t&&!h&&t.parentNode===l){var a=ee(t);if(H=l,h=t,W=h.parentNode,Pe=h.nextSibling,ct=t,lt=i.group,k.dragged=h,ke={target:h,clientX:(o||e).clientX,clientY:(o||e).clientY},ho=ke.clientX-a.left,bo=ke.clientY-a.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,h.style["will-change"]="all",d=function(){if(re("delayEnded",n,{evt:e}),k.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!mo&&n.nativeDraggable&&(h.draggable=!0),n._triggerDragStart(e,o),le({sortable:n,name:"choose",originalEvent:e}),se(h,i.chosenClass,!0)},i.ignore.split(",").forEach(function(v){Ro(h,v.trim(),It)}),z(r,"dragover",xe),z(r,"mousemove",xe),z(r,"touchmove",xe),z(r,"mouseup",n._onDrop),z(r,"touchend",n._onDrop),z(r,"touchcancel",n._onDrop),mo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),re("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(tt||Ee))){if(k.eventCanceled){this._onDrop();return}z(r,"mouseup",n._disableDelayedDrag),z(r,"touchend",n._disableDelayedDrag),z(r,"touchcancel",n._disableDelayedDrag),z(r,"mousemove",n._delayedDragTouchMoveHandler),z(r,"touchmove",n._delayedDragTouchMoveHandler),i.supportPointer&&z(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(d,i.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&It(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"mousemove",this._delayedDragTouchMoveHandler),U(e,"touchmove",this._delayedDragTouchMoveHandler),U(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):o?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(h,"dragend",this),z(H,"dragstart",this._onDragStart));try{document.selection?mt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(Fe=!1,H&&h){re("dragStarted",this,{evt:o}),this.nativeDraggable&&z(document,"dragover",Hn);var t=this.options;!e&&se(h,t.dragClass,!1),se(h,t.ghostClass,!0),k.active=this,e&&this._appendGhost(),le({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(he){this._lastX=he.clientX,this._lastY=he.clientY,Lo();for(var e=document.elementFromPoint(he.clientX,he.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(he.clientX,he.clientY),e!==o);)o=e;if(h.parentNode[ce]._isOutsideThisEl(e),o)do{if(o[ce]){var t=void 0;if(t=o[ce]._onDragOver({clientX:he.clientX,clientY:he.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);Xo()}},_onTouchMove:function(e){if(ke){var o=this.options,t=o.fallbackTolerance,n=o.fallbackOffset,l=e.touches?e.touches[0]:e,i=P&&Ye(P,!0),r=P&&i&&i.a,d=P&&i&&i.d,a=it&&ne&&go(ne),v=(l.clientX-ke.clientX+n.x)/(r||1)+(a?a[0]-Nt[0]:0)/(r||1),b=(l.clientY-ke.clientY+n.y)/(d||1)+(a?a[1]-Nt[1]:0)/(d||1);if(!k.active&&!Fe){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(P){i?(i.e+=v-(Pt||0),i.f+=b-(Ot||0)):i={a:1,b:0,c:0,d:1,e:v,f:b};var f="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");S(P,"webkitTransform",f),S(P,"mozTransform",f),S(P,"msTransform",f),S(P,"transform",f),Pt=v,Ot=b,he=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!P){var e=this.options.fallbackOnBody?document.body:H,o=ee(h,!0,it,!0,e),t=this.options;if(it){for(ne=e;S(ne,"position")==="static"&&S(ne,"transform")==="none"&&ne!==document;)ne=ne.parentNode;ne!==document.body&&ne!==document.documentElement?(ne===document&&(ne=_e()),o.top+=ne.scrollTop,o.left+=ne.scrollLeft):ne=_e(),Nt=go(ne)}P=h.cloneNode(!0),se(P,t.ghostClass,!1),se(P,t.fallbackClass,!0),se(P,t.dragClass,!0),S(P,"transition",""),S(P,"transform",""),S(P,"box-sizing","border-box"),S(P,"margin",0),S(P,"top",o.top),S(P,"left",o.left),S(P,"width",o.width),S(P,"height",o.height),S(P,"opacity","0.8"),S(P,"position",it?"absolute":"fixed"),S(P,"zIndex","100000"),S(P,"pointerEvents","none"),k.ghost=P,e.appendChild(P),S(P,"transform-origin",ho/parseInt(P.style.width)*100+"% "+bo/parseInt(P.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,n=e.dataTransfer,l=t.options;if(re("dragStart",this,{evt:e}),k.eventCanceled){this._onDrop();return}re("setupClone",this),k.eventCanceled||(G=Uo(h),G.removeAttribute("id"),G.draggable=!1,G.style["will-change"]="",this._hideClone(),se(G,this.options.chosenClass,!1),k.clone=G),t.cloneId=mt(function(){re("clone",t),!k.eventCanceled&&(t.options.removeCloneOnHide||H.insertBefore(G,h),t._hideClone(),le({sortable:t,name:"clone"}))}),!o&&se(h,l.dragClass,!0),o?(bt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(U(document,"mouseup",t._onDrop),U(document,"touchend",t._onDrop),U(document,"touchcancel",t._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(t,n,h)),z(document,"drop",t),S(h,"transform","translateZ(0)")),Fe=!0,t._dragStartId=mt(t._dragStarted.bind(t,o,e)),z(document,"selectstart",t),Ke=!0,We&&S(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,n,l,i,r=this.options,d=r.group,a=k.active,v=lt===d,b=r.sort,f=oe||a,p,C=this,I=!1;if(jt)return;function V(te,c){re(te,C,we({evt:e,isOwner:v,axis:p?"vertical":"horizontal",revert:i,dragRect:n,targetRect:l,canSort:b,fromSortable:f,target:t,completed:D,onMove:function(R,At){return rt(H,o,h,n,R,ee(R),e,At)},changed:$},c))}function B(){V("dragOverAnimationCapture"),C.captureAnimationState(),C!==f&&f.captureAnimationState()}function D(te){return V("dragOverCompleted",{insertion:te}),te&&(v?a._hideClone():a._showClone(C),C!==f&&(se(h,oe?oe.options.ghostClass:a.options.ghostClass,!1),se(h,r.ghostClass,!0)),oe!==C&&C!==k.active?oe=C:C===k.active&&oe&&(oe=null),f===C&&(C._ignoreWhileAnimating=t),C.animateAll(function(){V("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===h&&!h.animated||t===o&&!t.animated)&&($e=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(h.parentNode[ce]._isOutsideThisEl(e.target),!te&&xe(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),I=!0}function $(){ue=pe(h),Ve=pe(h,r.draggable),le({sortable:C,name:"change",toEl:o,newIndex:ue,newDraggableIndex:Ve,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=be(t,r.draggable,o,!0),V("dragOver"),k.eventCanceled)return I;if(h.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||C._ignoreWhileAnimating===t)return D(!1);if(bt=!1,a&&!r.disabled&&(v?b||(i=W!==H):oe===this||(this.lastPutMode=lt.checkPull(this,a,h,e))&&d.checkPut(this,a,h,e))){if(p=this._getDirection(e,t)==="vertical",n=ee(h),V("dragOverValid"),k.eventCanceled)return I;if(i)return W=H,B(),this._hideClone(),V("revert"),k.eventCanceled||(Pe?H.insertBefore(h,Pe):H.appendChild(h)),D(!0);var O=Qt(o,r.draggable);if(!O||Wn(e,p,this)&&!O.animated){if(O===h)return D(!1);if(O&&o===e.target&&(t=O),t&&(l=ee(t)),rt(H,o,h,n,t,l,e,!!t)!==!1)return B(),O&&O.nextSibling?o.insertBefore(h,O.nextSibling):o.appendChild(h),W=o,$(),D(!0)}else if(O&&Gn(e,p,this)){var K=Xe(o,0,r,!0);if(K===h)return D(!1);if(t=K,l=ee(t),rt(H,o,h,n,t,l,e,!1)!==!1)return B(),o.insertBefore(h,K),W=o,$(),D(!0)}else if(t.parentNode===o){l=ee(t);var X=0,ie,ge=h.parentNode!==o,x=!Ln(h.animated&&h.toRect||n,t.animated&&t.toRect||l,p),_=p?"top":"left",m=vo(t,"top","top")||vo(h,"top","top"),q=m?m.scrollTop:void 0;$e!==t&&(ie=l[_],et=!1,at=!x&&r.invertSwap||ge),X=Qn(e,t,l,p,x?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,at,$e===t);var w;if(X!==0){var E=pe(h);do E-=X,w=W.children[E];while(w&&(S(w,"display")==="none"||w===P))}if(X===0||w===t)return D(!1);$e=t,Ze=X;var A=t.nextElementSibling,M=!1;M=X===1;var F=rt(H,o,h,n,t,l,e,M);if(F!==!1)return(F===1||F===-1)&&(M=F===1),jt=!0,setTimeout(qn,30),B(),M&&!A?o.appendChild(h):t.parentNode.insertBefore(h,M?A:t),m&&Fo(m,0,q-m.scrollTop),W=h.parentNode,ie!==void 0&&!at&&(pt=Math.abs(ie-ee(t)[_])),$(),D(!0)}if(o.contains(h))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){U(document,"mousemove",this._onTouchMove),U(document,"touchmove",this._onTouchMove),U(document,"pointermove",this._onTouchMove),U(document,"dragover",xe),U(document,"mousemove",xe),U(document,"touchmove",xe)},_offUpEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"pointerup",this._onDrop),U(e,"touchcancel",this._onDrop),U(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(ue=pe(h),Ve=pe(h,t.draggable),re("drop",this,{evt:e}),W=h&&h.parentNode,ue=pe(h),Ve=pe(h,t.draggable),k.eventCanceled){this._nulling();return}Fe=!1,at=!1,et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Yt(this.cloneId),Yt(this._dragStartId),this.nativeDraggable&&(U(document,"drop",this),U(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),We&&S(document.body,"user-select",""),S(h,"transform",""),e&&(Ke&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),P&&P.parentNode&&P.parentNode.removeChild(P),(H===W||oe&&oe.lastPutMode!=="clone")&&G&&G.parentNode&&G.parentNode.removeChild(G),h&&(this.nativeDraggable&&U(h,"dragend",this),It(h),h.style["will-change"]="",Ke&&!Fe&&se(h,oe?oe.options.ghostClass:this.options.ghostClass,!1),se(h,this.options.chosenClass,!1),le({sortable:this,name:"unchoose",toEl:W,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==W?(ue>=0&&(le({rootEl:W,name:"add",toEl:W,fromEl:H,originalEvent:e}),le({sortable:this,name:"remove",toEl:W,originalEvent:e}),le({rootEl:W,name:"sort",toEl:W,fromEl:H,originalEvent:e}),le({sortable:this,name:"sort",toEl:W,originalEvent:e})),oe&&oe.save()):ue!==ze&&ue>=0&&(le({sortable:this,name:"update",toEl:W,originalEvent:e}),le({sortable:this,name:"sort",toEl:W,originalEvent:e})),k.active&&((ue==null||ue===-1)&&(ue=ze,Ve=Je),le({sortable:this,name:"end",toEl:W,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){re("nulling",this),H=h=W=P=Pe=G=ct=Te=ke=he=Ke=ue=Ve=ze=Je=$e=Ze=oe=lt=k.dragged=k.ghost=k.clone=k.active=null,_t.forEach(function(e){e.checked=!0}),_t.length=Pt=Ot=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),Kn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,n=0,l=t.length,i=this.options;n<l;n++)o=t[n],be(o,i.draggable,this.el,!1)&&e.push(o.getAttribute(i.dataIdAttr)||Zn(o));return e},sort:function(e,o){var t={},n=this.el;this.toArray().forEach(function(l,i){var r=n.children[i];be(r,this.options.draggable,n,!1)&&(t[l]=r)},this),o&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(n.removeChild(t[l]),n.appendChild(t[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return be(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var n=ot.modifyOption(this,e,o);typeof n<"u"?t[e]=n:t[e]=o,e==="group"&&Yo(t)},destroy:function(){re("destroy",this);var e=this.el;e[ce]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),U(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yt.splice(yt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Te){if(re("hideClone",this),k.eventCanceled)return;S(G,"display","none"),this.options.removeCloneOnHide&&G.parentNode&&G.parentNode.removeChild(G),Te=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Te){if(re("showClone",this),k.eventCanceled)return;h.parentNode==H&&!this.options.group.revertClone?H.insertBefore(G,h):Pe?H.insertBefore(G,Pe):H.appendChild(G),this.options.group.revertClone&&this.animate(h,G),S(G,"display",""),Te=!1}}};function Kn(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function rt(e,o,t,n,l,i,r,d){var a,v=e[ce],b=v.options.onMove,f;return window.CustomEvent&&!Ee&&!tt?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=o,a.from=e,a.dragged=t,a.draggedRect=n,a.related=l||o,a.relatedRect=i||ee(o),a.willInsertAfter=d,a.originalEvent=r,e.dispatchEvent(a),b&&(f=b.call(v,a,r)),f}function It(e){e.draggable=!1}function qn(){jt=!1}function Gn(e,o,t){var n=ee(Xe(t.el,0,t.options,!0)),l=Bo(t.el,t.options,P),i=10;return o?e.clientX<l.left-i||e.clientY<n.top&&e.clientX<n.right:e.clientY<l.top-i||e.clientY<n.bottom&&e.clientX<n.left}function Wn(e,o,t){var n=ee(Qt(t.el,t.options.draggable)),l=Bo(t.el,t.options,P),i=10;return o?e.clientX>l.right+i||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>l.bottom+i||e.clientX>n.right&&e.clientY>n.top}function Qn(e,o,t,n,l,i,r,d){var a=n?e.clientY:e.clientX,v=n?t.height:t.width,b=n?t.top:t.left,f=n?t.bottom:t.right,p=!1;if(!r){if(d&&pt<v*l){if(!et&&(Ze===1?a>b+v*i/2:a<f-v*i/2)&&(et=!0),et)p=!0;else if(Ze===1?a<b+pt:a>f-pt)return-Ze}else if(a>b+v*(1-l)/2&&a<f-v*(1-l)/2)return Jn(o)}return p=p||r,p&&(a<b+v*i/2||a>f-v*i/2)?a>b+v/2?1:-1:0}function Jn(e){return pe(h)<pe(e)?1:-1}function Zn(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,n=0;t--;)n+=o.charCodeAt(t);return n.toString(36)}function el(e){_t.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var n=o[t];n.checked&&_t.push(n)}}function mt(e){return setTimeout(e,0)}function Yt(e){return clearTimeout(e)}Vt&&z(document,"touchmove",function(e){(k.active||Fe)&&e.cancelable&&e.preventDefault()});k.utils={on:z,off:U,css:S,find:Ro,is:function(e,o){return!!be(e,o,e,!1)},extend:Rn,throttle:$o,closest:be,toggleClass:se,clone:Uo,index:pe,nextTick:mt,cancelNextTick:Yt,detectDirection:jo,getChild:Xe};k.get=function(e){return e[ce]};k.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(k.utils=we(we({},k.utils),n.utils)),ot.mount(n)})};k.create=function(e,o){return new k(e,o)};k.version=Nn;var J=[],qe,Lt,Xt=!1,Mt,Rt,wt,Ge;function tl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):t.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):(U(document,"pointermove",this._handleFallbackAutoScroll),U(document,"touchmove",this._handleFallbackAutoScroll),U(document,"mousemove",this._handleFallbackAutoScroll)),_o(),ft(),$n()},nulling:function(){wt=Lt=qe=Xt=Ge=Mt=Rt=null,J.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var n=this,l=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,r=document.elementFromPoint(l,i);if(wt=o,t||this.options.forceAutoScrollFallback||tt||Ee||We){$t(o,this.options,r,t);var d=Se(r,!0);Xt&&(!Ge||l!==Mt||i!==Rt)&&(Ge&&_o(),Ge=setInterval(function(){var a=Se(document.elementFromPoint(l,i),!0);a!==d&&(d=a,ft()),$t(o,n.options,a,t)},10),Mt=l,Rt=i)}else{if(!this.options.bubbleScroll||Se(r,!0)===_e()){ft();return}$t(o,this.options,Se(r,!1),!1)}}},De(e,{pluginName:"scroll",initializeByDefault:!0})}function ft(){J.forEach(function(e){clearInterval(e.pid)}),J=[]}function _o(){clearInterval(Ge)}var $t=$o(function(e,o,t,n){if(o.scroll){var l=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=o.scrollSensitivity,d=o.scrollSpeed,a=_e(),v=!1,b;Lt!==t&&(Lt=t,ft(),qe=o.scroll,b=o.scrollFn,qe===!0&&(qe=Se(t,!0)));var f=0,p=qe;do{var C=p,I=ee(C),V=I.top,B=I.bottom,D=I.left,$=I.right,O=I.width,K=I.height,X=void 0,ie=void 0,ge=C.scrollWidth,x=C.scrollHeight,_=S(C),m=C.scrollLeft,q=C.scrollTop;C===a?(X=O<ge&&(_.overflowX==="auto"||_.overflowX==="scroll"||_.overflowX==="visible"),ie=K<x&&(_.overflowY==="auto"||_.overflowY==="scroll"||_.overflowY==="visible")):(X=O<ge&&(_.overflowX==="auto"||_.overflowX==="scroll"),ie=K<x&&(_.overflowY==="auto"||_.overflowY==="scroll"));var w=X&&(Math.abs($-l)<=r&&m+O<ge)-(Math.abs(D-l)<=r&&!!m),E=ie&&(Math.abs(B-i)<=r&&q+K<x)-(Math.abs(V-i)<=r&&!!q);if(!J[f])for(var A=0;A<=f;A++)J[A]||(J[A]={});(J[f].vx!=w||J[f].vy!=E||J[f].el!==C)&&(J[f].el=C,J[f].vx=w,J[f].vy=E,clearInterval(J[f].pid),(w!=0||E!=0)&&(v=!0,J[f].pid=setInterval((function(){n&&this.layer===0&&k.active._onTouchMove(wt);var M=J[this.layer].vy?J[this.layer].vy*d:0,F=J[this.layer].vx?J[this.layer].vx*d:0;typeof b=="function"&&b.call(k.dragged.parentNode[ce],F,M,e,wt,J[this.layer].el)!=="continue"||Fo(J[this.layer].el,F,M)}).bind({layer:f}),24))),f++}while(o.bubbleScroll&&p!==a&&(p=Se(p,!1)));Xt=v}},30),Ho=function(e){var o=e.originalEvent,t=e.putSortable,n=e.dragEl,l=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(o){var a=t||l;r();var v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,b=document.elementFromPoint(v.clientX,v.clientY);d(),a&&!a.el.contains(b)&&(i("spill"),this.onSpill({dragEl:n,putSortable:t}))}};function Jt(){}Jt.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var n=Xe(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(o,n):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:Ho};De(Jt,{pluginName:"revertOnSpill"});function Zt(){}Zt.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,n=t||this.sortable;n.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),n.animateAll()},drop:Ho};De(Zt,{pluginName:"removeOnSpill"});k.mount(new tl);k.mount(Zt,Jt);function ol(e){return e==null?e:JSON.parse(JSON.stringify(e))}function nl(e){qt()&&en(e)}function ll(e){qt()?Gt(e):Eo(e)}let Ko=null,qo=null;function wo(e=null,o=null){Ko=e,qo=o}function al(){return{data:Ko,clonedData:qo}}const Co=Symbol("cloneElement");function il(...e){var o,t;const n=(o=qt())==null?void 0:o.proxy;let l=null;const i=e[0];let[,r,d]=e;Array.isArray(y(r))||(d=r,r=null);let a=null;const{immediate:v=!0,clone:b=ol,customUpdate:f}=(t=y(d))!=null?t:{};function p(x){var _;const{from:m,oldIndex:q,item:w}=x;l=Array.from(m.childNodes);const E=y((_=y(r))==null?void 0:_[q]),A=b(E);wo(E,A),w[Co]=A}function C(x){const _=x.item[Co];if(!Cn(_)){if(St(x.item),st(r)){const m=[...y(r)];r.value=so(m,x.newDraggableIndex,_);return}so(y(r),x.newDraggableIndex,_)}}function I(x){const{from:_,item:m,oldIndex:q,oldDraggableIndex:w,pullMode:E,clone:A}=x;if(uo(_,m,q),E==="clone"){St(A);return}if(st(r)){const M=[...y(r)];r.value=ro(M,w);return}ro(y(r),w)}function V(x){if(f){f(x);return}const{from:_,item:m,oldIndex:q,newIndex:w}=x;if(St(m),uo(_,m,q),st(r)){const E=[...y(r)];r.value=io(E,q,w);return}io(y(r),q,w)}function B(x){const{newIndex:_,oldIndex:m,from:q,to:w}=x;let E=null;const A=_===m&&q===w;try{if(A){let M=null;l==null||l.some((F,te)=>{if(M&&(l==null?void 0:l.length)!==w.childNodes.length)return q.insertBefore(M,F.nextSibling),!0;const c=w.childNodes[te];M=w==null?void 0:w.replaceChild(F,c)})}}catch(M){E=M}finally{l=null}Eo(()=>{if(wo(),E)throw E})}const D={onUpdate:V,onStart:p,onAdd:C,onRemove:I,onEnd:B};function $(x){const _=y(i);return x||(x=Dn(_)?En(_,n==null?void 0:n.$el):_),x&&!Tn(x)&&(x=x.$el),x||yn("Root element not found"),x}function O(){var x;const _=(x=y(d))!=null?x:{},m=Po(_,["immediate","clone"]);return co(m,(q,w)=>{Sn(q)&&(m[q]=(E,...A)=>{const M=al();return kn(E,M),w(E,...A)})}),An(r===null?{}:D,m)}const K=x=>{x=$(x),a&&X.destroy(),a=new k(x,O())};Le(()=>d,()=>{a&&co(O(),(x,_)=>{a==null||a.option(x,_)})},{deep:!0});const X={option:(x,_)=>a==null?void 0:a.option(x,_),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...x)=>a==null?void 0:a.closest(...x)},ie=()=>X==null?void 0:X.option("disabled",!0),ge=()=>X==null?void 0:X.option("disabled",!1);return ll(()=>{v&&K()}),nl(X.destroy),Be({start:K,pause:ie,resume:ge},X)}const Ht=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],rl=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Ht.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)],sl=Wo({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:rl,emits:["update:modelValue",...Ht],setup(e,{slots:o,emit:t,expose:n,attrs:l}){const i=Ht.reduce((b,f)=>{const p=`on${f.replace(/^\S/,C=>C.toUpperCase())}`;return b[p]=(...C)=>t(f,...C),b},{}),r=Oe(()=>{const b=Qo(e),f=Po(b,["modelValue"]),p=Object.entries(f).reduce((C,[I,V])=>{const B=y(V);return B!==void 0&&(C[I]=B),C},{});return Be(Be({},i),wn(Be(Be({},l),p)))}),d=Oe({get:()=>e.modelValue,set:b=>t("update:modelValue",b)}),a=Q(),v=Jo(il(e.target||a,d,r));return n(v),()=>{var b;return Zo(e.tag||"div",{ref:a},(b=o==null?void 0:o.default)==null?void 0:b.call(o,v))}}}),ul={__name:"AddQuoteDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:String,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,{generateQuote:n}=rn(),{getOpportunitybyId:l,opportunity:i,changeStatusByOpportunity:r}=Ct(),d=Q(!1),a=Q({social_reason:"",nit:"",address:"",email:"",phone:"",landline:"",workplace:"",expiration_date:null,creation_date:new Date().toISOString().split("T")[0],observations:"",payment_method:null,amount:null,initial_fee:null,percentage_initial_fee:null,balance:null,opportunity_id:null,customer_id:null,properties:[{property_id:null,price:null,price_it:null,price_contrato:null,property_type:nt.DEPARTAMENT.value,property_type_name:nt.DEPARTAMENT.label},{property_id:null,price:null,price_it:null,price_contrato:null,property_type:nt.PARK.value,property_type_name:nt.PARK.label}],differs_initial_fee:[],differs_balance:[]}),v=Oe(()=>a.value.social_reason&&a.value.nit&&a.value.phone&&a.value.amount&&a.value.creation_date&&a.value.expiration_date&&a.value.payment_method&&a.value.customer_id),b=Oe(()=>a.value.properties.every(D=>D.property_id!==null&&D.price!==null&&D.price_it!==null&&D.price_contrato!==null)),f=Oe(()=>a.value.differs_initial_fee.length===0?!0:a.value.differs_initial_fee.every(D=>D.amount!==null)),p=Oe(()=>{if(a.value.differs_initial_fee.length===0)return!0;const D=a.value.differs_initial_fee.reduce((K,X)=>K+(X.amount||0),0),$=parseFloat(D),O=parseFloat(a.value.initial_fee);return $===O}),C=Oe(()=>v.value&&b.value&&f.value),I=D=>{a.value.properties.push(D)},V=D=>{a.value.properties.splice(D,1)},B=async()=>{if(!C.value){to("Validación fallida","Completa todos los campos obligatorios.");return}if(!p.value){to("Validación fallida","La suma de las diferencias del anticipo no son correctas");return}d.value=!0;try{console.log(a),await n(a.value),await r(t.opportunityKanban.id,Ue.PRESALE.value,{})}catch(D){console.error("Error generando la venta:",D)}finally{d.value=!1}};return Le(()=>a.value.properties,D=>{let $=0;D.forEach(O=>{if(O.price){const K=parseFloat(O.price)||0;O.price_it=K*.03,O.price_contrato=K+O.price_it,$+=O.price_contrato}else O.price_it=null}),a.value.amount=$},{deep:!0}),Le(()=>t.isDialogVisible,async D=>{D&&(console.log("El diálogo se ha abierto"),await l(t.opportunityKanban.id),console.log("Datos de la oportunidad cargados:",i.value),a.value.customer_id=i.value.customer.id,i.value&&(a.value.social_reason=i.value.customer.name,a.value.email=i.value.customer.email,a.value.phone=i.value.customer.phone,a.value.nit=i.value.customer.ci,a.value.opportunity_id=i.value.id,i.value.property_id!==null?(i.value.property.property_type==="PARK"&&(a.value.properties[0].property_id=i.value.property_id,a.value.properties[0].property_id=null,a.value.properties[0].price=null,a.value.properties[0].price_it=null,a.value.properties[0].price_contrato=null),i.value.property.property_type==="DEPARTAMENT"&&(a.value.properties[0].property_id=i.value.property_id,a.value.properties[1].property_id=null,a.value.properties[1].price=null,a.value.properties[1].price_it=null,a.value.properties[1].price_contrato=null)):(a.value.properties[1].property_id=null,a.value.properties[1].price=null,a.value.properties[1].price_it=null,a.value.properties[1].price_contrato=null,a.value.properties[0].property_id=null,a.value.properties[0].price=null,a.value.properties[0].price_it=null,a.value.properties[0].price_contrato=null)))}),(D,$)=>{const O=Dt;return T(),fe(Et,{"max-width":"987","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":$[2]||($[2]=K=>D.$emit("update:isDialogVisible",K))},{default:u(()=>[s(O,{onClick:$[0]||($[0]=K=>D.$emit("update:isDialogVisible",!1))}),s(je,null,{default:u(()=>[s(Ae,null,{default:u(()=>[s(ye,null,{default:u(()=>[s(L,{cols:"12",md:"9"},{default:u(()=>[s(an,{data:a.value,onPush:I,onRemove:V},null,8,["data"])]),_:1}),s(L,{cols:"12",md:"3"},{default:u(()=>[s(Z,{loading:d.value,disabled:!y(C)||d.value,color:"primary",onClick:B},{default:u(()=>$[3]||($[3]=[Y(" Guardar Cotización ")])),_:1},8,["loading","disabled"]),s(Z,{text:"",color:"secondary",onClick:$[1]||($[1]=K=>D.$emit("update:isDialogVisible",!1))},{default:u(()=>$[4]||($[4]=[Y(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},dl={__name:"AddActivity",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0},typeActivities:{type:Array,default:()=>[]}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{registerActivity:l,loadingActivity:i}=Wt(),{generateProspect:r}=Ct(),d=Q({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),a=()=>{n("formCancelled"),n("update:isDialogVisible",!1)},v=async()=>{await l(d.value),console.log("opportunityKanban",t.opportunityKanban.stage),t.opportunityKanban.stage==="LEAD"&&await r(t.opportunityKanban.id,{}),d.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},n("update:isDialogVisible",!1)};return Le(()=>t.isDialogVisible,async b=>{var f,p;b===!0&&(d.value.opportunity_id=((f=t.opportunityKanban)==null?void 0:f.id)??null,d.value.assigned_to=((p=t.opportunityKanban)==null?void 0:p.user_id)??null,console.log(t.opportunityKanban))}),(b,f)=>{const p=Dt,C=Ao,I=vt,V=Kt,B=Vo;return T(),fe(Et,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":a},{default:u(()=>[s(p,{onClick:a}),s(je,{class:"pa-sm-8"},{default:u(()=>[s(Ut,null,{default:u(()=>[s(ut,{class:"text-h3 font-weight-medium mb-3"},{default:u(()=>f[4]||(f[4]=[Y(" Agregar Actividad ")])),_:1}),s(Ae,null,{default:u(()=>[s(Bt,{onSubmit:Ne(v,["prevent"])},{default:u(()=>[s(ye,null,{default:u(()=>[s(L,{cols:"12"},{default:u(()=>[s(C,{modelValue:d.value.title,"onUpdate:modelValue":f[0]||(f[0]=D=>d.value.title=D),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(I,{modelValue:d.value.type_activity_id,"onUpdate:modelValue":f[1]||(f[1]=D=>d.value.type_activity_id=D),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:t.typeActivities.map(D=>({title:D.name,value:D.id}))},null,8,["modelValue","items"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(V,{modelValue:d.value.scheduled_at,"onUpdate:modelValue":f[2]||(f[2]=D=>d.value.scheduled_at=D),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),s(L,{cols:"12"},{default:u(()=>[s(B,{modelValue:d.value.description,"onUpdate:modelValue":f[3]||(f[3]=D=>d.value.description=D),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",class:"text-center"},{default:u(()=>[s(Z,{type:"submit",class:"me-3",disabled:y(i),loading:y(i)},{default:u(()=>f[5]||(f[5]=[Y(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),s(Z,{color:"secondary",variant:"tonal",onClick:a},{default:u(()=>f[6]||(f[6]=[Y(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Do={PENDING:{value:"PENDING",label:"PENDIENTE"},COMPLETED:{value:"COMPLETED",label:"COMPLETADO"},CANCELED:{value:"CANCELED",label:"CANCELADO"}},cl={key:0},pl={key:1,class:"text-center my-5"},ml={class:"my-5"},fl={key:0},vl=["src"],gl={class:"mb-4"},hl=["onClick"],bl=["onClick"],yl={class:"my-5"},_l={key:0,class:"d-flex flex-wrap gap-2 my-5"},wl={key:1},Cl={class:"my-5"},Dl={key:0},El=["src"],Vl={class:"my-5"},Al={key:0,class:"d-flex flex-wrap gap-2 my-5"},Tl={key:1},Sl={__name:"TaskKanban",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(e,{emit:o}){const t=e,n=o;Object.values(Ue).map(_=>({title:_.label,value:_.value}));const{allProperty:l,properties:i}=So(),{getallTypeActivities:r,typeActivities:d,registerActivity:a,loadingActivity:v,changeStatusActivity:b}=Wt(),{getOpportunitybyId:f,opportunity:p,changeOpportunity:C,loadingOpportunity:I,changeStatusByOpportunity:V}=Ct(),B=Q({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),D=()=>{n("update:isDialogVisible",!1)},$=Q([{title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}]),O=Q($.value[0].value),K=async()=>{var _;(_=t.opportunityKanban)!=null&&_.id&&await f(t.opportunityKanban.id)},X=async()=>{await a(B.value),B.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},D()},ie=async()=>{console.log("antes del save:",p);const _={id:p.value.id,stage_id:p.value.stage_id,description:p.value.description,property_id:p.value.property_id,customer:{id:p.value.customer.id,name:p.value.customer.name,email:p.value.customer.email,ci:p.value.customer.ci,cod_phone:p.value.cod_phone,phone:p.value.customer.phone}};await C(p.value.id,_),D()},ge=async _=>{await b(_,{state_activity:Do.COMPLETED.value}),D()},x=()=>{const _=[];t.opportunityKanban.stage===Ue.DELIVERY.label&&_.push({title:"Entrega",value:"delivery"}),t.opportunityKanban.stage===Ue.SALE.label&&_.push({title:"Ventas",value:"sales"}),t.opportunityKanban.stage===Ue.PRESALE.label&&_.push({title:"Cotizaciones",value:"quotations"}),_.push({title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}),$.value=_,O.value=$.value[0].value};return Le(()=>t.isDialogVisible,async _=>{_&&(await K(),x(),await l({page:1,itemsPerPage:100}),await r())}),(_,m)=>{const q=Dt,w=Ao,E=vt,A=To,M=Vo,F=Kt,te=tn("RouterLink");return T(),fe(Et,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":D},{default:u(()=>[s(q,{onClick:D}),s(je,{class:"pa-sm-8"},{default:u(()=>[s(dn,{modelValue:O.value,"onUpdate:modelValue":m[0]||(m[0]=c=>O.value=c)},{default:u(()=>[(T(!0),N(ae,null,de($.value,c=>(T(),fe(cn,{key:c.value,value:c.value},{default:u(()=>[Y(j(c.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(pn,{modelValue:O.value,"onUpdate:modelValue":m[12]||(m[12]=c=>O.value=c)},{default:u(()=>[s(Ie,{value:"information",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:u(()=>[s(je,{title:"Información del Cliente y Oportunidad"},{default:u(()=>[s(Ae,null,{default:u(()=>[s(Bt,{onSubmit:Ne(ie,["prevent"])},{default:u(()=>[s(ye,null,{default:u(()=>[s(L,{cols:"12",md:"6"},{default:u(()=>[s(w,{modelValue:y(p).customer.name,"onUpdate:modelValue":m[1]||(m[1]=c=>y(p).customer.name=c),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(w,{modelValue:y(p).customer.email,"onUpdate:modelValue":m[2]||(m[2]=c=>y(p).customer.email=c),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(ye,null,{default:u(()=>[s(L,{cols:"4"},{default:u(()=>[s(E,{modelValue:y(p).customer.cod_phone,"onUpdate:modelValue":m[3]||(m[3]=c=>y(p).customer.cod_phone=c),label:"Código",items:["+1","+52","+55","+54","+49","+33","+34","+39","+86","+81","+7","+591"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),s(L,{cols:"8"},{default:u(()=>[s(w,{modelValue:y(p).customer.phone,"onUpdate:modelValue":m[4]||(m[4]=c=>y(p).customer.phone=c),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(w,{modelValue:y(p).customer.ci,"onUpdate:modelValue":m[5]||(m[5]=c=>y(p).customer.ci=c),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(A,{modelValue:y(p).property_id,"onUpdate:modelValue":m[6]||(m[6]=c=>y(p).property_id=c),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:y(i).map(c=>({title:c.title,value:c.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),s(L,{cols:"12"},{default:u(()=>[s(M,{modelValue:y(p).description,"onUpdate:modelValue":m[7]||(m[7]=c=>y(p).description=c),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"3","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",class:"text-center"},{default:u(()=>[s(Z,{type:"submit",color:"primary",class:"me-3",disabled:y(I),loading:y(I)},{default:u(()=>m[13]||(m[13]=[Y(" Guardar Cambios ")])),_:1},8,["disabled","loading"]),s(Z,{color:"secondary",variant:"tonal",onClick:D},{default:u(()=>m[14]||(m[14]=[Y(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(Ie,{value:"add_activity",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:u(()=>[s(Ut,null,{default:u(()=>[s(ut,{class:"text-h3 font-weight-medium mb-3"},{default:u(()=>m[15]||(m[15]=[Y(" Agregar Actividad ")])),_:1}),s(Ae,null,{default:u(()=>[s(Bt,{onSubmit:Ne(X,["prevent"])},{default:u(()=>[s(ye,null,{default:u(()=>[s(L,{cols:"12"},{default:u(()=>[s(w,{modelValue:B.value.title,"onUpdate:modelValue":m[8]||(m[8]=c=>B.value.title=c),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(E,{modelValue:B.value.type_activity_id,"onUpdate:modelValue":m[9]||(m[9]=c=>B.value.type_activity_id=c),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:y(d).map(c=>({title:c.name,value:c.id}))},null,8,["modelValue","items"])]),_:1}),s(L,{cols:"12",md:"6"},{default:u(()=>[s(F,{modelValue:B.value.scheduled_at,"onUpdate:modelValue":m[10]||(m[10]=c=>B.value.scheduled_at=c),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),s(L,{cols:"12"},{default:u(()=>[s(M,{modelValue:B.value.description,"onUpdate:modelValue":m[11]||(m[11]=c=>B.value.description=c),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),s(L,{cols:"12",class:"text-center"},{default:u(()=>[s(Z,{type:"submit",class:"me-3",disabled:y(v),loading:y(v)},{default:u(()=>m[16]||(m[16]=[Y(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),s(Z,{color:"secondary",variant:"tonal",onClick:D},{default:u(()=>m[17]||(m[17]=[Y(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(Ie,{value:"activity_list",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:u(()=>[s(Ut,null,{default:u(()=>[s(ut,{class:"text-h3 font-weight-medium mb-3"},{default:u(()=>m[18]||(m[18]=[Y(" Lista de Actividades ")])),_:1}),s(y(mn),{headers:[{title:"Actividad",value:"title"},{title:"Fecha",value:"scheduled_at"},{title:"Estado",value:"state_activity"},{title:"Descripción",value:"description"},{title:"Acciones",value:"actions",sortable:!1}],items:y(p).activities,"item-value":"id",class:"elevation-1","items-per-page":5},{"item.actions":u(({item:c})=>[s(Z,{title:"Marcar Como Realizada",color:"primary",disabled:c.state_activity!==y(Do).PENDING.value,onClick:R=>ge(c.id)},{default:u(()=>[s(ve,{icon:"tabler-checkbox"})]),_:2},1032,["disabled","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),s(Ie,{value:"quotations",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:u(()=>[s(je,null,{default:u(()=>[s(ut,{class:"d-flex justify-space-between align-center"},{default:u(()=>[m[20]||(m[20]=g("span",{class:"text-h3 font-weight-medium"},"Cotizaciones",-1)),s(te,{to:{name:"quote-add-quote"},class:"text-white"},{default:u(()=>[s(Z,{color:"primary",variant:"outlined",size:"small"},{default:u(()=>[s(ve,{icon:"tabler-plus"}),m[19]||(m[19]=Y(" Agregar nueva cotización "))]),_:1})]),_:1})]),_:1}),s(Ae,null,{default:u(()=>[g("div",null,[y(p).quotes&&y(p).quotes.length>0?(T(),N("div",cl,[s(Tt,{density:"compact",class:"text-no-wrap"},{default:u(()=>[m[21]||(m[21]=g("thead",null,[g("tr",null,[g("th",null,"Propiedad"),g("th",null,"Fecha"),g("th",null,"Monto"),g("th",null,"Acciones")])],-1)),g("tbody",null,[(T(!0),N(ae,null,de(y(p).quotes,c=>(T(),N("tr",{key:c.id},[g("td",null,j(c.properties[0].title),1),g("td",null,j(c.created_at),1),g("td",null,j(("formatCurrency"in _?_.formatCurrency:y(Ft))(c.amount)),1),g("td",null,[s(ye,{class:"d-flex align-center gap-2"},{default:u(()=>[s(He,{modelValue:c.status,"onUpdate:modelValue":R=>c.status=R,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:""},null,8,["modelValue","onUpdate:modelValue"]),s(He,{modelValue:c.status_customer,"onUpdate:modelValue":R=>c.status_customer=R,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:R=>_.statusQuoteCustomer(c.id,c.status_customer)},{default:u(()=>[s(Me,{activator:"parent",location:"top"},{default:u(()=>[Y(j(c.status_customer==="NOT_APPROVED"?"No aprobado por cliente":"Aprobado por cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"]),s(te,{to:{name:"quote-id",params:{id:c.id}}},{default:u(()=>[s(Z,{icon:"",variant:"plain"},{default:u(()=>[s(ve,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)])]))),128))])]),_:1})])):(T(),N("div",pl,m[22]||(m[22]=[g("span",null,"No hay procedimientos disponibles.",-1)])))])]),_:1})]),_:1})]),_:1}),s(Ie,{value:"sales",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:u(()=>[g("div",ml,[m[24]||(m[24]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),y(p).sales.length>0?(T(),N("div",fl,[(T(!0),N(ae,null,de(y(p).sales,c=>(T(),N("div",{key:c.id},[s(ye,null,{default:u(()=>[(T(!0),N(ae,null,de(c.properties,R=>(T(),fe(L,{key:R.id,class:"d-flex align-center justify-between",cols:"12",md:"9"},{default:u(()=>[s(oo,{size:"50",rounded:""},{default:u(()=>[g("img",{src:y(eo),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,vl)]),_:1}),s(L,{cols:"12"},{default:u(()=>[s(no,{class:"font-weight-medium"},{default:u(()=>[Y(j(R.project_title)+" | "+j(R.title),1)]),_:2},1024),s(lo,{class:"text-disabled d-flex justify-between mt-1"},{default:u(()=>[g("span",null,"$ "+j(R.pivot_price),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),s(He,{modelValue:c.confirmation_signature,"onUpdate:modelValue":R=>c.confirmation_signature=R,"true-value":1,"false-value":0,onChange:R=>_.confirmationSignature(c.id)},{default:u(()=>[s(Me,{activator:"parent",location:"top"},{default:u(()=>m[23]||(m[23]=[Y(" Confirmar firma ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]))),128))])):me("",!0)]),g("div",gl,[m[27]||(m[27]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Anticipo ",-1)),y(p).initial_payments&&y(p).initial_payments.length>0?(T(),fe(Tt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:u(()=>[m[26]||(m[26]=g("thead",null,[g("tr",null,[g("th",null," Propiedad "),g("th",null," Fecha "),g("th",null," Monto "),g("th",null," Action ")])],-1)),g("tbody",null,[(T(!0),N(ae,null,de(y(p).initial_payments,c=>(T(),N("tr",{key:c.id},[g("td",null,j(c.property_title),1),g("td",null,j(c.date),1),g("td",null,j(c.amount),1),g("td",null,[s(ye,null,{default:u(()=>[s(He,{modelValue:c.is_paid,"onUpdate:modelValue":R=>c.is_paid=R,"true-value":1,"false-value":0,disabled:c.is_paid===1,onChange:R=>_.confirmPayment(c.id)},{default:u(()=>[s(Me,{activator:"parent",location:"top"},{default:u(()=>m[25]||(m[25]=[Y(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"]),c.is_paid===0?(T(),N("div",{key:0,"fill-dot":"",style:{cursor:"pointer"},onClick:R=>_.editPaymentPlan(c)},[s(ve,{size:"25",icon:"tabler-edit"})],8,hl)):me("",!0)]),_:2},1024)])]))),128))])]),_:1})):me("",!0)]),g("div",null,[m[30]||(m[30]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Saldos ",-1)),y(p).balance_payments&&y(p).balance_payments.length>0?(T(),fe(Tt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:u(()=>[m[29]||(m[29]=g("thead",null,[g("tr",null,[g("th",null," Propiedad "),g("th",null," Fecha "),g("th",null," Monto "),g("th",null," Action ")])],-1)),g("tbody",null,[(T(!0),N(ae,null,de(y(p).balance_payments,c=>(T(),N("tr",{key:c.id},[g("td",null,j(c.property_title),1),g("td",null,j(c.date),1),g("td",null,j(c.amount),1),g("td",null,[s(ye,null,{default:u(()=>[s(He,{modelValue:c.is_paid,"onUpdate:modelValue":R=>c.is_paid=R,"true-value":1,"false-value":0,disabled:c.is_paid===1,onChange:R=>_.confirmPayment(c.id)},{default:u(()=>[s(Me,{activator:"parent",location:"top"},{default:u(()=>m[28]||(m[28]=[Y(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"]),c.is_paid===0?(T(),N("div",{key:0,"fill-dot":"",style:{cursor:"pointer"},onClick:R=>_.editPaymentPlan(c)},[s(ve,{size:"25",icon:"tabler-edit"})],8,bl)):me("",!0)]),_:2},1024)])]))),128))])]),_:1})):me("",!0)]),g("div",yl,[m[32]||(m[32]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),y(p).procedure&&y(p).procedure.length>0?(T(),N("div",_l,[(T(!0),N(ae,null,de(y(p).procedure,c=>(T(),N("div",{key:c.id},[s(zt,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:R=>_.markProcedureAsDone(c)},{default:u(()=>[c.pivot.is_check?(T(),fe(ve,{key:0,icon:"tabler-check",class:"mr-2"})):me("",!0),Y(" "+j(c.title),1)]),_:2},1032,["color","onClick"]),s(Me,{activator:"parent",location:"top"},{default:u(()=>[Y(j(c.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(T(),N("div",wl,m[31]||(m[31]=[g("span",null,"No hay procedimientos disponibles.",-1)])))]),s(Ae,{class:"d-flex mt-4"},{default:u(()=>[s(Z,{color:"primary",variant:"tonal",class:"mx-auto",size:"small",onClick:_.openSaleForm},{default:u(()=>m[33]||(m[33]=[Y(" Generar Venta ")])),_:1},8,["onClick"])]),_:1})]),_:1}),s(Ie,{value:"delivery",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:u(()=>[g("div",Cl,[m[34]||(m[34]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),y(p).sales.length>0?(T(),N("div",Dl,[(T(!0),N(ae,null,de(y(p).sales,c=>(T(),N("div",{key:c.id},[(T(!0),N(ae,null,de(c.properties,R=>(T(),N("div",{key:R.id,class:"d-flex align-center justify-between"},[s(oo,{size:"50",rounded:""},{default:u(()=>[g("img",{src:y(eo),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,El)]),_:1}),s(L,{cols:"12",md:"7"},{default:u(()=>[s(no,{class:"font-weight-medium"},{default:u(()=>[Y(j(R.project_title)+" | "+j(R.title),1)]),_:2},1024),s(lo,{class:"text-disabled d-flex justify-between mt-1"},{default:u(()=>[g("span",null,j(("formatCurrency"in _?_.formatCurrency:y(Ft))(R.pivot_price)),1)]),_:2},1024)]),_:2},1024)]))),128))]))),128))])):me("",!0)]),g("div",Vl,[m[36]||(m[36]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),y(p).procedure&&y(p).procedure.length>0?(T(),N("div",Al,[(T(!0),N(ae,null,de(y(p).procedure,c=>(T(),N("div",{key:c.id},[s(zt,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:R=>_.markProcedureAsDone(c.id,c.pivot.is_check)},{default:u(()=>[c.pivot.is_check?(T(),fe(ve,{key:0,icon:"tabler-check",class:"mr-2"})):me("",!0),Y(" "+j(c.title),1)]),_:2},1032,["color","onClick"]),s(Me,{activator:"parent",location:"top"},{default:u(()=>[Y(j(c.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(T(),N("div",Tl,m[35]||(m[35]=[g("span",null,"No hay procedimientos disponibles.",-1)])))]),s(Ae,{class:"d-flex justify-center mt-4"},{default:u(()=>[s(Z,{color:"primary",size:"small"},{default:u(()=>m[37]||(m[37]=[Y(" Finalizar Oportunidad ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}};const kl={class:"kanban"},xl=["data-column-title"],Pl={class:"kanban-column-header"},Ol={class:"column-title"},Nl={class:"small-badge"},Il={class:"d-flex justify-end gap-2",style:{flex:"0 1 30%"}},Ml=["onClick"],Rl={class:"d-flex align-center justify-space-between",style:{gap:"10px"}},$l={style:{flex:"7"}},Fl={style:{margin:"0"}},Ul={class:"kanban-header"},Bl={class:"d-flex gap-1"},zl={class:"label-info"},jl={class:"project-info"},Yl={key:0,class:"label-name"},Ll={key:1,class:"label-name",style:{display:"flex","align-items":"center",gap:"8px"}},Xl={class:"price"},Hl={class:"kanban-details"},Kl={style:{color:"rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity))","font-size":"0.9rem","font-weight":"700"}},ql={__name:"Kanban",setup(e){const{allOpportunityKanbanForUser:o,kanban:t,generateProspect:n,getOpportunitybyId:l,opportunity:i,changeStatusByOpportunity:r}=Ct();ln();const{getallTypeActivities:d,typeActivities:a}=Wt(),v=Q(null),b=Q(!1),f=Q(!1),p=Q(!1),C=Q(null);Q(null);const I=Q(!1),V=Q(!1),B=Q(null),D=w=>{B.value={column:w.from.closest(".kanban-column"),index:Array.from(w.from.children).indexOf(w.item)},C.value=w.from.closest(".kanban-column").dataset.columnTitle,console.log("Elemento arrastrado desde:",C.value)},$=w=>{const E=w.data,A=w.from.closest(".kanban-column").dataset.columnTitle,M=w.to.closest(".kanban-column").dataset.columnTitle,F=t.value.find(c=>c.title===A),te=t.value.find(c=>c.title===M);if(F&&te){const c=te.items.findIndex(R=>R.id===E.id);if(c!==-1){const[R]=te.items.splice(c,1);console.log("Elemento eliminado de la columna de destino"),F.items.push(R),F.items.sort((At,Go)=>At.id-Go.id),console.log("Elemento restaurado en la columna de origen")}else console.log("Elemento no encontrado en la columna de destino")}else console.log("No se encontraron las columnas de origen o destino")},O=async w=>{},K=async w=>{console.log(w),await r(w.id,Ue.FINISHED.value,{}),X(w)},X=w=>{const E=t.value.find(A=>A.items.some(M=>M.id===w.id));if(E){const A=E.items.findIndex(M=>M.id===w.id);A!==-1?(E.items.splice(A,1),console.log("Elemento eliminado")):console.log("Elemento no encontrado en el tablero")}else console.log("El elemento no se encuentra en ningún tablero")},ie=()=>{I.value=!0},ge=w=>{const E=w.from.closest(".kanban-column").dataset.columnTitle,A=w.to.closest(".kanban-column").dataset.columnTitle;return q(E,A)?(console.log(`Movimiento permitido de ${E} a ${A}`),!0):(console.log(`Movimiento NO permitido de ${E} a ${A}`),!1)},x=async w=>{console.log(w);const E=w.from.closest(".kanban-column").dataset.columnTitle,A=w.to.closest(".kanban-column").dataset.columnTitle;if(!q(E,A))return console.log(`Movimiento NO permitido de ${E} a ${A}`),!1;if(console.log("Elemento movido de",E,"a",A),E!==A){const M=w.data;switch(A){case"LEAD":console.log("Movido a LEAD");break;case"PROSPECTO":console.log("Movido a PROSPECTO"),v.value=M,p.value=!0;break;case"PREVENTA":console.log("Movido a PREVENTA"),v.value=M,f.value=!0;break;case"VENTA":await l(M.id),console.log("Movido a VENTA"),V.value=!0,console.log(i),v.value=i.value;break;case"ENTREGA":console.log("Movido a ENTREGA");break;default:console.log("Movimiento a una columna no definida");break}}Le(I,M=>M&&$(w)),I.value=!1},_=w=>{v.value=w,b.value=!0},m={LEAD:["PROSPECTO","PREVENTA"],PROSPECTO:["PREVENTA"],PREVENTA:["VENTA"],VENTA:["ENTREGA"],ENTREGA:[]},q=(w,E)=>(m[w]||[]).includes(E);return Gt(async()=>{await o(),await d()}),(w,E)=>(T(),N(ae,null,[g("div",kl,[(T(!0),N(ae,null,de(y(t),(A,M)=>(T(),N("div",{key:M,class:"kanban-column","data-column-title":A.title},[g("div",Pl,[g("div",Ol,[g("h2",null,j(A.title),1),g("span",Nl,j(A.items.length),1)]),g("div",Il,[s(Z,{color:"white",title:"Agregar Actividad",class:"icon-container"},{default:u(()=>[s(ve,{icon:"tabler-arrows-vertical",class:"icon-small"})]),_:1}),s(Z,{color:"white",title:"Agregar Actividad",class:"icon-container"},{default:u(()=>[s(ve,{icon:"tabler-plus",class:"icon-small"})]),_:1})])]),s(y(sl),{modelValue:A.items,"onUpdate:modelValue":F=>A.items=F,group:{name:A.name,pull:!0,put:!0},class:"kanban-items",onStart:D,onMove:ge,onEnd:x},{default:u(()=>[(T(!0),N(ae,null,de(A.items,F=>(T(),N("div",{key:F.id,class:"kanban-item",onClick:te=>_(F)},[g("div",Rl,[g("div",$l,[g("p",Fl,[g("strong",null,j(F.name),1)])]),g("div",null,[F.stage!=="VENTA"&&F.stage!=="ENTREGA"?(T(),fe(Z,{key:0,color:"warning",title:"Dar de Baja",class:"button-task",onClick:[E[0]||(E[0]=Ne(()=>{},["stop"])),Ne(te=>O(F),["prevent"])]},{default:u(()=>[s(ve,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):me("",!0),F.stage==="ENTREGA"?(T(),fe(Z,{key:1,color:"success",title:"Completar Oportunidad",class:"button-task",onClick:[E[1]||(E[1]=Ne(()=>{},["stop"])),Ne(te=>K(F),["prevent"])]},{default:u(()=>[s(ve,{icon:"tabler-check"})]),_:2},1032,["onClick"])):me("",!0)])]),g("div",Ul,[g("div",Bl,[g("div",null,[g("p",zl,j(F.property_type),1),g("div",jl,[F.property?(T(),N("span",Yl,j(F.project+" | "+F.property),1)):me("",!0),F.property==null?(T(),N("span",Ll,[s(zt,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"36px","inline-size":"36px"}},{default:u(()=>[s(ve,{size:"25",icon:"tabler-home"})]),_:1}),E[6]||(E[6]=g("strong",null," Indefinido ",-1))])):me("",!0),E[7]||(E[7]=g("h4",{class:"department-code"},null,-1))]),g("p",Xl,[g("strong",null,j(y(Ft)(F.price)),1)])])]),g("div",Hl,[E[8]||(E[8]=g("p",{class:"label-info"}," 10 de octubre 2024 ",-1)),g("p",Kl,j(F.phone),1)])])],8,Ml))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])],8,xl))),128))]),s(Sl,{"is-dialog-visible":b.value,"onUpdate:isDialogVisible":E[2]||(E[2]=A=>b.value=A),"opportunity-kanban":v.value},null,8,["is-dialog-visible","opportunity-kanban"]),s(ul,{"is-dialog-visible":f.value,"onUpdate:isDialogVisible":E[3]||(E[3]=A=>f.value=A),"opportunity-kanban":v.value},null,8,["is-dialog-visible","opportunity-kanban"]),s(nn,{modelValue:V.value,"onUpdate:modelValue":E[4]||(E[4]=A=>V.value=A),opportunity:v.value,stage:"PRESALE",onFormCancelled:ie},null,8,["modelValue","opportunity"]),s(dl,{"is-dialog-visible":p.value,"onUpdate:isDialogVisible":E[5]||(E[5]=A=>p.value=A),"opportunity-kanban":v.value,"type-activities":y(a),onFormCancelled:ie},null,8,["is-dialog-visible","opportunity-kanban","type-activities"])],64))}},Gl={__name:"AddOportunity",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,n=o,l=Q(null),i=Q({title:"",description:""}),{propertiesAvailbles:r,properties:d}=So(),{allCustomerPaginate:a,customers:v}=fn(),b=async()=>{if(!l.value||!i.value.title){alert("Por favor selecciona un cliente y llena todos los campos requeridos.");return}const f={customer_id:l.value,...i.value};try{n("submit",f),n("update:isDialogVisible",!1)}catch(p){console.error("Error al agregar la oportunidad:",p)}};return Gt(async()=>{await a({page:1,itemsPerPage:1e3}),await r()}),(f,p)=>{const C=Dt,I=To;return T(),fe(Et,{"max-width":"600","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":p[4]||(p[4]=V=>f.$emit("update:isDialogVisible",V))},{default:u(()=>[s(C,{onClick:p[0]||(p[0]=V=>f.$emit("update:isDialogVisible",!1))}),s(je,{title:"Agregar Oportunidad"},{default:u(()=>[s(Ae,null,{default:u(()=>[s(ye,null,{default:u(()=>[s(L,{cols:"12"},{default:u(()=>[s(I,{modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=V=>l.value=V),label:"Cliente",placeholder:"Selecciona un Cliente",items:y(v).map(V=>({title:V.name,value:V.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),s(L,{cols:"12",sm:"6"},{default:u(()=>[s(vt,{label:"Propiedad de Interes",placeholder:"Selecciona una Propiedad",items:y(d),outlined:""},null,8,["items"])]),_:1}),s(L,{cols:"12",sm:"6"},{default:u(()=>[s(vt,{label:"Asesor Encargado",placeholder:"Seleccine un Asesor",outlined:""})]),_:1}),s(L,{cols:"12"},{default:u(()=>[s(un,{modelValue:i.value.description,"onUpdate:modelValue":p[2]||(p[2]=V=>i.value.description=V),label:"Descripción",placeholder:"Agrega una descripción",rows:"4",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(sn,null,{default:u(()=>[s(vn),s(Z,{color:"secondary",onClick:p[3]||(p[3]=V=>f.$emit("update:isDialogVisible",!1))},{default:u(()=>p[5]||(p[5]=[Y(" Cancelar ")])),_:1}),s(Z,{color:"primary",onClick:b},{default:u(()=>p[6]||(p[6]=[Y(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Wl={class:"body-kanban"},Ql={class:"toolbar"},Jl={class:"breadcrumbs"},Zl={class:"filters"},ea=["onClick"],ta={class:"filter-controls"},oa={class:"date-picker d-flex align-center justify-center"},na={__name:"myContacts",setup(e){const o=Q(!1),t=Q([new Date(2024,9,10),new Date(2024,10,10)]),n=Q(["Todos","PORA"]),l=Q("Todos");return(i,r)=>{const d=Kt;return T(),N(ae,null,[g("div",Wl,[g("div",Ql,[g("div",Jl,[g("div",Zl,[(T(!0),N(ae,null,de(y(n),a=>(T(),N("button",{key:a,class:on({active:y(l)===a}),onClick:v=>l.value=a},j(a),11,ea))),128)),s(Z,{color:"primary",title:"Agregar Actividad",onClick:r[0]||(r[0]=a=>o.value=!0)},{default:u(()=>r[4]||(r[4]=[Y(" Agregar Oportunidad ")])),_:1})])]),g("div",ta,[g("div",oa,[s(d,{modelValue:y(t)[0],"onUpdate:modelValue":r[1]||(r[1]=a=>y(t)[0]=a),style:{"inline-size":"200px"},label:"Desde",placeholder:"Seleccione Fecha",config:{dateFormat:"F j, Y"}},null,8,["modelValue"]),s(d,{modelValue:y(t)[1],"onUpdate:modelValue":r[2]||(r[2]=a=>y(t)[1]=a),label:"Hasta",style:{"inline-size":"200px"},placeholder:"Seleccione Fecha",config:{dateFormat:"F j, Y"}},null,8,["modelValue"])])])]),g("div",null,[s(ql)])]),s(Gl,{"is-dialog-visible":y(o),"onUpdate:isDialogVisible":r[3]||(r[3]=a=>st(o)?o.value=a:null)},null,8,["is-dialog-visible"])],64)}}},di=gn(na,[["__scopeId","data-v-88843cf1"]]);export{di as default};
