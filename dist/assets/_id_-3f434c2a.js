import{_ as Y}from"./ConfirmDialog-2f5dfda7.js";import{_ as G}from"./AppTextarea-9318e309.js";import{_ as J}from"./AppTextField-6f740df4.js";import{_ as K}from"./DialogCloseBtn-795d7e2c.js";import{r as f,am as P,w as L,o as y,f as F,e as t,b as e,v as V,a3 as W,a4 as D,z as R,j as X,a2 as Z,H as ee,c as U,d as a,x as d,n as i,a0 as S,F as te}from"./index-a54c57b2.js";import{u as h}from"./useProject-1e98a4a3.js";import{V as q,b as oe,a as I}from"./VCard-b8ab7ef2.js";import{V as le}from"./VForm-46f40c9a.js";import{V as w}from"./VRow-db7839b8.js";import{V as k}from"./VCardText-974f1364.js";import{V as g}from"./VCol-e110b22d.js";import{V as ae}from"./VDialog-b5a48363.js";import{u as ie}from"./useProperty-822d3234.js";import{f as A}from"./currencyFormatter-92ad4b3c.js";import{V as O}from"./VDivider-18f44d6d.js";import{V as se}from"./VDataTable-b47a1761.js";import"./form-87f468b6.js";/* empty css                   */import"./VCounter-9184ef99.js";import"./VImg-24ae3b8f.js";import"./VField-e400f246.js";import"./easing-9f15041e.js";import"./VInput-39bbda74.js";import"./forwardRefs-8348545e.js";import"./VTextField-4d59e4f8.js";import"./api-f4900d91.js";import"./index-9c720871.js";import"./constants-1eb97e20.js";import"./notifications-cae4d01c.js";import"./VAvatar-a060005e.js";import"./VOverlay-55c698d2.js";import"./lazy-67a427f9.js";import"./scopeId-6c78f01e.js";import"./dialog-transition-e1dfb8e6.js";import"./VSelect-718a4a4c.js";import"./VList-8e53c877.js";import"./ssrBoot-0af201ab.js";import"./VMenu-4a4865a4.js";import"./VCheckboxBtn-d46ea3f4.js";import"./VSelectionControl-d56c1c32.js";import"./VChip-5a84b8f9.js";import"./VTable-d2336548.js";import"./filter-97072b4a.js";const re={__name:"ProjectEditDialog",props:{projectData:{type:Object,required:!0,default:()=>({title:"",description:"",num_pisos:""})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","submit"],setup($,{emit:_}){const s=$,m=_,{editProyect:p}=h(),r=f(structuredClone(P(s.projectData)));L(s,()=>{r.value=structuredClone(P(s.projectData))});const x=()=>{m("update:isDialogVisible",!1),r.value=structuredClone(P(s.projectData))},v=async()=>{m("update:isDialogVisible",!1);try{await p(r.value.id,r.value)}catch(c){console.error("Error updating customer:",c)}};return(c,l)=>{const C=K,b=J,j=G;return y(),F(ae,{width:c.$vuetify.display.smAndDown?"auto":610,"model-value":s.isDialogVisible,"onUpdate:modelValue":l[4]||(l[4]=u=>c.$emit("update:isDialogVisible",u))},{default:t(()=>[e(C,{onClick:l[0]||(l[0]=u=>c.$emit("update:isDialogVisible",!1))}),s.projectData?(y(),F(q,{key:0,class:"pa-sm-8 pa-5"},{default:t(()=>[e(I,null,{default:t(()=>[e(oe,{class:"text-h3 text-center"},{default:t(()=>l[5]||(l[5]=[V(" Editar ")])),_:1})]),_:1}),e(k,null,{default:t(()=>[e(le,{class:"mt-4",onSubmit:W(v,["prevent"])},{default:t(()=>[e(w,null,{default:t(()=>[e(k,null,{default:t(()=>[e(w,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(b,{modelValue:r.value.title,"onUpdate:modelValue":l[1]||(l[1]=u=>r.value.title=u),label:"Titulo del Proyecto",placeholder:"......"},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(j,{modelValue:r.value.description,"onUpdate:modelValue":l[2]||(l[2]=u=>r.value.description=u),label:"DescripciÃ³n (Opcional)",rows:"3"},null,8,["modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(b,{modelValue:r.value.num_pisos,"onUpdate:modelValue":l[3]||(l[3]=u=>r.value.num_pisos=u),label:"Numero de pisos (Departamentos)",type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(D,{type:"submit"},{default:t(()=>l[6]||(l[6]=[V(" Submit ")])),_:1}),e(D,{color:"secondary",variant:"tonal",onClick:x},{default:t(()=>l[7]||(l[7]=[V(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):R("",!0)]),_:1},8,["width","model-value"])}}},ne={class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},ue={class:"d-flex gap-2 align-center mb-2 flex-wrap"},me={class:"text-h4"},pe={key:0},de={class:"gap-2 align-center mt-3 flex-wrap"},ce={class:"d-flex align-end flex-column"},fe={class:"text-high-emphasis"},ge={class:"font-weight-medium",style:{"padding-inline":"5px 30px"}},it={__name:"[id]",setup($){const _=X(),s=f(!1),m=f(!1),{project:p,getProjectId:r}=h(),{allPropertybyProject:x,properties:v,loadingProject:c}=ie(),l=f(),C=f(100),b=f(1),j=[{title:"Codigo",key:"code"},{title:"Estado",key:"status"},{title:"Superficie",key:"surface"},{title:"Precio",key:"base_price"}],u=Z(()=>p.value),M=()=>{x({itemsPerPage:C.value,page:b.value,search:l.value},_.params.id)},z=()=>{r(_.params.id)},H=()=>v.value.reduce((E,o)=>E+(o.base_price||0),0);return ee(()=>{M(),z()}),(E,o)=>{var T,B,N;const Q=Y;return y(),U(te,null,[a("div",ne,[a("div",null,[a("div",ue,[a("h4",me,d((T=i(p))==null?void 0:T.title),1)]),i(p)?(y(),U("span",pe," Numero de Pisos: "+d((B=i(p))==null?void 0:B.num_pisos),1)):R("",!0),a("div",de,[a("span",null,d((N=i(p))==null?void 0:N.description),1)])]),a("div",null,[e(D,{variant:"tonal",color:"info",onClick:o[0]||(o[0]=n=>m.value=!i(m))},{default:t(()=>o[4]||(o[4]=[V(" Editar ")])),_:1}),e(D,{variant:"tonal",color:"error",onClick:o[1]||(o[1]=n=>s.value=!i(s))},{default:t(()=>o[5]||(o[5]=[V(" Eliminar ")])),_:1})])]),e(w,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(q,{class:"mb-6"},{default:t(()=>[e(I,null,{title:t(()=>o[6]||(o[6]=[a("h5",{class:"text-h5"}," Propiedades del Proyecto ",-1)])),_:1}),e(O),e(i(se),{headers:j,items:i(v),"item-value":"productName",class:"text-no-wrap"},{"item.code":t(({item:n})=>[a("span",null,d(n.code),1)]),"item.status":t(({item:n})=>[a("span",null,d(n.status),1)]),"item.base_price":t(({item:n})=>[a("span",null,d(i(A)(n.base_price)),1)]),bottom:t(()=>o[7]||(o[7]=[])),_:1},8,["items"]),e(O),e(k,null,{default:t(()=>[a("div",ce,[a("table",fe,[a("tbody",null,[a("tr",null,[o[8]||(o[8]=a("td",{class:"text-high-emphasis font-weight-medium",width:"100px"}," Total: ",-1)),a("td",ge,d(i(A)(H())),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{"is-dialog-visible":i(s),"onUpdate:isDialogVisible":o[2]||(o[2]=n=>S(s)?s.value=n:null),"confirmation-question":"Are you sure to cancel your Order?","cancel-msg":"Order cancelled!!","cancel-title":"Cancelled","confirm-msg":"Your order cancelled successfully.","confirm-title":"Cancelled!"},null,8,["is-dialog-visible"]),e(re,{"is-dialog-visible":i(m),"onUpdate:isDialogVisible":o[3]||(o[3]=n=>S(m)?m.value=n:null),"project-data":i(u)},null,8,["is-dialog-visible","project-data"])],64)}}};export{it as default};
