import{_ as z}from"./AppTextField-ff9f0135.js";import{_ as O}from"./AppSelect-ccaafa4c.js";import{_ as Q}from"./DialogCloseBtn-b484f2bc.js";import{r as g,w as M,o as A,f as J,e as o,b as e,a3 as W,n as t,a4 as x,v as b,a as R,c as N,a0 as _,d as c,x as D,z as $,s as h,$ as B}from"./index-fa985de0.js";import{u as j}from"./useProperty-a85221e5.js";import{V as q}from"./VCardText-fcb7433f.js";import{V as X}from"./VForm-ec308414.js";import{V as Y}from"./VRow-9263dee3.js";import{V as m}from"./VCol-3c7339fd.js";import{V as F}from"./VCard-d34f0c26.js";import{V as Z}from"./VDialog-ea58d693.js";import{p as ee}from"./paginationMeta-4ad053a4.js";import{l as te}from"./lodash-b54ca15e.js";import{V as oe}from"./VSpacer-d9674bec.js";import{V as L}from"./VDivider-426932d0.js";import{V as le}from"./VDataTableServer-80b14a71.js";import{V as ae}from"./VChip-26484dfb.js";import{V as re}from"./VPagination-30089e81.js";import"./form-873420c4.js";import"./VTextField-49aa0b1c.js";/* empty css                   */import"./VCounter-3bc5f2b0.js";import"./VImg-04df8228.js";import"./VField-a0cacac4.js";import"./easing-9f15041e.js";import"./VInput-8eabfc1d.js";import"./forwardRefs-8348545e.js";import"./VSelect-27b7734d.js";import"./VList-fc738e82.js";import"./ssrBoot-22864805.js";import"./VAvatar-962fe5b8.js";import"./dialog-transition-bcaab41f.js";import"./VMenu-5d32dd8c.js";import"./VOverlay-dfb4a1db.js";import"./lazy-7876ba8c.js";import"./scopeId-8b6c7fda.js";import"./VCheckboxBtn-52588d05.js";import"./VSelectionControl-768cb610.js";import"./api-7cf82488.js";import"./index-9c720871.js";import"./constants-f3b5ca65.js";import"./notifications-81bc0416.js";import"./VDataTable-72fd83af.js";import"./VTable-e03f981c.js";import"./filter-6e420832.js";const ie={__name:"EditPropertyDialog",props:{isDialogVisible:{type:Boolean,required:!0},property:{type:Object,required:!0}},emits:["update:isDialogVisible","propertyUpdated"],setup(S,{emit:w}){const u=S,v=w,V=g([{value:"DEPARTAMENT",title:"Departamento"},{value:"PARK",title:"Parqueo"}]),{loadingProperty:U,editProperty:f}=j(),l=g({...u.property}),n=()=>{v("update:isDialogVisible",!1)},y=async()=>{(await f(l.value)).success&&v("propertyUpdated",l.value),n()};return M(()=>u.property,P=>{l.value={...P}}),(P,r)=>{const E=Q,d=z,k=O;return A(),J(Z,{"max-width":"800","model-value":u.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":n},{default:o(()=>[e(E,{onClick:n}),e(F,{title:"Editar propiedad",class:"pa-sm-8 pa-5"},{default:o(()=>[e(q,null,{default:o(()=>[e(X,{onSubmit:W(y,["prevent"])},{default:o(()=>[e(Y,{dense:""},{default:o(()=>[e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).code,"onUpdate:modelValue":r[0]||(r[0]=s=>t(l).code=s),label:"Código",placeholder:"A1",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(k,{modelValue:t(l).property_type,"onUpdate:modelValue":r[1]||(r[1]=s=>t(l).property_type=s),label:"Tipo de propiedad",placeholder:"Seleccione un tipo",items:t(V),outlined:""},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).base_price,"onUpdate:modelValue":r[2]||(r[2]=s=>t(l).base_price=s),label:"Precio de la propiedad",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).percentage_initial_fee,"onUpdate:modelValue":r[3]||(r[3]=s=>t(l).percentage_initial_fee=s),label:"% Anticipo",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:o(()=>[e(d,{modelValue:t(l).title,"onUpdate:modelValue":r[4]||(r[4]=s=>t(l).title=s),label:"Título comercial",placeholder:"Título comercial",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).departament.floor,"onUpdate:modelValue":r[5]||(r[5]=s=>t(l).departament.floor=s),label:"Numero de piso",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).surface,"onUpdate:modelValue":r[6]||(r[6]=s=>t(l).surface=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).departament.number_bedrooms,"onUpdate:modelValue":r[7]||(r[7]=s=>t(l).departament.number_bedrooms=s),label:"Numero de habitaciones",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:o(()=>[e(d,{modelValue:t(l).departament.number_bathrooms,"onUpdate:modelValue":r[8]||(r[8]=s=>t(l).departament.number_bathrooms=s),label:"Numero de baños",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",class:"text-right mt-6"},{default:o(()=>[e(x,{color:"secondary",variant:"tonal",class:"me-3",onClick:n},{default:o(()=>r[9]||(r[9]=[b(" Cancelar ")])),_:1}),e(x,{type:"submit",color:"primary",class:"me-3",disabled:t(U),loading:t(U)},{default:o(()=>r[10]||(r[10]=[b(" Guardar ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const se={class:"text-body-1"},ne={class:"d-flex align-center flex-wrap gap-4"},pe={class:"d-flex align-center gap-4"},de={class:"text-capitalize"},me={key:0,class:"text-capitalize font-weight-medium"},ue={key:1,class:"text-capitalize font-weight-medium"},ce={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},fe={class:"text-sm text-disabled mb-0"},it={__name:"list",setup(S){const{allProperty:w,properties:u,property:v,totalProperties:V,removeProperty:U}=j(),f=g(),l=g(20),n=g(1),y=g(!1),P=p=>{n.value=p.page,l.value=p.itemsPerPage},r=[{title:"Titulo",key:"title"},{title:"Code",key:"code"},{title:"Precio",key:"base_price"},{title:"Tipo de Propiedad",key:"typeProperty"},{title:"Proyecto",key:"project"},{title:"Estado",key:"status"},{title:"Accion",key:"actions",sortable:!1}],E=()=>{w({itemsPerPage:l.value,page:n.value,search:f.value})},d=te.debounce(E,300);M([f,l,n],d,{immediate:!0});const k=p=>{switch(p){case"AVAILABLE":return{color:"success",text:"DISPONIBLE"};case"PRESALE":return{color:"warning",text:"PRE VENTA"};case"SALE":return{color:"error",text:"VENDIDO"};case"DELIVERED":return{color:"error",text:"ENTREGADO"};default:return{color:"primary",text:"NOTHING"}}},s=async p=>{await U(p),E()},G=async p=>{y.value=!0,v.value={...p}},H=p=>{const i=u.value.findIndex(C=>C.id===p.id);i!==-1&&(u.value[i]={...p})};return(p,i)=>{const C=z,I=R("RouterLink"),T=R("IconBtn");return A(),N("section",null,[e(F,null,{default:o(()=>[e(q,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[c("div",null,[i[6]||(i[6]=c("h5",{class:"text-h5"}," Mis Propiedades ",-1)),c("div",se," En total son "+D(t(V))+" Propiedades. ",1)]),e(oe),c("div",ne,[e(O,{modelValue:t(l),"onUpdate:modelValue":i[0]||(i[0]=a=>_(l)?l.value=a:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),e(C,{modelValue:t(f),"onUpdate:modelValue":i[1]||(i[1]=a=>_(f)?f.value=a:null),placeholder:"Buscar...",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"]),e(I,{to:{name:"realty-property-register"}},{default:o(()=>[e(x,null,{default:o(()=>i[7]||(i[7]=[b(" Agregar Propiedad ")])),_:1})]),_:1})])]),_:1}),e(L),e(t(le),{"items-per-page":t(l),"onUpdate:itemsPerPage":i[3]||(i[3]=a=>_(l)?l.value=a:null),page:t(n),"onUpdate:page":i[4]||(i[4]=a=>_(n)?n.value=a:null),items:t(u),headers:r,"items-length":t(l).value===-1?t(u).value.length:t(V).valueOf,class:"text-no-wrap","onUpdate:options":P},{"item.base_price":o(({item:a})=>[c("div",pe,[c("span",de,D(a.base_price)+" $ ",1)])]),"item.typeProperty":o(({item:a})=>[a.parking?(A(),N("span",me,"Parqueo")):$("",!0),a.departament?(A(),N("span",ue,"Departamento")):$("",!0)]),"item.status":o(({item:a})=>[e(ae,{label:"",size:"small",class:"text-capitalize",color:k(a.status).color},{default:o(()=>[b(D(k(a.status).text),1)]),_:2},1032,["color"])]),bottom:o(()=>[e(L),c("div",ce,[c("p",fe,D(t(ee)({page:t(n),itemsPerPage:t(l)},t(V))),1),e(re,{modelValue:t(n),"onUpdate:modelValue":i[2]||(i[2]=a=>_(n)?n.value=a:null),length:Math.ceil(t(V)/t(l)),"total-visible":p.$vuetify.display.xs?1:7},{prev:o(a=>[e(x,h({variant:"tonal",color:"default"},a,{icon:!1}),{default:o(()=>i[8]||(i[8]=[b(" Anterior ")])),_:2},1040)]),next:o(a=>[e(x,h({variant:"tonal",color:"default"},a,{icon:!1}),{default:o(()=>i[9]||(i[9]=[b(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":o(({item:a})=>[e(T,null,{default:o(()=>[e(I,{to:{name:"realty-property-id",params:{id:a.id}}},{default:o(()=>[e(B,{icon:"tabler-eye"})]),_:2},1032,["to"])]),_:2},1024),e(T,null,{default:o(()=>[e(B,{icon:"tabler-edit",onClick:K=>G(a)},null,8,["onClick"])]),_:2},1024),e(T,{onClick:K=>s(a.id)},{default:o(()=>[e(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(ie,{"is-dialog-visible":t(y),"onUpdate:isDialogVisible":i[5]||(i[5]=a=>_(y)?y.value=a:null),property:t(v),onPropertyUpdated:H},null,8,["is-dialog-visible","property"])])}}};export{it as default};
