import{f as L}from"./currencyFormatter-92ad4b3c.js";import{_ as G}from"./AppTextField-963734da.js";import{_ as H}from"./AppSelect-5767fb17.js";import{u as q}from"./useQuote-7f3cc25e.js";import{_ as J}from"./ECommerceAddCustomerDrawer-f74ff885.js";import{p as K}from"./paginationMeta-4ad053a4.js";import{l as W}from"./lodash-7c7ee518.js";import{r as u,ac as X,w as Y,a as y,o as g,c as O,b as o,e as a,n as s,a0 as d,d as n,a4 as P,v as f,F as Z,i as ee,x as m,$ as te,s as D,H as C}from"./index-eea64eab.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{V as ae}from"./VCard-1446dd49.js";import{V as se}from"./VCardText-74af991a.js";import{V as E}from"./VDivider-f3ea9039.js";import{V as le}from"./VDataTableServer-66f38133.js";import{V as R}from"./VCheckbox-d0024d7a.js";import{V as N}from"./VTooltip-60d6696f.js";import{V as ie}from"./VPagination-ac3661cc.js";import"./form-97d5e662.js";import"./VTextField-fdaf4f5a.js";/* empty css                   */import"./VCounter-1694484c.js";import"./VImg-bf97f22a.js";import"./VField-cbcf2eef.js";import"./easing-9f15041e.js";import"./VInput-b54c7b33.js";import"./forwardRefs-8348545e.js";import"./VSelect-c4493e38.js";import"./VList-b205d3fa.js";import"./ssrBoot-d631879b.js";import"./VAvatar-596ec46a.js";import"./dialog-transition-46c42648.js";import"./VMenu-054aa5e8.js";import"./VOverlay-9f45cad7.js";import"./lazy-8a330c44.js";import"./scopeId-752bc43e.js";import"./VCheckboxBtn-11740b93.js";import"./VSelectionControl-1cd7c46d.js";import"./VChip-d184a964.js";import"./api-40e7a553.js";import"./index-9c720871.js";import"./constants-71880aa6.js";import"./notifications-b6da0b75.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./AppDrawerHeaderSection-05815902.js";import"./VSpacer-5e49947a.js";import"./vue3-perfect-scrollbar.esm-e9f09315.js";import"./VForm-0ba22995.js";import"./VRow-a5449575.js";import"./VCol-6b79a532.js";import"./VSwitch-02ab5526.js";import"./VNavigationDrawer-72a955dd.js";import"./VDataTable-1a09f839.js";import"./VTable-1594d059.js";import"./filter-86a23bbd.js";const re={APPROVED:{value:"APPROVED",title:"Aprobado"},NOT_APPROVED:{value:"NOT_APPROVED",title:"No Aprobado"},TODO:{value:"TODOS",title:"Todos"}};const ne={class:"my-2"},pe={class:"d-flex justify-space-between flex-wrap gap-y-4"},me={class:"d-flex flex-row gap-4 align-center flex-wrap"},ue={class:"d-flex gap-x-2"},de={class:"d-flex items-center gap-x-2"},ce={class:"my-2"},_e={class:"d-flex items-center gap-x-2"},fe={class:"my-2"},Ve={class:"d-flex items-center gap-x-2"},ve={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Pe={class:"text-sm text-disabled mb-0"},xe={__name:"listQoute",setup(ge){const V=u(""),x=u(!1),{allQuotePaginate:w,exportQuoteExcel:k,totalQuotes:v,quotes:A,changeStatusQuotes:T,changeStatusQuotesCustomer:Q}=q(),h=X("userAbilityRules").value,r=u(10),c=u(),p=u(1);u(),u();const U=[{title:"Nombre",key:"social_reason"},{title:"Propiedades",key:"properties"},{title:"Celular",key:"phone"},{title:"Total",key:"amount"},{title:"Gerencia",key:"status"},{title:"Cliente",key:"status_customer"},{title:"Accion",key:"action"}],S=l=>{p.value=l.page,c.value=l.status},$=async(l,t)=>{const _=t==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${l} marcado como: ${t}`),await T(l,{status:_}),C()},B=async()=>{await k()},z=async(l,t)=>{const _=t==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${l} marcado como: ${t}`),await Q(l,{status:_}),C()},M=()=>{w({page:p.value,itemsPerPage:r.value,status:c.value,search:V.value}),console.log(A)},j=W.debounce(M,300);return Y([V,r,p,c],j,{immediate:!0}),(l,t)=>{const _=H,F=G,b=y("RouterLink"),I=y("IconBtn");return g(),O("div",null,[o(ae,{title:"Lista de Cotizaciones"},{default:a(()=>[o(se,null,{default:a(()=>[n("div",ne,[o(_,{modelValue:s(c),"onUpdate:modelValue":t[0]||(t[0]=e=>d(c)?c.value=e:null),label:"Estado de aprobaciÃ³n del cliente",placeholder:"Seleccione estado",style:{"max-inline-size":"200px","min-inline-size":"200px"},items:Object.values(s(re))},null,8,["modelValue","items"])]),n("div",pe,[o(F,{modelValue:s(V),"onUpdate:modelValue":t[1]||(t[1]=e=>d(V)?V.value=e:null),style:{"max-inline-size":"500px","min-inline-size":"500px"},placeholder:"Buscar por Nombre, Numero, Correo",density:"compact"},null,8,["modelValue"]),n("div",me,[o(_,{modelValue:s(r),"onUpdate:modelValue":t[2]||(t[2]=e=>d(r)?r.value=e:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),o(P,{"prepend-icon":"tabler-screen-share",variant:"tonal",color:"secondary",onClick:B},{default:a(()=>t[7]||(t[7]=[f(" Export ")])),_:1}),o(b,{to:{name:"quote-add-quote"},class:"text-white"},{default:a(()=>[o(P,{"prepend-icon":"tabler-plus"},{default:a(()=>t[8]||(t[8]=[f(" Registrar Cotizacion ")])),_:1})]),_:1})])])]),_:1}),o(E),o(s(le),{"items-per-page":s(r),"onUpdate:itemsPerPage":t[4]||(t[4]=e=>d(r)?r.value=e:null),page:s(p),"onUpdate:page":t[5]||(t[5]=e=>d(p)?p.value=e:null),items:s(A),headers:U,"items-length":s(v),class:"text-no-wrap","onUpdate:options":S},{"item.properties":a(({item:e})=>[(g(!0),O(Z,null,ee(e.properties,i=>(g(),O("div",{key:i.id,class:"d-flex gap-x-2"},m(i.title)+" | "+m(i.code),1))),128))]),"item.amount":a(({item:e})=>[n("div",ue,m(("formatCurrency"in l?l.formatCurrency:s(L))(e.amount)),1)]),"item.status":a(({item:e})=>[n("div",de,[n("span",ce,m(e.status==="APPROVED"?"Aprobado":"No Aprobado"),1),o(R,{modelValue:e.status,"onUpdate:modelValue":i=>e.status=i,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:!s(h).some(i=>i.action==="manage"&&i.subject==="ADMINISTRADOR"),onClick:i=>$(e.id,e.status)},{default:a(()=>[o(N,{activator:"parent",location:"top"},{default:a(()=>[f(m(e.status=="NOT_APPROVED"?"No aprovado por gerencia":"Aprobado por Gerencia"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onClick"])])]),"item.status_customer":a(({item:e})=>[n("div",_e,[n("span",fe,m(e.status_customer==="APPROVED"?"Aprobado":"No Aprobado"),1),o(R,{modelValue:e.status_customer,"onUpdate:modelValue":i=>e.status_customer=i,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:i=>z(e.id,e.status_customer)},{default:a(()=>[o(N,{activator:"parent",location:"top"},{default:a(()=>[f(m(e.status_customer=="NOT_APPROVED"?"No aprobado por Cliente ":"Aprobado por Cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])])]),"item.action":a(({item:e})=>[n("div",Ve,[o(b,{to:{name:"quote-id",params:{id:e.id}}},{default:a(()=>[o(I,null,{default:a(()=>[o(te,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])])]),bottom:a(()=>[o(E),n("div",ve,[n("p",Pe,m(s(K)({page:s(p),itemsPerPage:s(r)},s(v))),1),o(ie,{modelValue:s(p),"onUpdate:modelValue":t[3]||(t[3]=e=>d(p)?p.value=e:null),length:Math.ceil(s(v)/s(r)),"total-visible":l.$vuetify.display.xs?1:Math.min(Math.ceil(s(v)/s(r)),5)},{prev:a(e=>[o(P,D({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>t[9]||(t[9]=[f(" Previous ")])),_:2},1040)]),next:a(e=>[o(P,D({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>t[10]||(t[10]=[f(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),o(J,{"is-drawer-open":s(x),"onUpdate:isDrawerOpen":t[6]||(t[6]=e=>d(x)?x.value=e:null)},null,8,["is-drawer-open"])])}}},Ot=oe(xe,[["__scopeId","data-v-c49aa4d5"]]);export{Ot as default};
