import{$ as n}from"./api-8079bf60.js";import{s as u,c as l,e as o,a as g}from"./notifications-ada6c777.js";import{r as t}from"./index-b4bea750.js";const d=async e=>await n("/sale",{method:"POST",body:e}),f=async e=>await n("/sale/changeStage",{method:"POST",body:e}),S=async e=>await n(`/sale/${e}`,{method:"GET"});function b(){const e=t(!1),c=t([]),i=t(null),r=t(null);return{loadingSale:e,sales:c,error:i,sale:r,generateSale:async s=>{e.value=!0;try{const a=await d(s);g("Venta generada con Exito","Se registro una nueva venta"),console.log("venta: ",a),r.value=a.data}catch(a){return a.response&&a.response.status==422?(l("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(o("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},generateSaleChangeStage:async s=>{e.value=!0;try{const a=await f(s);u("Creacion Exitosa","La venta ha sido creada correctamente."),console.log("venta: ",a),r.value=a.data}catch(a){return console.log(a),a.response&&a.response.status==422?(l("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(o("Error al crear la venta","Hubo un problema al crear la venta."),{success:!1,message:"Error de actualización"})}finally{e.value=!1}},getSalebyId:async s=>{e.value=!0;try{const a=await S(s);r.value=a.data}catch(a){console.log(a)}finally{e.value=!1}}}}export{b as u};
