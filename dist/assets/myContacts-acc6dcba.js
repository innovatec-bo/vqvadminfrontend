import{_ as Kt}from"./AppDateTimePicker-cd6911fb.js";import{M as Wo,a2 as Pe,cq as Qo,n as y,r as W,bR as Jo,N as Zo,cl as qt,w as Xe,cV as en,H as Gt,an as Do,a0 as st,o as V,f as ve,e as d,b as r,a4 as J,v as X,a3 as Ne,a as tn,c as N,F as ie,i as ce,x as B,$ as ge,d as g,z as fe,y as on}from"./index-7ea6e93c.js";import{u as Et,S as Ue,a as Wt,p as eo,_ as nn}from"./PreSaleForm-23818eb1.js";import{u as ln}from"./useSales-69c5dc01.js";import{f as $t}from"./currencyFormatter-92ad4b3c.js";import{_ as Ct}from"./DialogCloseBtn-4b442f07.js";import{_ as an}from"./AddQuoteInvoice-5d85852a.js";import{u as rn}from"./useQuote-98bc39bc.js";import{P as nt}from"./InvoiceAddMoney-f1676ee6.js";import{s as to}from"./notifications-b6da0b75.js";import{V as Be,a as Ut,b as ut,c as sn}from"./VCard-ab6043fc.js";import{V as Ae}from"./VCardText-d9bf8dee.js";import{V as ye}from"./VRow-64677d26.js";import{V as Y}from"./VCol-a5be9b19.js";import{V as Dt}from"./VDialog-53b8018d.js";import{_ as Vo,V as un}from"./AppTextarea-ffb7762e.js";import{_ as vt}from"./AppSelect-79682b14.js";import{_ as Ao}from"./AppTextField-37b8cec7.js";import{V as jt}from"./VForm-26b2b4f7.js";import{_ as To}from"./AppAutocomplete-96f9240d.js";import{u as So}from"./useProperty-a09032a5.js";import{V as dn,a as cn}from"./VTabs-91ab7c20.js";import{V as pn,a as Ie}from"./VWindowItem-cc2bce62.js";import{V as mn}from"./VDataTable-61d681e3.js";import{V as Tt}from"./VTable-f7731010.js";import{V as He}from"./VCheckbox-d4985f00.js";import{V as Me}from"./VTooltip-1d205cc5.js";import{V as oo}from"./VAvatar-04485412.js";import{b as no,c as lo}from"./VList-7b5d1d52.js";import{V as zt}from"./VChip-f506d678.js";import{u as fn}from"./useCustomer-f1ae7296.js";import{V as vn}from"./VSpacer-16b0b683.js";import{_ as gn}from"./_plugin-vue_export-helper-c27b6911.js";import"./VField-9b92bd16.js";import"./form-32d3f16f.js";import"./easing-9f15041e.js";import"./VInput-41cea425.js";import"./VImg-08f625e0.js";import"./api-ea761cca.js";import"./index-9c720871.js";import"./constants-71880aa6.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./VNodeRenderer-1741a7df.js";import"./VTextField-5f4bfbd3.js";/* empty css                   */import"./VCounter-7d2c644f.js";import"./forwardRefs-8348545e.js";import"./VDivider-b8340ea2.js";import"./VOverlay-67803cc2.js";import"./lazy-5ebbba33.js";import"./scopeId-af1b5b41.js";import"./dialog-transition-ba15ce8d.js";import"./VSelect-0bc36668.js";import"./VMenu-6eb6d16e.js";import"./VCheckboxBtn-5481c219.js";import"./VSelectionControl-c8508d6d.js";import"./filter-86974df5.js";import"./VSlideGroup-00eae8c5.js";import"./ssrBoot-97876c66.js";var hn=Object.defineProperty,gt=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,ao=(e,o,t)=>o in e?hn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,je=(e,o)=>{for(var t in o||(o={}))ko.call(o,t)&&ao(e,t,o[t]);if(gt)for(var t of gt(o))xo.call(o,t)&&ao(e,t,o[t]);return e},Oo=(e,o)=>{var t={};for(var n in e)ko.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&gt)for(var n of gt(e))o.indexOf(n)<0&&xo.call(e,n)&&(t[n]=e[n]);return t};const Po="[vue-draggable-plus]: ";function bn(e){console.warn(Po+e)}function yn(e){console.error(Po+e)}function io(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function _n(e){return e.replace(/-(\w)/g,(o,t)=>t?t.toUpperCase():"")}function wn(e){return Object.keys(e).reduce((o,t)=>(typeof e[t]<"u"&&(o[_n(t)]=e[t]),o),{})}function ro(e,o){return Array.isArray(e)&&e.splice(o,1),e}function so(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function En(e){return typeof e>"u"}function Cn(e){return typeof e=="string"}function uo(e,o,t){const n=e.children[t];e.insertBefore(o,n)}function St(e){e.parentNode&&e.parentNode.removeChild(e)}function Dn(e,o=document){var t;let n=null;return typeof(o==null?void 0:o.querySelector)=="function"?n=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):n=document.querySelector(e),n||bn(`Element not found: ${e}`),n}function Vn(e,o,t=null){return function(...n){return e.apply(t,n),o.apply(t,n)}}function An(e,o){const t=je({},e);return Object.keys(o).forEach(n=>{t[n]?t[n]=Vn(e[n],o[n]):t[n]=o[n]}),t}function Tn(e){return e instanceof HTMLElement}function co(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function Sn(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const kn=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function po(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function we(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?po(Object(t),!0).forEach(function(n){xn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function dt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(o){return typeof o}:dt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},dt(e)}function xn(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function Ce(){return Ce=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ce.apply(this,arguments)}function On(e,o){if(e==null)return{};var t={},n=Object.keys(e),l,a;for(a=0;a<n.length;a++)l=n[a],!(o.indexOf(l)>=0)&&(t[l]=e[l]);return t}function Pn(e,o){if(e==null)return{};var t=On(e,o),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Nn="1.15.2";function Ee(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var De=Ee(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),tt=Ee(/Edge/i),mo=Ee(/firefox/i),We=Ee(/safari/i)&&!Ee(/chrome/i)&&!Ee(/android/i),No=Ee(/iP(ad|od|hone)/i),Io=Ee(/chrome/i)&&Ee(/android/i),Mo={capture:!1,passive:!1};function z(e,o,t){e.addEventListener(o,t,!De&&Mo)}function F(e,o,t){e.removeEventListener(o,t,!De&&Mo)}function ht(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function In(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function be(e,o,t,n){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&ht(e,o):ht(e,o))||n&&e===t)return e;if(e===t)break}while(e=In(e))}return null}var fo=/\s+/g;function ue(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var n=(" "+e.className+" ").replace(fo," ").replace(" "+o+" "," ");e.className=(n+(t?" "+o:"")).replace(fo," ")}}function T(e,o,t){var n=e&&e.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in n)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),n[o]=t+(typeof t=="string"?"":"px")}}function Le(e,o){var t="";if(typeof e=="string")t=e;else do{var n=T(e,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!o&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Ro(e,o,t){if(e){var n=e.getElementsByTagName(o),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function _e(){var e=document.scrollingElement;return e||document.documentElement}function Z(e,o,t,n,l){if(!(!e.getBoundingClientRect&&e!==window)){var a,s,u,i,v,b,f;if(e!==window&&e.parentNode&&e!==_e()?(a=e.getBoundingClientRect(),s=a.top,u=a.left,i=a.bottom,v=a.right,b=a.height,f=a.width):(s=0,u=0,i=window.innerHeight,v=window.innerWidth,b=window.innerHeight,f=window.innerWidth),(o||t)&&e!==window&&(l=l||e.parentNode,!De))do if(l&&l.getBoundingClientRect&&(T(l,"transform")!=="none"||t&&T(l,"position")!=="static")){var p=l.getBoundingClientRect();s-=p.top+parseInt(T(l,"border-top-width")),u-=p.left+parseInt(T(l,"border-left-width")),i=s+a.height,v=u+a.width;break}while(l=l.parentNode);if(n&&e!==window){var _=Le(l||e),I=_&&_.a,D=_&&_.d;_&&(s/=D,u/=I,f/=I,b/=D,i=s+b,v=u+f)}return{top:s,left:u,bottom:i,right:v,width:f,height:b}}}function vo(e,o,t){for(var n=Se(e,!0),l=Z(e)[o];n;){var a=Z(n)[t],s=void 0;if(s=l>=a,!s)return n;if(n===_e())break;n=Se(n,!1)}return!1}function Ye(e,o,t,n){for(var l=0,a=0,s=e.children;a<s.length;){if(s[a].style.display!=="none"&&s[a]!==S.ghost&&(n||s[a]!==S.dragged)&&be(s[a],t.draggable,e,!1)){if(l===o)return s[a];l++}a++}return null}function Qt(e,o){for(var t=e.lastElementChild;t&&(t===S.ghost||T(t,"display")==="none"||o&&!ht(t,o));)t=t.previousElementSibling;return t||null}function me(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==S.clone&&(!o||ht(e,o))&&t++;return t}function go(e){var o=0,t=0,n=_e();if(e)do{var l=Le(e),a=l.a,s=l.d;o+=e.scrollLeft*a,t+=e.scrollTop*s}while(e!==n&&(e=e.parentNode));return[o,t]}function Mn(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var n in o)if(o.hasOwnProperty(n)&&o[n]===e[t][n])return Number(t)}return-1}function Se(e,o){if(!e||!e.getBoundingClientRect)return _e();var t=e,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=T(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return _e();if(n||o)return t;n=!0}}while(t=t.parentNode);return _e()}function Rn(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function kt(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var Qe;function Fo(e,o){return function(){if(!Qe){var t=arguments,n=this;t.length===1?e.call(n,t[0]):e.apply(n,t),Qe=setTimeout(function(){Qe=void 0},o)}}}function Fn(){clearTimeout(Qe),Qe=void 0}function $o(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function Uo(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function jo(e,o,t){var n={};return Array.from(e.children).forEach(function(l){var a,s,u,i;if(!(!be(l,o.draggable,e,!1)||l.animated||l===t)){var v=Z(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,v.left),n.top=Math.min((s=n.top)!==null&&s!==void 0?s:1/0,v.top),n.right=Math.max((u=n.right)!==null&&u!==void 0?u:-1/0,v.right),n.bottom=Math.max((i=n.bottom)!==null&&i!==void 0?i:-1/0,v.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var pe="Sortable"+new Date().getTime();function $n(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(n){if(!(T(n,"display")==="none"||n===S.ghost)){e.push({target:n,rect:Z(n)});var l=we({},e[e.length-1].rect);if(n.thisAnimationDuration){var a=Le(n,!0);a&&(l.top-=a.f,l.left-=a.e)}n.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Mn(e,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var l=!1,a=0;e.forEach(function(s){var u=0,i=s.target,v=i.fromRect,b=Z(i),f=i.prevFromRect,p=i.prevToRect,_=s.rect,I=Le(i,!0);I&&(b.top-=I.f,b.left-=I.e),i.toRect=b,i.thisAnimationDuration&&kt(f,b)&&!kt(v,b)&&(_.top-b.top)/(_.left-b.left)===(v.top-b.top)/(v.left-b.left)&&(u=jn(_,f,p,n.options)),kt(b,v)||(i.prevFromRect=v,i.prevToRect=b,u||(u=n.options.animation),n.animate(i,_,b,u)),u&&(l=!0,a=Math.max(a,u),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},u),i.thisAnimationDuration=u)}),clearTimeout(o),l?o=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),e=[]},animate:function(t,n,l,a){if(a){T(t,"transition",""),T(t,"transform","");var s=Le(this.el),u=s&&s.a,i=s&&s.d,v=(n.left-l.left)/(u||1),b=(n.top-l.top)/(i||1);t.animatingX=!!v,t.animatingY=!!b,T(t,"transform","translate3d("+v+"px,"+b+"px,0)"),this.forRepaintDummy=Un(t),T(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),T(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){T(t,"transition",""),T(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function Un(e){return e.offsetWidth}function jn(e,o,t,n){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*n.animation}var Re=[],xt={initializeByDefault:!0},ot={mount:function(e){for(var o in xt)xt.hasOwnProperty(o)&&!(o in e)&&(e[o]=xt[o]);Re.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,o,t){var n=this;this.eventCanceled=!1,t.cancel=function(){n.eventCanceled=!0};var l=e+"Global";Re.forEach(function(a){o[a.pluginName]&&(o[a.pluginName][l]&&o[a.pluginName][l](we({sortable:o},t)),o.options[a.pluginName]&&o[a.pluginName][e]&&o[a.pluginName][e](we({sortable:o},t)))})},initializePlugins:function(e,o,t,n){Re.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var i=new s(e,o,e.options);i.sortable=e,i.options=e.options,e[u]=i,Ce(t,i.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var a=this.modifyOption(e,l,e.options[l]);typeof a<"u"&&(e.options[l]=a)}},getEventProperties:function(e,o){var t={};return Re.forEach(function(n){typeof n.eventProperties=="function"&&Ce(t,n.eventProperties.call(o[n.pluginName],e))}),t},modifyOption:function(e,o,t){var n;return Re.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(n=l.optionListeners[o].call(e[l.pluginName],t))}),n}};function zn(e){var o=e.sortable,t=e.rootEl,n=e.name,l=e.targetEl,a=e.cloneEl,s=e.toEl,u=e.fromEl,i=e.oldIndex,v=e.newIndex,b=e.oldDraggableIndex,f=e.newDraggableIndex,p=e.originalEvent,_=e.putSortable,I=e.extraEventProperties;if(o=o||t&&t[pe],!!o){var D,$=o.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!De&&!tt?D=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(n,!0,!0)),D.to=s||t,D.from=u||t,D.item=l||t,D.clone=a,D.oldIndex=i,D.newIndex=v,D.oldDraggableIndex=b,D.newDraggableIndex=f,D.originalEvent=p,D.pullMode=_?_.lastPutMode:void 0;var M=we(we({},I),ot.getEventProperties(n,o));for(var P in M)D[P]=M[P];t&&t.dispatchEvent(D),$[w]&&$[w].call(o,D)}}var Bn=["evt"],se=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.evt,l=Pn(t,Bn);ot.pluginEvent.bind(S)(e,o,we({dragEl:h,parentEl:G,ghostEl:O,rootEl:K,nextEl:Oe,lastDownEl:ct,cloneEl:q,cloneHidden:Te,dragStarted:Ke,putSortable:oe,activeSortable:S.active,originalEvent:n,oldIndex:ze,oldDraggableIndex:Je,newIndex:de,newDraggableIndex:Ve,hideGhostForTarget:Xo,unhideGhostForTarget:Yo,cloneNowHidden:function(){Te=!0},cloneNowShown:function(){Te=!1},dispatchSortableEvent:function(a){ae({sortable:o,name:a,originalEvent:n})}},l))};function ae(e){zn(we({putSortable:oe,cloneEl:q,targetEl:h,rootEl:K,oldIndex:ze,oldDraggableIndex:Je,newIndex:de,newDraggableIndex:Ve},e))}var h,G,O,K,Oe,ct,q,Te,ze,de,Je,Ve,lt,oe,$e=!1,bt=!1,yt=[],ke,he,Ot,Pt,ho,bo,Ke,Fe,Ze,et=!1,at=!1,pt,ne,Nt=[],Bt=!1,_t=[],Vt=typeof document<"u",it=No,yo=tt||De?"cssFloat":"float",Ln=Vt&&!Io&&!No&&"draggable"in document.createElement("div"),zo=function(){if(Vt){if(De)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Bo=function(e,o){var t=T(e),n=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Ye(e,0,o),a=Ye(e,1,o),s=l&&T(l),u=a&&T(a),i=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Z(l).width,v=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Z(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var b=s.float==="left"?"left":"right";return a&&(u.clear==="both"||u.clear===b)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||i>=n&&t[yo]==="none"||a&&t[yo]==="none"&&i+v>n)?"vertical":"horizontal"},Xn=function(e,o,t){var n=t?e.left:e.top,l=t?e.right:e.bottom,a=t?e.width:e.height,s=t?o.left:o.top,u=t?o.right:o.bottom,i=t?o.width:o.height;return n===s||l===u||n+a/2===s+i/2},Yn=function(e,o){var t;return yt.some(function(n){var l=n[pe].options.emptyInsertThreshold;if(!(!l||Qt(n))){var a=Z(n),s=e>=a.left-l&&e<=a.right+l,u=o>=a.top-l&&o<=a.bottom+l;if(s&&u)return t=n}}),t},Lo=function(e){function o(l,a){return function(s,u,i,v){var b=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(l==null&&(a||b))return!0;if(l==null||l===!1)return!1;if(a&&l==="clone")return l;if(typeof l=="function")return o(l(s,u,i,v),a)(s,u,i,v);var f=(a?s:u).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},n=e.group;(!n||dt(n)!="object")&&(n={name:n}),t.name=n.name,t.checkPull=o(n.pull,!0),t.checkPut=o(n.put),t.revertClone=n.revertClone,e.group=t},Xo=function(){!zo&&O&&T(O,"display","none")},Yo=function(){!zo&&O&&T(O,"display","")};Vt&&!Io&&document.addEventListener("click",function(e){if(bt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),bt=!1,!1},!0);var xe=function(e){if(h){e=e.touches?e.touches[0]:e;var o=Yn(e.clientX,e.clientY);if(o){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[pe]._onDragOver(t)}}},Hn=function(e){h&&h.parentNode[pe]._isOutsideThisEl(e.target)};function S(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=Ce({},o),e[pe]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Bo(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:S.supportPointer!==!1&&"PointerEvent"in window&&!We,emptyInsertThreshold:5};ot.initializePlugins(this,e,t);for(var n in t)!(n in o)&&(o[n]=t[n]);Lo(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:Ln,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?z(e,"pointerdown",this._onTapStart):(z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),yt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),Ce(this,$n())}S.prototype={constructor:S,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Fe=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,n=this.options,l=n.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,i=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,v=n.filter;if(el(t),!h&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||n.disabled)&&!i.isContentEditable&&!(!this.nativeDraggable&&We&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=be(u,n.draggable,t,!1),!(u&&u.animated)&&ct!==u)){if(ze=me(u),Je=me(u,n.draggable),typeof v=="function"){if(v.call(this,e,u,this)){ae({sortable:o,rootEl:i,name:"filter",targetEl:u,toEl:t,fromEl:t}),se("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(b){if(b=be(i,b.trim(),t,!1),b)return ae({sortable:o,rootEl:b,name:"filter",targetEl:u,fromEl:t,toEl:t}),se("filter",o,{evt:e}),!0}),v)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!be(i,n.handle,t,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,o,t){var n=this,l=n.el,a=n.options,s=l.ownerDocument,u;if(t&&!h&&t.parentNode===l){var i=Z(t);if(K=l,h=t,G=h.parentNode,Oe=h.nextSibling,ct=t,lt=a.group,S.dragged=h,ke={target:h,clientX:(o||e).clientX,clientY:(o||e).clientY},ho=ke.clientX-i.left,bo=ke.clientY-i.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,h.style["will-change"]="all",u=function(){if(se("delayEnded",n,{evt:e}),S.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!mo&&n.nativeDraggable&&(h.draggable=!0),n._triggerDragStart(e,o),ae({sortable:n,name:"choose",originalEvent:e}),ue(h,a.chosenClass,!0)},a.ignore.split(",").forEach(function(v){Ro(h,v.trim(),It)}),z(s,"dragover",xe),z(s,"mousemove",xe),z(s,"touchmove",xe),z(s,"mouseup",n._onDrop),z(s,"touchend",n._onDrop),z(s,"touchcancel",n._onDrop),mo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),se("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(tt||De))){if(S.eventCanceled){this._onDrop();return}z(s,"mouseup",n._disableDelayedDrag),z(s,"touchend",n._disableDelayedDrag),z(s,"touchcancel",n._disableDelayedDrag),z(s,"mousemove",n._delayedDragTouchMoveHandler),z(s,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&z(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(u,a.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&It(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):o?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(h,"dragend",this),z(K,"dragstart",this._onDragStart));try{document.selection?mt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if($e=!1,K&&h){se("dragStarted",this,{evt:o}),this.nativeDraggable&&z(document,"dragover",Hn);var t=this.options;!e&&ue(h,t.dragClass,!1),ue(h,t.ghostClass,!0),S.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(he){this._lastX=he.clientX,this._lastY=he.clientY,Xo();for(var e=document.elementFromPoint(he.clientX,he.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(he.clientX,he.clientY),e!==o);)o=e;if(h.parentNode[pe]._isOutsideThisEl(e),o)do{if(o[pe]){var t=void 0;if(t=o[pe]._onDragOver({clientX:he.clientX,clientY:he.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);Yo()}},_onTouchMove:function(e){if(ke){var o=this.options,t=o.fallbackTolerance,n=o.fallbackOffset,l=e.touches?e.touches[0]:e,a=O&&Le(O,!0),s=O&&a&&a.a,u=O&&a&&a.d,i=it&&ne&&go(ne),v=(l.clientX-ke.clientX+n.x)/(s||1)+(i?i[0]-Nt[0]:0)/(s||1),b=(l.clientY-ke.clientY+n.y)/(u||1)+(i?i[1]-Nt[1]:0)/(u||1);if(!S.active&&!$e){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(O){a?(a.e+=v-(Ot||0),a.f+=b-(Pt||0)):a={a:1,b:0,c:0,d:1,e:v,f:b};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");T(O,"webkitTransform",f),T(O,"mozTransform",f),T(O,"msTransform",f),T(O,"transform",f),Ot=v,Pt=b,he=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!O){var e=this.options.fallbackOnBody?document.body:K,o=Z(h,!0,it,!0,e),t=this.options;if(it){for(ne=e;T(ne,"position")==="static"&&T(ne,"transform")==="none"&&ne!==document;)ne=ne.parentNode;ne!==document.body&&ne!==document.documentElement?(ne===document&&(ne=_e()),o.top+=ne.scrollTop,o.left+=ne.scrollLeft):ne=_e(),Nt=go(ne)}O=h.cloneNode(!0),ue(O,t.ghostClass,!1),ue(O,t.fallbackClass,!0),ue(O,t.dragClass,!0),T(O,"transition",""),T(O,"transform",""),T(O,"box-sizing","border-box"),T(O,"margin",0),T(O,"top",o.top),T(O,"left",o.left),T(O,"width",o.width),T(O,"height",o.height),T(O,"opacity","0.8"),T(O,"position",it?"absolute":"fixed"),T(O,"zIndex","100000"),T(O,"pointerEvents","none"),S.ghost=O,e.appendChild(O),T(O,"transform-origin",ho/parseInt(O.style.width)*100+"% "+bo/parseInt(O.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,n=e.dataTransfer,l=t.options;if(se("dragStart",this,{evt:e}),S.eventCanceled){this._onDrop();return}se("setupClone",this),S.eventCanceled||(q=Uo(h),q.removeAttribute("id"),q.draggable=!1,q.style["will-change"]="",this._hideClone(),ue(q,this.options.chosenClass,!1),S.clone=q),t.cloneId=mt(function(){se("clone",t),!S.eventCanceled&&(t.options.removeCloneOnHide||K.insertBefore(q,h),t._hideClone(),ae({sortable:t,name:"clone"}))}),!o&&ue(h,l.dragClass,!0),o?(bt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(F(document,"mouseup",t._onDrop),F(document,"touchend",t._onDrop),F(document,"touchcancel",t._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(t,n,h)),z(document,"drop",t),T(h,"transform","translateZ(0)")),$e=!0,t._dragStartId=mt(t._dragStarted.bind(t,o,e)),z(document,"selectstart",t),Ke=!0,We&&T(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,n,l,a,s=this.options,u=s.group,i=S.active,v=lt===u,b=s.sort,f=oe||i,p,_=this,I=!1;if(Bt)return;function D(le,c){se(le,_,we({evt:e,isOwner:v,axis:p?"vertical":"horizontal",revert:a,dragRect:n,targetRect:l,canSort:b,fromSortable:f,target:t,completed:w,onMove:function(R,At){return rt(K,o,h,n,R,Z(R),e,At)},changed:M},c))}function $(){D("dragOverAnimationCapture"),_.captureAnimationState(),_!==f&&f.captureAnimationState()}function w(le){return D("dragOverCompleted",{insertion:le}),le&&(v?i._hideClone():i._showClone(_),_!==f&&(ue(h,oe?oe.options.ghostClass:i.options.ghostClass,!1),ue(h,s.ghostClass,!0)),oe!==_&&_!==S.active?oe=_:_===S.active&&oe&&(oe=null),f===_&&(_._ignoreWhileAnimating=t),_.animateAll(function(){D("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===h&&!h.animated||t===o&&!t.animated)&&(Fe=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(h.parentNode[pe]._isOutsideThisEl(e.target),!le&&xe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),I=!0}function M(){de=me(h),Ve=me(h,s.draggable),ae({sortable:_,name:"change",toEl:o,newIndex:de,newDraggableIndex:Ve,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=be(t,s.draggable,o,!0),D("dragOver"),S.eventCanceled)return I;if(h.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||_._ignoreWhileAnimating===t)return w(!1);if(bt=!1,i&&!s.disabled&&(v?b||(a=G!==K):oe===this||(this.lastPutMode=lt.checkPull(this,i,h,e))&&u.checkPut(this,i,h,e))){if(p=this._getDirection(e,t)==="vertical",n=Z(h),D("dragOverValid"),S.eventCanceled)return I;if(a)return G=K,$(),this._hideClone(),D("revert"),S.eventCanceled||(Oe?K.insertBefore(h,Oe):K.appendChild(h)),w(!0);var P=Qt(o,s.draggable);if(!P||Wn(e,p,this)&&!P.animated){if(P===h)return w(!1);if(P&&o===e.target&&(t=P),t&&(l=Z(t)),rt(K,o,h,n,t,l,e,!!t)!==!1)return $(),P&&P.nextSibling?o.insertBefore(h,P.nextSibling):o.appendChild(h),G=o,M(),w(!0)}else if(P&&Gn(e,p,this)){var L=Ye(o,0,s,!0);if(L===h)return w(!1);if(t=L,l=Z(t),rt(K,o,h,n,t,l,e,!1)!==!1)return $(),o.insertBefore(h,L),G=o,M(),w(!0)}else if(t.parentNode===o){l=Z(t);var ee=0,re,x=h.parentNode!==o,U=!Xn(h.animated&&h.toRect||n,t.animated&&t.toRect||l,p),E=p?"top":"left",m=vo(t,"top","top")||vo(h,"top","top"),te=m?m.scrollTop:void 0;Fe!==t&&(re=l[E],et=!1,at=!U&&s.invertSwap||x),ee=Qn(e,t,l,p,U?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,at,Fe===t);var C;if(ee!==0){var A=me(h);do A-=ee,C=G.children[A];while(C&&(T(C,"display")==="none"||C===O))}if(ee===0||C===t)return w(!1);Fe=t,Ze=ee;var k=t.nextElementSibling,H=!1;H=ee===1;var j=rt(K,o,h,n,t,l,e,H);if(j!==!1)return(j===1||j===-1)&&(H=j===1),Bt=!0,setTimeout(qn,30),$(),H&&!k?o.appendChild(h):t.parentNode.insertBefore(h,H?k:t),m&&$o(m,0,te-m.scrollTop),G=h.parentNode,re!==void 0&&!at&&(pt=Math.abs(re-Z(t)[E])),M(),w(!0)}if(o.contains(h))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",xe),F(document,"mousemove",xe),F(document,"touchmove",xe)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(de=me(h),Ve=me(h,t.draggable),se("drop",this,{evt:e}),G=h&&h.parentNode,de=me(h),Ve=me(h,t.draggable),S.eventCanceled){this._nulling();return}$e=!1,at=!1,et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Lt(this.cloneId),Lt(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),We&&T(document.body,"user-select",""),T(h,"transform",""),e&&(Ke&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),O&&O.parentNode&&O.parentNode.removeChild(O),(K===G||oe&&oe.lastPutMode!=="clone")&&q&&q.parentNode&&q.parentNode.removeChild(q),h&&(this.nativeDraggable&&F(h,"dragend",this),It(h),h.style["will-change"]="",Ke&&!$e&&ue(h,oe?oe.options.ghostClass:this.options.ghostClass,!1),ue(h,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:G,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==G?(de>=0&&(ae({rootEl:G,name:"add",toEl:G,fromEl:K,originalEvent:e}),ae({sortable:this,name:"remove",toEl:G,originalEvent:e}),ae({rootEl:G,name:"sort",toEl:G,fromEl:K,originalEvent:e}),ae({sortable:this,name:"sort",toEl:G,originalEvent:e})),oe&&oe.save()):de!==ze&&de>=0&&(ae({sortable:this,name:"update",toEl:G,originalEvent:e}),ae({sortable:this,name:"sort",toEl:G,originalEvent:e})),S.active&&((de==null||de===-1)&&(de=ze,Ve=Je),ae({sortable:this,name:"end",toEl:G,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){se("nulling",this),K=h=G=O=Oe=q=ct=Te=ke=he=Ke=de=Ve=ze=Je=Fe=Ze=oe=lt=S.dragged=S.ghost=S.clone=S.active=null,_t.forEach(function(e){e.checked=!0}),_t.length=Ot=Pt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),Kn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,n=0,l=t.length,a=this.options;n<l;n++)o=t[n],be(o,a.draggable,this.el,!1)&&e.push(o.getAttribute(a.dataIdAttr)||Zn(o));return e},sort:function(e,o){var t={},n=this.el;this.toArray().forEach(function(l,a){var s=n.children[a];be(s,this.options.draggable,n,!1)&&(t[l]=s)},this),o&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(n.removeChild(t[l]),n.appendChild(t[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return be(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var n=ot.modifyOption(this,e,o);typeof n<"u"?t[e]=n:t[e]=o,e==="group"&&Lo(t)},destroy:function(){se("destroy",this);var e=this.el;e[pe]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yt.splice(yt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Te){if(se("hideClone",this),S.eventCanceled)return;T(q,"display","none"),this.options.removeCloneOnHide&&q.parentNode&&q.parentNode.removeChild(q),Te=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Te){if(se("showClone",this),S.eventCanceled)return;h.parentNode==K&&!this.options.group.revertClone?K.insertBefore(q,h):Oe?K.insertBefore(q,Oe):K.appendChild(q),this.options.group.revertClone&&this.animate(h,q),T(q,"display",""),Te=!1}}};function Kn(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function rt(e,o,t,n,l,a,s,u){var i,v=e[pe],b=v.options.onMove,f;return window.CustomEvent&&!De&&!tt?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=o,i.from=e,i.dragged=t,i.draggedRect=n,i.related=l||o,i.relatedRect=a||Z(o),i.willInsertAfter=u,i.originalEvent=s,e.dispatchEvent(i),b&&(f=b.call(v,i,s)),f}function It(e){e.draggable=!1}function qn(){Bt=!1}function Gn(e,o,t){var n=Z(Ye(t.el,0,t.options,!0)),l=jo(t.el,t.options,O),a=10;return o?e.clientX<l.left-a||e.clientY<n.top&&e.clientX<n.right:e.clientY<l.top-a||e.clientY<n.bottom&&e.clientX<n.left}function Wn(e,o,t){var n=Z(Qt(t.el,t.options.draggable)),l=jo(t.el,t.options,O),a=10;return o?e.clientX>l.right+a||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>l.bottom+a||e.clientX>n.right&&e.clientY>n.top}function Qn(e,o,t,n,l,a,s,u){var i=n?e.clientY:e.clientX,v=n?t.height:t.width,b=n?t.top:t.left,f=n?t.bottom:t.right,p=!1;if(!s){if(u&&pt<v*l){if(!et&&(Ze===1?i>b+v*a/2:i<f-v*a/2)&&(et=!0),et)p=!0;else if(Ze===1?i<b+pt:i>f-pt)return-Ze}else if(i>b+v*(1-l)/2&&i<f-v*(1-l)/2)return Jn(o)}return p=p||s,p&&(i<b+v*a/2||i>f-v*a/2)?i>b+v/2?1:-1:0}function Jn(e){return me(h)<me(e)?1:-1}function Zn(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,n=0;t--;)n+=o.charCodeAt(t);return n.toString(36)}function el(e){_t.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var n=o[t];n.checked&&_t.push(n)}}function mt(e){return setTimeout(e,0)}function Lt(e){return clearTimeout(e)}Vt&&z(document,"touchmove",function(e){(S.active||$e)&&e.cancelable&&e.preventDefault()});S.utils={on:z,off:F,css:T,find:Ro,is:function(e,o){return!!be(e,o,e,!1)},extend:Rn,throttle:Fo,closest:be,toggleClass:ue,clone:Uo,index:me,nextTick:mt,cancelNextTick:Lt,detectDirection:Bo,getChild:Ye};S.get=function(e){return e[pe]};S.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(S.utils=we(we({},S.utils),n.utils)),ot.mount(n)})};S.create=function(e,o){return new S(e,o)};S.version=Nn;var Q=[],qe,Xt,Yt=!1,Mt,Rt,wt,Ge;function tl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):t.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),_o(),ft(),Fn()},nulling:function(){wt=Xt=qe=Yt=Ge=Mt=Rt=null,Q.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var n=this,l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,s=document.elementFromPoint(l,a);if(wt=o,t||this.options.forceAutoScrollFallback||tt||De||We){Ft(o,this.options,s,t);var u=Se(s,!0);Yt&&(!Ge||l!==Mt||a!==Rt)&&(Ge&&_o(),Ge=setInterval(function(){var i=Se(document.elementFromPoint(l,a),!0);i!==u&&(u=i,ft()),Ft(o,n.options,i,t)},10),Mt=l,Rt=a)}else{if(!this.options.bubbleScroll||Se(s,!0)===_e()){ft();return}Ft(o,this.options,Se(s,!1),!1)}}},Ce(e,{pluginName:"scroll",initializeByDefault:!0})}function ft(){Q.forEach(function(e){clearInterval(e.pid)}),Q=[]}function _o(){clearInterval(Ge)}var Ft=Fo(function(e,o,t,n){if(o.scroll){var l=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=o.scrollSensitivity,u=o.scrollSpeed,i=_e(),v=!1,b;Xt!==t&&(Xt=t,ft(),qe=o.scroll,b=o.scrollFn,qe===!0&&(qe=Se(t,!0)));var f=0,p=qe;do{var _=p,I=Z(_),D=I.top,$=I.bottom,w=I.left,M=I.right,P=I.width,L=I.height,ee=void 0,re=void 0,x=_.scrollWidth,U=_.scrollHeight,E=T(_),m=_.scrollLeft,te=_.scrollTop;_===i?(ee=P<x&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),re=L<U&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(ee=P<x&&(E.overflowX==="auto"||E.overflowX==="scroll"),re=L<U&&(E.overflowY==="auto"||E.overflowY==="scroll"));var C=ee&&(Math.abs(M-l)<=s&&m+P<x)-(Math.abs(w-l)<=s&&!!m),A=re&&(Math.abs($-a)<=s&&te+L<U)-(Math.abs(D-a)<=s&&!!te);if(!Q[f])for(var k=0;k<=f;k++)Q[k]||(Q[k]={});(Q[f].vx!=C||Q[f].vy!=A||Q[f].el!==_)&&(Q[f].el=_,Q[f].vx=C,Q[f].vy=A,clearInterval(Q[f].pid),(C!=0||A!=0)&&(v=!0,Q[f].pid=setInterval((function(){n&&this.layer===0&&S.active._onTouchMove(wt);var H=Q[this.layer].vy?Q[this.layer].vy*u:0,j=Q[this.layer].vx?Q[this.layer].vx*u:0;typeof b=="function"&&b.call(S.dragged.parentNode[pe],j,H,e,wt,Q[this.layer].el)!=="continue"||$o(Q[this.layer].el,j,H)}).bind({layer:f}),24))),f++}while(o.bubbleScroll&&p!==i&&(p=Se(p,!1)));Yt=v}},30),Ho=function(e){var o=e.originalEvent,t=e.putSortable,n=e.dragEl,l=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var i=t||l;s();var v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,b=document.elementFromPoint(v.clientX,v.clientY);u(),i&&!i.el.contains(b)&&(a("spill"),this.onSpill({dragEl:n,putSortable:t}))}};function Jt(){}Jt.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var n=Ye(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(o,n):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:Ho};Ce(Jt,{pluginName:"revertOnSpill"});function Zt(){}Zt.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,n=t||this.sortable;n.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),n.animateAll()},drop:Ho};Ce(Zt,{pluginName:"removeOnSpill"});S.mount(new tl);S.mount(Zt,Jt);function ol(e){return e==null?e:JSON.parse(JSON.stringify(e))}function nl(e){qt()&&en(e)}function ll(e){qt()?Gt(e):Do(e)}let Ko=null,qo=null;function wo(e=null,o=null){Ko=e,qo=o}function al(){return{data:Ko,clonedData:qo}}const Eo=Symbol("cloneElement");function il(...e){var o,t;const n=(o=qt())==null?void 0:o.proxy,l=e[0];let[,a,s]=e;Array.isArray(y(a))||(s=a,a=null);let u=null;const{immediate:i=!0,clone:v=ol,customUpdate:b}=(t=y(s))!=null?t:{};function f(x){var U;const E=y((U=y(a))==null?void 0:U[x.oldIndex]),m=v(E);wo(E,m),x.item[Eo]=m}function p(x){const U=x.item[Eo];if(!En(U)){if(St(x.item),st(a)){const E=[...y(a)];a.value=so(E,x.newDraggableIndex,U);return}so(y(a),x.newDraggableIndex,U)}}function _(x){const{from:U,item:E,oldIndex:m,oldDraggableIndex:te,pullMode:C,clone:A}=x;if(uo(U,E,m),C==="clone"){St(A);return}if(st(a)){const k=[...y(a)];a.value=ro(k,te);return}ro(y(a),te)}function I(x){if(b){b(x);return}const{from:U,item:E,oldIndex:m,newIndex:te}=x;if(St(E),uo(U,E,m),st(a)){const C=[...y(a)];a.value=io(C,m,te);return}io(y(a),m,te)}function D(){Do(()=>{wo()})}const $={onUpdate:I,onStart:f,onAdd:p,onRemove:_,onEnd:D};function w(x){const U=y(l);return x||(x=Cn(U)?Dn(U,n==null?void 0:n.$el):U),x&&!Tn(x)&&(x=x.$el),x||yn("Root element not found"),x}function M(){var x;const U=(x=y(s))!=null?x:{},E=Oo(U,["immediate","clone"]);return co(E,(m,te)=>{Sn(m)&&(E[m]=(C,...A)=>{const k=al();return kn(C,k),te(C,...A)})}),An(a===null?{}:$,E)}const P=x=>{x=w(x),u&&L.destroy(),u=new S(x,M())};Xe(()=>s,()=>{u&&co(M(),(x,U)=>{u==null||u.option(x,U)})},{deep:!0});const L={option:(x,U)=>u==null?void 0:u.option(x,U),destroy:()=>{u==null||u.destroy(),u=null},save:()=>u==null?void 0:u.save(),toArray:()=>u==null?void 0:u.toArray(),closest:(...x)=>u==null?void 0:u.closest(...x)},ee=()=>L==null?void 0:L.option("disabled",!0),re=()=>L==null?void 0:L.option("disabled",!1);return ll(()=>{i&&P()}),nl(L.destroy),je({start:P,pause:ee,resume:re},L)}const Ht=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],rl=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Ht.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)],sl=Wo({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:rl,emits:["update:modelValue",...Ht],setup(e,{slots:o,emit:t,expose:n,attrs:l}){const a=Ht.reduce((b,f)=>{const p=`on${f.replace(/^\S/,_=>_.toUpperCase())}`;return b[p]=(..._)=>t(f,..._),b},{}),s=Pe(()=>{const b=Qo(e),f=Oo(b,["modelValue"]),p=Object.entries(f).reduce((_,[I,D])=>{const $=y(D);return $!==void 0&&(_[I]=$),_},{});return je(je({},a),wn(je(je({},l),p)))}),u=Pe({get:()=>e.modelValue,set:b=>t("update:modelValue",b)}),i=W(),v=Jo(il(e.target||i,u,s));return n(v),()=>{var b;return Zo(e.tag||"div",{ref:i},(b=o==null?void 0:o.default)==null?void 0:b.call(o,v))}}}),ul={__name:"AddQuoteDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:String,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,{generateQuote:n}=rn(),{getOpportunitybyId:l,opportunity:a,changeStatusByOpportunity:s}=Et(),u=W(!1),i=W({social_reason:"",nit:"",address:"",email:"",phone:"",landline:"",workplace:"",expiration_date:null,creation_date:new Date().toISOString().split("T")[0],observations:"",payment_method:null,amount:null,initial_fee:null,percentage_initial_fee:null,balance:null,opportunity_id:null,customer_id:null,properties:[{property_id:null,price:null,price_it:null,price_contrato:null,property_type:nt.DEPARTAMENT.value,property_type_name:nt.DEPARTAMENT.label},{property_id:null,price:null,price_it:null,price_contrato:null,property_type:nt.PARK.value,property_type_name:nt.PARK.label}],differs_initial_fee:[],differs_balance:[]}),v=Pe(()=>i.value.social_reason&&i.value.nit&&i.value.phone&&i.value.amount&&i.value.creation_date&&i.value.expiration_date&&i.value.payment_method&&i.value.customer_id),b=Pe(()=>i.value.properties.every(w=>w.property_id!==null&&w.price!==null&&w.price_it!==null&&w.price_contrato!==null)),f=Pe(()=>i.value.differs_initial_fee.length===0?!0:i.value.differs_initial_fee.every(w=>w.amount!==null)),p=Pe(()=>{if(i.value.differs_initial_fee.length===0)return!0;const w=i.value.differs_initial_fee.reduce((L,ee)=>L+(ee.amount||0),0),M=parseFloat(w),P=parseFloat(i.value.initial_fee);return M===P}),_=Pe(()=>v.value&&b.value&&f.value),I=w=>{i.value.properties.push(w)},D=w=>{i.value.properties.splice(w,1)},$=async()=>{if(!_.value){to("Validación fallida","Completa todos los campos obligatorios.");return}if(!p.value){to("Validación fallida","La suma de las diferencias del anticipo no son correctas");return}u.value=!0;try{console.log(i),await n(i.value),await s(t.opportunityKanban.id,Ue.PRESALE.value,{})}catch(w){console.error("Error generando la venta:",w)}finally{u.value=!1}};return Xe(()=>i.value.properties,w=>{let M=0;w.forEach(P=>{if(P.price){const L=parseFloat(P.price)||0;P.price_it=L*.03,P.price_contrato=L+P.price_it,M+=P.price_contrato}else P.price_it=null}),i.value.amount=M},{deep:!0}),Xe(()=>t.isDialogVisible,async w=>{w&&(console.log("El diálogo se ha abierto"),await l(t.opportunityKanban.id),console.log("Datos de la oportunidad cargados:",a.value),i.value.customer_id=a.value.customer.id,a.value&&(i.value.social_reason=a.value.customer.name,i.value.email=a.value.customer.email,i.value.phone=a.value.customer.phone,i.value.nit=a.value.customer.ci,i.value.opportunity_id=a.value.id,a.value.property_id!==null?(a.value.property.property_type==="PARK"&&(i.value.properties[0].property_id=a.value.property_id,i.value.properties[0].property_id=null,i.value.properties[0].price=null,i.value.properties[0].price_it=null,i.value.properties[0].price_contrato=null),a.value.property.property_type==="DEPARTAMENT"&&(i.value.properties[0].property_id=a.value.property_id,i.value.properties[1].property_id=null,i.value.properties[1].price=null,i.value.properties[1].price_it=null,i.value.properties[1].price_contrato=null)):(i.value.properties[1].property_id=null,i.value.properties[1].price=null,i.value.properties[1].price_it=null,i.value.properties[1].price_contrato=null,i.value.properties[0].property_id=null,i.value.properties[0].price=null,i.value.properties[0].price_it=null,i.value.properties[0].price_contrato=null)))}),(w,M)=>{const P=Ct;return V(),ve(Dt,{"max-width":"987","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":M[2]||(M[2]=L=>w.$emit("update:isDialogVisible",L))},{default:d(()=>[r(P,{onClick:M[0]||(M[0]=L=>w.$emit("update:isDialogVisible",!1))}),r(Be,null,{default:d(()=>[r(Ae,null,{default:d(()=>[r(ye,null,{default:d(()=>[r(Y,{cols:"12",md:"9"},{default:d(()=>[r(an,{data:i.value,onPush:I,onRemove:D},null,8,["data"])]),_:1}),r(Y,{cols:"12",md:"3"},{default:d(()=>[r(J,{loading:u.value,disabled:!y(_)||u.value,color:"primary",onClick:$},{default:d(()=>M[3]||(M[3]=[X(" Guardar Cotización ")])),_:1},8,["loading","disabled"]),r(J,{text:"",color:"secondary",onClick:M[1]||(M[1]=L=>w.$emit("update:isDialogVisible",!1))},{default:d(()=>M[4]||(M[4]=[X(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},dl={__name:"AddActivity",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0},typeActivities:{type:Array,default:()=>[]}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{registerActivity:l,loadingActivity:a}=Wt(),{generateProspect:s}=Et(),u=W({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),i=()=>{n("formCancelled"),n("update:isDialogVisible",!1)},v=async()=>{await l(u.value),console.log("opportunityKanban",t.opportunityKanban.stage),t.opportunityKanban.stage==="LEAD"&&await s(t.opportunityKanban.id,{}),u.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},n("update:isDialogVisible",!1)};return Xe(()=>t.isDialogVisible,async b=>{var f,p;b===!0&&(u.value.opportunity_id=((f=t.opportunityKanban)==null?void 0:f.id)??null,u.value.assigned_to=((p=t.opportunityKanban)==null?void 0:p.user_id)??null,console.log(t.opportunityKanban))}),(b,f)=>{const p=Ct,_=Ao,I=vt,D=Kt,$=Vo;return V(),ve(Dt,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":i},{default:d(()=>[r(p,{onClick:i}),r(Be,{class:"pa-sm-8"},{default:d(()=>[r(Ut,null,{default:d(()=>[r(ut,{class:"text-h3 font-weight-medium mb-3"},{default:d(()=>f[4]||(f[4]=[X(" Agregar Actividad ")])),_:1}),r(Ae,null,{default:d(()=>[r(jt,{onSubmit:Ne(v,["prevent"])},{default:d(()=>[r(ye,null,{default:d(()=>[r(Y,{cols:"12"},{default:d(()=>[r(_,{modelValue:u.value.title,"onUpdate:modelValue":f[0]||(f[0]=w=>u.value.title=w),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(I,{modelValue:u.value.type_activity_id,"onUpdate:modelValue":f[1]||(f[1]=w=>u.value.type_activity_id=w),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:t.typeActivities.map(w=>({title:w.name,value:w.id}))},null,8,["modelValue","items"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(D,{modelValue:u.value.scheduled_at,"onUpdate:modelValue":f[2]||(f[2]=w=>u.value.scheduled_at=w),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12"},{default:d(()=>[r($,{modelValue:u.value.description,"onUpdate:modelValue":f[3]||(f[3]=w=>u.value.description=w),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",class:"text-center"},{default:d(()=>[r(J,{type:"submit",class:"me-3",disabled:y(a),loading:y(a)},{default:d(()=>f[5]||(f[5]=[X(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),r(J,{color:"secondary",variant:"tonal",onClick:i},{default:d(()=>f[6]||(f[6]=[X(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Co={PENDING:{value:"PENDING",label:"PENDIENTE"},COMPLETED:{value:"COMPLETED",label:"COMPLETADO"},CANCELED:{value:"CANCELED",label:"CANCELADO"}},cl={key:0},pl={key:1,class:"text-center my-5"},ml={class:"my-5"},fl={key:0},vl=["src"],gl={class:"mb-4"},hl=["onClick"],bl=["onClick"],yl={class:"my-5"},_l={key:0,class:"d-flex flex-wrap gap-2 my-5"},wl={key:1},El={class:"my-5"},Cl={key:0},Dl=["src"],Vl={class:"my-5"},Al={key:0,class:"d-flex flex-wrap gap-2 my-5"},Tl={key:1},Sl={__name:"TaskKanban",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible"],setup(e,{emit:o}){const t=e,n=o;Object.values(Ue).map(E=>({title:E.label,value:E.value}));const{allProperty:l,properties:a}=So(),{getallTypeActivities:s,typeActivities:u,registerActivity:i,loadingActivity:v,changeStatusActivity:b}=Wt(),{getOpportunitybyId:f,opportunity:p,changeOpportunity:_,loadingOpportunity:I,changeStatusByOpportunity:D}=Et(),$=W({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),w=()=>{n("update:isDialogVisible",!1)},M=W([{title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}]),P=W(M.value[0].value),L=async()=>{var E;(E=t.opportunityKanban)!=null&&E.id&&await f(t.opportunityKanban.id)},ee=async()=>{await i($.value),$.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},w()},re=async()=>{console.log("antes del save:",p);const E={id:p.value.id,stage_id:p.value.stage_id,description:p.value.description,property_id:p.value.property_id,customer:{id:p.value.customer.id,name:p.value.customer.name,email:p.value.customer.email,ci:p.value.customer.ci,cod_phone:p.value.cod_phone,phone:p.value.customer.phone}};await _(p.value.id,E),w()},x=async E=>{await b(E,{state_activity:Co.COMPLETED.value}),w()},U=()=>{const E=[];t.opportunityKanban.stage===Ue.DELIVERY.label&&E.push({title:"Entrega",value:"delivery"}),t.opportunityKanban.stage===Ue.SALE.label&&E.push({title:"Ventas",value:"sales"}),t.opportunityKanban.stage===Ue.PRESALE.label&&E.push({title:"Cotizaciones",value:"quotations"}),E.push({title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}),M.value=E,P.value=M.value[0].value};return Xe(()=>t.isDialogVisible,async E=>{E&&(await L(),U(),await l({page:1,itemsPerPage:100}),await s())}),(E,m)=>{const te=Ct,C=Ao,A=vt,k=To,H=Vo,j=Kt,le=tn("RouterLink");return V(),ve(Dt,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":w},{default:d(()=>[r(te,{onClick:w}),r(Be,{class:"pa-sm-8"},{default:d(()=>[r(dn,{modelValue:P.value,"onUpdate:modelValue":m[0]||(m[0]=c=>P.value=c)},{default:d(()=>[(V(!0),N(ie,null,ce(M.value,c=>(V(),ve(cn,{key:c.value,value:c.value},{default:d(()=>[X(B(c.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(pn,{modelValue:P.value,"onUpdate:modelValue":m[12]||(m[12]=c=>P.value=c)},{default:d(()=>[r(Ie,{value:"information",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(Be,{title:"Información del Cliente y Oportunidad"},{default:d(()=>[r(Ae,null,{default:d(()=>[r(jt,{onSubmit:Ne(re,["prevent"])},{default:d(()=>[r(ye,null,{default:d(()=>[r(Y,{cols:"12",md:"6"},{default:d(()=>[r(C,{modelValue:y(p).customer.name,"onUpdate:modelValue":m[1]||(m[1]=c=>y(p).customer.name=c),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(C,{modelValue:y(p).customer.email,"onUpdate:modelValue":m[2]||(m[2]=c=>y(p).customer.email=c),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(ye,null,{default:d(()=>[r(Y,{cols:"4"},{default:d(()=>[r(A,{modelValue:y(p).customer.cod_phone,"onUpdate:modelValue":m[3]||(m[3]=c=>y(p).customer.cod_phone=c),label:"Código",items:["+1","+52","+55","+54","+49","+33","+34","+39","+86","+81","+7","+591"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),r(Y,{cols:"8"},{default:d(()=>[r(C,{modelValue:y(p).customer.phone,"onUpdate:modelValue":m[4]||(m[4]=c=>y(p).customer.phone=c),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(C,{modelValue:y(p).customer.ci,"onUpdate:modelValue":m[5]||(m[5]=c=>y(p).customer.ci=c),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(k,{modelValue:y(p).property_id,"onUpdate:modelValue":m[6]||(m[6]=c=>y(p).property_id=c),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:y(a).map(c=>({title:c.title,value:c.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),r(Y,{cols:"12"},{default:d(()=>[r(H,{modelValue:y(p).description,"onUpdate:modelValue":m[7]||(m[7]=c=>y(p).description=c),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"3","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",class:"text-center"},{default:d(()=>[r(J,{type:"submit",color:"primary",class:"me-3",disabled:y(I),loading:y(I)},{default:d(()=>m[13]||(m[13]=[X(" Guardar Cambios ")])),_:1},8,["disabled","loading"]),r(J,{color:"secondary",variant:"tonal",onClick:w},{default:d(()=>m[14]||(m[14]=[X(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(Ie,{value:"add_activity",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(Ut,null,{default:d(()=>[r(ut,{class:"text-h3 font-weight-medium mb-3"},{default:d(()=>m[15]||(m[15]=[X(" Agregar Actividad ")])),_:1}),r(Ae,null,{default:d(()=>[r(jt,{onSubmit:Ne(ee,["prevent"])},{default:d(()=>[r(ye,null,{default:d(()=>[r(Y,{cols:"12"},{default:d(()=>[r(C,{modelValue:$.value.title,"onUpdate:modelValue":m[8]||(m[8]=c=>$.value.title=c),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(A,{modelValue:$.value.type_activity_id,"onUpdate:modelValue":m[9]||(m[9]=c=>$.value.type_activity_id=c),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:y(u).map(c=>({title:c.name,value:c.id}))},null,8,["modelValue","items"])]),_:1}),r(Y,{cols:"12",md:"6"},{default:d(()=>[r(j,{modelValue:$.value.scheduled_at,"onUpdate:modelValue":m[10]||(m[10]=c=>$.value.scheduled_at=c),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12"},{default:d(()=>[r(H,{modelValue:$.value.description,"onUpdate:modelValue":m[11]||(m[11]=c=>$.value.description=c),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),r(Y,{cols:"12",class:"text-center"},{default:d(()=>[r(J,{type:"submit",class:"me-3",disabled:y(v),loading:y(v)},{default:d(()=>m[16]||(m[16]=[X(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),r(J,{color:"secondary",variant:"tonal",onClick:w},{default:d(()=>m[17]||(m[17]=[X(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(Ie,{value:"activity_list",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(Ut,null,{default:d(()=>[r(ut,{class:"text-h3 font-weight-medium mb-3"},{default:d(()=>m[18]||(m[18]=[X(" Lista de Actividades ")])),_:1}),r(y(mn),{headers:[{title:"Actividad",value:"title"},{title:"Fecha",value:"scheduled_at"},{title:"Estado",value:"state_activity"},{title:"Descripción",value:"description"},{title:"Acciones",value:"actions",sortable:!1}],items:y(p).activities,"item-value":"id",class:"elevation-1","items-per-page":5},{"item.actions":d(({item:c})=>[r(J,{title:"Marcar Como Realizada",color:"primary",disabled:c.state_activity!==y(Co).PENDING.value,onClick:R=>x(c.id)},{default:d(()=>[r(ge,{icon:"tabler-checkbox"})]),_:2},1032,["disabled","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),r(Ie,{value:"quotations",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(Be,null,{default:d(()=>[r(ut,{class:"d-flex justify-space-between align-center"},{default:d(()=>[m[20]||(m[20]=g("span",{class:"text-h3 font-weight-medium"},"Cotizaciones",-1)),r(le,{to:{name:"quote-add-quote"},class:"text-white"},{default:d(()=>[r(J,{color:"primary",variant:"outlined",size:"small"},{default:d(()=>[r(ge,{icon:"tabler-plus"}),m[19]||(m[19]=X(" Agregar nueva cotización "))]),_:1})]),_:1})]),_:1}),r(Ae,null,{default:d(()=>[g("div",null,[y(p).quotes&&y(p).quotes.length>0?(V(),N("div",cl,[r(Tt,{density:"compact",class:"text-no-wrap"},{default:d(()=>[m[21]||(m[21]=g("thead",null,[g("tr",null,[g("th",null,"Propiedad"),g("th",null,"Fecha"),g("th",null,"Monto"),g("th",null,"Acciones")])],-1)),g("tbody",null,[(V(!0),N(ie,null,ce(y(p).quotes,c=>(V(),N("tr",{key:c.id},[g("td",null,B(c.properties[0].title),1),g("td",null,B(c.created_at),1),g("td",null,B(("formatCurrency"in E?E.formatCurrency:y($t))(c.amount)),1),g("td",null,[r(ye,{class:"d-flex align-center gap-2"},{default:d(()=>[r(He,{modelValue:c.status,"onUpdate:modelValue":R=>c.status=R,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:""},null,8,["modelValue","onUpdate:modelValue"]),r(He,{modelValue:c.status_customer,"onUpdate:modelValue":R=>c.status_customer=R,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:R=>E.statusQuoteCustomer(c.id,c.status_customer)},{default:d(()=>[r(Me,{activator:"parent",location:"top"},{default:d(()=>[X(B(c.status_customer==="NOT_APPROVED"?"No aprobado por cliente":"Aprobado por cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"]),r(le,{to:{name:"quote-id",params:{id:c.id}}},{default:d(()=>[r(J,{icon:"",variant:"plain"},{default:d(()=>[r(ge,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)])]))),128))])]),_:1})])):(V(),N("div",pl,m[22]||(m[22]=[g("span",null,"No hay procedimientos disponibles.",-1)])))])]),_:1})]),_:1})]),_:1}),r(Ie,{value:"sales",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[g("div",ml,[m[24]||(m[24]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),y(p).sales.length>0?(V(),N("div",fl,[(V(!0),N(ie,null,ce(y(p).sales,c=>(V(),N("div",{key:c.id},[r(ye,null,{default:d(()=>[(V(!0),N(ie,null,ce(c.properties,R=>(V(),ve(Y,{key:R.id,class:"d-flex align-center justify-between",cols:"12",md:"9"},{default:d(()=>[r(oo,{size:"50",rounded:""},{default:d(()=>[g("img",{src:y(eo),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,vl)]),_:1}),r(Y,{cols:"12"},{default:d(()=>[r(no,{class:"font-weight-medium"},{default:d(()=>[X(B(R.project_title)+" | "+B(R.title),1)]),_:2},1024),r(lo,{class:"text-disabled d-flex justify-between mt-1"},{default:d(()=>[g("span",null,"$ "+B(R.pivot_price),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),r(He,{modelValue:c.confirmation_signature,"onUpdate:modelValue":R=>c.confirmation_signature=R,"true-value":1,"false-value":0,onChange:R=>E.confirmationSignature(c.id)},{default:d(()=>[r(Me,{activator:"parent",location:"top"},{default:d(()=>m[23]||(m[23]=[X(" Confirmar firma ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]))),128))])):fe("",!0)]),g("div",gl,[m[27]||(m[27]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Anticipo ",-1)),y(p).initial_payments&&y(p).initial_payments.length>0?(V(),ve(Tt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[m[26]||(m[26]=g("thead",null,[g("tr",null,[g("th",null," Propiedad "),g("th",null," Fecha "),g("th",null," Monto "),g("th",null," Action ")])],-1)),g("tbody",null,[(V(!0),N(ie,null,ce(y(p).initial_payments,c=>(V(),N("tr",{key:c.id},[g("td",null,B(c.property_title),1),g("td",null,B(c.date),1),g("td",null,B(c.amount),1),g("td",null,[r(ye,null,{default:d(()=>[r(He,{modelValue:c.is_paid,"onUpdate:modelValue":R=>c.is_paid=R,"true-value":1,"false-value":0,disabled:c.is_paid===1,onChange:R=>E.confirmPayment(c.id)},{default:d(()=>[r(Me,{activator:"parent",location:"top"},{default:d(()=>m[25]||(m[25]=[X(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"]),c.is_paid===0?(V(),N("div",{key:0,"fill-dot":"",style:{cursor:"pointer"},onClick:R=>E.editPaymentPlan(c)},[r(ge,{size:"25",icon:"tabler-edit"})],8,hl)):fe("",!0)]),_:2},1024)])]))),128))])]),_:1})):fe("",!0)]),g("div",null,[m[30]||(m[30]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Saldos ",-1)),y(p).balance_payments&&y(p).balance_payments.length>0?(V(),ve(Tt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[m[29]||(m[29]=g("thead",null,[g("tr",null,[g("th",null," Propiedad "),g("th",null," Fecha "),g("th",null," Monto "),g("th",null," Action ")])],-1)),g("tbody",null,[(V(!0),N(ie,null,ce(y(p).balance_payments,c=>(V(),N("tr",{key:c.id},[g("td",null,B(c.property_title),1),g("td",null,B(c.date),1),g("td",null,B(c.amount),1),g("td",null,[r(ye,null,{default:d(()=>[r(He,{modelValue:c.is_paid,"onUpdate:modelValue":R=>c.is_paid=R,"true-value":1,"false-value":0,disabled:c.is_paid===1,onChange:R=>E.confirmPayment(c.id)},{default:d(()=>[r(Me,{activator:"parent",location:"top"},{default:d(()=>m[28]||(m[28]=[X(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"]),c.is_paid===0?(V(),N("div",{key:0,"fill-dot":"",style:{cursor:"pointer"},onClick:R=>E.editPaymentPlan(c)},[r(ge,{size:"25",icon:"tabler-edit"})],8,bl)):fe("",!0)]),_:2},1024)])]))),128))])]),_:1})):fe("",!0)]),g("div",yl,[m[32]||(m[32]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),y(p).procedure&&y(p).procedure.length>0?(V(),N("div",_l,[(V(!0),N(ie,null,ce(y(p).procedure,c=>(V(),N("div",{key:c.id},[r(zt,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:R=>E.markProcedureAsDone(c)},{default:d(()=>[c.pivot.is_check?(V(),ve(ge,{key:0,icon:"tabler-check",class:"mr-2"})):fe("",!0),X(" "+B(c.title),1)]),_:2},1032,["color","onClick"]),r(Me,{activator:"parent",location:"top"},{default:d(()=>[X(B(c.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(V(),N("div",wl,m[31]||(m[31]=[g("span",null,"No hay procedimientos disponibles.",-1)])))]),r(Ae,{class:"d-flex mt-4"},{default:d(()=>[r(J,{color:"primary",variant:"tonal",class:"mx-auto",size:"small",onClick:E.openSaleForm},{default:d(()=>m[33]||(m[33]=[X(" Generar Venta ")])),_:1},8,["onClick"])]),_:1})]),_:1}),r(Ie,{value:"delivery",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[g("div",El,[m[34]||(m[34]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),y(p).sales.length>0?(V(),N("div",Cl,[(V(!0),N(ie,null,ce(y(p).sales,c=>(V(),N("div",{key:c.id},[(V(!0),N(ie,null,ce(c.properties,R=>(V(),N("div",{key:R.id,class:"d-flex align-center justify-between"},[r(oo,{size:"50",rounded:""},{default:d(()=>[g("img",{src:y(eo),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,Dl)]),_:1}),r(Y,{cols:"12",md:"7"},{default:d(()=>[r(no,{class:"font-weight-medium"},{default:d(()=>[X(B(R.project_title)+" | "+B(R.title),1)]),_:2},1024),r(lo,{class:"text-disabled d-flex justify-between mt-1"},{default:d(()=>[g("span",null,B(("formatCurrency"in E?E.formatCurrency:y($t))(R.pivot_price)),1)]),_:2},1024)]),_:2},1024)]))),128))]))),128))])):fe("",!0)]),g("div",Vl,[m[36]||(m[36]=g("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),y(p).procedure&&y(p).procedure.length>0?(V(),N("div",Al,[(V(!0),N(ie,null,ce(y(p).procedure,c=>(V(),N("div",{key:c.id},[r(zt,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:R=>E.markProcedureAsDone(c.id,c.pivot.is_check)},{default:d(()=>[c.pivot.is_check?(V(),ve(ge,{key:0,icon:"tabler-check",class:"mr-2"})):fe("",!0),X(" "+B(c.title),1)]),_:2},1032,["color","onClick"]),r(Me,{activator:"parent",location:"top"},{default:d(()=>[X(B(c.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(V(),N("div",Tl,m[35]||(m[35]=[g("span",null,"No hay procedimientos disponibles.",-1)])))]),r(Ae,{class:"d-flex justify-center mt-4"},{default:d(()=>[r(J,{color:"primary",size:"small"},{default:d(()=>m[37]||(m[37]=[X(" Finalizar Oportunidad ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model-value"])}}};const kl={class:"kanban"},xl=["data-column-title"],Ol={class:"kanban-column-header"},Pl={class:"column-title"},Nl={class:"small-badge"},Il={class:"d-flex justify-end gap-2",style:{flex:"0 1 30%"}},Ml=["onClick"],Rl={class:"d-flex align-center justify-space-between",style:{gap:"10px"}},Fl={style:{flex:"7"}},$l={style:{margin:"0"}},Ul={class:"kanban-header"},jl={class:"d-flex gap-1"},zl={class:"label-info"},Bl={class:"project-info"},Ll={key:0,class:"label-name"},Xl={key:1,class:"label-name",style:{display:"flex","align-items":"center",gap:"8px"}},Yl={class:"price"},Hl={class:"kanban-details"},Kl={style:{color:"rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity))","font-size":"0.9rem","font-weight":"700"}},ql={__name:"Kanban",setup(e){const{allOpportunityKanbanForUser:o,kanban:t,generateProspect:n,getOpportunitybyId:l,opportunity:a,changeStatusByOpportunity:s}=Et();ln();const{getallTypeActivities:u,typeActivities:i}=Wt(),v=W(null),b=W(!1),f=W(!1),p=W(!1),_=W(null);W(null);const I=W(!1),D=W(!1),$=W(null),w=C=>{$.value={column:C.from.closest(".kanban-column"),index:Array.from(C.from.children).indexOf(C.item)},_.value=C.from.closest(".kanban-column").dataset.columnTitle,console.log("Elemento arrastrado desde:",_.value)},M=C=>{const A=C.data,k=C.from.closest(".kanban-column").dataset.columnTitle,H=C.to.closest(".kanban-column").dataset.columnTitle,j=t.value.find(c=>c.title===k),le=t.value.find(c=>c.title===H);if(j&&le){const c=le.items.findIndex(R=>R.id===A.id);if(c!==-1){const[R]=le.items.splice(c,1);console.log("Elemento eliminado de la columna de destino"),j.items.push(R),j.items.sort((At,Go)=>At.id-Go.id),console.log("Elemento restaurado en la columna de origen")}else console.log("Elemento no encontrado en la columna de destino")}else console.log("No se encontraron las columnas de origen o destino")},P=async C=>{},L=async C=>{console.log(C),await s(C.id,Ue.FINISHED.value,{}),ee(C)},ee=C=>{const A=t.value.find(k=>k.items.some(H=>H.id===C.id));if(A){const k=A.items.findIndex(H=>H.id===C.id);k!==-1?(A.items.splice(k,1),console.log("Elemento eliminado")):console.log("Elemento no encontrado en el tablero")}else console.log("El elemento no se encuentra en ningún tablero")},re=()=>{I.value=!0},x=C=>{const A=C.from.closest(".kanban-column").dataset.columnTitle,k=C.to.closest(".kanban-column").dataset.columnTitle;return te(A,k)?(console.log(`Movimiento permitido de ${A} a ${k}`),!0):(console.log(`Movimiento NO permitido de ${A} a ${k}`),!1)},U=async C=>{console.log(C);const A=C.from.closest(".kanban-column").dataset.columnTitle,k=C.to.closest(".kanban-column").dataset.columnTitle;if(!te(A,k))return console.log(`Movimiento NO permitido de ${A} a ${k}`),!1;if(console.log("Elemento movido de",A,"a",k),A!==k){const H=C.data;switch(k){case"LEAD":console.log("Movido a LEAD");break;case"PROSPECTO":console.log("Movido a PROSPECTO"),v.value=H,p.value=!0;break;case"PREVENTA":console.log("Movido a PREVENTA"),v.value=H,f.value=!0;break;case"VENTA":await l(H.id),console.log("Movido a VENTA"),D.value=!0,console.log(a),v.value=a.value;break;case"ENTREGA":console.log("Movido a ENTREGA");break;default:console.log("Movimiento a una columna no definida");break}}Xe(I,H=>H&&M(C)),I.value=!1},E=C=>{v.value=C,b.value=!0},m={LEAD:["PROSPECTO","PREVENTA"],PROSPECTO:["PREVENTA"],PREVENTA:["VENTA"],VENTA:["ENTREGA"],ENTREGA:[]},te=(C,A)=>(m[C]||[]).includes(A);return Gt(async()=>{await o(),await u()}),(C,A)=>(V(),N(ie,null,[g("div",kl,[(V(!0),N(ie,null,ce(y(t),(k,H)=>(V(),N("div",{key:H,class:"kanban-column","data-column-title":k.title},[g("div",Ol,[g("div",Pl,[g("h2",null,B(k.title),1),g("span",Nl,B(k.items.length),1)]),g("div",Il,[r(J,{color:"white",title:"Agregar Actividad",class:"icon-container"},{default:d(()=>[r(ge,{icon:"tabler-arrows-vertical",class:"icon-small"})]),_:1}),r(J,{color:"white",title:"Agregar Actividad",class:"icon-container"},{default:d(()=>[r(ge,{icon:"tabler-plus",class:"icon-small"})]),_:1})])]),r(y(sl),{modelValue:k.items,"onUpdate:modelValue":j=>k.items=j,group:{name:k.name,pull:!0,put:!0},class:"kanban-items",onStart:w,onMove:x,onEnd:U},{default:d(()=>[(V(!0),N(ie,null,ce(k.items,j=>(V(),N("div",{key:j.id,class:"kanban-item",onClick:le=>E(j)},[g("div",Rl,[g("div",Fl,[g("p",$l,[g("strong",null,B(j.name),1)])]),g("div",null,[j.stage!=="VENTA"&&j.stage!=="ENTREGA"?(V(),ve(J,{key:0,color:"warning",title:"Dar de Baja",class:"button-task",onClick:[A[0]||(A[0]=Ne(()=>{},["stop"])),Ne(le=>P(j),["prevent"])]},{default:d(()=>[r(ge,{icon:"tabler-trash"})]),_:2},1032,["onClick"])):fe("",!0),j.stage==="ENTREGA"?(V(),ve(J,{key:1,color:"success",title:"Completar Oportunidad",class:"button-task",onClick:[A[1]||(A[1]=Ne(()=>{},["stop"])),Ne(le=>L(j),["prevent"])]},{default:d(()=>[r(ge,{icon:"tabler-check"})]),_:2},1032,["onClick"])):fe("",!0)])]),g("div",Ul,[g("div",jl,[g("div",null,[g("p",zl,B(j.property_type),1),g("div",Bl,[j.property?(V(),N("span",Ll,B(j.project+" | "+j.property),1)):fe("",!0),j.property==null?(V(),N("span",Xl,[r(zt,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"36px","inline-size":"36px"}},{default:d(()=>[r(ge,{size:"25",icon:"tabler-home"})]),_:1}),A[6]||(A[6]=g("strong",null," Indefinido ",-1))])):fe("",!0),A[7]||(A[7]=g("h4",{class:"department-code"},null,-1))]),g("p",Yl,[g("strong",null,B(y($t)(j.price)),1)])])]),g("div",Hl,[A[8]||(A[8]=g("p",{class:"label-info"}," 10 de octubre 2024 ",-1)),g("p",Kl,B(j.phone),1)])])],8,Ml))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])],8,xl))),128))]),r(Sl,{"is-dialog-visible":b.value,"onUpdate:isDialogVisible":A[2]||(A[2]=k=>b.value=k),"opportunity-kanban":v.value},null,8,["is-dialog-visible","opportunity-kanban"]),r(ul,{"is-dialog-visible":f.value,"onUpdate:isDialogVisible":A[3]||(A[3]=k=>f.value=k),"opportunity-kanban":v.value},null,8,["is-dialog-visible","opportunity-kanban"]),r(nn,{modelValue:D.value,"onUpdate:modelValue":A[4]||(A[4]=k=>D.value=k),opportunity:v.value,stage:"PRESALE",onFormCancelled:re},null,8,["modelValue","opportunity"]),r(dl,{"is-dialog-visible":p.value,"onUpdate:isDialogVisible":A[5]||(A[5]=k=>p.value=k),"opportunity-kanban":v.value,"type-activities":y(i),onFormCancelled:re},null,8,["is-dialog-visible","opportunity-kanban","type-activities"])],64))}},Gl={__name:"AddOportunity",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,n=o,l=W(null),a=W({title:"",description:""}),{propertiesAvailbles:s,properties:u}=So(),{allCustomerPaginate:i,customers:v}=fn(),b=async()=>{if(!l.value||!a.value.title){alert("Por favor selecciona un cliente y llena todos los campos requeridos.");return}const f={customer_id:l.value,...a.value};try{n("submit",f),n("update:isDialogVisible",!1)}catch(p){console.error("Error al agregar la oportunidad:",p)}};return Gt(async()=>{await i({page:1,itemsPerPage:1e3}),await s()}),(f,p)=>{const _=Ct,I=To;return V(),ve(Dt,{"max-width":"600","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":p[4]||(p[4]=D=>f.$emit("update:isDialogVisible",D))},{default:d(()=>[r(_,{onClick:p[0]||(p[0]=D=>f.$emit("update:isDialogVisible",!1))}),r(Be,{title:"Agregar Oportunidad"},{default:d(()=>[r(Ae,null,{default:d(()=>[r(ye,null,{default:d(()=>[r(Y,{cols:"12"},{default:d(()=>[r(I,{modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=D=>l.value=D),label:"Cliente",placeholder:"Selecciona un Cliente",items:y(v).map(D=>({title:D.name,value:D.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),r(Y,{cols:"12",sm:"6"},{default:d(()=>[r(vt,{label:"Propiedad de Interes",placeholder:"Selecciona una Propiedad",items:y(u),outlined:""},null,8,["items"])]),_:1}),r(Y,{cols:"12",sm:"6"},{default:d(()=>[r(vt,{label:"Asesor Encargado",placeholder:"Seleccine un Asesor",outlined:""})]),_:1}),r(Y,{cols:"12"},{default:d(()=>[r(un,{modelValue:a.value.description,"onUpdate:modelValue":p[2]||(p[2]=D=>a.value.description=D),label:"Descripción",placeholder:"Agrega una descripción",rows:"4",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(sn,null,{default:d(()=>[r(vn),r(J,{color:"secondary",onClick:p[3]||(p[3]=D=>f.$emit("update:isDialogVisible",!1))},{default:d(()=>p[5]||(p[5]=[X(" Cancelar ")])),_:1}),r(J,{color:"primary",onClick:b},{default:d(()=>p[6]||(p[6]=[X(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Wl={class:"body-kanban"},Ql={class:"toolbar"},Jl={class:"breadcrumbs"},Zl={class:"filters"},ea=["onClick"],ta={class:"filter-controls"},oa={class:"date-picker d-flex align-center justify-center"},na={__name:"myContacts",setup(e){const o=W(!1),t=W([new Date(2024,9,10),new Date(2024,10,10)]),n=W(["Todos","PORA"]),l=W("Todos");return(a,s)=>{const u=Kt;return V(),N(ie,null,[g("div",Wl,[g("div",Ql,[g("div",Jl,[g("div",Zl,[(V(!0),N(ie,null,ce(y(n),i=>(V(),N("button",{key:i,class:on({active:y(l)===i}),onClick:v=>l.value=i},B(i),11,ea))),128)),r(J,{color:"primary",title:"Agregar Actividad",onClick:s[0]||(s[0]=i=>o.value=!0)},{default:d(()=>s[4]||(s[4]=[X(" Agregar Oportunidad ")])),_:1})])]),g("div",ta,[g("div",oa,[r(u,{modelValue:y(t)[0],"onUpdate:modelValue":s[1]||(s[1]=i=>y(t)[0]=i),style:{"inline-size":"200px"},label:"Desde",placeholder:"Seleccione Fecha",config:{dateFormat:"F j, Y"}},null,8,["modelValue"]),r(u,{modelValue:y(t)[1],"onUpdate:modelValue":s[2]||(s[2]=i=>y(t)[1]=i),label:"Hasta",style:{"inline-size":"200px"},placeholder:"Seleccione Fecha",config:{dateFormat:"F j, Y"}},null,8,["modelValue"])])])]),g("div",null,[r(ql)])]),r(Gl,{"is-dialog-visible":y(o),"onUpdate:isDialogVisible":s[3]||(s[3]=i=>st(o)?o.value=i:null)},null,8,["is-dialog-visible"])],64)}}},di=gn(na,[["__scopeId","data-v-88843cf1"]]);export{di as default};
