import{r as F}from"./validators-dea6e3a5.js";import{r as V,o as p,f as P,e as a,b as e,v as m,d,n as o,a0 as g,a3 as W,a4 as L,an as j,k as G,ab as H,ac as q,c as D,x as c,F as R,i as z,z as J,a as K,$ as Q}from"./index-c2e96262.js";import{_ as X}from"./AppTextField-29b22b24.js";import{u as Y}from"./useAuth-4ffa722b.js";import{b as S}from"./notifications-cae4d01c.js";import{V as y}from"./VCol-11309398.js";import{V as B,b as Z}from"./VCard-f5bbdae8.js";import{V as E}from"./VCardText-df626bb1.js";import{V as h,a as ee}from"./VAlert-632fabdf.js";import{V as ae}from"./VForm-378c8e9d.js";import{V as N}from"./VRow-7348eabc.js";import{a as te}from"./formatters-58bf909e.js";import{_ as le}from"./UserUpgradePlanDialog-019871bf.js";import{_ as se}from"./UserInfoEditDialog-7abe5817.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{V as re}from"./VAvatar-a0558956.js";import{V as ne}from"./VImg-31fed283.js";import{V as M}from"./VChip-e912eeed.js";import{V as ie}from"./VDivider-88128b79.js";import{V as ue,a as I,b as A}from"./VList-b9114e4f.js";import{V as de,a as me}from"./VTabs-a6425204.js";import{V as pe,a as O}from"./VWindowItem-4a57e62c.js";import"./helpers-61e4df1a.js";import"./form-b8ba296f.js";import"./VTextField-86db8845.js";/* empty css                   */import"./VCounter-7567efe3.js";import"./VField-e94b1a76.js";import"./easing-9f15041e.js";import"./VInput-66adbaa5.js";import"./forwardRefs-8348545e.js";import"./api-aa8c13ee.js";import"./index-9c720871.js";import"./constants-b7e4fea4.js";import"./ConfirmDialog-4bd7ac6f.js";import"./VDialog-dfbe258f.js";import"./VOverlay-ca90609e.js";import"./lazy-b6b07144.js";import"./scopeId-10fccddb.js";import"./dialog-transition-00941f89.js";import"./CustomRadios-9a05b3a9.js";import"./VRadioGroup-c3f006af.js";import"./VSelectionControl-e3762066.js";import"./VSpacer-5cccd6ed.js";import"./DialogCloseBtn-fe2a9ed0.js";import"./VSwitch-733fc1cd.js";import"./ssrBoot-de99a4c4.js";import"./VSlideGroup-61412060.js";const fe={__name:"changePassword",setup($){const{loading:l,error:w,resetUserPassword:v}=Y(),C=V(!1),i=V(),x=n=>n.length>=8||"La contraseña debe tener al menos 8 caracteres",r=V(""),b=V(""),f=V(""),t=V(!1),k=V(!1),U=V(!1),_=async()=>{var s;const{valid:n}=await((s=i.value)==null?void 0:s.validate());if(n){if(r.value===b.value){S("ERROR","La nueva contraseña no puede ser igual que la antigua contraseña.");return}if(b.value!==f.value){S("ERROR","La nueva contraseña y la confirmación de la contraseña no coinciden");return}await v({current_password:r.value,new_password:b.value,new_password_confirmation:f.value}),j(()=>{var T,u;(T=i.value)==null||T.reset(),(u=i.value)==null||u.resetValidation()})}};return(n,s)=>{const T=X;return p(),P(N,null,{default:a(()=>[e(y,{cols:"12"},{default:a(()=>[e(B,{title:"Cambiar Contraseña"},{default:a(()=>[e(E,null,{default:a(()=>[e(h,{variant:"tonal",color:"warning",class:"mb-4"},{default:a(()=>[e(ee,{class:"mb-2"},{default:a(()=>s[7]||(s[7]=[m(" Asegúrate de que se cumplan estos requisitos: ")])),_:1}),s[8]||(s[8]=d("span",null,"Mínimo 8 caracteres de longitud, Mayúsculas y símbolo",-1))]),_:1}),e(ae,{ref_key:"refForm",ref:i,modelValue:o(C),"onUpdate:modelValue":s[6]||(s[6]=u=>g(C)?C.value=u:null),onSubmit:W(_,["prevent"])},{default:a(()=>[e(N,null,{default:a(()=>[e(y,{cols:"12",md:"4"},{default:a(()=>[e(T,{modelValue:o(r),"onUpdate:modelValue":s[0]||(s[0]=u=>g(r)?r.value=u:null),label:"Antigua Contraseña",placeholder:"············",rules:["requiredValidator"in n?n.requiredValidator:o(F),x],type:o(t)?"text":"password","append-inner-icon":o(t)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[1]||(s[1]=u=>t.value=!o(t))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(y,{cols:"12",md:"4"},{default:a(()=>[e(T,{modelValue:o(b),"onUpdate:modelValue":s[2]||(s[2]=u=>g(b)?b.value=u:null),label:"Nueva Contraseña",placeholder:"············",rules:["requiredValidator"in n?n.requiredValidator:o(F),x],type:o(k)?"text":"password","append-inner-icon":o(k)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[3]||(s[3]=u=>k.value=!o(k))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(y,{cols:"12",md:"4"},{default:a(()=>[e(T,{modelValue:o(f),"onUpdate:modelValue":s[4]||(s[4]=u=>g(f)?f.value=u:null),label:"Confirmar Contraseña",placeholder:"············",rules:["requiredValidator"in n?n.requiredValidator:o(F),x],type:o(U)?"text":"password","append-inner-icon":o(U)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[5]||(s[5]=u=>U.value=!o(U))},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),e(y,{cols:"12"},{default:a(()=>[e(L,{type:"submit"},{default:a(()=>s[9]||(s[9]=[m(" Cambiar Contraseña ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}};const ce={key:1,class:"text-5xl font-weight-medium"},Ve={class:"text-h4 mt-4"},_e={class:"text-h6"},ve={class:"text-body-1"},be={class:"text-h6"},ye={class:"text-body-1"},ge={class:"text-h6"},we={class:"text-h6"},xe={class:"text-capitalize text-body-1"},De={class:"text-h6"},Ce={class:"text-body-1"},ke={__name:"UserPanel",props:{userData:{type:Object,required:!0}},setup($){const l=$,w=V(!1),v=V(!1),C=f=>f==="ACTIVE"?"success":f==="INACTIVE"?"warning":"success",i=G(),x=H(),r=q("userData"),b=async()=>{q("accessToken").value=null,r.value=null,await i.push("/login"),q("userAbilityRules").value=null,x.update([])};return(f,t)=>{const k=se,U=le;return p(),D(R,null,[e(N,null,{default:a(()=>[e(y,{cols:"12"},{default:a(()=>[l.userData?(p(),P(B,{key:0},{default:a(()=>[e(E,{class:"text-center pt-15"},{default:a(()=>[e(re,{rounded:"",size:100,color:l.userData.avatar?void 0:"primary",variant:l.userData.avatar?void 0:"tonal"},{default:a(()=>[l.userData.avatar?(p(),P(ne,{key:0,src:l.userData.avatar},null,8,["src"])):(p(),D("span",ce,c(("avatarText"in f?f.avatarText:o(te))(l.userData.name)),1))]),_:1},8,["color","variant"]),d("h6",Ve,c(l.userData.name),1),(p(!0),D(R,null,z(l.userData.roles,(_,n)=>(p(),D("div",{key:n},[e(M,{label:"",size:"small",class:"text-capitalize mt-3"},{default:a(()=>[m(c(_),1)]),_:2},1024)]))),128))]),_:1}),e(ie),e(E,null,{default:a(()=>[t[8]||(t[8]=d("p",{class:"text-sm text-uppercase text-disabled"}," Detalles ",-1)),e(ue,{class:"card-list mt-2"},{default:a(()=>[e(I,null,{default:a(()=>[e(A,null,{default:a(()=>[d("h6",_e,[t[3]||(t[3]=m(" Nombre: ")),d("span",ve,c(l.userData.name)+" "+c(l.userData.last_name),1)])]),_:1})]),_:1}),e(I,null,{default:a(()=>[e(A,null,{default:a(()=>[d("h6",be,[t[4]||(t[4]=m(" Email: ")),d("span",ye,c(l.userData.email),1)])]),_:1})]),_:1}),e(I,null,{default:a(()=>[e(A,null,{default:a(()=>[d("h6",ge,[t[5]||(t[5]=m(" Estado: ")),e(M,{label:"",size:"small",color:C(l.userData.status),class:"text-capitalize"},{default:a(()=>[m(c(l.userData.entity_status),1)]),_:1},8,["color"])])]),_:1})]),_:1}),e(I,null,{default:a(()=>[e(A,null,{default:a(()=>[d("h6",we,[t[6]||(t[6]=m(" Rol: ")),(p(!0),D(R,null,z(l.userData.roles,(_,n)=>(p(),D("span",{key:n},[d("span",xe,c(_),1)]))),128))])]),_:1})]),_:1}),e(I,null,{default:a(()=>[e(A,null,{default:a(()=>[d("h6",De,[t[7]||(t[7]=m(" Contacto: ")),d("span",Ce,c(l.userData.cod_phone)+" "+c(l.userData.phone),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"d-flex justify-center"},{default:a(()=>[e(L,{variant:"elevated",class:"me-4",onClick:t[0]||(t[0]=_=>w.value=!0)},{default:a(()=>t[9]||(t[9]=[m(" Editar ")])),_:1}),e(L,{variant:"elevated",class:"me-4",color:"error",onClick:b},{default:a(()=>t[10]||(t[10]=[m(" Cerrar sesion ")])),_:1})]),_:1})]),_:1})):J("",!0)]),_:1})]),_:1}),e(k,{"is-dialog-visible":o(w),"onUpdate:isDialogVisible":t[1]||(t[1]=_=>g(w)?w.value=_:null),"user-data":l.userData},null,8,["is-dialog-visible","user-data"]),e(U,{"is-dialog-visible":o(v),"onUpdate:isDialogVisible":t[2]||(t[2]=_=>g(v)?v.value=_:null)},null,8,["is-dialog-visible"])],64)}}},Ue=oe(ke,[["__scopeId","data-v-2225ae6a"]]),wa={__name:"myperfil",setup($){const l=V(null),w=[{icon:"tabler-user-check",title:"Cuenta"},{icon:"tabler-lock",title:"Seguridad"}],v=q("userData").value;return(C,i)=>{const x=K("UserTabAccount");return o(v)?(p(),P(N,{key:0},{default:a(()=>[e(y,{cols:"12",md:"5",lg:"4"},{default:a(()=>[e(Ue,{"user-data":o(v)},null,8,["user-data"])]),_:1}),e(y,{cols:"12",md:"7",lg:"8"},{default:a(()=>[e(de,{modelValue:o(l),"onUpdate:modelValue":i[0]||(i[0]=r=>g(l)?l.value=r:null),class:"v-tabs-pill"},{default:a(()=>[(p(),D(R,null,z(w,r=>e(me,{key:r.icon},{default:a(()=>[e(Q,{size:18,icon:r.icon,class:"me-1"},null,8,["icon"]),d("span",null,c(r.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),e(pe,{modelValue:o(l),"onUpdate:modelValue":i[1]||(i[1]=r=>g(l)?l.value=r:null),class:"mt-6 disable-tab-transition",touch:!1},{default:a(()=>[e(O,null,{default:a(()=>[e(x)]),_:1}),e(O,null,{default:a(()=>[e(fe)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(p(),P(B,{key:1},{default:a(()=>[e(Z,{class:"text-center"},{default:a(()=>i[2]||(i[2]=[m(" No User Found ")])),_:1})]),_:1}))}}};export{wa as default};
