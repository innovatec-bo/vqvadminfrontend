import{$ as r}from"./api-23eb8e44.js";import{a as i,b as m,e as h}from"./notifications-9301c65a.js";import{r as n,k as y,a2 as u}from"./index-c17c0958.js";const v=async a=>await r("/quote/register",{method:"POST",body:a}),Q=async(a,t)=>await r(`/quote/${a}/change_status`,{method:"PATCH",body:t}),w=async a=>await r("quote/list-paginated",{method:"GET",params:a});function S(){const a=n(!1),t=n(null),l=n([]),d=y(),c=n(0),g=async o=>{a.value=!0;try{const e=await v(o);console.log(e),t.value=e.data,i("¡Cotización registrada exitosamente!","La cotización ha sido generada y registrada en el sistema. ¡Buen trabajo!"),d.push("/quote/listQuote")}catch(e){return e.response&&e.response.status==422?(m("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(h("Advertencia","Hubo un problema al registrar la Cotizacion. Contactese con Soporte."),{success:!1,message:"Error al Registrar"})}finally{a.value=!1}},f=async(o,e)=>{a.value=!0;try{const s=await Q(o,e);t.value=s.data,console.log(s),i("¡El estado de la cotización ha cambiado! ","La cotización ha pasado a un nuevo estado")}catch(s){console.log(s)}finally{a.value=!1}},p=async o=>{a.value=!0;try{const e=await w(o);console.log(e),l.value=e.data.data,c.value=e.data.total}catch(e){console.log(e)}finally{a.value=!1}};return{changeStatusQuotes:f,loadingQuote:a,quote:t,quotes:u(()=>l.value),totalQuotes:u(()=>c.value),generateQuote:g,allQuotePaginate:p}}export{S as u};
