import{_ as T}from"./AppTextField-6f740df4.js";import{_ as j}from"./AppSelect-ccf756d5.js";import{$ as E}from"./api-f4900d91.js";import{r as m,k as M,a2 as x,w as C,o as N,c as z,b as r,e as i,d as n,x as v,n as a,a0 as g,a4 as b,s as h,v as P}from"./index-a54c57b2.js";import{p as A}from"./paginationMeta-4ad053a4.js";import{l as F}from"./lodash-d67cab74.js";import{V as O}from"./VCard-b8ab7ef2.js";import{V as R}from"./VCardText-974f1364.js";import{V as G}from"./VSpacer-ded672f5.js";import{V as H}from"./VDivider-18f44d6d.js";import{V as Q}from"./VDataTableServer-ab78b798.js";import{V as q}from"./VPagination-d1c3ffca.js";import"./form-87f468b6.js";import"./VTextField-4d59e4f8.js";/* empty css                   */import"./VCounter-9184ef99.js";import"./VImg-24ae3b8f.js";import"./VField-e400f246.js";import"./easing-9f15041e.js";import"./VInput-39bbda74.js";import"./forwardRefs-8348545e.js";import"./VSelect-718a4a4c.js";import"./VList-8e53c877.js";import"./ssrBoot-0af201ab.js";import"./VAvatar-a060005e.js";import"./dialog-transition-e1dfb8e6.js";import"./VMenu-4a4865a4.js";import"./VOverlay-55c698d2.js";import"./lazy-67a427f9.js";import"./scopeId-6c78f01e.js";import"./VCheckboxBtn-d46ea3f4.js";import"./VSelectionControl-d56c1c32.js";import"./VChip-5a84b8f9.js";import"./index-9c720871.js";import"./constants-1eb97e20.js";import"./VDataTable-b47a1761.js";import"./VTable-d2336548.js";import"./filter-97072b4a.js";const I=async f=>await E("/system-log",{method:"GET",params:f});function J(){const f=m(!1),y=m([]);M();const d=m(0);return{getSystemLog:async p=>{try{const t=await I(p);y.value=t.data.data,d.value=t.data.total,console.log(t)}catch(t){console.error(t)}},loading:f,total:x(()=>d.value),systemLog:x(()=>y.value)}}const K={class:"text-body-1"},W={class:"d-flex align-center flex-wrap gap-4"},X={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Y={class:"text-sm text-disabled mb-0"},Ne={__name:"list",setup(f){const{getSystemLog:y,systemLog:d,total:c}=J(),p=m(),t=m(10),s=m(1),V=m(),_=m(),B=l=>{var e,u;s.value=l.page,t.value=l.itemsPerPage,V.value=(e=l.sortBy[0])==null?void 0:e.key,_.value=(u=l.sortBy[0])==null?void 0:u.order},S=[{title:"Usuario",key:"username"},{title:"ip",key:"ip_address"},{title:"Tipo",key:"action_type"},{title:"Description",key:"description"},{title:"severity",key:"severity"},{title:"fecha",key:"created_at"}],w=()=>{y({itemsPerPage:t.value,page:s.value,search:p.value,sortBy:V.value,orderBy:_.value})},k=F.debounce(w,300);C([p,t,s,V,_],k,{immediate:!0});const $=l=>{const e=new Date(l),u=e.getDate(),D=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][e.getMonth()],L=e.getHours().toString().padStart(2,"0"),U=e.getMinutes().toString().padStart(2,"0");return`${u} de ${D}, ${L}:${U}`};return(l,e)=>{const u=T;return N(),z("section",null,[r(O,null,{default:i(()=>[r(R,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[n("div",null,[e[5]||(e[5]=n("h5",{class:"text-h5"}," Bitacora ",-1)),n("div",K," En total son "+v(a(c))+" items. ",1)]),r(G),n("div",W,[r(j,{modelValue:a(t),"onUpdate:modelValue":e[0]||(e[0]=o=>g(t)?t.value=o:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),r(u,{modelValue:a(p),"onUpdate:modelValue":e[1]||(e[1]=o=>g(p)?p.value=o:null),placeholder:"Buscar...",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"])])]),_:1}),r(H),r(a(Q),{"items-per-page":a(t),"onUpdate:itemsPerPage":e[3]||(e[3]=o=>g(t)?t.value=o:null),page:a(s),"onUpdate:page":e[4]||(e[4]=o=>g(s)?s.value=o:null),items:a(d),headers:S,"items-length":a(t).value===-1?a(d).value.length:a(c).valueOf,class:"text-no-wrap","onUpdate:options":B},{"item.username":i(({item:o})=>[n("span",null,v(o.username),1)]),"item.created_at":i(({item:o})=>[n("span",null,v($(o.created_at)),1)]),bottom:i(()=>[n("div",X,[n("p",Y,v(a(A)({page:a(s),itemsPerPage:a(t)},a(c))),1),r(q,{modelValue:a(s),"onUpdate:modelValue":e[2]||(e[2]=o=>g(s)?s.value=o:null),length:Math.ceil(a(c)/a(t)),"total-visible":l.$vuetify.display.xs?1:7},{prev:i(o=>[r(b,h({variant:"tonal",color:"default"},o,{icon:!1}),{default:i(()=>e[6]||(e[6]=[P(" Anterior ")])),_:2},1040)]),next:i(o=>[r(b,h({variant:"tonal",color:"default"},o,{icon:!1}),{default:i(()=>e[7]||(e[7]=[P(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})])}}};export{Ne as default};
