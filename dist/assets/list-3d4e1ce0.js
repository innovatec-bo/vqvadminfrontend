import{_ as L}from"./AppTextField-5062369f.js";import{_ as O}from"./AppSelect-153ad761.js";import{_ as J}from"./DialogCloseBtn-cccccbdf.js";import{r as g,w as j,o as f,f as k,e as l,b as t,a3 as W,n as e,z as v,d as m,x as A,a4 as D,v as P,a as h,c as S,a0 as b,s as z,$ as B}from"./index-2eb1505d.js";import{u as q}from"./useProperty-ab9addaa.js";import{V as F}from"./VCardText-3bd26a97.js";import{V as X}from"./VForm-2674761c.js";import{V as Y}from"./VRow-dfd8f421.js";import{V as d}from"./VCol-820c097e.js";import{V as Z}from"./VCheckbox-aa793959.js";import{V as G}from"./VCard-24ba86df.js";import{V as ee}from"./VDialog-026e3690.js";import{p as te}from"./paginationMeta-4ad053a4.js";import{l as oe}from"./lodash-f1921e4a.js";import{V as le}from"./VSpacer-f20c57cf.js";import{V as M}from"./VDivider-24e0a4b7.js";import{V as ae}from"./VDataTableServer-19e0be4e.js";import{V as re}from"./VChip-1979189a.js";import{V as ie}from"./VPagination-78b0af42.js";import"./form-7dc945ea.js";import"./VTextField-1bb0ee16.js";/* empty css                   */import"./VCounter-c127849b.js";import"./VImg-be87a0e7.js";import"./VField-8f5debd9.js";import"./easing-9f15041e.js";import"./VInput-ab6bf326.js";import"./forwardRefs-8348545e.js";import"./VSelect-1575d9ab.js";import"./VList-eeea6141.js";import"./ssrBoot-e465d36c.js";import"./VAvatar-f7cdf41f.js";import"./dialog-transition-2deecb94.js";import"./VMenu-cca3cf0d.js";import"./VOverlay-2610f1b2.js";import"./lazy-3f7bf9c0.js";import"./scopeId-22ff2182.js";import"./VCheckboxBtn-3e694008.js";import"./VSelectionControl-25ca5494.js";import"./api-dda96ee4.js";import"./index-9c720871.js";import"./constants-ca8ca994.js";import"./notifications-81bc0416.js";import"./VDataTable-97f369e8.js";import"./VTable-a911e61b.js";import"./filter-837eaa06.js";const se={class:"d-flex items-center gap-x-2 py-7 px-1"},pe={class:"my-2"},ne={__name:"EditPropertyDialog",props:{isDialogVisible:{type:Boolean,required:!0},property:{type:Object,required:!0}},emits:["update:isDialogVisible","propertyUpdated"],setup($,{emit:w}){const c=$,x=w,V=g([{value:"DEPARTAMENT",title:"Departamento"},{value:"PARK",title:"Parqueo"}]),{loadingProperty:T,editProperty:y}=q(),o=g({...c.property}),p=()=>{x("update:isDialogVisible",!1)},_=async()=>{(await y(o.value)).success&&x("propertyUpdated",o.value),p()};return j(()=>c.property,E=>{o.value={...E}}),(E,r)=>{const U=J,u=L,C=O;return f(),k(ee,{"max-width":"800","model-value":c.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":p},{default:l(()=>[t(U,{onClick:p}),t(G,{title:"Editar propiedad",class:"pa-sm-8 pa-5"},{default:l(()=>[t(F,null,{default:l(()=>[t(X,{onSubmit:W(_,["prevent"])},{default:l(()=>[t(Y,{dense:""},{default:l(()=>[t(d,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e(o).code,"onUpdate:modelValue":r[0]||(r[0]=s=>e(o).code=s),label:"Código",placeholder:"A1",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(C,{modelValue:e(o).property_type,"onUpdate:modelValue":r[1]||(r[1]=s=>e(o).property_type=s),label:"Tipo de propiedad",placeholder:"Seleccione un tipo",items:e(V),outlined:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e(o).base_price,"onUpdate:modelValue":r[2]||(r[2]=s=>e(o).base_price=s),label:"Precio de la propiedad",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e(o).percentage_initial_fee,"onUpdate:modelValue":r[3]||(r[3]=s=>e(o).percentage_initial_fee=s),label:"% Anticipo",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(u,{modelValue:e(o).title,"onUpdate:modelValue":r[4]||(r[4]=s=>e(o).title=s),label:"Título comercial",placeholder:"Título comercial",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e(o).surface,"onUpdate:modelValue":r[5]||(r[5]=s=>e(o).surface=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(o).property_type=="DEPARTAMENT"?(f(),k(d,{key:0,cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e(o).departament.number_bedrooms,"onUpdate:modelValue":r[6]||(r[6]=s=>e(o).departament.number_bedrooms=s),label:"Numero de habitaciones",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):v("",!0),e(o).property_type=="DEPARTAMENT"?(f(),k(d,{key:1,cols:"12",md:"6"},{default:l(()=>[t(u,{modelValue:e(o).departament.number_bathrooms,"onUpdate:modelValue":r[7]||(r[7]=s=>e(o).departament.number_bathrooms=s),label:"Numero de baños",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):v("",!0),e(o).property_type=="DEPARTAMENT"?(f(),k(d,{key:2,cols:"12",md:"3"},{default:l(()=>[m("div",se,[m("span",pe,A(e(o).departament.is_balcony?"Con Terraza":"Sin Terraza"),1),t(Z,{modelValue:e(o).departament.is_balcony,"onUpdate:modelValue":r[8]||(r[8]=s=>e(o).departament.is_balcony=s),"true-value":1,"false-value":0},null,8,["modelValue"])])]),_:1})):v("",!0),e(o).property_type=="DEPARTAMENT"&&e(o).departament.is_balcony?(f(),k(d,{key:3,cols:"12",md:"3"},{default:l(()=>[t(u,{modelValue:e(o).departament.surface_balcony,"onUpdate:modelValue":r[9]||(r[9]=s=>e(o).departament.surface_balcony=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):v("",!0),t(d,{cols:"12",class:"text-right mt-6"},{default:l(()=>[t(D,{color:"secondary",variant:"tonal",class:"me-3",onClick:p},{default:l(()=>r[10]||(r[10]=[P(" Cancelar ")])),_:1}),t(D,{type:"submit",color:"primary",class:"me-3",disabled:e(T),loading:e(T)},{default:l(()=>r[11]||(r[11]=[P(" Guardar ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const de={class:"text-body-1"},ue={class:"d-flex align-center flex-wrap gap-4"},me={class:"d-flex align-center gap-4"},ce={class:"text-capitalize"},fe={key:0,class:"text-capitalize font-weight-medium"},ye={key:1,class:"text-capitalize font-weight-medium"},Ve={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},_e={class:"text-sm text-disabled mb-0"},dt={__name:"list",setup($){const{allProperty:w,properties:c,property:x,totalProperties:V,removeProperty:T}=q(),y=g(),o=g(20),p=g(1),_=g(!1),E=n=>{p.value=n.page,o.value=n.itemsPerPage},r=[{title:"Titulo",key:"title"},{title:"Code",key:"code"},{title:"Precio",key:"base_price"},{title:"Tipo de Propiedad",key:"typeProperty"},{title:"Proyecto",key:"project"},{title:"Estado",key:"status"},{title:"Accion",key:"actions",sortable:!1}],U=()=>{w({itemsPerPage:o.value,page:p.value,search:y.value})},u=oe.debounce(U,300);j([y,o,p],u,{immediate:!0});const C=n=>{switch(n){case"AVAILABLE":return{color:"success",text:"DISPONIBLE"};case"PRESALE":return{color:"warning",text:"PRE VENTA"};case"SALE":return{color:"error",text:"VENDIDO"};case"DELIVERED":return{color:"error",text:"ENTREGADO"};default:return{color:"primary",text:"NOTHING"}}},s=async n=>{await T(n),U()},H=async n=>{_.value=!0,x.value={...n}},K=n=>{const i=c.value.findIndex(N=>N.id===n.id);i!==-1&&(c.value[i]={...n})};return(n,i)=>{const N=L,I=h("RouterLink"),R=h("IconBtn");return f(),S("section",null,[t(G,null,{default:l(()=>[t(F,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[m("div",null,[i[6]||(i[6]=m("h5",{class:"text-h5"}," Mis Propiedades ",-1)),m("div",de," En total son "+A(e(V))+" Propiedades. ",1)]),t(le),m("div",ue,[t(O,{modelValue:e(o),"onUpdate:modelValue":i[0]||(i[0]=a=>b(o)?o.value=a:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),t(N,{modelValue:e(y),"onUpdate:modelValue":i[1]||(i[1]=a=>b(y)?y.value=a:null),placeholder:"Buscar...",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"]),t(I,{to:{name:"realty-property-register"}},{default:l(()=>[t(D,null,{default:l(()=>i[7]||(i[7]=[P(" Agregar Propiedad ")])),_:1})]),_:1})])]),_:1}),t(M),t(e(ae),{"items-per-page":e(o),"onUpdate:itemsPerPage":i[3]||(i[3]=a=>b(o)?o.value=a:null),page:e(p),"onUpdate:page":i[4]||(i[4]=a=>b(p)?p.value=a:null),items:e(c),headers:r,"items-length":e(o).value===-1?e(c).value.length:e(V).valueOf,class:"text-no-wrap","onUpdate:options":E},{"item.base_price":l(({item:a})=>[m("div",me,[m("span",ce,A(a.base_price)+" $ ",1)])]),"item.typeProperty":l(({item:a})=>[a.parking?(f(),S("span",fe,"Parqueo")):v("",!0),a.departament?(f(),S("span",ye,"Departamento")):v("",!0)]),"item.status":l(({item:a})=>[t(re,{label:"",size:"small",class:"text-capitalize",color:C(a.status).color},{default:l(()=>[P(A(C(a.status).text),1)]),_:2},1032,["color"])]),bottom:l(()=>[t(M),m("div",Ve,[m("p",_e,A(e(te)({page:e(p),itemsPerPage:e(o)},e(V))),1),t(ie,{modelValue:e(p),"onUpdate:modelValue":i[2]||(i[2]=a=>b(p)?p.value=a:null),length:Math.ceil(e(V)/e(o)),"total-visible":n.$vuetify.display.xs?1:7},{prev:l(a=>[t(D,z({variant:"tonal",color:"default"},a,{icon:!1}),{default:l(()=>i[8]||(i[8]=[P(" Anterior ")])),_:2},1040)]),next:l(a=>[t(D,z({variant:"tonal",color:"default"},a,{icon:!1}),{default:l(()=>i[9]||(i[9]=[P(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":l(({item:a})=>[t(R,null,{default:l(()=>[t(I,{to:{name:"realty-property-id",params:{id:a.id}}},{default:l(()=>[t(B,{icon:"tabler-eye"})]),_:2},1032,["to"])]),_:2},1024),t(R,null,{default:l(()=>[t(B,{icon:"tabler-edit",onClick:Q=>H(a)},null,8,["onClick"])]),_:2},1024),t(R,{onClick:Q=>s(a.id)},{default:l(()=>[t(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(ne,{"is-dialog-visible":e(_),"onUpdate:isDialogVisible":i[5]||(i[5]=a=>b(_)?_.value=a:null),property:e(x),onPropertyUpdated:K},null,8,["is-dialog-visible","property"])])}}};export{dt as default};
