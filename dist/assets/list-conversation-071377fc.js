import{_ as M}from"./AppSelect-1a2530f4.js";import{_ as N}from"./AppTextField-9186f801.js";import{u as j}from"./useConversation-300d0bd3.js";import{p as T}from"./paginationMeta-4ad053a4.js";import{l as B}from"./lodash-14a1a22c.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{V as I}from"./VCard-dfb8409c.js";import{V as z}from"./VCardText-2d0de59d.js";import{V}from"./VDivider-3e3c779c.js";import{V as F}from"./VDataTableServer-db2c7d32.js";import{V as R}from"./VRow-c227529d.js";import{V as H}from"./VChip-d8145fdb.js";import{V as L}from"./VCheckbox-bda1c07c.js";import{V as O}from"./VTooltip-b551c15b.js";import{V as Q}from"./VPagination-cc79ec38.js";import{r as u,w as q,o as G,c as J,b as s,e as a,d as l,n as o,a0 as f,x as m,v,a4 as h,s as x}from"./index-846a41a7.js";import"./form-afe002dd.js";import"./VSelect-17240541.js";import"./VTextField-9f5745a0.js";/* empty css                   */import"./VCounter-13a5cfec.js";import"./VImg-513936eb.js";import"./VField-a9e436a8.js";import"./easing-9f15041e.js";import"./VInput-568005d0.js";import"./forwardRefs-8348545e.js";import"./VList-b55e2e2d.js";import"./ssrBoot-002ea34f.js";import"./VAvatar-5e2cbe96.js";import"./dialog-transition-4510933c.js";import"./VMenu-c354dabd.js";import"./VOverlay-7ed6f1b5.js";import"./lazy-ed20dc3f.js";import"./scopeId-f816bc4e.js";import"./VCheckboxBtn-4f15d05f.js";import"./VSelectionControl-cd737be4.js";import"./api-d2df174a.js";import"./index-9c720871.js";import"./constants-ca8ca994.js";import"./notifications-81bc0416.js";import"./VDataTable-4a7878a5.js";import"./VTable-e102a340.js";import"./filter-ac0ab663.js";const K={class:"d-flex justify-space-between flex-wrap gap-y-4"},W={class:"d-flex flex-row gap-4 align-center flex-wrap"},X={class:"d-flex gap-x-2"},Y=["href"],Z={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ee={class:"text-sm text-disabled mb-0"},te={__name:"list-conversation",setup(ae){const{allConversationsPaginate:y,totalConversations:g,conversations:C,updateConversationStatus:b}=j(),d=u(""),i=u(10),r=u(1);u(),u();const w=[{title:"Celular",key:"phone"},{title:"Es Cliente ?",key:"isCustomer"},{title:"Cliente",key:"customerName"},{title:"Ultimo Mensaje",key:"last_message"},{title:"Estado",key:"ia_status"},{title:"Acción",key:"action"}],P=n=>{r.value=n.page,i.value=n.itemsPerPage},S=()=>{y({page:r.value,itemsPerPage:i.value,search:d.value})},D=B.debounce(S,300);q([d,i,r],D,{immediate:!0});const k=async n=>{const t=u(0);n.ia_status&&(t.value=1),await b(n.id,t.value)},A=n=>{const t=new Date(n),c=t.getDate(),e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][t.getMonth()],_=t.getHours().toString().padStart(2,"0"),$=t.getMinutes().toString().padStart(2,"0");return`${c} de ${e}, ${_}:${$}`},U=n=>{const t=new Date,c=new Date(n),p=(t-c)/(1e3*60*60);return console.log(p),p>=12?"error":p>=6?"warning":p>=3?"info":"succes"};return(n,t)=>{const c=N,p=M;return G(),J("div",null,[s(I,{title:"Lista de Conversación con la IA"},{default:a(()=>[s(z,null,{default:a(()=>[l("div",K,[s(c,{modelValue:o(d),"onUpdate:modelValue":t[0]||(t[0]=e=>f(d)?d.value=e:null),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search ..",density:"compact"},null,8,["modelValue"]),l("div",W,[s(p,{modelValue:o(i),"onUpdate:modelValue":t[1]||(t[1]=e=>f(i)?i.value=e:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"])])])]),_:1}),s(V),s(o(F),{"items-per-page":o(i),"onUpdate:itemsPerPage":t[3]||(t[3]=e=>f(i)?i.value=e:null),page:o(r),"onUpdate:page":t[4]||(t[4]=e=>f(r)?r.value=e:null),items:o(C),headers:w,"items-length":o(g),class:"text-no-wrap","onUpdate:options":P},{"item.phone":a(({item:e})=>[l("div",X,[l("a",{href:`https://api.whatsapp.com/send?phone=${e.phone}`,target:"_blank",rel:"noopener noreferrer",class:"text-body-1"},m(e.cod_phone)+" "+m(e.phone),9,Y)])]),"item.last_message":a(({item:e})=>[s(R,{class:"gap-2 align-center"},{default:a(()=>[s(H,{color:U(e.last_message)},{default:a(()=>[v(m(A(e.last_message)),1)]),_:2},1032,["color"])]),_:2},1024)]),"item.ia_status":a(({item:e})=>[l("span",null,m(e.ia_status?"Activado":"No activado"),1)]),"item.isCustomer":a(({item:e})=>[l("span",null,m(e.isCustomer?"Sí":"No"),1)]),"item.action":a(({item:e})=>[s(L,{modelValue:e.ia_status,"onUpdate:modelValue":_=>e.ia_status=_,"true-value":1,"false-value":0,onChange:_=>k(e)},{default:a(()=>[s(O,{activator:"parent",location:"top"},{default:a(()=>[v(m(e.ia_status?"Desactivar IA":"Activar IA"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),bottom:a(()=>[s(V),l("div",Z,[l("p",ee,m(o(T)({page:o(r),itemsPerPage:o(i)},o(g))),1),s(Q,{modelValue:o(r),"onUpdate:modelValue":t[2]||(t[2]=e=>f(r)?r.value=e:null),length:Math.ceil(o(g)/o(i)),"total-visible":n.$vuetify.display.xs?1:Math.min(Math.ceil(o(g)/o(i)),5)},{prev:a(e=>[s(h,x({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>t[5]||(t[5]=[v(" Previous ")])),_:2},1040)]),next:a(e=>[s(h,x({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>t[6]||(t[6]=[v(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})])}}},qe=E(te,[["__scopeId","data-v-7a46a387"]]);export{qe as default};
