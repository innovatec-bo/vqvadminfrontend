import{_ as L}from"./AppTextField-46674fd0.js";import{_ as O}from"./AppSelect-85835377.js";import{_ as J}from"./DialogCloseBtn-657a95ae.js";import{r as g,w as j,o as f,f as k,e as l,b as t,a3 as W,n as e,z as v,d as u,x as A,a4 as D,v as P,a as h,c as S,a0 as b,s as z,$ as B}from"./index-7feb186e.js";import{u as q}from"./useProperty-1e9bfe98.js";import{V as F}from"./VCardText-a7ddd517.js";import{V as X}from"./VForm-f66dab87.js";import{V as Y}from"./VRow-af5fbf91.js";import{V as d}from"./VCol-3272b937.js";import{V as Z}from"./VCheckbox-625fde32.js";import{V as G}from"./VCard-c0cf2be9.js";import{V as ee}from"./VDialog-251d7cd2.js";import{f as te}from"./currencyFormatter-92ad4b3c.js";import{p as oe}from"./paginationMeta-4ad053a4.js";import{l as le}from"./lodash-c2f5cc04.js";import{V as ae}from"./VSpacer-de882cd0.js";import{V as M}from"./VDivider-49c96768.js";import{V as re}from"./VDataTableServer-36e1689f.js";import{V as ie}from"./VChip-0b1c6eb6.js";import{V as se}from"./VPagination-808da43c.js";import"./form-14c48936.js";import"./VTextField-77e1f5f3.js";/* empty css                   */import"./VCounter-353bde1e.js";import"./VImg-206d1295.js";import"./VField-3ef6c759.js";import"./easing-9f15041e.js";import"./VInput-5e285abb.js";import"./forwardRefs-8348545e.js";import"./VSelect-c54d284a.js";import"./VList-5785f205.js";import"./ssrBoot-3333228b.js";import"./VAvatar-56b48f2e.js";import"./dialog-transition-09f5584e.js";import"./VMenu-07081ef2.js";import"./VOverlay-839a1841.js";import"./lazy-023cdafc.js";import"./scopeId-f47a53f4.js";import"./VCheckboxBtn-72f770db.js";import"./VSelectionControl-f964f932.js";import"./api-82c09656.js";import"./index-9c720871.js";import"./constants-af5bcc15.js";import"./notifications-81bc0416.js";import"./VDataTable-43679f98.js";import"./VTable-3860c0c9.js";import"./filter-507606d7.js";const pe={class:"d-flex items-center gap-x-2 py-7 px-1"},ne={class:"my-2"},de={__name:"EditPropertyDialog",props:{isDialogVisible:{type:Boolean,required:!0},property:{type:Object,required:!0}},emits:["update:isDialogVisible","propertyUpdated"],setup(I,{emit:w}){const c=I,x=w,V=g([{value:"DEPARTAMENT",title:"Departamento"},{value:"PARK",title:"Parqueo"}]),{loadingProperty:T,editProperty:y}=q(),o=g({...c.property}),p=()=>{x("update:isDialogVisible",!1)},_=async()=>{(await y(o.value)).success&&x("propertyUpdated",o.value),p()};return j(()=>c.property,E=>{o.value={...E}}),(E,r)=>{const U=J,m=L,C=O;return f(),k(ee,{"max-width":"800","model-value":c.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":p},{default:l(()=>[t(U,{onClick:p}),t(G,{title:"Editar propiedad",class:"pa-sm-8 pa-5"},{default:l(()=>[t(F,null,{default:l(()=>[t(X,{onSubmit:W(_,["prevent"])},{default:l(()=>[t(Y,{dense:""},{default:l(()=>[t(d,{cols:"12",md:"6"},{default:l(()=>[t(m,{modelValue:e(o).code,"onUpdate:modelValue":r[0]||(r[0]=s=>e(o).code=s),label:"Código",placeholder:"A1",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(C,{modelValue:e(o).property_type,"onUpdate:modelValue":r[1]||(r[1]=s=>e(o).property_type=s),label:"Tipo de propiedad",placeholder:"Seleccione un tipo",items:e(V),outlined:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(m,{modelValue:e(o).base_price,"onUpdate:modelValue":r[2]||(r[2]=s=>e(o).base_price=s),label:"Precio de la propiedad",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(m,{modelValue:e(o).percentage_initial_fee,"onUpdate:modelValue":r[3]||(r[3]=s=>e(o).percentage_initial_fee=s),label:"% Anticipo",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12"},{default:l(()=>[t(m,{modelValue:e(o).title,"onUpdate:modelValue":r[4]||(r[4]=s=>e(o).title=s),label:"Título comercial",placeholder:"Título comercial",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:l(()=>[t(m,{modelValue:e(o).surface,"onUpdate:modelValue":r[5]||(r[5]=s=>e(o).surface=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(o).property_type=="DEPARTAMENT"?(f(),k(d,{key:0,cols:"12",md:"6"},{default:l(()=>[t(m,{modelValue:e(o).departament.number_bedrooms,"onUpdate:modelValue":r[6]||(r[6]=s=>e(o).departament.number_bedrooms=s),label:"Numero de habitaciones",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):v("",!0),e(o).property_type=="DEPARTAMENT"?(f(),k(d,{key:1,cols:"12",md:"6"},{default:l(()=>[t(m,{modelValue:e(o).departament.number_bathrooms,"onUpdate:modelValue":r[7]||(r[7]=s=>e(o).departament.number_bathrooms=s),label:"Numero de baños",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):v("",!0),e(o).property_type=="DEPARTAMENT"?(f(),k(d,{key:2,cols:"12",md:"3"},{default:l(()=>[u("div",pe,[u("span",ne,A(e(o).departament.is_balcony?"Con Terraza":"Sin Terraza"),1),t(Z,{modelValue:e(o).departament.is_balcony,"onUpdate:modelValue":r[8]||(r[8]=s=>e(o).departament.is_balcony=s),"true-value":1,"false-value":0},null,8,["modelValue"])])]),_:1})):v("",!0),e(o).property_type=="DEPARTAMENT"&&e(o).departament.is_balcony?(f(),k(d,{key:3,cols:"12",md:"3"},{default:l(()=>[t(m,{modelValue:e(o).departament.surface_balcony,"onUpdate:modelValue":r[9]||(r[9]=s=>e(o).departament.surface_balcony=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):v("",!0),t(d,{cols:"12",class:"text-right mt-6"},{default:l(()=>[t(D,{color:"secondary",variant:"tonal",class:"me-3",onClick:p},{default:l(()=>r[10]||(r[10]=[P(" Cancelar ")])),_:1}),t(D,{type:"submit",color:"primary",class:"me-3",disabled:e(T),loading:e(T)},{default:l(()=>r[11]||(r[11]=[P(" Guardar ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const me={class:"text-body-1"},ue={class:"d-flex align-center flex-wrap gap-4"},ce={class:"d-flex align-center gap-4"},fe={class:"text-capitalize"},ye={key:0,class:"text-capitalize font-weight-medium"},Ve={key:1,class:"text-capitalize font-weight-medium"},_e={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},be={class:"text-sm text-disabled mb-0"},ut={__name:"list",setup(I){const{allProperty:w,properties:c,property:x,totalProperties:V,removeProperty:T}=q(),y=g(),o=g(20),p=g(1),_=g(!1),E=n=>{p.value=n.page,o.value=n.itemsPerPage},r=[{title:"Titulo",key:"title"},{title:"Code",key:"code"},{title:"Precio",key:"base_price"},{title:"Tipo de Propiedad",key:"typeProperty"},{title:"Proyecto",key:"project"},{title:"Estado",key:"status"},{title:"Accion",key:"actions",sortable:!1}],U=()=>{w({itemsPerPage:o.value,page:p.value,search:y.value})},m=le.debounce(U,300);j([y,o,p],m,{immediate:!0});const C=n=>{switch(n){case"AVAILABLE":return{color:"success",text:"DISPONIBLE"};case"PRESALE":return{color:"warning",text:"PRE VENTA"};case"SALE":return{color:"error",text:"VENDIDO"};case"DELIVERED":return{color:"error",text:"ENTREGADO"};default:return{color:"primary",text:"NOTHING"}}},s=async n=>{await T(n),U()},H=async n=>{_.value=!0,x.value={...n}},K=n=>{const i=c.value.findIndex(N=>N.id===n.id);i!==-1&&(c.value[i]={...n})};return(n,i)=>{const N=L,$=h("RouterLink"),R=h("IconBtn");return f(),S("section",null,[t(G,null,{default:l(()=>[t(F,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[u("div",null,[i[6]||(i[6]=u("h5",{class:"text-h5"}," Mis Propiedades ",-1)),u("div",me," En total son "+A(e(V))+" Propiedades. ",1)]),t(ae),u("div",ue,[t(O,{modelValue:e(o),"onUpdate:modelValue":i[0]||(i[0]=a=>b(o)?o.value=a:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),t(N,{modelValue:e(y),"onUpdate:modelValue":i[1]||(i[1]=a=>b(y)?y.value=a:null),placeholder:"Buscar...",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"]),t($,{to:{name:"realty-property-register"}},{default:l(()=>[t(D,null,{default:l(()=>i[7]||(i[7]=[P(" Agregar Propiedad ")])),_:1})]),_:1})])]),_:1}),t(M),t(e(re),{"items-per-page":e(o),"onUpdate:itemsPerPage":i[3]||(i[3]=a=>b(o)?o.value=a:null),page:e(p),"onUpdate:page":i[4]||(i[4]=a=>b(p)?p.value=a:null),items:e(c),headers:r,"items-length":e(o).value===-1?e(c).value.length:e(V).valueOf,class:"text-no-wrap","onUpdate:options":E},{"item.base_price":l(({item:a})=>[u("div",ce,[u("span",fe,A(e(te)(a.base_price)),1)])]),"item.typeProperty":l(({item:a})=>[a.parking?(f(),S("span",ye,"Parqueo")):v("",!0),a.departament?(f(),S("span",Ve,"Departamento")):v("",!0)]),"item.status":l(({item:a})=>[t(ie,{label:"",size:"small",class:"text-capitalize",color:C(a.status).color},{default:l(()=>[P(A(C(a.status).text),1)]),_:2},1032,["color"])]),bottom:l(()=>[t(M),u("div",_e,[u("p",be,A(e(oe)({page:e(p),itemsPerPage:e(o)},e(V))),1),t(se,{modelValue:e(p),"onUpdate:modelValue":i[2]||(i[2]=a=>b(p)?p.value=a:null),length:Math.ceil(e(V)/e(o)),"total-visible":n.$vuetify.display.xs?1:7},{prev:l(a=>[t(D,z({variant:"tonal",color:"default"},a,{icon:!1}),{default:l(()=>i[8]||(i[8]=[P(" Anterior ")])),_:2},1040)]),next:l(a=>[t(D,z({variant:"tonal",color:"default"},a,{icon:!1}),{default:l(()=>i[9]||(i[9]=[P(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":l(({item:a})=>[t(R,null,{default:l(()=>[t($,{to:{name:"realty-property-id",params:{id:a.id}}},{default:l(()=>[t(B,{icon:"tabler-eye"})]),_:2},1032,["to"])]),_:2},1024),t(R,null,{default:l(()=>[t(B,{icon:"tabler-edit",onClick:Q=>H(a)},null,8,["onClick"])]),_:2},1024),t(R,{onClick:Q=>s(a.id)},{default:l(()=>[t(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(de,{"is-dialog-visible":e(_),"onUpdate:isDialogVisible":i[5]||(i[5]=a=>b(_)?_.value=a:null),property:e(x),onPropertyUpdated:K},null,8,["is-dialog-visible","property"])])}}};export{ut as default};
