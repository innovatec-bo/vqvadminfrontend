import{m as R,V as O}from"./VField-9b92bd16.js";import{V as q}from"./VOverlay-67803cc2.js";import{aR as j,b4 as L,eG as z,aN as K,b5 as $,bb as E,bz as G,a2 as s,r as m,bx as M,w as g,bD as T,b2 as W,c9 as H,b as i,F as J,s as y,ag as Q,bg as h}from"./index-7ea6e93c.js";import{m as U,u as X}from"./form-32d3f16f.js";const Y=j({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...L(),...U(),...z(R({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),le=K()({name:"VOtpInput",props:Y(),emits:{finish:t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,V){let{attrs:F,emit:A,slots:d}=V;const{dimensionStyles:k}=$(t),{isFocused:p,focus:w,blur:x}=X(t),o=E(t,"modelValue","",e=>String(e).split(""),e=>e.join("")),{t:D}=G(),I=s(()=>Array(Number(t.length)).fill(0)),r=m(-1),f=m(),c=m([]),b=s(()=>c.value[r.value]);function P(){const e=o.value.slice(),a=b.value.value;e[r.value]=a,o.value=e;let n=null;r.value>o.value.length?n=o.value.length:r.value+1!==Number(t.length)?n="next":requestAnimationFrame(()=>{var l;return(l=b.value)==null?void 0:l.blur()}),n&&h(f.value,n)}function _(e){const a=o.value.slice(),n=r.value;let l=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(e.key)&&(e.preventDefault(),e.key==="ArrowLeft"?l="prev":e.key==="ArrowRight"?l="next":["Backspace","Delete"].includes(e.key)&&(a[r.value]="",o.value=a,r.value>0&&e.key==="Backspace"?l="prev":requestAnimationFrame(()=>{var u;(u=c.value[n])==null||u.select()})),requestAnimationFrame(()=>{l!=null&&h(f.value,l)}))}function S(e,a){var n,l;a.preventDefault(),a.stopPropagation(),o.value=(((n=a==null?void 0:a.clipboardData)==null?void 0:n.getData("Text"))??"").split(""),(l=c.value)==null||l[e].blur()}function B(){o.value=[]}function C(e,a){w(),r.value=a}function N(){x(),r.value=-1}return M({VField:{color:s(()=>t.color),bgColor:s(()=>t.color),baseColor:s(()=>t.baseColor),disabled:s(()=>t.disabled),error:s(()=>t.error),variant:s(()=>t.variant)}},{scoped:!0}),g(o,e=>{e.length===Number(t.length)&&A("finish",e.join(""))},{deep:!0}),g(r,e=>{e<0||T&&window.requestAnimationFrame(()=>{var a;(a=c.value[e])==null||a.select()})}),W(()=>{var n;const[e,a]=H(F);return i("div",y({class:["v-otp-input",{"v-otp-input--divided":!!t.divider},t.class],style:[t.style]},e),[i("div",{ref:f,class:"v-otp-input__content",style:[k.value]},[I.value.map((l,u)=>i(J,null,[t.divider&&u!==0&&i("span",{class:"v-otp-input__divider"},[t.divider]),i(O,{focused:p.value&&t.focusAll||r.value===u,key:u},{...d,default:()=>i("input",{ref:v=>c.value[u]=v,"aria-label":D(t.label,u+1),autofocus:u===0&&t.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],inputmode:"text",min:t.type==="number"?0:void 0,maxlength:"1",placeholder:t.placeholder,type:t.type,value:o.value[u],onInput:P,onFocus:v=>C(v,u),onBlur:N,onKeydown:_,onPaste:v=>S(u,v)},null)})])),i("input",y({class:"v-otp-input-input",type:"hidden"},a,{value:o.value.join("")}),null),i(q,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!t.loading,persistent:!0},{default:()=>{var l;return[((l=d.loader)==null?void 0:l.call(d))??i(Q,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(n=d.default)==null?void 0:n.call(d)])])}),{blur:()=>{var e;(e=c.value)==null||e.some(a=>a.blur())},focus:()=>{var e;(e=c.value)==null||e[0].focus()},reset:B,isFocused:p}}});export{le as V};
