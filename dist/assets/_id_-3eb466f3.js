import{_ as Q}from"./ConfirmDialog-7943e182.js";import{_ as Y}from"./AppTextarea-4b74d46e.js";import{_ as G}from"./AppTextField-fd887eae.js";import{_ as J}from"./DialogCloseBtn-013aa932.js";import{r as f,am as P,w as K,o as y,f as F,e as t,b as e,v as V,a3 as L,a4 as D,z as O,j as W,a2 as X,H as Z,c as U,d as i,x as p,n,a0 as S,F as ee}from"./index-dd6f5d6b.js";import{u as R}from"./useProject-982b36c6.js";import{V as h,b as te,a as q}from"./VCard-ff22c2d7.js";import{V as oe}from"./VForm-3986666f.js";import{V as w,a as _}from"./VRow-4792bff0.js";import{V as k}from"./VCardText-38517f9e.js";import{V as le}from"./VDialog-3550bc0f.js";import{u as ie}from"./useProperty-d9eda71c.js";import{V as A}from"./VDivider-79190bcc.js";import{V as ae}from"./VDataTable-a689f2b6.js";import"./form-4d2c098e.js";/* empty css                   */import"./VCounter-96e4f55f.js";import"./VImg-22d3be73.js";import"./VField-c91a347a.js";import"./easing-9f15041e.js";import"./VInput-4eb21e29.js";import"./forwardRefs-8348545e.js";import"./VTextField-3c21b0bb.js";import"./api-5f66280e.js";import"./index-9c720871.js";import"./constants-d5c22183.js";import"./notifications-73ea9381.js";import"./VAvatar-151a8e80.js";import"./VOverlay-a8d20f90.js";import"./lazy-844b9466.js";import"./scopeId-82f56c34.js";import"./dialog-transition-ab54f578.js";import"./VSelect-5cda818f.js";import"./VList-b2fd5e55.js";import"./ssrBoot-c8ef671b.js";import"./VMenu-a045c964.js";import"./VCheckboxBtn-1192d6b8.js";import"./VSelectionControl-102aa20b.js";import"./VChip-86bb6587.js";import"./VTable-3d0d69b0.js";import"./filter-8ce2a58c.js";const se={__name:"ProjectEditDialog",props:{projectData:{type:Object,required:!0,default:()=>({title:"",description:"",num_pisos:""})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","submit"],setup($,{emit:g}){const s=$,m=g,{editProyect:d}=R(),r=f(structuredClone(P(s.projectData)));K(s,()=>{r.value=structuredClone(P(s.projectData))});const x=()=>{m("update:isDialogVisible",!1),r.value=structuredClone(P(s.projectData))},b=async()=>{m("update:isDialogVisible",!1);try{await d(r.value.id,r.value)}catch(c){console.error("Error updating customer:",c)}};return(c,l)=>{const j=J,v=G,C=Y;return y(),F(le,{width:c.$vuetify.display.smAndDown?"auto":610,"model-value":s.isDialogVisible,"onUpdate:modelValue":l[4]||(l[4]=u=>c.$emit("update:isDialogVisible",u))},{default:t(()=>[e(j,{onClick:l[0]||(l[0]=u=>c.$emit("update:isDialogVisible",!1))}),s.projectData?(y(),F(h,{key:0,class:"pa-sm-8 pa-5"},{default:t(()=>[e(q,null,{default:t(()=>[e(te,{class:"text-h3 text-center"},{default:t(()=>l[5]||(l[5]=[V(" Editar ")])),_:1})]),_:1}),e(k,null,{default:t(()=>[e(oe,{class:"mt-4",onSubmit:L(b,["prevent"])},{default:t(()=>[e(w,null,{default:t(()=>[e(k,null,{default:t(()=>[e(w,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(v,{modelValue:r.value.title,"onUpdate:modelValue":l[1]||(l[1]=u=>r.value.title=u),label:"Titulo del Proyecto",placeholder:"......"},null,8,["modelValue"])]),_:1}),e(_,null,{default:t(()=>[e(C,{modelValue:r.value.description,"onUpdate:modelValue":l[2]||(l[2]=u=>r.value.description=u),label:"Descripcion (Opcional)",rows:"3"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(v,{modelValue:r.value.num_pisos,"onUpdate:modelValue":l[3]||(l[3]=u=>r.value.num_pisos=u),label:"Numero de pisos (Departamentos)",type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:t(()=>[e(D,{type:"submit"},{default:t(()=>l[6]||(l[6]=[V(" Submit ")])),_:1}),e(D,{color:"secondary",variant:"tonal",onClick:x},{default:t(()=>l[7]||(l[7]=[V(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):O("",!0)]),_:1},8,["width","model-value"])}}},re={class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},ne={class:"d-flex gap-2 align-center mb-2 flex-wrap"},ue={class:"text-h4"},me={key:0},pe={class:"gap-2 align-center mt-3 flex-wrap"},de={class:"d-flex align-end flex-column"},ce={class:"text-high-emphasis"},fe={class:"font-weight-medium",style:{"padding-inline":"5px 30px"}},ot={__name:"[id]",setup($){const g=W(),s=f(!1),m=f(!1),{project:d,getProjectId:r}=R(),{allPropertybyProject:x,properties:b,loadingProject:c}=ie(),l=f(),j=f(10),v=f(1),C=[{title:"Codigo",key:"code"},{title:"Estado",key:"status"},{title:"Superficie",key:"surface"},{title:"Precio",key:"base_price"},{title:"% cuota inicial",key:"percentaje_initial_fee"}],u=X(()=>d.value),I=()=>{x({itemsPerPage:j.value,page:v.value,search:l.value},g.params.id)},M=()=>{r(g.params.id)},z=()=>b.value.reduce((E,o)=>E+(o.base_price||0),0);return Z(()=>{I(),M()}),(E,o)=>{var T,B,N;const H=Q;return y(),U(ee,null,[i("div",re,[i("div",null,[i("div",ne,[i("h4",ue,p((T=n(d))==null?void 0:T.title),1)]),n(d)?(y(),U("span",me," Numero de Pisos: "+p((B=n(d))==null?void 0:B.num_pisos),1)):O("",!0),i("div",pe,[i("span",null,p((N=n(d))==null?void 0:N.description),1)])]),i("div",null,[e(D,{variant:"tonal",color:"info",onClick:o[0]||(o[0]=a=>m.value=!n(m))},{default:t(()=>o[4]||(o[4]=[V(" Editar ")])),_:1}),e(D,{variant:"tonal",color:"error",onClick:o[1]||(o[1]=a=>s.value=!n(s))},{default:t(()=>o[5]||(o[5]=[V(" Eliminar ")])),_:1})])]),e(w,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(h,{class:"mb-6"},{default:t(()=>[e(q,null,{title:t(()=>o[6]||(o[6]=[i("h5",{class:"text-h5"}," Propiedades del Proyecto ",-1)])),_:1}),e(A),e(n(ae),{headers:C,items:n(b),"item-value":"productName",class:"text-no-wrap"},{"item.code":t(({item:a})=>[i("span",null,p(a.code),1)]),"item.status":t(({item:a})=>[i("span",null,p(a.status),1)]),"item.base_price":t(({item:a})=>[i("span",null,"$ "+p(a.base_price),1)]),"item.percentaje_initial_fee":t(({item:a})=>[i("span",null,p(a.percentaje_initial_fee)+" %",1)]),bottom:t(()=>o[7]||(o[7]=[])),_:1},8,["items"]),e(A),e(k,null,{default:t(()=>[i("div",de,[i("table",ce,[i("tbody",null,[i("tr",null,[o[8]||(o[8]=i("td",{class:"text-high-emphasis font-weight-medium",width:"100px"}," Total: ",-1)),i("td",fe," $ "+p(z()),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{isDialogVisible:n(s),"onUpdate:isDialogVisible":o[2]||(o[2]=a=>S(s)?s.value=a:null),"confirmation-question":"Are you sure to cancel your Order?","cancel-msg":"Order cancelled!!","cancel-title":"Cancelled","confirm-msg":"Your order cancelled successfully.","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(se,{isDialogVisible:n(m),"onUpdate:isDialogVisible":o[3]||(o[3]=a=>S(m)?m.value=a:null),"project-data":n(u)},null,8,["isDialogVisible","project-data"])],64)}}};export{ot as default};
