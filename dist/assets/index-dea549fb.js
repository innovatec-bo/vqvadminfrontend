import{p as se,a as oe}from"./formatters-b3558c7d.js";import{_ as re}from"./AppTextField-fd887eae.js";import{_ as ie}from"./AppSelect-944f5a42.js";import{_ as ne}from"./AddNewUserDrawer-03f9b83d.js";import{p as ue}from"./paginationMeta-4ad053a4.js";import{u as ce}from"./useApi-1146fc3a.js";import{c as de}from"./createUrl-c033240c.js";import{$ as W}from"./api-5f66280e.js";import{V as M,a as k}from"./VRow-4792bff0.js";import{V as P}from"./VCard-ff22c2d7.js";import{V as S}from"./VCardText-38517f9e.js";import{V as A}from"./VAvatar-151a8e80.js";import{r as n,af as pe,a2 as O,a as F,o as v,c as z,d as o,b as t,e as a,n as s,a0 as p,F as me,i as fe,f as j,x as i,v as u,y as ve,$ as m,a4 as _,s as q}from"./index-dd6f5d6b.js";import{V as _e}from"./VSpacer-419036ea.js";import{V as Q}from"./VDivider-79190bcc.js";import{V as be}from"./VDataTableServer-a7c9d42b.js";import{V as xe}from"./VImg-22d3be73.js";import{V as Ve}from"./VChip-86bb6587.js";import{V as ge}from"./VMenu-a045c964.js";import{V as ye,a as L,b as B}from"./VList-b2fd5e55.js";import{V as he}from"./VPagination-078e6cdc.js";import"./helpers-61e4df1a.js";import"./form-4d2c098e.js";import"./VTextField-3c21b0bb.js";/* empty css                   */import"./VCounter-96e4f55f.js";import"./VField-c91a347a.js";import"./easing-9f15041e.js";import"./VInput-4eb21e29.js";import"./forwardRefs-8348545e.js";import"./VSelect-5cda818f.js";import"./dialog-transition-ab54f578.js";import"./VOverlay-a8d20f90.js";import"./lazy-844b9466.js";import"./scopeId-82f56c34.js";import"./VCheckboxBtn-1192d6b8.js";import"./VSelectionControl-102aa20b.js";import"./validators-dea6e3a5.js";import"./AppDrawerHeaderSection-a4bac30f.js";import"./vue3-perfect-scrollbar.esm-cff046a3.js";import"./VForm-3986666f.js";import"./VNavigationDrawer-cc94e185.js";import"./ssrBoot-c8ef671b.js";import"./index-9c720871.js";import"./constants-d5c22183.js";import"./VDataTable-a689f2b6.js";import"./VTable-3d0d69b0.js";import"./filter-8ce2a58c.js";const we={class:"d-flex mb-6"},ke={class:"d-flex justify-space-between"},Ue={class:"d-flex flex-column gap-y-1"},Ce={class:"text-body-1 text-medium-emphasis"},Pe={class:"text-h4"},Se={class:"text-sm"},Ae={class:"me-3 d-flex gap-3"},ze={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Le={style:{"inline-size":"10rem"}},Be={class:"d-flex align-center"},De={key:1},Te={class:"d-flex flex-column"},$e={class:"text-base"},Ne={class:"text-sm text-medium-emphasis"},Re={class:"d-flex align-center gap-4"},Ee={class:"text-capitalize"},Ie={class:"text-capitalize font-weight-medium"},We={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Me={class:"text-sm text-disabled mb-0"},Rt={__name:"index",async setup(Oe){let b,D;const x=n(""),V=n(),g=n(),y=n(),c=n(10),d=n(1),T=n(),$=n(),G=r=>{var l,f;d.value=r.page,T.value=(l=r.sortBy[0])==null?void 0:l.key,$.value=(f=r.sortBy[0])==null?void 0:f.order},H=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:N,execute:R}=([b,D]=pe(()=>ce(de("/apps/users",{query:{q:x,status:y,plan:g,role:V,itemsPerPage:c,page:d,sortBy:T,orderBy:$}}))),b=await b,D(),b),J=O(()=>N.value.users),h=O(()=>N.value.totalUsers),K=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],X=[{title:"Basic",value:"basic"},{title:"Company",value:"company"},{title:"Enterprise",value:"enterprise"},{title:"Team",value:"team"}],Y=[{title:"Pending",value:"pending"},{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],U=r=>{const l=r.toLowerCase();return l==="subscriber"?{color:"warning",icon:"tabler-circle-check"}:l==="author"?{color:"success",icon:"tabler-user"}:l==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:l==="editor"?{color:"info",icon:"tabler-edit"}:l==="admin"?{color:"secondary",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},Z=r=>{const l=r.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},w=n(!1),ee=async r=>{await W("/apps/users",{method:"POST",body:r}),R()},E=async r=>{await W(`/apps/users/${r}`,{method:"DELETE"}),R()},te=n([{title:"Session",value:"21,459",change:29,desc:"Total Users",icon:"tabler-user",iconColor:"primary"},{title:"Paid Users",value:"4,567",change:18,desc:"Last Week Analytics",icon:"tabler-user-plus",iconColor:"error"},{title:"Active Users",value:"19,860",change:-14,desc:"Last Week Analytics",icon:"tabler-user-check",iconColor:"success"},{title:"Pending Users",value:"237",change:42,desc:"Last Week Analytics",icon:"tabler-user-exclamation",iconColor:"warning"}]);return(r,l)=>{const f=ie,le=re,ae=F("RouterLink"),I=F("IconBtn");return v(),z("section",null,[o("div",we,[t(M,null,{default:a(()=>[(v(!0),z(me,null,fe(s(te),(e,C)=>(v(),j(k,{key:C,cols:"12",md:"3",sm:"6"},{default:a(()=>[t(P,null,{default:a(()=>[t(S,null,{default:a(()=>[o("div",ke,[o("div",Ue,[o("span",Ce,i(e.title),1),o("div",null,[o("h4",Pe,[u(i(e.value)+" ",1),o("span",{class:ve(["text-base",e.change>0?"text-success":"text-error"])},"("+i(("prefixWithPlus"in r?r.prefixWithPlus:s(se))(e.change))+"%)",3)])]),o("span",Se,i(e.desc),1)]),t(A,{color:e.iconColor,variant:"tonal",rounded:"",size:"38"},{default:a(()=>[t(m,{icon:e.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(P,{title:"Filters",class:"mb-6"},{default:a(()=>[t(S,null,{default:a(()=>[t(M,null,{default:a(()=>[t(k,{cols:"12",sm:"4"},{default:a(()=>[t(f,{modelValue:s(V),"onUpdate:modelValue":l[0]||(l[0]=e=>p(V)?V.value=e:null),label:"Select Role",placeholder:"Select Role",items:K,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(k,{cols:"12",sm:"4"},{default:a(()=>[t(f,{modelValue:s(g),"onUpdate:modelValue":l[1]||(l[1]=e=>p(g)?g.value=e:null),label:"Select Plan",placeholder:"Select Plan",items:X,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(k,{cols:"12",sm:"4"},{default:a(()=>[t(f,{modelValue:s(y),"onUpdate:modelValue":l[2]||(l[2]=e=>p(y)?y.value=e:null),label:"Select Status",placeholder:"Select Status",items:Y,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(S,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[o("div",Ae,[t(f,{"model-value":s(c),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=parseInt(e,10))},null,8,["model-value"])]),t(_e),o("div",ze,[o("div",Le,[t(le,{modelValue:s(x),"onUpdate:modelValue":l[4]||(l[4]=e=>p(x)?x.value=e:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),t(_,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:a(()=>l[10]||(l[10]=[u(" Export ")])),_:1}),t(_,{"prepend-icon":"tabler-plus",onClick:l[5]||(l[5]=e=>w.value=!0)},{default:a(()=>l[11]||(l[11]=[u(" Add New User ")])),_:1})])]),_:1}),t(Q),t(s(be),{"items-per-page":s(c),"onUpdate:itemsPerPage":l[7]||(l[7]=e=>p(c)?c.value=e:null),page:s(d),"onUpdate:page":l[8]||(l[8]=e=>p(d)?d.value=e:null),items:s(J),"items-length":s(h),headers:H,class:"text-no-wrap","onUpdate:options":G},{"item.user":a(({item:e})=>[o("div",Be,[t(A,{size:"34",variant:e.avatar?void 0:"tonal",color:e.avatar?void 0:U(e.role).color,class:"me-3"},{default:a(()=>[e.avatar?(v(),j(xe,{key:0,src:e.avatar},null,8,["src"])):(v(),z("span",De,i(("avatarText"in r?r.avatarText:s(oe))(e.fullName)),1))]),_:2},1032,["variant","color"]),o("div",Te,[o("h6",$e,[t(ae,{to:{name:"apps-user-view-id",params:{id:e.id}},class:"font-weight-medium text-link"},{default:a(()=>[u(i(e.fullName),1)]),_:2},1032,["to"])]),o("span",Ne,i(e.email),1)])])]),"item.role":a(({item:e})=>[o("div",Re,[t(A,{size:30,color:U(e.role).color,variant:"tonal"},{default:a(()=>[t(m,{size:20,icon:U(e.role).icon},null,8,["icon"])]),_:2},1032,["color"]),o("span",Ee,i(e.role),1)])]),"item.plan":a(({item:e})=>[o("span",Ie,i(e.currentPlan),1)]),"item.status":a(({item:e})=>[t(Ve,{color:Z(e.status),size:"small",label:"",class:"text-capitalize"},{default:a(()=>[u(i(e.status),1)]),_:2},1032,["color"])]),"item.actions":a(({item:e})=>[t(I,{onClick:C=>E(e.id)},{default:a(()=>[t(m,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(I,null,{default:a(()=>[t(m,{icon:"tabler-edit"})]),_:1}),t(_,{icon:"",variant:"text",size:"small",color:"medium-emphasis"},{default:a(()=>[t(m,{size:"24",icon:"tabler-dots-vertical"}),t(ge,{activator:"parent"},{default:a(()=>[t(ye,null,{default:a(()=>[t(L,{to:{name:"apps-user-view-id",params:{id:e.id}}},{prepend:a(()=>[t(m,{icon:"tabler-eye"})]),default:a(()=>[t(B,null,{default:a(()=>l[12]||(l[12]=[u("View")])),_:1})]),_:2},1032,["to"]),t(L,{link:""},{prepend:a(()=>[t(m,{icon:"tabler-pencil"})]),default:a(()=>[t(B,null,{default:a(()=>l[13]||(l[13]=[u("Edit")])),_:1})]),_:1}),t(L,{onClick:C=>E(e.id)},{prepend:a(()=>[t(m,{icon:"tabler-trash"})]),default:a(()=>[t(B,null,{default:a(()=>l[14]||(l[14]=[u("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[t(Q),o("div",We,[o("p",Me,i(s(ue)({page:s(d),itemsPerPage:s(c)},s(h))),1),t(he,{modelValue:s(d),"onUpdate:modelValue":l[6]||(l[6]=e=>p(d)?d.value=e:null),length:Math.ceil(s(h)/s(c)),"total-visible":r.$vuetify.display.xs?1:Math.ceil(s(h)/s(c))},{prev:a(e=>[t(_,q({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>l[15]||(l[15]=[u(" Previous ")])),_:2},1040)]),next:a(e=>[t(_,q({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>l[16]||(l[16]=[u(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(ne,{isDrawerOpen:s(w),"onUpdate:isDrawerOpen":l[9]||(l[9]=e=>p(w)?w.value=e:null),onUserData:ee},null,8,["isDrawerOpen"])])}}};export{Rt as default};
