import{a as L}from"./formatters-b3558c7d.js";import{ay as z,al as j,r as d,w as E,aj as R,a2 as F,az as q,a as G,o as p,f as y,e as s,b as e,n as a,a0 as f,c as _,d as c,$ as m,x as b,a3 as H,a4 as J,v as K,y as Q,an as U}from"./index-68e95a2c.js";import{_ as W}from"./MoreBtn-0d78a3d8.js";import{u as X,_ as Y,a as Z,b as tt,c as et,d as at}from"./ChatUserProfileSidebarContent-66276fdd.js";import{P as ot}from"./vue3-perfect-scrollbar.esm-75f5a343.js";import{u as st,a as lt,V as nt}from"./useResponsiveSidebar-e46dbf75.js";import{V as x}from"./VNavigationDrawer-17ce2fe4.js";import{V as rt}from"./VBadge-ba96b194.js";import{V as T}from"./VAvatar-d35978d1.js";import{V as it}from"./VImg-7128b667.js";import{V as ct}from"./VSpacer-3a89923d.js";import{V as ut}from"./VDivider-b944e9f8.js";import{V as mt}from"./VForm-e95e234f.js";import{V as dt}from"./VTextField-f4b3009a.js";import"./helpers-61e4df1a.js";import"./VMenu-4ce195c3.js";import"./VOverlay-fce03585.js";import"./easing-9f15041e.js";import"./lazy-9285f4e4.js";import"./scopeId-a32a1a23.js";import"./forwardRefs-8348545e.js";import"./dialog-transition-1a825243.js";import"./VList-09b889bd.js";import"./ssrBoot-dd1e392d.js";import"./AppTextarea-d2631f7a.js";import"./form-fba70313.js";/* empty css                   */import"./VCounter-5a821690.js";import"./VField-b22b7733.js";import"./VInput-e17576be.js";import"./api-8916a5a9.js";import"./index-9c720871.js";import"./constants-ca8ca994.js";import"./useApi-837e9ba9.js";import"./createUrl-f76aa6f5.js";import"./VRadioGroup-e753b674.js";import"./VSelectionControl-49b6a718.js";const pt={key:0,class:"d-flex flex-column h-100"},ft={class:"active-chat-header d-flex align-center text-medium-emphasis bg-surface"},vt={key:1},ht={class:"flex-grow-1 ms-4 overflow-hidden"},Ct={class:"text-h6 mb-0"},gt={class:"text-truncate mb-0 text-disabled"},Vt={class:"d-sm-flex align-center d-none"},yt={key:1,class:"d-flex h-100 align-center justify-center flex-column"},le={__name:"chat",setup(_t){z(n=>({"83e2e0c8":a(P)}));const g=j(),l=X(),{isLeftSidebarOpen:r}=st(g.smAndDown),{resolveAvatarBadgeVariant:w}=at(),V=d(),k=()=>{const n=V.value.$el||V.value;n.scrollTop=n.scrollHeight},C=d("");E(C,n=>l.fetchChats(),{immediate:!0});const A=()=>{g.mdAndUp.value||(r.value=!0)},u=d(""),$=async()=>{u.value&&(await l.sendMsg(u.value),u.value="",U(()=>{k()}))},N=async n=>{await l.getChat(n),u.value="";const t=l.chatsContacts.find(i=>i.id===n);t&&(t.chat.unseenMsgs=0),g.smAndDown.value&&(r.value=!1),U(()=>{k()})},v=d(!1),h=d(!1),B=d(),O=[{title:"View Contact",value:"View Contact"},{title:"Mute Notifications",value:"Mute Notifications"},{title:"Block Contact",value:"Block Contact"},{title:"Clear Chat",value:"Clear Chat"},{title:"Report",value:"Report"}],{name:M}=R(),P=F(()=>{var n;return((n=q[M.value].colors)==null?void 0:n.background)||"transparent"});return(n,t)=>{const i=G("IconBtn"),I=W;return p(),y(nt,{class:"chat-app-layout"},{default:s(()=>[e(x,{modelValue:a(v),"onUpdate:modelValue":t[1]||(t[1]=o=>f(v)?v.value=o:null),temporary:"",touchless:"",absolute:"",class:"user-profile-sidebar",location:"start",width:"370"},{default:s(()=>[e(Y,{onClose:t[0]||(t[0]=o=>v.value=!1)})]),_:1},8,["modelValue"]),e(x,{modelValue:a(h),"onUpdate:modelValue":t[3]||(t[3]=o=>f(h)?h.value=o:null),width:"374",absolute:"",temporary:"",location:"end",touchless:"",class:"active-chat-user-profile-sidebar"},{default:s(()=>[e(Z,{onClose:t[2]||(t[2]=o=>h.value=!1)})]),_:1},8,["modelValue"]),e(x,{modelValue:a(r),"onUpdate:modelValue":t[8]||(t[8]=o=>f(r)?r.value=o:null),absolute:"",touchless:"",location:"start",width:"370",temporary:n.$vuetify.display.smAndDown,class:"chat-list-sidebar",permanent:n.$vuetify.display.mdAndUp},{default:s(()=>[e(tt,{isDrawerOpen:a(r),"onUpdate:isDrawerOpen":t[4]||(t[4]=o=>f(r)?r.value=o:null),search:a(C),"onUpdate:search":t[5]||(t[5]=o=>f(C)?C.value=o:null),onOpenChatOfContact:N,onShowUserProfile:t[6]||(t[6]=o=>v.value=!0),onClose:t[7]||(t[7]=o=>r.value=!1)},null,8,["isDrawerOpen","search"])]),_:1},8,["modelValue","temporary","permanent"]),e(lt,{class:"chat-content-container"},{default:s(()=>[a(l).activeChat?(p(),_("div",pt,[c("div",ft,[e(i,{class:"d-md-none me-3",onClick:t[9]||(t[9]=o=>r.value=!0)},{default:s(()=>[e(m,{icon:"tabler-menu-2"})]),_:1}),c("div",{class:"d-flex align-center cursor-pointer",onClick:t[10]||(t[10]=o=>h.value=!0)},[e(rt,{dot:"",location:"bottom right","offset-x":"3","offset-y":"0",color:a(w)(a(l).activeChat.contact.status),bordered:""},{default:s(()=>[e(T,{size:"38",variant:a(l).activeChat.contact.avatar?void 0:"tonal",color:a(l).activeChat.contact.avatar?void 0:a(w)(a(l).activeChat.contact.status),class:"cursor-pointer"},{default:s(()=>[a(l).activeChat.contact.avatar?(p(),y(it,{key:0,src:a(l).activeChat.contact.avatar,alt:a(l).activeChat.contact.fullName},null,8,["src","alt"])):(p(),_("span",vt,b(("avatarText"in n?n.avatarText:a(L))(a(l).activeChat.contact.fullName)),1))]),_:1},8,["variant","color"])]),_:1},8,["color"]),c("div",ht,[c("p",Ct,b(a(l).activeChat.contact.fullName),1),c("p",gt,b(a(l).activeChat.contact.role),1)])]),e(ct),c("div",Vt,[e(i,null,{default:s(()=>[e(m,{icon:"tabler-phone-call"})]),_:1}),e(i,null,{default:s(()=>[e(m,{icon:"tabler-video"})]),_:1}),e(i,null,{default:s(()=>[e(m,{icon:"tabler-search"})]),_:1})]),e(I,{"menu-list":O,density:"comfortable",color:"undefined"})]),e(ut),e(a(ot),{ref_key:"chatLogPS",ref:V,tag:"ul",options:{wheelPropagation:!1},class:"flex-grow-1"},{default:s(()=>[e(et)]),_:1},512),e(mt,{class:"chat-log-message-form mb-5 mx-5",onSubmit:H($,["prevent"])},{default:s(()=>{var o;return[(p(),y(dt,{key:(o=a(l).activeChat)==null?void 0:o.contact.id,modelValue:a(u),"onUpdate:modelValue":t[12]||(t[12]=S=>f(u)?u.value=S:null),variant:"solo",class:"chat-message-input",placeholder:"Type your message...",density:"default",autofocus:""},{"append-inner":s(()=>[e(i,null,{default:s(()=>[e(m,{icon:"tabler-microphone"})]),_:1}),e(i,{class:"me-2",onClick:t[11]||(t[11]=S=>{var D;return(D=a(B))==null?void 0:D.click()})},{default:s(()=>[e(m,{icon:"tabler-photo"})]),_:1}),e(J,{onClick:$},{default:s(()=>t[13]||(t[13]=[K(" Send ")])),_:1})]),_:1},8,["modelValue"])),c("input",{ref_key:"refInputEl",ref:B,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:""},null,512)]}),_:1})])):(p(),_("div",yt,[e(T,{size:"109",class:"elevation-3 mb-6 bg-surface"},{default:s(()=>[e(m,{size:"50",class:"rounded-0 text-high-emphasis",icon:"tabler-message"})]),_:1}),c("p",{class:Q(["mb-0 px-6 py-1 font-weight-medium text-lg elevation-3 rounded-xl text-high-emphasis bg-surface",[{"cursor-pointer":n.$vuetify.display.smAndDown}]]),onClick:A}," Start Conversation ",2)]))]),_:1})]),_:1})}}};export{le as default};
