import{_ as ue}from"./AppTextField-d917fad4.js";import{_ as ve}from"./DialogCloseBtn-7cb7d94b.js";import{V as W,a as ge,b as _e}from"./VCard-ff5f3fa8.js";import{V as j}from"./VCardText-ce313ab2.js";import{V as Ve}from"./VForm-37b7dc5b.js";import{V as be}from"./VTable-ec2881be.js";import{V as O}from"./VCheckbox-e22c7487.js";import{r as c,a2 as G,w as q,o as g,f as R,e as a,b as e,v as x,x as b,d as l,n as o,a0 as w,c as C,F as E,i as Y,a4 as $,ah as z,ai as L,a7 as T,a5 as B,a6 as Q,ax as K,aw as te,cM as we,cN as ye,cO as xe,z as X,$ as N,af as Ue,a as se,s as le}from"./index-867472cb.js";import{V as he}from"./VDialog-786235c2.js";import{a as M,V as Z}from"./VRow-09934e5a.js";import{V as ee}from"./VSpacer-4d2658af.js";import{V as I}from"./VAvatar-3f0e771e.js";import{a as Pe}from"./formatters-b3558c7d.js";import{_ as Ce}from"./AppSelect-e2933069.js";import{_ as De}from"./AddNewUserDrawer-789413f1.js";import{p as ke}from"./paginationMeta-4ad053a4.js";import{u as Ae}from"./useApi-be96fbf6.js";import{c as Re}from"./createUrl-13d23691.js";import{$ as re}from"./api-4d610517.js";import{V as oe}from"./VDivider-ca26a171.js";import{V as Me}from"./VDataTableServer-cb178879.js";import{V as $e}from"./VImg-7bd01e65.js";import{V as Se}from"./VChip-22ddf76f.js";import{V as ze}from"./VPagination-99897bc6.js";import{V as Le}from"./VMenu-8a2e7a0d.js";import{V as Te,a as ne,b as ie}from"./VList-c71c7ea0.js";import"./form-fa82eff0.js";import"./VTextField-65628ede.js";/* empty css                   */import"./VCounter-7558d937.js";import"./VField-e71443ee.js";import"./easing-9f15041e.js";import"./VInput-7a7b8855.js";import"./forwardRefs-8348545e.js";import"./VCheckboxBtn-cb1ed921.js";import"./VSelectionControl-a40b6363.js";import"./VOverlay-0953ed77.js";import"./lazy-79bd0c11.js";import"./scopeId-a8f9fb54.js";import"./dialog-transition-d9930f64.js";import"./helpers-61e4df1a.js";import"./VSelect-7fbcd8a9.js";import"./validators-dea6e3a5.js";import"./AppDrawerHeaderSection-4f14fd63.js";import"./vue3-perfect-scrollbar.esm-5954e94f.js";import"./VNavigationDrawer-a9eb16ed.js";import"./ssrBoot-41b23f6d.js";import"./index-9c720871.js";import"./constants-8e30317b.js";import"./VDataTable-9eb6c871.js";import"./filter-307f7bc4.js";const Be={colspan:"3"},Ee={class:"d-flex justify-end"},Ne={class:"d-flex justify-end"},je={class:"d-flex justify-end"},Ie={class:"d-flex justify-end"},Fe={class:"d-flex align-center justify-center gap-3 mt-6"},Oe={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(F,{emit:U}){const p=F,_=U,u=c([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),V=c(!1),y=c(""),n=c(),f=G(()=>{let d=0;return u.value.forEach(r=>{Object.entries(r).forEach(([P,k])=>{P!=="name"&&k&&d++})}),d}),i=G(()=>f.value>0&&f.value<u.value.length*3);q(V,d=>{u.value=u.value.map(r=>({...r,read:d,write:d,create:d}))}),q(i,()=>{i.value||(V.value=!1)}),q(u,()=>{f.value===u.value.length*3&&(V.value=!0)},{deep:!0}),q(p,()=>{p.rolePermissions&&p.rolePermissions.permissions.length&&(y.value=p.rolePermissions.name,u.value=u.value.map(d=>{var P;const r=(P=p.rolePermissions)==null?void 0:P.permissions.find(k=>k.name===d.name);return r?{...d,...r}:d}))});const h=()=>{var r;const d={name:y.value,permissions:u.value};_("update:rolePermissions",d),_("update:isDialogVisible",!1),V.value=!1,(r=n.value)==null||r.reset()},D=()=>{var d;_("update:isDialogVisible",!1),V.value=!1,(d=n.value)==null||d.reset()};return(d,r)=>{const P=ve,k=ue;return g(),R(he,{width:d.$vuetify.display.smAndDown?"auto":900,"model-value":p.isDialogVisible,"onUpdate:modelValue":D},{default:a(()=>[e(P,{onClick:D}),e(W,{class:"pa-sm-8 pa-5"},{default:a(()=>[e(ge,{class:"text-center"},{default:a(()=>[e(_e,{class:"text-h3 mb-3"},{default:a(()=>[x(b(p.rolePermissions.name?"Edit":"Add New")+" Role ",1)]),_:1}),r[3]||(r[3]=l("p",{class:"text-base mb-0"}," Set Role Permissions ",-1))]),_:1}),e(j,{class:"mt-6"},{default:a(()=>[e(o(Ve),{ref_key:"refPermissionForm",ref:n},{default:a(()=>[e(k,{modelValue:o(y),"onUpdate:modelValue":r[0]||(r[0]=m=>w(y)?y.value=m:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[7]||(r[7]=l("h6",{class:"text-h4 mt-8 mb-3"}," Role Permissions ",-1)),e(be,{class:"permission-table text-no-wrap"},{default:a(()=>[l("tr",null,[r[4]||(r[4]=l("td",null," Administrator Access ",-1)),l("td",Be,[l("div",Ee,[e(O,{modelValue:o(V),"onUpdate:modelValue":r[1]||(r[1]=m=>w(V)?V.value=m:null),indeterminate:o(i),"onUpdate:indeterminate":r[2]||(r[2]=m=>w(i)?i.value=m:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(g(!0),C(E,null,Y(o(u),m=>(g(),C("tr",{key:m.name},[l("td",null,b(m.name),1),l("td",null,[l("div",Ne,[e(O,{modelValue:m.read,"onUpdate:modelValue":A=>m.read=A,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),l("td",null,[l("div",je,[e(O,{modelValue:m.write,"onUpdate:modelValue":A=>m.write=A,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),l("td",null,[l("div",Ie,[e(O,{modelValue:m.create,"onUpdate:modelValue":A=>m.create=A,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),l("div",Fe,[e($,{onClick:h},{default:a(()=>r[5]||(r[5]=[x(" Submit ")])),_:1}),e($,{color:"secondary",variant:"tonal",onClick:D},{default:a(()=>r[6]||(r[6]=[x(" Cancel ")])),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},qe="/assets/girl-using-mobile-26d497df.png",Qe={class:"v-avatar-group"},We={class:"text-h4"},Ge={class:"d-flex align-center"},He=["onClick"],Je=["src"],Ke={__name:"RoleCards",setup(F){const U=c([{role:"Administrator",users:[z,L,T,B],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[z,L,T,B,Q,K,te],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[z,L,T,B,Q],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[z,L,T,B,Q,K],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[z,L,T,B,Q,K,te,we,ye,xe],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),p=c(!1),_=c(),u=c(!1),V=y=>{p.value=!0,_.value=y};return(y,n)=>{const f=Oe;return g(),C(E,null,[e(Z,null,{default:a(()=>[(g(!0),C(E,null,Y(o(U),i=>(g(),R(M,{key:i.role,cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(W,null,{default:a(()=>[e(j,{class:"d-flex align-center pb-1"},{default:a(()=>[l("span",null,"Total "+b(i.users.length)+" users",1),e(ee),l("div",Qe,[(g(!0),C(E,null,Y(i.users,(h,D)=>(g(),C(E,{key:h},[i.users.length>4&&i.users.length!==4&&D<3?(g(),R(I,{key:0,size:"36",image:h},null,8,["image"])):X("",!0),i.users.length===4?(g(),R(I,{key:1,size:"36",image:h},null,8,["image"])):X("",!0)],64))),128)),i.users.length>4?(g(),R(I,{key:0,color:y.$vuetify.theme.current.dark?"#4A5072":"#f6f6f7"},{default:a(()=>[l("span",null," +"+b(i.users.length-3),1)]),_:2},1032,["color"])):X("",!0)])]),_:2},1024),e(j,{class:"pb-5"},{default:a(()=>[l("h4",We,b(i.role),1),l("div",Ge,[l("a",{href:"javascript:void(0)",onClick:h=>V(i.details)}," Edit Role ",8,He),e(ee),e($,{icon:"",color:"disabled",variant:"text",size:"x-small"},{default:a(()=>[e(N,{size:"24",icon:"tabler-copy"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(M,{cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(W,{class:"h-100",ripple:!1},{default:a(()=>[e(Z,{"no-gutters":"",class:"h-100"},{default:a(()=>[e(M,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:a(()=>[l("img",{width:"85",src:o(qe)},null,8,Je)]),_:1}),e(M,{cols:"7"},{default:a(()=>[e(j,{class:"d-flex flex-column align-end justify-end gap-2 h-100"},{default:a(()=>[e($,{onClick:n[0]||(n[0]=i=>u.value=!0)},{default:a(()=>n[4]||(n[4]=[x(" Add Role ")])),_:1}),n[5]||(n[5]=l("span",{class:"text-end"},"Add role, if it doesn't exist.",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{"is-dialog-visible":o(u),"onUpdate:isDialogVisible":n[1]||(n[1]=i=>w(u)?u.value=i:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(f,{"is-dialog-visible":o(p),"onUpdate:isDialogVisible":n[2]||(n[2]=i=>w(p)?p.value=i:null),"role-permissions":o(_),"onUpdate:rolePermissions":n[3]||(n[3]=i=>w(_)?_.value=i:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}};const Xe={class:"d-flex align-center flex-wrap gap-4"},Ye={class:"d-flex align-center"},Ze={key:1},ea={class:"d-flex flex-column"},aa={class:"text-body-1 font-weight-medium"},ta={class:"text-sm text-disabled"},sa={class:"d-flex align-center gap-4"},la={class:"text-capitalize"},ra={class:"text-capitalize font-weight-medium"},oa={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},na={class:"text-sm text-disabled mb-0"},ia={__name:"UserList",async setup(F){let U,p;const _=c(""),u=c(),V=c(),y=c(),n=c(10),f=c(1),i=c(),h=c(),D=v=>{var s,S;f.value=v.page,i.value=(s=v.sortBy[0])==null?void 0:s.key,h.value=(S=v.sortBy[0])==null?void 0:S.order},d=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:r,execute:P}=([U,p]=Ue(()=>Ae(Re("/apps/users",{query:{q:_,status:y,plan:V,role:u,itemsPerPage:n,page:f,sortBy:i,orderBy:h}}))),U=await U,p(),U),k=G(()=>r.value.users),m=G(()=>r.value.totalUsers),A=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],H=v=>{const s=v.toLowerCase();return s==="subscriber"?{color:"primary",icon:"tabler-user"}:s==="author"?{color:"warning",icon:"tabler-settings"}:s==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:s==="editor"?{color:"info",icon:"tabler-pencil"}:s==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},de=v=>{const s=v.toLowerCase();return s==="pending"?"warning":s==="active"?"success":s==="inactive"?"secondary":"primary"},J=c(!1),me=async v=>{await re("/apps/users",{method:"POST",body:v}),P()},pe=async v=>{await re(`/apps/users/${v}`,{method:"DELETE"}),P()};return(v,s)=>{const S=Ce,ce=ue,fe=se("RouterLink"),ae=se("IconBtn");return g(),C("section",null,[e(W,null,{default:a(()=>[e(j,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(S,{"model-value":o(n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5rem"},"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=parseInt(t,10))},null,8,["model-value"]),e(ee),l("div",Xe,[e(ce,{modelValue:o(_),"onUpdate:modelValue":s[1]||(s[1]=t=>w(_)?_.value=t:null),placeholder:"Search User",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"]),e(S,{modelValue:o(u),"onUpdate:modelValue":s[2]||(s[2]=t=>w(u)?u.value=t:null),placeholder:"Select Role",items:A,density:"compact",clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue"])])]),_:1}),e(oe),e(o(Me),{"items-per-page":o(n),"onUpdate:itemsPerPage":s[4]||(s[4]=t=>w(n)?n.value=t:null),page:o(f),"onUpdate:page":s[5]||(s[5]=t=>w(f)?f.value=t:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:o(k),"items-length":o(m),headers:d,class:"text-no-wrap","onUpdate:options":D},{"item.user":a(({item:t})=>[l("div",Ye,[e(I,{size:"38",variant:t.avatar?void 0:"tonal",color:t.avatar?void 0:H(t.role).color,class:"me-3"},{default:a(()=>[t.avatar?(g(),R($e,{key:0,src:t.avatar},null,8,["src"])):(g(),C("span",Ze,b(("avatarText"in v?v.avatarText:o(Pe))(t.fullName)),1))]),_:2},1032,["variant","color"]),l("div",ea,[l("h6",aa,[e(fe,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"user-list-name"},{default:a(()=>[x(b(t.fullName),1)]),_:2},1032,["to"])]),l("span",ta,b(t.email),1)])])]),"item.role":a(({item:t})=>[l("div",sa,[e(I,{size:"30",variant:"tonal",color:H(t.role).color},{default:a(()=>[e(N,{size:"20",icon:H(t.role).icon},null,8,["icon"])]),_:2},1032,["color"]),l("span",la,b(t.role),1)])]),"item.plan":a(({item:t})=>[l("span",ra,b(t.currentPlan),1)]),"item.status":a(({item:t})=>[e(Se,{label:"",size:"small",class:"text-capitalize",color:de(t.status)},{default:a(()=>[x(b(t.status),1)]),_:2},1032,["color"])]),bottom:a(()=>[e(oe),l("div",oa,[l("p",na,b(o(ke)({page:o(f),itemsPerPage:o(n)},o(m))),1),e(ze,{modelValue:o(f),"onUpdate:modelValue":s[3]||(s[3]=t=>w(f)?f.value=t:null),length:Math.ceil(o(m)/o(n)),"total-visible":v.$vuetify.display.xs?1:Math.ceil(o(m)/o(n))},{prev:a(t=>[e($,le({variant:"tonal",color:"default"},t,{icon:!1}),{default:a(()=>s[7]||(s[7]=[x(" Previous ")])),_:2},1040)]),next:a(t=>[e($,le({variant:"tonal",color:"default"},t,{icon:!1}),{default:a(()=>s[8]||(s[8]=[x(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":a(({item:t})=>[e(ae,null,{default:a(()=>[e(N,{icon:"tabler-edit"})]),_:1}),e(ae,{onClick:ua=>pe(t.id)},{default:a(()=>[e(N,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e($,{icon:"",color:"medium-emphasis",density:"comfortable",variant:"text"},{default:a(()=>[e(N,{size:"24",icon:"tabler-dots-vertical"}),e(Le,{activator:"parent"},{default:a(()=>[e(Te,null,{default:a(()=>[e(ne,{to:{name:"apps-user-view-id",params:{id:t.id}}},{default:a(()=>[e(ie,null,{default:a(()=>s[9]||(s[9]=[x("View")])),_:1})]),_:2},1032,["to"]),e(ne,{link:""},{default:a(()=>[e(ie,null,{default:a(()=>s[10]||(s[10]=[x("Suspend")])),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(De,{isDrawerOpen:o(J),"onUpdate:isDrawerOpen":s[6]||(s[6]=t=>w(J)?J.value=t:null),onUserData:me},null,8,["isDrawerOpen"])])}}},nt={__name:"index",setup(F){return(U,p)=>(g(),R(Z,null,{default:a(()=>[e(M,{cols:"12"},{default:a(()=>p[0]||(p[0]=[l("h4",{class:"text-h4 mb-6"}," Roles List ",-1),l("p",{class:"mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1}),e(M,{cols:"12"},{default:a(()=>[e(Ke)]),_:1}),e(M,{cols:"12"},{default:a(()=>[e(ia)]),_:1})]),_:1}))}};export{nt as default};
