import{_ as L}from"./AppTextField-5b91e28f.js";import{_ as O}from"./AppSelect-72ad6a0b.js";import{_ as X}from"./DialogCloseBtn-aee4a6f0.js";import{r as v,w as j,o as y,f as k,e as o,b as t,a3 as Y,n as e,z as x,d as c,x as A,a4 as P,v as b,a as z,c as S,a0 as g,s as M,$ as B}from"./index-1f8ac145.js";import{u as q}from"./useProperty-57c3ffea.js";import{V as F}from"./VCardText-f1e5da1f.js";import{V as Z}from"./VForm-58dffb8a.js";import{V as ee}from"./VRow-224b2be9.js";import{V as m}from"./VCol-e8cfa245.js";import{V as te}from"./VCheckbox-f10f860b.js";import{V as G}from"./VCard-5d975838.js";import{V as oe}from"./VDialog-80327180.js";import{f as le}from"./currencyFormatter-92ad4b3c.js";import{p as ae}from"./paginationMeta-4ad053a4.js";import{l as re}from"./lodash-0949f84a.js";import{V as ie}from"./VSpacer-631a3383.js";import{V as h}from"./VDivider-3b83f292.js";import{V as se}from"./VDataTableServer-6fd79e86.js";import{V as ne}from"./VChip-03b5870e.js";import{V as pe}from"./VPagination-ea99c205.js";import"./form-c4d10901.js";import"./VTextField-a91ea6f9.js";/* empty css                   */import"./VCounter-40b31326.js";import"./VImg-91dd4a06.js";import"./VField-514fd1d6.js";import"./easing-9f15041e.js";import"./VInput-4cf5e341.js";import"./forwardRefs-8348545e.js";import"./VSelect-1d025369.js";import"./VList-2c8dc42c.js";import"./ssrBoot-84c20884.js";import"./VAvatar-6f812fc7.js";import"./dialog-transition-874ebac1.js";import"./VMenu-7ac10451.js";import"./VOverlay-2f0ec5af.js";import"./lazy-58936545.js";import"./scopeId-e202e5f2.js";import"./VCheckboxBtn-81f52be1.js";import"./VSelectionControl-47a6cc9f.js";import"./api-00241657.js";import"./index-9c720871.js";import"./constants-f448659b.js";import"./notifications-cae4d01c.js";import"./VDataTable-d5409e6b.js";import"./VTable-159816bd.js";import"./filter-555b6e34.js";const de={class:"d-flex items-center gap-x-2 py-7 px-1"},ue={class:"my-2"},me={__name:"EditPropertyDialog",props:{isDialogVisible:{type:Boolean,required:!0},property:{type:Object,required:!0}},emits:["update:isDialogVisible","propertyUpdated"],setup(I,{emit:T}){const E=I,V=T,D=v([{value:"DEPARTAMENT",title:"Departamento"},{value:"PARK",title:"Parqueo"}]),{loadingProperty:_,editProperty:U}=q(),l=v({...E.property}),n=()=>{V("update:isDialogVisible",!1)},d=async()=>{(await U(l.value)).success&&V("propertyUpdated",l.value),n()};return j(()=>E.property,f=>{l.value={...f}}),(f,r)=>{const C=X,u=L,w=O;return y(),k(oe,{"max-width":"800","model-value":E.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":n},{default:o(()=>[t(C,{onClick:n}),t(G,{title:"Editar propiedad",class:"pa-sm-8 pa-5"},{default:o(()=>[t(F,null,{default:o(()=>[t(Z,{onSubmit:Y(d,["prevent"])},{default:o(()=>[t(ee,{dense:""},{default:o(()=>[t(m,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:e(l).code,"onUpdate:modelValue":r[0]||(r[0]=s=>e(l).code=s),label:"Código",placeholder:"A1",outlined:""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>[t(w,{modelValue:e(l).property_type,"onUpdate:modelValue":r[1]||(r[1]=s=>e(l).property_type=s),label:"Tipo de propiedad",placeholder:"Seleccione un tipo",items:e(D),outlined:""},null,8,["modelValue","items"])]),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:e(l).base_price,"onUpdate:modelValue":r[2]||(r[2]=s=>e(l).base_price=s),label:"Precio de la propiedad",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:e(l).percentage_initial_fee,"onUpdate:modelValue":r[3]||(r[3]=s=>e(l).percentage_initial_fee=s),label:"% Anticipo",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12"},{default:o(()=>[t(u,{modelValue:e(l).title,"onUpdate:modelValue":r[4]||(r[4]=s=>e(l).title=s),label:"Título comercial",placeholder:"Título comercial",outlined:""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:e(l).surface,"onUpdate:modelValue":r[5]||(r[5]=s=>e(l).surface=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1}),e(l).property_type=="DEPARTAMENT"?(y(),k(m,{key:0,cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:e(l).departament.number_bedrooms,"onUpdate:modelValue":r[6]||(r[6]=s=>e(l).departament.number_bedrooms=s),label:"Numero de habitaciones",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):x("",!0),e(l).property_type=="DEPARTAMENT"?(y(),k(m,{key:1,cols:"12",md:"6"},{default:o(()=>[t(u,{modelValue:e(l).departament.number_bathrooms,"onUpdate:modelValue":r[7]||(r[7]=s=>e(l).departament.number_bathrooms=s),label:"Numero de baños",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):x("",!0),e(l).property_type=="DEPARTAMENT"?(y(),k(m,{key:2,cols:"12",md:"3"},{default:o(()=>[c("div",de,[c("span",ue,A(e(l).departament.is_balcony?"Con Terraza":"Sin Terraza"),1),t(te,{modelValue:e(l).departament.is_balcony,"onUpdate:modelValue":r[8]||(r[8]=s=>e(l).departament.is_balcony=s),"true-value":1,"false-value":0},null,8,["modelValue"])])]),_:1})):x("",!0),e(l).property_type=="DEPARTAMENT"&&e(l).departament.is_balcony?(y(),k(m,{key:3,cols:"12",md:"3"},{default:o(()=>[t(u,{modelValue:e(l).departament.surface_balcony,"onUpdate:modelValue":r[9]||(r[9]=s=>e(l).departament.surface_balcony=s),label:"Superficie",placeholder:"...",outlined:""},null,8,["modelValue"])]),_:1})):x("",!0),t(m,{cols:"12",class:"text-right mt-6"},{default:o(()=>[t(P,{color:"secondary",variant:"tonal",class:"me-3",onClick:n},{default:o(()=>r[10]||(r[10]=[b(" Cancelar ")])),_:1}),t(P,{type:"submit",color:"primary",class:"me-3",disabled:e(_),loading:e(_)},{default:o(()=>r[11]||(r[11]=[b(" Guardar ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const ce={class:"text-body-1"},fe={class:"d-flex align-center flex-wrap gap-4"},ye={class:"d-flex align-center gap-4"},Ve={class:"text-capitalize"},_e={key:0,class:"text-capitalize font-weight-medium"},be={key:1,class:"text-capitalize font-weight-medium"},ge={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ve={class:"text-sm text-disabled mb-0"},ft={__name:"list",setup(I){const{allProperty:T,exportPropertyExcel:E,properties:V,property:D,totalProperties:_,removeProperty:U}=q(),l=v(),n=v(20),d=v(1),f=v(!1),r=p=>{d.value=p.page,n.value=p.itemsPerPage},C=[{title:"Titulo",key:"title"},{title:"Code",key:"code"},{title:"Precio",key:"base_price"},{title:"Tipo de Propiedad",key:"typeProperty"},{title:"Proyecto",key:"project"},{title:"Estado",key:"status"},{title:"Accion",key:"actions",sortable:!1}],u=()=>{T({itemsPerPage:n.value,page:d.value,search:l.value})},w=re.debounce(u,300);j([l,n,d],w,{immediate:!0});const s=p=>{switch(p){case"AVAILABLE":return{color:"success",text:"DISPONIBLE"};case"PRESALE":return{color:"warning",text:"RESERVADO"};case"SALE":return{color:"error",text:"VENDIDO"};case"DELIVERED":return{color:"error",text:"ENTREGADO"};default:return{color:"primary",text:"NOTHING"}}},H=async p=>{await U(p),u()},K=async p=>{f.value=!0,D.value={...p}},Q=p=>{const i=V.value.findIndex(N=>N.id===p.id);i!==-1&&(V.value[i]={...p})},J=async()=>{await E()};return(p,i)=>{const N=L,$=z("RouterLink"),R=z("IconBtn");return y(),S("section",null,[t(G,null,{default:o(()=>[t(F,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[c("div",null,[i[6]||(i[6]=c("h5",{class:"text-h5"}," Mis Propiedades ",-1)),c("div",ce," En total son "+A(e(_))+" Propiedades. ",1)]),t(ie),c("div",fe,[t(O,{modelValue:e(n),"onUpdate:modelValue":i[0]||(i[0]=a=>g(n)?n.value=a:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),t(N,{modelValue:e(l),"onUpdate:modelValue":i[1]||(i[1]=a=>g(l)?l.value=a:null),placeholder:"Buscar...",density:"compact",style:{"inline-size":"12.5rem"}},null,8,["modelValue"]),t(P,{"prepend-icon":"tabler-screen-share",variant:"tonal",color:"secondary",onClick:J},{default:o(()=>i[7]||(i[7]=[b(" Export ")])),_:1}),t($,{to:{name:"realty-property-register"}},{default:o(()=>[t(P,null,{default:o(()=>i[8]||(i[8]=[b(" Agregar Propiedad ")])),_:1})]),_:1})])]),_:1}),t(h),t(e(se),{"items-per-page":e(n),"onUpdate:itemsPerPage":i[3]||(i[3]=a=>g(n)?n.value=a:null),page:e(d),"onUpdate:page":i[4]||(i[4]=a=>g(d)?d.value=a:null),items:e(V),headers:C,"items-length":e(n).value===-1?e(V).value.length:e(_).valueOf,class:"text-no-wrap","onUpdate:options":r},{"item.base_price":o(({item:a})=>[c("div",ye,[c("span",Ve,A(e(le)(a.base_price)),1)])]),"item.typeProperty":o(({item:a})=>[a.parking?(y(),S("span",_e,"Parqueo")):x("",!0),a.departament?(y(),S("span",be,"Departamento")):x("",!0)]),"item.status":o(({item:a})=>[t(ne,{label:"",size:"small",class:"text-capitalize",color:s(a.status).color},{default:o(()=>[b(A(s(a.status).text),1)]),_:2},1032,["color"])]),bottom:o(()=>[t(h),c("div",ge,[c("p",ve,A(e(ae)({page:e(d),itemsPerPage:e(n)},e(_))),1),t(pe,{modelValue:e(d),"onUpdate:modelValue":i[2]||(i[2]=a=>g(d)?d.value=a:null),length:Math.ceil(e(_)/e(n)),"total-visible":p.$vuetify.display.xs?1:7},{prev:o(a=>[t(P,M({variant:"tonal",color:"default"},a,{icon:!1}),{default:o(()=>i[9]||(i[9]=[b(" Anterior ")])),_:2},1040)]),next:o(a=>[t(P,M({variant:"tonal",color:"default"},a,{icon:!1}),{default:o(()=>i[10]||(i[10]=[b(" Siguiente ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":o(({item:a})=>[t(R,null,{default:o(()=>[t($,{to:{name:"realty-property-id",params:{id:a.id}}},{default:o(()=>[t(B,{icon:"tabler-eye"})]),_:2},1032,["to"])]),_:2},1024),t(R,null,{default:o(()=>[t(B,{icon:"tabler-edit",onClick:W=>K(a)},null,8,["onClick"])]),_:2},1024),t(R,{onClick:W=>H(a.id)},{default:o(()=>[t(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),t(me,{"is-dialog-visible":e(f),"onUpdate:isDialogVisible":i[5]||(i[5]=a=>g(f)?f.value=a:null),property:e(D),onPropertyUpdated:Q},null,8,["is-dialog-visible","property"])])}}};export{ft as default};
