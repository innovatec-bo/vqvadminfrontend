import{$ as r}from"./api-7cf82488.js";import{a as p,b as y,d as m,s as v}from"./notifications-81bc0416.js";import{r as n,k as w,a2 as u}from"./index-fa985de0.js";const Q=async e=>await r("/quote/register",{method:"POST",body:e}),b=async(e,t)=>await r(`/quote/${e}/change_status`,{method:"PATCH",body:t}),q=async e=>await r("quote/list-paginated",{method:"GET",params:e}),S=async e=>await r(`/quote/${e}`,{method:"GET"});function $(){const e=n(!1),t=n(null),c=n([]),i=w(),l=n(0),d=async o=>{try{const a=await S(o);t.value=a.data,console.log(t.value)}catch(a){console.error(a)}},g=async o=>{e.value=!0;try{const a=await Q(o);console.log(a),t.value=a.data,p("¡Cotización registrada exitosamente!","La cotización ha sido generada y registrada en el sistema. ¡Buen trabajo!"),i.push(`/quote/${t.value.id}`)}catch(a){return a.response&&a.response.status==422?(y("Validación fallida","Faltan datos por rellenar"),{success:!1,message:"Validación fallida"}):(m("Advertencia","Hubo un problema al registrar la Cotizacion. Contactese con Soporte."),{success:!1,message:"Error al Registrar"})}finally{e.value=!1}},f=async(o,a)=>{e.value=!0;try{const s=await b(o,a);t.value=s.data,console.log(s),v("¡El estado de la cotización ha cambiado! ","La cotización ha pasado a un nuevo estado")}catch(s){console.log(s)}finally{e.value=!1}},h=async o=>{e.value=!0;try{const a=await q(o);console.log(a),c.value=a.data.data,l.value=a.data.total}catch(a){console.log(a)}finally{e.value=!1}};return{changeStatusQuotes:f,getQuotebyId:d,loadingQuote:e,quote:t,quotes:u(()=>c.value),totalQuotes:u(()=>l.value),generateQuote:g,allQuotePaginate:h}}export{$ as u};
