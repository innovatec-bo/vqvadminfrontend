import{$ as m}from"./api-5f66280e.js";import{a as r,s as f}from"./notifications-73ea9381.js";import{r as t,k as v,a2 as i}from"./index-dd6f5d6b.js";const h=async s=>await m("/customer/register",{method:"POST",body:s}),y=async s=>await m("customer/list-paginated",{method:"GET",params:s});function E(){const s=t(!1),a=t(null),n=t(null),l=t([]),c=t(0),p=v(),g=async o=>{if(!o.name||!o.phone){r("Falta Informacion","El nombre y el celular son obligatorios");return}s.value=!0,a.value=null;try{const e={name:o.name,phone:o.phone,cod_phone:o.countryCode.replace(/\+/g,""),description:o.description};console.log(e);const u=await h(e);console.log("Respuesta del servidor:",u),f("Registro Exitoso","Se acaba de registrar un nuevo cliente con Exito"),n.value=u.data,p.push("/customers/listCustomers")}catch(e){console.log(e),e.response&&e.response.status==422&&r("Falta Informacion","El nombre y el celular son obligatorios"),e.response&&e.response.status==409&&r("Advertencia",e.response._data.message),a.value=e.message}finally{s.value=!1}},d=async o=>{try{const e=await y(o);console.log(e),l.value=e.data.data,c.value=e.data.total}catch(e){console.log(e)}};return{loading:s,error:a,customer:n,customers:i(()=>l.value),totalCustomers:i(()=>c.value),addCustomer:g,allCustomerPaginate:d}}export{E as u};
