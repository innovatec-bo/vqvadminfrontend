import{f as L}from"./currencyFormatter-92ad4b3c.js";import{_ as G}from"./AppTextField-d2f8c525.js";import{_ as H}from"./AppSelect-a4467acc.js";import{u as q}from"./useQuote-9f414e66.js";import{_ as J}from"./ECommerceAddCustomerDrawer-2c9551a0.js";import{p as K}from"./paginationMeta-4ad053a4.js";import{l as W}from"./lodash-0d57017f.js";import{r as u,ac as X,w as Y,a as D,o as P,c as A,b as a,e as s,n as o,a0 as d,d as n,f as Z,v as _,a4 as g,z as ee,F as te,i as oe,x as m,$ as ae,s as R,H as C}from"./index-91fc7b83.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import{V as le}from"./VCard-d69e2b69.js";import{V as ie}from"./VCardText-cdc474bc.js";import{V as E}from"./VDivider-f14f6752.js";import{V as re}from"./VDataTableServer-9fe4b494.js";import{V as N}from"./VCheckbox-c3c00cb6.js";import{V as k}from"./VTooltip-b6ad0ca1.js";import{V as ne}from"./VPagination-37f481a4.js";import"./form-aa7af15c.js";import"./VTextField-518772eb.js";/* empty css                   */import"./VCounter-aa684c90.js";import"./VImg-0992e9a5.js";import"./VField-ab0e16b7.js";import"./easing-9f15041e.js";import"./VInput-7d26dc15.js";import"./forwardRefs-8348545e.js";import"./VSelect-b5095157.js";import"./VList-359f6b6c.js";import"./ssrBoot-0111bd94.js";import"./VAvatar-57b03a1d.js";import"./dialog-transition-2d773890.js";import"./VMenu-5551750e.js";import"./VOverlay-c3990985.js";import"./lazy-d8ba9342.js";import"./scopeId-df1ecb4b.js";import"./VCheckboxBtn-1dd3736a.js";import"./VSelectionControl-c4d8b087.js";import"./VChip-95d52534.js";import"./api-bc262951.js";import"./index-9c720871.js";import"./constants-1eb97e20.js";import"./notifications-cae4d01c.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./AppDrawerHeaderSection-b193cc42.js";import"./VSpacer-a8d03ec4.js";import"./vue3-perfect-scrollbar.esm-aa8ff2c0.js";import"./VForm-2e8507e6.js";import"./VRow-41f80580.js";import"./VCol-803606dc.js";import"./VSwitch-0b1e6999.js";import"./VNavigationDrawer-4ef72b93.js";import"./VDataTable-dc47138c.js";import"./VTable-dd16acc6.js";import"./filter-29c3e10b.js";const pe={APPROVED:{value:"APPROVED",title:"Aprobado"},NOT_APPROVED:{value:"NOT_APPROVED",title:"No Aprobado"},TODO:{value:"TODOS",title:"Todos"}};const me={class:"my-2"},ue={class:"d-flex justify-space-between flex-wrap gap-y-4"},de={class:"d-flex flex-row gap-4 align-center flex-wrap"},ce={class:"d-flex gap-x-2"},fe={class:"d-flex items-center gap-x-2"},_e={class:"my-2"},Ve={class:"d-flex items-center gap-x-2"},ve={class:"my-2"},Pe={class:"d-flex items-center gap-x-2"},ge={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},xe={class:"text-sm text-disabled mb-0"},Ae={__name:"listQoute",setup(Oe){const V=u(""),x=u(!1),{allQuotePaginate:w,exportQuoteExcel:T,totalQuotes:v,quotes:O,changeStatusQuotes:Q,changeStatusQuotesCustomer:h}=q(),b=X("userAbilityRules").value,r=u(10),c=u(),p=u(1);u(),u();const S=[{title:"Nombre",key:"social_reason"},{title:"Propiedades",key:"properties"},{title:"Celular",key:"phone"},{title:"Total",key:"amount"},{title:"Gerencia",key:"status"},{title:"Cliente",key:"status_customer"},{title:"Accion",key:"action"}],U=l=>{p.value=l.page,c.value=l.status},$=async(l,t)=>{const f=t==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${l} marcado como: ${t}`),await Q(l,{status:f}),C()},B=async()=>{await T()},z=async(l,t)=>{const f=t==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${l} marcado como: ${t}`),await h(l,{status:f}),C()},M=()=>{w({page:p.value,itemsPerPage:r.value,status:c.value,search:V.value}),console.log(O)},j=W.debounce(M,300);return Y([V,r,p,c],j,{immediate:!0}),(l,t)=>{const f=H,I=G,y=D("RouterLink"),F=D("IconBtn");return P(),A("div",null,[a(le,{title:"Lista de Cotizaciones"},{default:s(()=>[a(ie,null,{default:s(()=>[n("div",me,[a(f,{modelValue:o(c),"onUpdate:modelValue":t[0]||(t[0]=e=>d(c)?c.value=e:null),label:"Estado de aprobaciÃ³n del cliente",placeholder:"Seleccione estado",style:{"max-inline-size":"200px","min-inline-size":"200px"},items:Object.values(o(pe))},null,8,["modelValue","items"])]),n("div",ue,[a(I,{modelValue:o(V),"onUpdate:modelValue":t[1]||(t[1]=e=>d(V)?V.value=e:null),style:{"max-inline-size":"500px","min-inline-size":"500px"},placeholder:"Buscar por Nombre, Numero, Correo",density:"compact"},null,8,["modelValue"]),n("div",de,[a(f,{modelValue:o(r),"onUpdate:modelValue":t[2]||(t[2]=e=>d(r)?r.value=e:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),o(b).some(e=>e.action==="manage"&&e.subject==="ADMINISTRADOR")?(P(),Z(g,{key:0,"prepend-icon":"tabler-screen-share",variant:"tonal",color:"secondary",onClick:B},{default:s(()=>t[7]||(t[7]=[_(" Export ")])),_:1})):ee("",!0),a(y,{to:{name:"quote-add-quote"},class:"text-white"},{default:s(()=>[a(g,{"prepend-icon":"tabler-plus"},{default:s(()=>t[8]||(t[8]=[_(" Registrar Cotizacion ")])),_:1})]),_:1})])])]),_:1}),a(E),a(o(re),{"items-per-page":o(r),"onUpdate:itemsPerPage":t[4]||(t[4]=e=>d(r)?r.value=e:null),page:o(p),"onUpdate:page":t[5]||(t[5]=e=>d(p)?p.value=e:null),items:o(O),headers:S,"items-length":o(v),class:"text-no-wrap","onUpdate:options":U},{"item.properties":s(({item:e})=>[(P(!0),A(te,null,oe(e.properties,i=>(P(),A("div",{key:i.id,class:"d-flex gap-x-2"},m(i.title)+" | "+m(i.code),1))),128))]),"item.amount":s(({item:e})=>[n("div",ce,m(("formatCurrency"in l?l.formatCurrency:o(L))(e.amount)),1)]),"item.status":s(({item:e})=>[n("div",fe,[n("span",_e,m(e.status==="APPROVED"?"Aprobado":"No Aprobado"),1),a(N,{modelValue:e.status,"onUpdate:modelValue":i=>e.status=i,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:!o(b).some(i=>i.action==="manage"&&i.subject==="ADMINISTRADOR"),onClick:i=>$(e.id,e.status)},{default:s(()=>[a(k,{activator:"parent",location:"top"},{default:s(()=>[_(m(e.status=="NOT_APPROVED"?"No aprobado por gerencia":"Aprobado por Gerencia"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onClick"])])]),"item.status_customer":s(({item:e})=>[n("div",Ve,[n("span",ve,m(e.status_customer==="APPROVED"?"Aprobado":"No Aprobado"),1),a(N,{modelValue:e.status_customer,"onUpdate:modelValue":i=>e.status_customer=i,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:i=>z(e.id,e.status_customer)},{default:s(()=>[a(k,{activator:"parent",location:"top"},{default:s(()=>[_(m(e.status_customer=="NOT_APPROVED"?"No aprobado por Cliente ":"Aprobado por Cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])])]),"item.action":s(({item:e})=>[n("div",Pe,[a(y,{to:{name:"quote-id",params:{id:e.id}}},{default:s(()=>[a(F,null,{default:s(()=>[a(ae,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])])]),bottom:s(()=>[a(E),n("div",ge,[n("p",xe,m(o(K)({page:o(p),itemsPerPage:o(r)},o(v))),1),a(ne,{modelValue:o(p),"onUpdate:modelValue":t[3]||(t[3]=e=>d(p)?p.value=e:null),length:Math.ceil(o(v)/o(r)),"total-visible":l.$vuetify.display.xs?1:Math.min(Math.ceil(o(v)/o(r)),5)},{prev:s(e=>[a(g,R({variant:"tonal",color:"default"},e,{icon:!1}),{default:s(()=>t[9]||(t[9]=[_(" Previous ")])),_:2},1040)]),next:s(e=>[a(g,R({variant:"tonal",color:"default"},e,{icon:!1}),{default:s(()=>t[10]||(t[10]=[_(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),a(J,{"is-drawer-open":o(x),"onUpdate:isDrawerOpen":t[6]||(t[6]=e=>d(x)?x.value=e:null)},null,8,["is-drawer-open"])])}}},bt=se(Ae,[["__scopeId","data-v-0caddf34"]]);export{bt as default};
