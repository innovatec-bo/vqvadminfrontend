import{f as F}from"./currencyFormatter-92ad4b3c.js";import{_ as I}from"./AppTextField-a30fbcb8.js";import{_ as L}from"./AppSelect-848fd71b.js";import{u as G}from"./useQuote-55713a73.js";import{_ as H}from"./ECommerceAddCustomerDrawer-11b37563.js";import{p as q}from"./paginationMeta-4ad053a4.js";import{l as J}from"./lodash-8a6ce57c.js";import{r as u,ac as K,w as W,a as y,o as x,c as b,b as o,e as a,n as s,a0 as d,d as n,a4 as P,v as f,F as X,i as Y,x as m,$ as Z,s as D,H as R}from"./index-b40b785d.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as te}from"./VCard-2ad73a87.js";import{V as oe}from"./VCardText-3fc39e2b.js";import{V as C}from"./VDivider-1866a089.js";import{V as ae}from"./VDataTableServer-a40edf09.js";import{V as E}from"./VCheckbox-b0ac60df.js";import{V as N}from"./VTooltip-24e6bd7d.js";import{V as se}from"./VPagination-f232b5e2.js";import"./form-6c56fbec.js";import"./VTextField-f72f7a7b.js";/* empty css                   */import"./VCounter-122618cf.js";import"./VImg-d8b1f694.js";import"./VField-7ff231c0.js";import"./easing-9f15041e.js";import"./VInput-199f1c57.js";import"./forwardRefs-8348545e.js";import"./VSelect-c7887e8a.js";import"./VList-48bba736.js";import"./ssrBoot-51124d42.js";import"./VAvatar-fc605694.js";import"./dialog-transition-8dbae8f6.js";import"./VMenu-3781f2e6.js";import"./VOverlay-adc3474d.js";import"./lazy-08fd721d.js";import"./scopeId-df115906.js";import"./VCheckboxBtn-4156c138.js";import"./VSelectionControl-cbf2c210.js";import"./VChip-a1be3f1e.js";import"./api-5e105e76.js";import"./index-9c720871.js";import"./constants-71880aa6.js";import"./notifications-e0287a8c.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./AppDrawerHeaderSection-a8953ba9.js";import"./VSpacer-d6214582.js";import"./vue3-perfect-scrollbar.esm-b607d4cc.js";import"./VForm-81495f32.js";import"./VRow-be1e0310.js";import"./VCol-b8926b4b.js";import"./VSwitch-3faa61fa.js";import"./VNavigationDrawer-cd06b5c9.js";import"./VDataTable-0ee0497f.js";import"./VTable-f0a4c716.js";import"./filter-fb016a25.js";const le={APPROVED:{value:"APPROVED",title:"Aprobado"},NOT_APPROVED:{value:"NOT_APPROVED",title:"No Aprobado"},TODO:{value:"TODOS",title:"Todos"}};const ie={class:"my-2"},re={class:"d-flex justify-space-between flex-wrap gap-y-4"},ne={class:"d-flex flex-row gap-4 align-center flex-wrap"},pe={class:"d-flex gap-x-2"},me={class:"d-flex items-center gap-x-2"},ue={class:"my-2"},de={class:"d-flex items-center gap-x-2"},ce={class:"my-2"},_e={class:"d-flex items-center gap-x-2"},fe={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Ve={class:"text-sm text-disabled mb-0"},ve={__name:"listQoute",setup(Pe){const V=u(""),g=u(!1),{allQuotePaginate:w,totalQuotes:v,quotes:O,changeStatusQuotes:k,changeStatusQuotesCustomer:T}=G(),h=K("userAbilityRules").value,r=u(10),c=u(),p=u(1);u(),u();const Q=[{title:"Nombre",key:"social_reason"},{title:"Propiedades",key:"properties"},{title:"Celular",key:"phone"},{title:"Total",key:"amount"},{title:"Gerencia",key:"status"},{title:"Cliente",key:"status_customer"},{title:"Accion",key:"action"}],U=l=>{p.value=l.page,c.value=l.status},S=async(l,t)=>{const _=t==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${l} marcado como: ${t}`),await k(l,{status:_}),R()},$=async(l,t)=>{const _=t==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${l} marcado como: ${t}`),await T(l,{status:_}),R()},B=()=>{w({page:p.value,itemsPerPage:r.value,status:c.value,search:V.value}),console.log(O)},z=J.debounce(B,300);return W([V,r,p,c],z,{immediate:!0}),(l,t)=>{const _=L,M=I,A=y("RouterLink"),j=y("IconBtn");return x(),b("div",null,[o(te,{title:"Lista de Cotizaciones"},{default:a(()=>[o(oe,null,{default:a(()=>[n("div",ie,[o(_,{modelValue:s(c),"onUpdate:modelValue":t[0]||(t[0]=e=>d(c)?c.value=e:null),label:"Estado de aprobaciÃ³n del cliente",placeholder:"Seleccione estado",style:{"max-inline-size":"200px","min-inline-size":"200px"},items:Object.values(s(le))},null,8,["modelValue","items"])]),n("div",re,[o(M,{modelValue:s(V),"onUpdate:modelValue":t[1]||(t[1]=e=>d(V)?V.value=e:null),style:{"max-inline-size":"500px","min-inline-size":"500px"},placeholder:"Buscar por Nombre, Numero, Correo",density:"compact"},null,8,["modelValue"]),n("div",ne,[o(_,{modelValue:s(r),"onUpdate:modelValue":t[2]||(t[2]=e=>d(r)?r.value=e:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"]),o(P,{"prepend-icon":"tabler-screen-share",variant:"tonal",color:"secondary"},{default:a(()=>t[7]||(t[7]=[f(" Export ")])),_:1}),o(A,{to:{name:"quote-add-quote"},class:"text-white"},{default:a(()=>[o(P,{"prepend-icon":"tabler-plus"},{default:a(()=>t[8]||(t[8]=[f(" Registrar Cotizacion ")])),_:1})]),_:1})])])]),_:1}),o(C),o(s(ae),{"items-per-page":s(r),"onUpdate:itemsPerPage":t[4]||(t[4]=e=>d(r)?r.value=e:null),page:s(p),"onUpdate:page":t[5]||(t[5]=e=>d(p)?p.value=e:null),items:s(O),headers:Q,"items-length":s(v),class:"text-no-wrap","onUpdate:options":U},{"item.properties":a(({item:e})=>[(x(!0),b(X,null,Y(e.properties,i=>(x(),b("div",{key:i.id,class:"d-flex gap-x-2"},m(i.title)+" | "+m(i.code),1))),128))]),"item.amount":a(({item:e})=>[n("div",pe,m(("formatCurrency"in l?l.formatCurrency:s(F))(e.amount)),1)]),"item.status":a(({item:e})=>[n("div",me,[n("span",ue,m(e.status==="APPROVED"?"Aprobado":"No Aprobado"),1),o(E,{modelValue:e.status,"onUpdate:modelValue":i=>e.status=i,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:!s(h).some(i=>i.action==="manage"&&i.subject==="ADMINISTRADOR"),onClick:i=>S(e.id,e.status)},{default:a(()=>[o(N,{activator:"parent",location:"top"},{default:a(()=>[f(m(e.status=="NOT_APPROVED"?"No aprovado por gerencia":"Aprobado por Gerencia"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onClick"])])]),"item.status_customer":a(({item:e})=>[n("div",de,[n("span",ce,m(e.status_customer==="APPROVED"?"Aprobado":"No Aprobado"),1),o(E,{modelValue:e.status_customer,"onUpdate:modelValue":i=>e.status_customer=i,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:i=>$(e.id,e.status_customer)},{default:a(()=>[o(N,{activator:"parent",location:"top"},{default:a(()=>[f(m(e.status_customer=="NOT_APPROVED"?"No aprobado por Cliente ":"Aprobado por Cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])])]),"item.action":a(({item:e})=>[n("div",_e,[o(A,{to:{name:"quote-id",params:{id:e.id}}},{default:a(()=>[o(j,null,{default:a(()=>[o(Z,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])])]),bottom:a(()=>[o(C),n("div",fe,[n("p",Ve,m(s(q)({page:s(p),itemsPerPage:s(r)},s(v))),1),o(se,{modelValue:s(p),"onUpdate:modelValue":t[3]||(t[3]=e=>d(p)?p.value=e:null),length:Math.ceil(s(v)/s(r)),"total-visible":l.$vuetify.display.xs?1:Math.min(Math.ceil(s(v)/s(r)),5)},{prev:a(e=>[o(P,D({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>t[9]||(t[9]=[f(" Previous ")])),_:2},1040)]),next:a(e=>[o(P,D({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>t[10]||(t[10]=[f(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),o(H,{"is-drawer-open":s(g),"onUpdate:isDrawerOpen":t[6]||(t[6]=e=>d(g)?g.value=e:null)},null,8,["is-drawer-open"])])}}},gt=ee(ve,[["__scopeId","data-v-6c16abd8"]]);export{gt as default};
