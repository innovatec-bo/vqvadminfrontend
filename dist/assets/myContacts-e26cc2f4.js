import{_ as Wt}from"./AppDateTimePicker-ad98d1e4.js";import{M as tn,a2 as Me,cr as on,n as y,r as J,bS as nn,N as ln,cm as Qt,w as He,cW as an,H as Jt,an as Vo,a0 as mt,o as S,f as be,e as d,b as r,a4 as ie,v as q,a3 as Re,a as lo,c as R,F as se,i as pe,x as $,$ as Ee,d as m,z as De,y as rn}from"./index-eea64eab.js";import{u as Tt,S as Fe,a as Zt,p as sn,_ as un}from"./PreSaleForm-f3bf2751.js";import{f as ft}from"./currencyFormatter-92ad4b3c.js";import{_ as St}from"./DialogCloseBtn-dcf7845d.js";import{_ as dn}from"./AddQuoteInvoice-fb897d8c.js";import{u as Ao}from"./useQuote-7f3cc25e.js";import{P as rt}from"./InvoiceAddMoney-666c377a.js";import{s as ao}from"./notifications-b6da0b75.js";import{V as we,a as cn,b as To,c as pn}from"./VCard-1446dd49.js";import{V as ke}from"./VCardText-74af991a.js";import{V as Ce}from"./VRow-a5449575.js";import{V as L}from"./VCol-6b79a532.js";import{V as kt}from"./VDialog-4585f90a.js";import{_ as So,V as mn}from"./AppTextarea-cfb84859.js";import{_ as _t}from"./AppSelect-5767fb17.js";import{_ as ko}from"./AppTextField-963734da.js";import{V as Lt}from"./VForm-0ba22995.js";import{_ as xo}from"./AppAutocomplete-75c37996.js";import{u as fn}from"./useProcess-3da37060.js";import{u as Oo}from"./useProperty-ef25dafe.js";import{u as vn}from"./useSales-8d5565b3.js";import{V as gn,a as hn}from"./VTabs-f417034b.js";import{V as bn,a as $e}from"./VWindowItem-122fe088.js";import{V as yn}from"./VDataTable-1a09f839.js";import{V as st}from"./VTable-1594d059.js";import{V as We}from"./VCheckbox-d0024d7a.js";import{V as Ue}from"./VTooltip-60d6696f.js";import{V as Xt}from"./VChip-d184a964.js";import{V as _n}from"./VAvatar-596ec46a.js";import{b as En,c as wn}from"./VList-b205d3fa.js";import{u as Cn}from"./useCustomer-f2041fe2.js";import{V as Dn}from"./VSpacer-5e49947a.js";import{_ as Vn}from"./_plugin-vue_export-helper-c27b6911.js";import"./VField-cbcf2eef.js";import"./form-97d5e662.js";import"./easing-9f15041e.js";import"./VInput-b54c7b33.js";import"./VImg-bf97f22a.js";import"./api-40e7a553.js";import"./index-9c720871.js";import"./constants-71880aa6.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./VNodeRenderer-719bf025.js";import"./VTextField-fdaf4f5a.js";/* empty css                   */import"./VCounter-1694484c.js";import"./forwardRefs-8348545e.js";import"./VDivider-f3ea9039.js";import"./VOverlay-9f45cad7.js";import"./lazy-8a330c44.js";import"./scopeId-752bc43e.js";import"./dialog-transition-46c42648.js";import"./VSelect-c4493e38.js";import"./VMenu-054aa5e8.js";import"./VCheckboxBtn-11740b93.js";import"./VSelectionControl-1cd7c46d.js";import"./filter-86a23bbd.js";import"./VSlideGroup-ef9af4c0.js";import"./ssrBoot-d631879b.js";var An=Object.defineProperty,Et=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,io=(e,o,t)=>o in e?An(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Le=(e,o)=>{for(var t in o||(o={}))Po.call(o,t)&&io(e,t,o[t]);if(Et)for(var t of Et(o))Io.call(o,t)&&io(e,t,o[t]);return e},No=(e,o)=>{var t={};for(var n in e)Po.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&Et)for(var n of Et(e))o.indexOf(n)<0&&Io.call(e,n)&&(t[n]=e[n]);return t};const Mo="[vue-draggable-plus]: ";function Tn(e){console.warn(Mo+e)}function Sn(e){console.error(Mo+e)}function ro(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function kn(e){return e.replace(/-(\w)/g,(o,t)=>t?t.toUpperCase():"")}function xn(e){return Object.keys(e).reduce((o,t)=>(typeof e[t]<"u"&&(o[kn(t)]=e[t]),o),{})}function so(e,o){return Array.isArray(e)&&e.splice(o,1),e}function uo(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function On(e){return typeof e>"u"}function Pn(e){return typeof e=="string"}function co(e,o,t){const n=e.children[t];e.insertBefore(o,n)}function It(e){e.parentNode&&e.parentNode.removeChild(e)}function In(e,o=document){var t;let n=null;return typeof(o==null?void 0:o.querySelector)=="function"?n=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):n=document.querySelector(e),n||Tn(`Element not found: ${e}`),n}function Nn(e,o,t=null){return function(...n){return e.apply(t,n),o.apply(t,n)}}function Mn(e,o){const t=Le({},e);return Object.keys(o).forEach(n=>{t[n]?t[n]=Nn(e[n],o[n]):t[n]=o[n]}),t}function Rn(e){return e instanceof HTMLElement}function po(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function Fn(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const $n=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function mo(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function _e(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?mo(Object(t),!0).forEach(function(n){Un(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function vt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vt=function(o){return typeof o}:vt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},vt(e)}function Un(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function Ae(){return Ae=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ae.apply(this,arguments)}function Bn(e,o){if(e==null)return{};var t={},n=Object.keys(e),l,a;for(a=0;a<n.length;a++)l=n[a],!(o.indexOf(l)>=0)&&(t[l]=e[l]);return t}function zn(e,o){if(e==null)return{};var t=Bn(e,o),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var jn="1.15.2";function Ve(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Te=Ve(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),at=Ve(/Edge/i),fo=Ve(/firefox/i),et=Ve(/safari/i)&&!Ve(/chrome/i)&&!Ve(/android/i),Ro=Ve(/iP(ad|od|hone)/i),Fo=Ve(/chrome/i)&&Ve(/android/i),$o={capture:!1,passive:!1};function j(e,o,t){e.addEventListener(o,t,!Te&&$o)}function U(e,o,t){e.removeEventListener(o,t,!Te&&$o)}function wt(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function Ln(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function he(e,o,t,n){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&wt(e,o):wt(e,o))||n&&e===t)return e;if(e===t)break}while(e=Ln(e))}return null}var vo=/\s+/g;function de(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var n=(" "+e.className+" ").replace(vo," ").replace(" "+o+" "," ");e.className=(n+(t?" "+o:"")).replace(vo," ")}}function V(e,o,t){var n=e&&e.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in n)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),n[o]=t+(typeof t=="string"?"":"px")}}function Ye(e,o){var t="";if(typeof e=="string")t=e;else do{var n=V(e,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!o&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Uo(e,o,t){if(e){var n=e.getElementsByTagName(o),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function ye(){var e=document.scrollingElement;return e||document.documentElement}function ee(e,o,t,n,l){if(!(!e.getBoundingClientRect&&e!==window)){var a,s,u,i,h,b,f;if(e!==window&&e.parentNode&&e!==ye()?(a=e.getBoundingClientRect(),s=a.top,u=a.left,i=a.bottom,h=a.right,b=a.height,f=a.width):(s=0,u=0,i=window.innerHeight,h=window.innerWidth,b=window.innerHeight,f=window.innerWidth),(o||t)&&e!==window&&(l=l||e.parentNode,!Te))do if(l&&l.getBoundingClientRect&&(V(l,"transform")!=="none"||t&&V(l,"position")!=="static")){var E=l.getBoundingClientRect();s-=E.top+parseInt(V(l,"border-top-width")),u-=E.left+parseInt(V(l,"border-left-width")),i=s+a.height,h=u+a.width;break}while(l=l.parentNode);if(n&&e!==window){var _=Ye(l||e),F=_&&_.a,p=_&&_.d;_&&(s/=p,u/=F,f/=F,b/=p,i=s+b,h=u+f)}return{top:s,left:u,bottom:i,right:h,width:f,height:b}}}function go(e,o,t){for(var n=Oe(e,!0),l=ee(e)[o];n;){var a=ee(n)[t],s=void 0;if(s=l>=a,!s)return n;if(n===ye())break;n=Oe(n,!1)}return!1}function Ke(e,o,t,n){for(var l=0,a=0,s=e.children;a<s.length;){if(s[a].style.display!=="none"&&s[a]!==A.ghost&&(n||s[a]!==A.dragged)&&he(s[a],t.draggable,e,!1)){if(l===o)return s[a];l++}a++}return null}function eo(e,o){for(var t=e.lastElementChild;t&&(t===A.ghost||V(t,"display")==="none"||o&&!wt(t,o));)t=t.previousElementSibling;return t||null}function ve(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==A.clone&&(!o||wt(e,o))&&t++;return t}function ho(e){var o=0,t=0,n=ye();if(e)do{var l=Ye(e),a=l.a,s=l.d;o+=e.scrollLeft*a,t+=e.scrollTop*s}while(e!==n&&(e=e.parentNode));return[o,t]}function Xn(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var n in o)if(o.hasOwnProperty(n)&&o[n]===e[t][n])return Number(t)}return-1}function Oe(e,o){if(!e||!e.getBoundingClientRect)return ye();var t=e,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=V(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ye();if(n||o)return t;n=!0}}while(t=t.parentNode);return ye()}function Yn(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function Nt(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var tt;function Bo(e,o){return function(){if(!tt){var t=arguments,n=this;t.length===1?e.call(n,t[0]):e.apply(n,t),tt=setTimeout(function(){tt=void 0},o)}}}function Hn(){clearTimeout(tt),tt=void 0}function zo(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function jo(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Lo(e,o,t){var n={};return Array.from(e.children).forEach(function(l){var a,s,u,i;if(!(!he(l,o.draggable,e,!1)||l.animated||l===t)){var h=ee(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,h.left),n.top=Math.min((s=n.top)!==null&&s!==void 0?s:1/0,h.top),n.right=Math.max((u=n.right)!==null&&u!==void 0?u:-1/0,h.right),n.bottom=Math.max((i=n.bottom)!==null&&i!==void 0?i:-1/0,h.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var me="Sortable"+new Date().getTime();function Kn(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(n){if(!(V(n,"display")==="none"||n===A.ghost)){e.push({target:n,rect:ee(n)});var l=_e({},e[e.length-1].rect);if(n.thisAnimationDuration){var a=Ye(n,!0);a&&(l.top-=a.f,l.left-=a.e)}n.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Xn(e,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var l=!1,a=0;e.forEach(function(s){var u=0,i=s.target,h=i.fromRect,b=ee(i),f=i.prevFromRect,E=i.prevToRect,_=s.rect,F=Ye(i,!0);F&&(b.top-=F.f,b.left-=F.e),i.toRect=b,i.thisAnimationDuration&&Nt(f,b)&&!Nt(h,b)&&(_.top-b.top)/(_.left-b.left)===(h.top-b.top)/(h.left-b.left)&&(u=Gn(_,f,E,n.options)),Nt(b,h)||(i.prevFromRect=h,i.prevToRect=b,u||(u=n.options.animation),n.animate(i,_,b,u)),u&&(l=!0,a=Math.max(a,u),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},u),i.thisAnimationDuration=u)}),clearTimeout(o),l?o=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),e=[]},animate:function(t,n,l,a){if(a){V(t,"transition",""),V(t,"transform","");var s=Ye(this.el),u=s&&s.a,i=s&&s.d,h=(n.left-l.left)/(u||1),b=(n.top-l.top)/(i||1);t.animatingX=!!h,t.animatingY=!!b,V(t,"transform","translate3d("+h+"px,"+b+"px,0)"),this.forRepaintDummy=qn(t),V(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),V(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){V(t,"transition",""),V(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function qn(e){return e.offsetWidth}function Gn(e,o,t,n){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*n.animation}var Be=[],Mt={initializeByDefault:!0},it={mount:function(e){for(var o in Mt)Mt.hasOwnProperty(o)&&!(o in e)&&(e[o]=Mt[o]);Be.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Be.push(e)},pluginEvent:function(e,o,t){var n=this;this.eventCanceled=!1,t.cancel=function(){n.eventCanceled=!0};var l=e+"Global";Be.forEach(function(a){o[a.pluginName]&&(o[a.pluginName][l]&&o[a.pluginName][l](_e({sortable:o},t)),o.options[a.pluginName]&&o[a.pluginName][e]&&o[a.pluginName][e](_e({sortable:o},t)))})},initializePlugins:function(e,o,t,n){Be.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var i=new s(e,o,e.options);i.sortable=e,i.options=e.options,e[u]=i,Ae(t,i.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var a=this.modifyOption(e,l,e.options[l]);typeof a<"u"&&(e.options[l]=a)}},getEventProperties:function(e,o){var t={};return Be.forEach(function(n){typeof n.eventProperties=="function"&&Ae(t,n.eventProperties.call(o[n.pluginName],e))}),t},modifyOption:function(e,o,t){var n;return Be.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(n=l.optionListeners[o].call(e[l.pluginName],t))}),n}};function Wn(e){var o=e.sortable,t=e.rootEl,n=e.name,l=e.targetEl,a=e.cloneEl,s=e.toEl,u=e.fromEl,i=e.oldIndex,h=e.newIndex,b=e.oldDraggableIndex,f=e.newDraggableIndex,E=e.originalEvent,_=e.putSortable,F=e.extraEventProperties;if(o=o||t&&t[me],!!o){var p,G=o.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Te&&!at?p=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(n,!0,!0)),p.to=s||t,p.from=u||t,p.item=l||t,p.clone=a,p.oldIndex=i,p.newIndex=h,p.oldDraggableIndex=b,p.newDraggableIndex=f,p.originalEvent=E,p.pullMode=_?_.lastPutMode:void 0;var B=_e(_e({},F),it.getEventProperties(n,o));for(var I in B)p[I]=B[I];t&&t.dispatchEvent(p),G[w]&&G[w].call(o,p)}}var Qn=["evt"],ue=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.evt,l=zn(t,Qn);it.pluginEvent.bind(A)(e,o,_e({dragEl:v,parentEl:Q,ghostEl:x,rootEl:H,nextEl:Ne,lastDownEl:gt,cloneEl:K,cloneHidden:xe,dragStarted:Qe,putSortable:oe,activeSortable:A.active,originalEvent:n,oldIndex:Xe,oldDraggableIndex:ot,newIndex:ce,newDraggableIndex:Se,hideGhostForTarget:Ko,unhideGhostForTarget:qo,cloneNowHidden:function(){xe=!0},cloneNowShown:function(){xe=!1},dispatchSortableEvent:function(a){re({sortable:o,name:a,originalEvent:n})}},l))};function re(e){Wn(_e({putSortable:oe,cloneEl:K,targetEl:v,rootEl:H,oldIndex:Xe,oldDraggableIndex:ot,newIndex:ce,newDraggableIndex:Se},e))}var v,Q,x,H,Ne,gt,K,xe,Xe,ce,ot,Se,ut,oe,je=!1,Ct=!1,Dt=[],Pe,ge,Rt,Ft,bo,yo,Qe,ze,nt,lt=!1,dt=!1,ht,ae,$t=[],Yt=!1,Vt=[],xt=typeof document<"u",ct=Ro,_o=at||Te?"cssFloat":"float",Jn=xt&&!Fo&&!Ro&&"draggable"in document.createElement("div"),Xo=function(){if(xt){if(Te)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Yo=function(e,o){var t=V(e),n=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Ke(e,0,o),a=Ke(e,1,o),s=l&&V(l),u=a&&V(a),i=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ee(l).width,h=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ee(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var b=s.float==="left"?"left":"right";return a&&(u.clear==="both"||u.clear===b)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||i>=n&&t[_o]==="none"||a&&t[_o]==="none"&&i+h>n)?"vertical":"horizontal"},Zn=function(e,o,t){var n=t?e.left:e.top,l=t?e.right:e.bottom,a=t?e.width:e.height,s=t?o.left:o.top,u=t?o.right:o.bottom,i=t?o.width:o.height;return n===s||l===u||n+a/2===s+i/2},el=function(e,o){var t;return Dt.some(function(n){var l=n[me].options.emptyInsertThreshold;if(!(!l||eo(n))){var a=ee(n),s=e>=a.left-l&&e<=a.right+l,u=o>=a.top-l&&o<=a.bottom+l;if(s&&u)return t=n}}),t},Ho=function(e){function o(l,a){return function(s,u,i,h){var b=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(l==null&&(a||b))return!0;if(l==null||l===!1)return!1;if(a&&l==="clone")return l;if(typeof l=="function")return o(l(s,u,i,h),a)(s,u,i,h);var f=(a?s:u).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var t={},n=e.group;(!n||vt(n)!="object")&&(n={name:n}),t.name=n.name,t.checkPull=o(n.pull,!0),t.checkPut=o(n.put),t.revertClone=n.revertClone,e.group=t},Ko=function(){!Xo&&x&&V(x,"display","none")},qo=function(){!Xo&&x&&V(x,"display","")};xt&&!Fo&&document.addEventListener("click",function(e){if(Ct)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ct=!1,!1},!0);var Ie=function(e){if(v){e=e.touches?e.touches[0]:e;var o=el(e.clientX,e.clientY);if(o){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[me]._onDragOver(t)}}},tl=function(e){v&&v.parentNode[me]._isOutsideThisEl(e.target)};function A(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=Ae({},o),e[me]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Yo(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!et,emptyInsertThreshold:5};it.initializePlugins(this,e,t);for(var n in t)!(n in o)&&(o[n]=t[n]);Ho(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:Jn,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?j(e,"pointerdown",this._onTapStart):(j(e,"mousedown",this._onTapStart),j(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(e,"dragover",this),j(e,"dragenter",this)),Dt.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),Ae(this,Kn())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ze=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,v):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,n=this.options,l=n.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,i=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,h=n.filter;if(ul(t),!v&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||n.disabled)&&!i.isContentEditable&&!(!this.nativeDraggable&&et&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=he(u,n.draggable,t,!1),!(u&&u.animated)&&gt!==u)){if(Xe=ve(u),ot=ve(u,n.draggable),typeof h=="function"){if(h.call(this,e,u,this)){re({sortable:o,rootEl:i,name:"filter",targetEl:u,toEl:t,fromEl:t}),ue("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(b){if(b=he(i,b.trim(),t,!1),b)return re({sortable:o,rootEl:b,name:"filter",targetEl:u,fromEl:t,toEl:t}),ue("filter",o,{evt:e}),!0}),h)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!he(i,n.handle,t,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,o,t){var n=this,l=n.el,a=n.options,s=l.ownerDocument,u;if(t&&!v&&t.parentNode===l){var i=ee(t);if(H=l,v=t,Q=v.parentNode,Ne=v.nextSibling,gt=t,ut=a.group,A.dragged=v,Pe={target:v,clientX:(o||e).clientX,clientY:(o||e).clientY},bo=Pe.clientX-i.left,yo=Pe.clientY-i.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,v.style["will-change"]="all",u=function(){if(ue("delayEnded",n,{evt:e}),A.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!fo&&n.nativeDraggable&&(v.draggable=!0),n._triggerDragStart(e,o),re({sortable:n,name:"choose",originalEvent:e}),de(v,a.chosenClass,!0)},a.ignore.split(",").forEach(function(h){Uo(v,h.trim(),Ut)}),j(s,"dragover",Ie),j(s,"mousemove",Ie),j(s,"touchmove",Ie),j(s,"mouseup",n._onDrop),j(s,"touchend",n._onDrop),j(s,"touchcancel",n._onDrop),fo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0),ue("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(at||Te))){if(A.eventCanceled){this._onDrop();return}j(s,"mouseup",n._disableDelayedDrag),j(s,"touchend",n._disableDelayedDrag),j(s,"touchcancel",n._disableDelayedDrag),j(s,"mousemove",n._delayedDragTouchMoveHandler),j(s,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&j(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(u,a.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&Ut(v),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._disableDelayedDrag),U(e,"touchend",this._disableDelayedDrag),U(e,"touchcancel",this._disableDelayedDrag),U(e,"mousemove",this._delayedDragTouchMoveHandler),U(e,"touchmove",this._delayedDragTouchMoveHandler),U(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):o?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(v,"dragend",this),j(H,"dragstart",this._onDragStart));try{document.selection?bt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(je=!1,H&&v){ue("dragStarted",this,{evt:o}),this.nativeDraggable&&j(document,"dragover",tl);var t=this.options;!e&&de(v,t.dragClass,!1),de(v,t.ghostClass,!0),A.active=this,e&&this._appendGhost(),re({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Ko();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY),e!==o);)o=e;if(v.parentNode[me]._isOutsideThisEl(e),o)do{if(o[me]){var t=void 0;if(t=o[me]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);qo()}},_onTouchMove:function(e){if(Pe){var o=this.options,t=o.fallbackTolerance,n=o.fallbackOffset,l=e.touches?e.touches[0]:e,a=x&&Ye(x,!0),s=x&&a&&a.a,u=x&&a&&a.d,i=ct&&ae&&ho(ae),h=(l.clientX-Pe.clientX+n.x)/(s||1)+(i?i[0]-$t[0]:0)/(s||1),b=(l.clientY-Pe.clientY+n.y)/(u||1)+(i?i[1]-$t[1]:0)/(u||1);if(!A.active&&!je){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(x){a?(a.e+=h-(Rt||0),a.f+=b-(Ft||0)):a={a:1,b:0,c:0,d:1,e:h,f:b};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");V(x,"webkitTransform",f),V(x,"mozTransform",f),V(x,"msTransform",f),V(x,"transform",f),Rt=h,Ft=b,ge=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:H,o=ee(v,!0,ct,!0,e),t=this.options;if(ct){for(ae=e;V(ae,"position")==="static"&&V(ae,"transform")==="none"&&ae!==document;)ae=ae.parentNode;ae!==document.body&&ae!==document.documentElement?(ae===document&&(ae=ye()),o.top+=ae.scrollTop,o.left+=ae.scrollLeft):ae=ye(),$t=ho(ae)}x=v.cloneNode(!0),de(x,t.ghostClass,!1),de(x,t.fallbackClass,!0),de(x,t.dragClass,!0),V(x,"transition",""),V(x,"transform",""),V(x,"box-sizing","border-box"),V(x,"margin",0),V(x,"top",o.top),V(x,"left",o.left),V(x,"width",o.width),V(x,"height",o.height),V(x,"opacity","0.8"),V(x,"position",ct?"absolute":"fixed"),V(x,"zIndex","100000"),V(x,"pointerEvents","none"),A.ghost=x,e.appendChild(x),V(x,"transform-origin",bo/parseInt(x.style.width)*100+"% "+yo/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,n=e.dataTransfer,l=t.options;if(ue("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}ue("setupClone",this),A.eventCanceled||(K=jo(v),K.removeAttribute("id"),K.draggable=!1,K.style["will-change"]="",this._hideClone(),de(K,this.options.chosenClass,!1),A.clone=K),t.cloneId=bt(function(){ue("clone",t),!A.eventCanceled&&(t.options.removeCloneOnHide||H.insertBefore(K,v),t._hideClone(),re({sortable:t,name:"clone"}))}),!o&&de(v,l.dragClass,!0),o?(Ct=!0,t._loopId=setInterval(t._emulateDragOver,50)):(U(document,"mouseup",t._onDrop),U(document,"touchend",t._onDrop),U(document,"touchcancel",t._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(t,n,v)),j(document,"drop",t),V(v,"transform","translateZ(0)")),je=!0,t._dragStartId=bt(t._dragStarted.bind(t,o,e)),j(document,"selectstart",t),Qe=!0,et&&V(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,n,l,a,s=this.options,u=s.group,i=A.active,h=ut===u,b=s.sort,f=oe||i,E,_=this,F=!1;if(Yt)return;function p(fe,O){ue(fe,_,_e({evt:e,isOwner:h,axis:E?"vertical":"horizontal",revert:a,dragRect:n,targetRect:l,canSort:b,fromSortable:f,target:t,completed:w,onMove:function(g,qe){return pt(H,o,v,n,g,ee(g),e,qe)},changed:B},O))}function G(){p("dragOverAnimationCapture"),_.captureAnimationState(),_!==f&&f.captureAnimationState()}function w(fe){return p("dragOverCompleted",{insertion:fe}),fe&&(h?i._hideClone():i._showClone(_),_!==f&&(de(v,oe?oe.options.ghostClass:i.options.ghostClass,!1),de(v,s.ghostClass,!0)),oe!==_&&_!==A.active?oe=_:_===A.active&&oe&&(oe=null),f===_&&(_._ignoreWhileAnimating=t),_.animateAll(function(){p("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(t===v&&!v.animated||t===o&&!t.animated)&&(ze=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(v.parentNode[me]._isOutsideThisEl(e.target),!fe&&Ie(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),F=!0}function B(){ce=ve(v),Se=ve(v,s.draggable),re({sortable:_,name:"change",toEl:o,newIndex:ce,newDraggableIndex:Se,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=he(t,s.draggable,o,!0),p("dragOver"),A.eventCanceled)return F;if(v.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||_._ignoreWhileAnimating===t)return w(!1);if(Ct=!1,i&&!s.disabled&&(h?b||(a=Q!==H):oe===this||(this.lastPutMode=ut.checkPull(this,i,v,e))&&u.checkPut(this,i,v,e))){if(E=this._getDirection(e,t)==="vertical",n=ee(v),p("dragOverValid"),A.eventCanceled)return F;if(a)return Q=H,G(),this._hideClone(),p("revert"),A.eventCanceled||(Ne?H.insertBefore(v,Ne):H.appendChild(v)),w(!0);var I=eo(o,s.draggable);if(!I||al(e,E,this)&&!I.animated){if(I===v)return w(!1);if(I&&o===e.target&&(t=I),t&&(l=ee(t)),pt(H,o,v,n,t,l,e,!!t)!==!1)return G(),I&&I.nextSibling?o.insertBefore(v,I.nextSibling):o.appendChild(v),Q=o,B(),w(!0)}else if(I&&ll(e,E,this)){var P=Ke(o,0,s,!0);if(P===v)return w(!1);if(t=P,l=ee(t),pt(H,o,v,n,t,l,e,!1)!==!1)return G(),o.insertBefore(v,P),Q=o,B(),w(!0)}else if(t.parentNode===o){l=ee(t);var Y=0,ne,k=v.parentNode!==o,z=!Zn(v.animated&&v.toRect||n,t.animated&&t.toRect||l,E),N=E?"top":"left",C=go(t,"top","top")||go(v,"top","top"),D=C?C.scrollTop:void 0;ze!==t&&(ne=l[N],lt=!1,dt=!z&&s.invertSwap||k),Y=il(e,t,l,E,z?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,dt,ze===t);var T;if(Y!==0){var W=ve(v);do W-=Y,T=Q.children[W];while(T&&(V(T,"display")==="none"||T===x))}if(Y===0||T===t)return w(!1);ze=t,nt=Y;var M=t.nextElementSibling,te=!1;te=Y===1;var le=pt(H,o,v,n,t,l,e,te);if(le!==!1)return(le===1||le===-1)&&(te=le===1),Yt=!0,setTimeout(nl,30),G(),te&&!M?o.appendChild(v):t.parentNode.insertBefore(v,te?M:t),C&&zo(C,0,D-C.scrollTop),Q=v.parentNode,ne!==void 0&&!dt&&(ht=Math.abs(ne-ee(t)[N])),B(),w(!0)}if(o.contains(v))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){U(document,"mousemove",this._onTouchMove),U(document,"touchmove",this._onTouchMove),U(document,"pointermove",this._onTouchMove),U(document,"dragover",Ie),U(document,"mousemove",Ie),U(document,"touchmove",Ie)},_offUpEvents:function(){var e=this.el.ownerDocument;U(e,"mouseup",this._onDrop),U(e,"touchend",this._onDrop),U(e,"pointerup",this._onDrop),U(e,"touchcancel",this._onDrop),U(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(ce=ve(v),Se=ve(v,t.draggable),ue("drop",this,{evt:e}),Q=v&&v.parentNode,ce=ve(v),Se=ve(v,t.draggable),A.eventCanceled){this._nulling();return}je=!1,dt=!1,lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ht(this.cloneId),Ht(this._dragStartId),this.nativeDraggable&&(U(document,"drop",this),U(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),et&&V(document.body,"user-select",""),V(v,"transform",""),e&&(Qe&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(H===Q||oe&&oe.lastPutMode!=="clone")&&K&&K.parentNode&&K.parentNode.removeChild(K),v&&(this.nativeDraggable&&U(v,"dragend",this),Ut(v),v.style["will-change"]="",Qe&&!je&&de(v,oe?oe.options.ghostClass:this.options.ghostClass,!1),de(v,this.options.chosenClass,!1),re({sortable:this,name:"unchoose",toEl:Q,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==Q?(ce>=0&&(re({rootEl:Q,name:"add",toEl:Q,fromEl:H,originalEvent:e}),re({sortable:this,name:"remove",toEl:Q,originalEvent:e}),re({rootEl:Q,name:"sort",toEl:Q,fromEl:H,originalEvent:e}),re({sortable:this,name:"sort",toEl:Q,originalEvent:e})),oe&&oe.save()):ce!==Xe&&ce>=0&&(re({sortable:this,name:"update",toEl:Q,originalEvent:e}),re({sortable:this,name:"sort",toEl:Q,originalEvent:e})),A.active&&((ce==null||ce===-1)&&(ce=Xe,Se=ot),re({sortable:this,name:"end",toEl:Q,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ue("nulling",this),H=v=Q=x=Ne=K=gt=xe=Pe=ge=Qe=ce=Se=Xe=ot=ze=nt=oe=ut=A.dragged=A.ghost=A.clone=A.active=null,Vt.forEach(function(e){e.checked=!0}),Vt.length=Rt=Ft=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":v&&(this._onDragOver(e),ol(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,n=0,l=t.length,a=this.options;n<l;n++)o=t[n],he(o,a.draggable,this.el,!1)&&e.push(o.getAttribute(a.dataIdAttr)||sl(o));return e},sort:function(e,o){var t={},n=this.el;this.toArray().forEach(function(l,a){var s=n.children[a];he(s,this.options.draggable,n,!1)&&(t[l]=s)},this),o&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(n.removeChild(t[l]),n.appendChild(t[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return he(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var n=it.modifyOption(this,e,o);typeof n<"u"?t[e]=n:t[e]=o,e==="group"&&Ho(t)},destroy:function(){ue("destroy",this);var e=this.el;e[me]=null,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),U(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Dt.splice(Dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xe){if(ue("hideClone",this),A.eventCanceled)return;V(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),xe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(xe){if(ue("showClone",this),A.eventCanceled)return;v.parentNode==H&&!this.options.group.revertClone?H.insertBefore(K,v):Ne?H.insertBefore(K,Ne):H.appendChild(K),this.options.group.revertClone&&this.animate(v,K),V(K,"display",""),xe=!1}}};function ol(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function pt(e,o,t,n,l,a,s,u){var i,h=e[me],b=h.options.onMove,f;return window.CustomEvent&&!Te&&!at?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=o,i.from=e,i.dragged=t,i.draggedRect=n,i.related=l||o,i.relatedRect=a||ee(o),i.willInsertAfter=u,i.originalEvent=s,e.dispatchEvent(i),b&&(f=b.call(h,i,s)),f}function Ut(e){e.draggable=!1}function nl(){Yt=!1}function ll(e,o,t){var n=ee(Ke(t.el,0,t.options,!0)),l=Lo(t.el,t.options,x),a=10;return o?e.clientX<l.left-a||e.clientY<n.top&&e.clientX<n.right:e.clientY<l.top-a||e.clientY<n.bottom&&e.clientX<n.left}function al(e,o,t){var n=ee(eo(t.el,t.options.draggable)),l=Lo(t.el,t.options,x),a=10;return o?e.clientX>l.right+a||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>l.bottom+a||e.clientX>n.right&&e.clientY>n.top}function il(e,o,t,n,l,a,s,u){var i=n?e.clientY:e.clientX,h=n?t.height:t.width,b=n?t.top:t.left,f=n?t.bottom:t.right,E=!1;if(!s){if(u&&ht<h*l){if(!lt&&(nt===1?i>b+h*a/2:i<f-h*a/2)&&(lt=!0),lt)E=!0;else if(nt===1?i<b+ht:i>f-ht)return-nt}else if(i>b+h*(1-l)/2&&i<f-h*(1-l)/2)return rl(o)}return E=E||s,E&&(i<b+h*a/2||i>f-h*a/2)?i>b+h/2?1:-1:0}function rl(e){return ve(v)<ve(e)?1:-1}function sl(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,n=0;t--;)n+=o.charCodeAt(t);return n.toString(36)}function ul(e){Vt.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var n=o[t];n.checked&&Vt.push(n)}}function bt(e){return setTimeout(e,0)}function Ht(e){return clearTimeout(e)}xt&&j(document,"touchmove",function(e){(A.active||je)&&e.cancelable&&e.preventDefault()});A.utils={on:j,off:U,css:V,find:Uo,is:function(e,o){return!!he(e,o,e,!1)},extend:Yn,throttle:Bo,closest:he,toggleClass:de,clone:jo,index:ve,nextTick:bt,cancelNextTick:Ht,detectDirection:Yo,getChild:Ke};A.get=function(e){return e[me]};A.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(A.utils=_e(_e({},A.utils),n.utils)),it.mount(n)})};A.create=function(e,o){return new A(e,o)};A.version=jn;var Z=[],Je,Kt,qt=!1,Bt,zt,At,Ze;function dl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):t.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):(U(document,"pointermove",this._handleFallbackAutoScroll),U(document,"touchmove",this._handleFallbackAutoScroll),U(document,"mousemove",this._handleFallbackAutoScroll)),Eo(),yt(),Hn()},nulling:function(){At=Kt=Je=qt=Ze=Bt=zt=null,Z.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var n=this,l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,s=document.elementFromPoint(l,a);if(At=o,t||this.options.forceAutoScrollFallback||at||Te||et){jt(o,this.options,s,t);var u=Oe(s,!0);qt&&(!Ze||l!==Bt||a!==zt)&&(Ze&&Eo(),Ze=setInterval(function(){var i=Oe(document.elementFromPoint(l,a),!0);i!==u&&(u=i,yt()),jt(o,n.options,i,t)},10),Bt=l,zt=a)}else{if(!this.options.bubbleScroll||Oe(s,!0)===ye()){yt();return}jt(o,this.options,Oe(s,!1),!1)}}},Ae(e,{pluginName:"scroll",initializeByDefault:!0})}function yt(){Z.forEach(function(e){clearInterval(e.pid)}),Z=[]}function Eo(){clearInterval(Ze)}var jt=Bo(function(e,o,t,n){if(o.scroll){var l=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=o.scrollSensitivity,u=o.scrollSpeed,i=ye(),h=!1,b;Kt!==t&&(Kt=t,yt(),Je=o.scroll,b=o.scrollFn,Je===!0&&(Je=Oe(t,!0)));var f=0,E=Je;do{var _=E,F=ee(_),p=F.top,G=F.bottom,w=F.left,B=F.right,I=F.width,P=F.height,Y=void 0,ne=void 0,k=_.scrollWidth,z=_.scrollHeight,N=V(_),C=_.scrollLeft,D=_.scrollTop;_===i?(Y=I<k&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),ne=P<z&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(Y=I<k&&(N.overflowX==="auto"||N.overflowX==="scroll"),ne=P<z&&(N.overflowY==="auto"||N.overflowY==="scroll"));var T=Y&&(Math.abs(B-l)<=s&&C+I<k)-(Math.abs(w-l)<=s&&!!C),W=ne&&(Math.abs(G-a)<=s&&D+P<z)-(Math.abs(p-a)<=s&&!!D);if(!Z[f])for(var M=0;M<=f;M++)Z[M]||(Z[M]={});(Z[f].vx!=T||Z[f].vy!=W||Z[f].el!==_)&&(Z[f].el=_,Z[f].vx=T,Z[f].vy=W,clearInterval(Z[f].pid),(T!=0||W!=0)&&(h=!0,Z[f].pid=setInterval((function(){n&&this.layer===0&&A.active._onTouchMove(At);var te=Z[this.layer].vy?Z[this.layer].vy*u:0,le=Z[this.layer].vx?Z[this.layer].vx*u:0;typeof b=="function"&&b.call(A.dragged.parentNode[me],le,te,e,At,Z[this.layer].el)!=="continue"||zo(Z[this.layer].el,le,te)}).bind({layer:f}),24))),f++}while(o.bubbleScroll&&E!==i&&(E=Oe(E,!1)));qt=h}},30),Go=function(e){var o=e.originalEvent,t=e.putSortable,n=e.dragEl,l=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var i=t||l;s();var h=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,b=document.elementFromPoint(h.clientX,h.clientY);u(),i&&!i.el.contains(b)&&(a("spill"),this.onSpill({dragEl:n,putSortable:t}))}};function to(){}to.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var n=Ke(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(o,n):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:Go};Ae(to,{pluginName:"revertOnSpill"});function oo(){}oo.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,n=t||this.sortable;n.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),n.animateAll()},drop:Go};Ae(oo,{pluginName:"removeOnSpill"});A.mount(new dl);A.mount(oo,to);function cl(e){return e==null?e:JSON.parse(JSON.stringify(e))}function pl(e){Qt()&&an(e)}function ml(e){Qt()?Jt(e):Vo(e)}let Wo=null,Qo=null;function wo(e=null,o=null){Wo=e,Qo=o}function fl(){return{data:Wo,clonedData:Qo}}const Co=Symbol("cloneElement");function vl(...e){var o,t;const n=(o=Qt())==null?void 0:o.proxy,l=e[0];let[,a,s]=e;Array.isArray(y(a))||(s=a,a=null);let u=null;const{immediate:i=!0,clone:h=cl,customUpdate:b}=(t=y(s))!=null?t:{};function f(k){var z;const N=y((z=y(a))==null?void 0:z[k.oldIndex]),C=h(N);wo(N,C),k.item[Co]=C}function E(k){const z=k.item[Co];if(!On(z)){if(It(k.item),mt(a)){const N=[...y(a)];a.value=uo(N,k.newDraggableIndex,z);return}uo(y(a),k.newDraggableIndex,z)}}function _(k){const{from:z,item:N,oldIndex:C,oldDraggableIndex:D,pullMode:T,clone:W}=k;if(co(z,N,C),T==="clone"){It(W);return}if(mt(a)){const M=[...y(a)];a.value=so(M,D);return}so(y(a),D)}function F(k){if(b){b(k);return}const{from:z,item:N,oldIndex:C,newIndex:D}=k;if(It(N),co(z,N,C),mt(a)){const T=[...y(a)];a.value=ro(T,C,D);return}ro(y(a),C,D)}function p(){Vo(()=>{wo()})}const G={onUpdate:F,onStart:f,onAdd:E,onRemove:_,onEnd:p};function w(k){const z=y(l);return k||(k=Pn(z)?In(z,n==null?void 0:n.$el):z),k&&!Rn(k)&&(k=k.$el),k||Sn("Root element not found"),k}function B(){var k;const z=(k=y(s))!=null?k:{},N=No(z,["immediate","clone"]);return po(N,(C,D)=>{Fn(C)&&(N[C]=(T,...W)=>{const M=fl();return $n(T,M),D(T,...W)})}),Mn(a===null?{}:G,N)}const I=k=>{k=w(k),u&&P.destroy(),u=new A(k,B())};He(()=>s,()=>{u&&po(B(),(k,z)=>{u==null||u.option(k,z)})},{deep:!0});const P={option:(k,z)=>u==null?void 0:u.option(k,z),destroy:()=>{u==null||u.destroy(),u=null},save:()=>u==null?void 0:u.save(),toArray:()=>u==null?void 0:u.toArray(),closest:(...k)=>u==null?void 0:u.closest(...k)},Y=()=>P==null?void 0:P.option("disabled",!0),ne=()=>P==null?void 0:P.option("disabled",!1);return ml(()=>{i&&I()}),pl(P.destroy),Le({start:I,pause:Y,resume:ne},P)}const Gt=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],gl=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Gt.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)],hl=tn({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:gl,emits:["update:modelValue",...Gt],setup(e,{slots:o,emit:t,expose:n,attrs:l}){const a=Gt.reduce((b,f)=>{const E=`on${f.replace(/^\S/,_=>_.toUpperCase())}`;return b[E]=(..._)=>t(f,..._),b},{}),s=Me(()=>{const b=on(e),f=No(b,["modelValue"]),E=Object.entries(f).reduce((_,[F,p])=>{const G=y(p);return G!==void 0&&(_[F]=G),_},{});return Le(Le({},a),xn(Le(Le({},l),E)))}),u=Me({get:()=>e.modelValue,set:b=>t("update:modelValue",b)}),i=J(),h=nn(vl(e.target||i,u,s));return n(h),()=>{var b;return ln(e.tag||"div",{ref:i},(b=o==null?void 0:o.default)==null?void 0:b.call(o,h))}}}),bl={__name:"AddQuoteDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:String,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,{generateQuote:n}=Ao(),{getOpportunitybyId:l,opportunity:a,changeStatusByOpportunity:s}=Tt(),u=J(!1),i=J({social_reason:"",nit:"",address:"",email:"",phone:"",landline:"",workplace:"",expiration_date:null,creation_date:new Date().toISOString().split("T")[0],observations:"",payment_method:null,amount:null,initial_fee:null,percentage_initial_fee:null,balance:null,opportunity_id:null,customer_id:null,properties:[{property_id:null,price:null,price_it:null,price_contrato:null,property_type:rt.DEPARTAMENT.value,property_type_name:rt.DEPARTAMENT.label},{property_id:null,price:null,price_it:null,price_contrato:null,property_type:rt.PARK.value,property_type_name:rt.PARK.label}],differs_initial_fee:[],differs_balance:[]}),h=Me(()=>i.value.social_reason&&i.value.nit&&i.value.phone&&i.value.amount&&i.value.creation_date&&i.value.expiration_date&&i.value.payment_method&&i.value.customer_id),b=Me(()=>i.value.properties.every(w=>w.property_id!==null&&w.price!==null&&w.price_it!==null&&w.price_contrato!==null)),f=Me(()=>i.value.differs_initial_fee.length===0?!0:i.value.differs_initial_fee.every(w=>w.amount!==null)),E=Me(()=>{if(i.value.differs_initial_fee.length===0)return!0;const w=i.value.differs_initial_fee.reduce((P,Y)=>P+(Y.amount||0),0),B=parseFloat(w),I=parseFloat(i.value.initial_fee);return B===I}),_=Me(()=>h.value&&b.value&&f.value),F=w=>{i.value.properties.push(w)},p=w=>{i.value.properties.splice(w,1)},G=async()=>{if(!_.value){ao("Validación fallida","Completa todos los campos obligatorios.");return}if(!E.value){ao("Validación fallida","La suma de las diferencias del anticipo no son correctas");return}u.value=!0;try{console.log(i),await n(i.value),await s(t.opportunityKanban.id,Fe.PRESALE.value,{})}catch(w){console.error("Error generando la venta:",w)}finally{u.value=!1}};return He(()=>i.value.properties,w=>{let B=0;w.forEach(I=>{if(I.price){const P=parseFloat(I.price)||0;I.price_it=P*.03,I.price_contrato=P+I.price_it,B+=I.price_contrato}else I.price_it=null}),i.value.amount=B},{deep:!0}),He(()=>t.isDialogVisible,async w=>{w&&(console.log("El diálogo se ha abierto"),await l(t.opportunityKanban.id),console.log("Datos de la oportunidad cargados:",a.value),i.value.customer_id=a.value.customer.id,a.value&&(i.value.social_reason=a.value.customer.name,i.value.email=a.value.customer.email,i.value.phone=a.value.customer.phone,i.value.nit=a.value.customer.ci,i.value.opportunity_id=a.value.id,a.value.property_id!==null?(a.value.property.property_type==="PARK"&&(i.value.properties[1].property_id=a.value.property_id,i.value.properties[0].property_id=null,i.value.properties[0].price=null,i.value.properties[0].price_it=null,i.value.properties[0].price_contrato=null),a.value.property.property_type==="DEPARTAMENT"&&(i.value.properties[0].property_id=a.value.property_id,i.value.properties[1].property_id=null,i.value.properties[1].price=null,i.value.properties[1].price_it=null,i.value.properties[1].price_contrato=null)):(i.value.properties[1].property_id=null,i.value.properties[1].price=null,i.value.properties[1].price_it=null,i.value.properties[1].price_contrato=null,i.value.properties[0].property_id=null,i.value.properties[0].price=null,i.value.properties[0].price_it=null,i.value.properties[0].price_contrato=null)))}),(w,B)=>{const I=St;return S(),be(kt,{"max-width":"987","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":B[2]||(B[2]=P=>w.$emit("update:isDialogVisible",P))},{default:d(()=>[r(I,{onClick:B[0]||(B[0]=P=>w.$emit("update:isDialogVisible",!1))}),r(we,null,{default:d(()=>[r(ke,null,{default:d(()=>[r(Ce,null,{default:d(()=>[r(L,{cols:"12"},{default:d(()=>[r(dn,{data:i.value,onPush:F,onRemove:p},null,8,["data"])]),_:1}),r(L,{cols:"12",class:"d-flex justify-end align-center gap-x-4"},{default:d(()=>[r(ie,{loading:u.value,disabled:u.value,color:"primary",onClick:G},{default:d(()=>B[3]||(B[3]=[q(" Guardar Cotizaciónasa ")])),_:1},8,["loading","disabled"]),r(ie,{text:"",color:"error",onClick:B[1]||(B[1]=P=>w.$emit("update:isDialogVisible",!1))},{default:d(()=>B[4]||(B[4]=[q(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},yl={__name:"AddActivity",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0},typeActivities:{type:Array,default:()=>[]}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{registerActivity:l,loadingActivity:a}=Zt(),{generateProspect:s}=Tt(),u=J({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),i=()=>{n("formCancelled"),n("update:isDialogVisible",!1)},h=async()=>{await l(u.value),console.log("opportunityKanban",t.opportunityKanban.stage),t.opportunityKanban.stage==="LEAD"&&await s(t.opportunityKanban.id,{}),u.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},n("update:isDialogVisible",!1)};return He(()=>t.isDialogVisible,async b=>{var f,E;b===!0&&(u.value.opportunity_id=((f=t.opportunityKanban)==null?void 0:f.id)??null,u.value.assigned_to=((E=t.opportunityKanban)==null?void 0:E.user_id)??null,console.log(t.opportunityKanban))}),(b,f)=>{const E=St,_=ko,F=_t,p=Wt,G=So;return S(),be(kt,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":i},{default:d(()=>[r(E,{onClick:i}),r(we,{class:"pa-sm-8"},{default:d(()=>[r(cn,null,{default:d(()=>[r(To,{class:"text-h3 font-weight-medium mb-3"},{default:d(()=>f[4]||(f[4]=[q(" Agregar Actividad ")])),_:1}),r(ke,null,{default:d(()=>[r(Lt,{onSubmit:Re(h,["prevent"])},{default:d(()=>[r(Ce,null,{default:d(()=>[r(L,{cols:"12"},{default:d(()=>[r(_,{modelValue:u.value.title,"onUpdate:modelValue":f[0]||(f[0]=w=>u.value.title=w),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(F,{modelValue:u.value.type_activity_id,"onUpdate:modelValue":f[1]||(f[1]=w=>u.value.type_activity_id=w),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:t.typeActivities.map(w=>({title:w.name,value:w.id}))},null,8,["modelValue","items"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(p,{modelValue:u.value.scheduled_at,"onUpdate:modelValue":f[2]||(f[2]=w=>u.value.scheduled_at=w),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),r(L,{cols:"12"},{default:d(()=>[r(G,{modelValue:u.value.description,"onUpdate:modelValue":f[3]||(f[3]=w=>u.value.description=w),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",class:"text-center"},{default:d(()=>[r(ie,{type:"submit",class:"me-3",disabled:y(a),loading:y(a)},{default:d(()=>f[5]||(f[5]=[q(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),r(ie,{color:"secondary",variant:"tonal",onClick:i},{default:d(()=>f[6]||(f[6]=[q(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Do={PENDING:{value:"PENDING",label:"PENDIENTE"},COMPLETED:{value:"COMPLETED",label:"COMPLETADO"},CANCELED:{value:"CANCELED",label:"CANCELADO"}},_l={key:0},El={key:1,class:"text-center my-5"},wl={class:"d-flex"},Cl={class:"my-5"},Dl={key:0,class:"d-flex flex-wrap gap-2 my-5"},Vl={key:1},Al={class:"mb-4"},Tl={class:"my-5"},Sl={key:0},kl=["src"],xl={class:"my-5"},Ol={key:0,class:"d-flex flex-wrap gap-2 my-5"},Pl={key:1},Il={__name:"TaskKanban",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{changeStatusQuotesCustomer:l}=Ao(),{checkProcessForOpportunity:a}=fn(),{allProperty:s,properties:u,propertiesAvailbles:i}=Oo(),{getallTypeActivities:h,typeActivities:b,registerActivity:f,loadingActivity:E,changeStatusActivity:_}=Zt(),{getOpportunitybyId:F,opportunity:p,changeOpportunity:G,loadingOpportunity:w,changeStatusByOpportunity:B}=Tt(),{SaleChangeSignature:I}=vn(),P=J({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),Y=()=>{n("update:isDialogVisible",!1)},ne=J([{title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}]),k=O=>O==="CASH"?"Al Contado":O==="DIRECTCREDIT"?"Crédito Directo":O==="BANKCREDIT"?"Crédito Bancario":O,z=O=>O==="SALE"?"VENDIDO":O==="DISCARD"?"CANCELADO":O==="DELIVERY"?"ENTREGADO":O,N=J(ne.value[0].value),C=async()=>{var O;(O=t.opportunityKanban)!=null&&O.id&&await F(t.opportunityKanban.id)},D=async()=>{await f(P.value),P.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},Y()},T=async()=>{console.log("antes del save:",p);const O={id:p.value.id,stage_id:p.value.stage_id,description:p.value.description,property_id:p.value.property_id,customer:{id:p.value.customer.id,name:p.value.customer.name,email:p.value.customer.email,ci:p.value.customer.ci,cod_phone:p.value.cod_phone,phone:p.value.customer.phone,type_customer:p.value.customer.type_customer}};await G(p.value.id,O),Y()},W=async O=>{await _(O,{state_activity:Do.COMPLETED.value}),Y()},M=()=>{const O=[];O.push({title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}),t.opportunityKanban.stage===Fe.DELIVERY.label&&O.push({title:"Entrega",value:"delivery"}),t.opportunityKanban.stage===Fe.SALE.label&&O.push({title:"Ventas",value:"sales"}),t.opportunityKanban.stage===Fe.PRESALE.label&&O.push({title:"Cotizaciones",value:"quotations"}),ne.value=O,N.value=ne.value[0].value};He(()=>t.isDialogVisible,async O=>{O&&(await C(),M(),await i(),await h())});const te=async(O,g)=>{const qe=g==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${O} marcado como: ${g}`),await l(O,{status:qe})},le=async O=>{console.log("entra a firma"),await I(O)},fe=async O=>{console.log(`Procedimiento ${O.id} marcado como: ${O.pivot.is_check?"realizado":"no realizado"}`),await a(p.value.id,O.id,{is_check:!O.pivot.is_check}),O.pivot.is_check=!O.pivot.is_check};return(O,g)=>{const qe=St,Ge=ko,Ot=_t,Jo=xo,no=So,Zo=Wt,Pt=lo("RouterLink"),en=lo("IconBtn");return S(),be(kt,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":Y},{default:d(()=>[r(qe,{onClick:Y}),r(L,{cols:"12",style:{display:"flex","flex-direction":"column"}},{default:d(()=>[r(we,{class:"pa-sm-4"},{default:d(()=>[r(gn,{modelValue:N.value,"onUpdate:modelValue":g[0]||(g[0]=c=>N.value=c)},{default:d(()=>[(S(!0),R(se,null,pe(ne.value,c=>(S(),be(hn,{key:c.value,value:c.value},{default:d(()=>[q($(c.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(bn,{modelValue:N.value,"onUpdate:modelValue":g[13]||(g[13]=c=>N.value=c)},{default:d(()=>[r($e,{value:"information",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(we,{title:"Información del Cliente y Oportunidad"},{default:d(()=>[r(ke,null,{default:d(()=>[r(Lt,{onSubmit:Re(T,["prevent"])},{default:d(()=>[r(Ce,null,{default:d(()=>[r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ge,{modelValue:y(p).customer.name,"onUpdate:modelValue":g[1]||(g[1]=c=>y(p).customer.name=c),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ge,{modelValue:y(p).customer.email,"onUpdate:modelValue":g[2]||(g[2]=c=>y(p).customer.email=c),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ce,null,{default:d(()=>[r(L,{cols:"4"},{default:d(()=>[r(Ot,{modelValue:y(p).customer.cod_phone,"onUpdate:modelValue":g[3]||(g[3]=c=>y(p).customer.cod_phone=c),label:"Código",items:["+1","+52","+55","+54","+49","+33","+34","+39","+86","+81","+7","+591"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),r(L,{cols:"8"},{default:d(()=>[r(Ge,{modelValue:y(p).customer.phone,"onUpdate:modelValue":g[4]||(g[4]=c=>y(p).customer.phone=c),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ge,{modelValue:y(p).customer.ci,"onUpdate:modelValue":g[5]||(g[5]=c=>y(p).customer.ci=c),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Jo,{modelValue:y(p).property_id,"onUpdate:modelValue":g[6]||(g[6]=c=>y(p).property_id=c),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:y(u).map(c=>({title:c.title,value:c.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ot,{modelValue:y(p).customer.type_customer,"onUpdate:modelValue":g[7]||(g[7]=c=>y(p).customer.type_customer=c),label:"Tipo de Cliente",items:["Olvidadizo","Familiar","Decidido","Indeciso","Exigente","Referido","Inversionista","Recuperado","Curioso"],placeholder:"Tipo de Cliente",outlined:""},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(no,{modelValue:y(p).description,"onUpdate:modelValue":g[8]||(g[8]=c=>y(p).description=c),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"2","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6",class:"text-center mt-5"},{default:d(()=>[r(ie,{type:"submit",color:"primary",class:"me-3",disabled:y(w),loading:y(w)},{default:d(()=>g[14]||(g[14]=[q(" Guardar Cambios ")])),_:1},8,["disabled","loading"]),r(ie,{color:"error",onClick:Y},{default:d(()=>g[15]||(g[15]=[q(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r($e,{value:"add_activity",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(we,{title:"Agregar Actividad"},{default:d(()=>[r(ke,null,{default:d(()=>[r(Lt,{onSubmit:Re(D,["prevent"])},{default:d(()=>[r(Ce,null,{default:d(()=>[r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ge,{modelValue:P.value.title,"onUpdate:modelValue":g[9]||(g[9]=c=>P.value.title=c),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Ot,{modelValue:P.value.type_activity_id,"onUpdate:modelValue":g[10]||(g[10]=c=>P.value.type_activity_id=c),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:y(b).map(c=>({title:c.name,value:c.id}))},null,8,["modelValue","items"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(Zo,{modelValue:P.value.scheduled_at,"onUpdate:modelValue":g[11]||(g[11]=c=>P.value.scheduled_at=c),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[r(no,{modelValue:P.value.description,"onUpdate:modelValue":g[12]||(g[12]=c=>P.value.description=c),label:"Detalla tu Actividad",rows:"2",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),r(L,{cols:"12",class:"text-center"},{default:d(()=>[r(ie,{type:"submit",class:"me-3",disabled:y(E),loading:y(E)},{default:d(()=>g[16]||(g[16]=[q(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),r(ie,{color:"error",onClick:Y},{default:d(()=>g[17]||(g[17]=[q(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r($e,{value:"activity_list",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(we,{title:"Lista de Actividades"},{default:d(()=>[r(y(yn),{headers:[{title:"Actividad",value:"title"},{title:"Fecha",value:"scheduled_at"},{title:"Estado",value:"state_activity"},{title:"Descripción",value:"description"},{title:"Acciones",value:"actions",sortable:!1}],items:y(p).activities,"item-value":"id",class:"elevation-1","items-per-page":5},{"item.actions":d(({item:c})=>[r(ie,{title:"Marcar Como Realizada",color:"primary",disabled:c.state_activity!==y(Do).PENDING.value,onClick:X=>W(c.id)},{default:d(()=>[r(Ee,{icon:"tabler-checkbox"})]),_:2},1032,["disabled","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),r($e,{value:"quotations",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(we,null,{default:d(()=>[r(To,{class:"d-flex justify-space-between align-center"},{default:d(()=>[g[19]||(g[19]=m("span",{class:"text-h5 font-weight-medium"},"Cotizaciones",-1)),r(Pt,{to:{name:"quote-add-quote"},class:"text-white"},{default:d(()=>[r(ie,{color:"primary",variant:"outlined",size:"small"},{default:d(()=>[r(Ee,{icon:"tabler-plus"}),g[18]||(g[18]=q(" Agregar nueva cotización "))]),_:1})]),_:1})]),_:1}),r(ke,null,{default:d(()=>[m("div",null,[y(p).quotes&&y(p).quotes.length>0?(S(),R("div",_l,[r(st,{density:"compact",class:"text-no-wrap"},{default:d(()=>[g[20]||(g[20]=m("thead",null,[m("tr",null,[m("th",null,"Propiedad"),m("th",null,"Fecha"),m("th",null,"Monto"),m("th",null,"Acciones")])],-1)),m("tbody",null,[(S(!0),R(se,null,pe(y(p).quotes,c=>(S(),R("tr",{key:c.id},[m("td",null,$(c.properties[0].title),1),m("td",null,$(c.created_at),1),m("td",null,$(y(ft)(c.amount)),1),m("td",null,[r(Ce,{class:"d-flex align-center gap-2"},{default:d(()=>[r(We,{modelValue:c.status,"onUpdate:modelValue":X=>c.status=X,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:""},null,8,["modelValue","onUpdate:modelValue"]),r(We,{modelValue:c.status_customer,"onUpdate:modelValue":X=>c.status_customer=X,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:X=>te(c.id,c.status_customer)},{default:d(()=>[r(Ue,{activator:"parent",location:"top"},{default:d(()=>[q($(c.status_customer==="NOT_APPROVED"?"No aprobado por cliente":"Aprobado por cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"]),r(Pt,{to:{name:"quote-id",params:{id:c.id}}},{default:d(()=>[r(ie,{icon:"",variant:"plain"},{default:d(()=>[r(Ee,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)])]))),128))])]),_:1})])):(S(),R("div",El,g[21]||(g[21]=[m("span",null,"No hay procedimientos disponibles.",-1)])))])]),_:1})]),_:1})]),_:1}),r($e,{value:"sales",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(we,{title:"Ventas"},{default:d(()=>[r(ke,null,{default:d(()=>[r(st,{density:"compact",class:"text-no-wrap my-2"},{default:d(()=>[g[23]||(g[23]=m("thead",null,[m("tr",null,[m("th",null," ID "),m("th",null," Metodo de Pago "),m("th",null," Propiedades "),m("th",null," Total "),m("th",null," Estado "),m("th",null," Fecha "),m("th",null," Accion ")])],-1)),m("tbody",null,[(S(!0),R(se,null,pe(y(p).sales,c=>(S(),R("tr",{key:c.id},[m("td",null,$(c.id),1),m("td",null,$(k(c.payment_method)),1),m("td",null,[(S(!0),R(se,null,pe(c.properties,X=>(S(),R("div",{key:X.id,class:"d-flex gap-x-2"},$(X.title)+" | "+$(X.code),1))),128))]),m("td",null,$(y(ft)(c.amount)),1),m("td",null,$(z(c.status)),1),m("td",null,$(c.creation_date),1),m("td",null,[m("div",wl,[r(Pt,{to:{name:"sale-id",params:{id:c.id}}},{default:d(()=>[r(en,null,{default:d(()=>[r(Ee,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"]),r(We,{modelValue:c.confirmation_signature,"onUpdate:modelValue":X=>c.confirmation_signature=X,"true-value":1,"false-value":0,class:"my-2",onChange:X=>le(c.id)},{default:d(()=>[r(Ue,{activator:"parent",location:"top"},{default:d(()=>g[22]||(g[22]=[q(" Confirmar firma ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])])]))),128))])]),_:1}),m("div",Cl,[g[25]||(g[25]=m("strong",null," Procesos ",-1)),y(p).procedure&&y(p).procedure.length>0?(S(),R("div",Dl,[(S(!0),R(se,null,pe(y(p).procedure,c=>(S(),R("div",{key:c.id},[r(Xt,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:X=>fe(c)},{default:d(()=>[c.pivot.is_check?(S(),be(Ee,{key:0,icon:"tabler-check",class:"mr-2"})):De("",!0),q(" "+$(c.title),1)]),_:2},1032,["color","onClick"]),r(Ue,{activator:"parent",location:"top"},{default:d(()=>[q($(c.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(S(),R("div",Vl,g[24]||(g[24]=[m("span",null,"No hay procedimientos disponibles.",-1)])))]),r(Ce,null,{default:d(()=>[r(L,{cols:"12",md:"6"},{default:d(()=>[m("div",Al,[g[28]||(g[28]=m("strong",null," Anticipo ",-1)),y(p).initial_payments&&y(p).initial_payments.length>0?(S(),be(st,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[g[27]||(g[27]=m("thead",null,[m("tr",null,[m("th",null," Propiedad "),m("th",null," Fecha "),m("th",null," Monto "),m("th")])],-1)),m("tbody",null,[(S(!0),R(se,null,pe(y(p).initial_payments,c=>(S(),R("tr",{key:c.id},[m("td",null,$(c.property_title),1),m("td",null,$(c.date),1),m("td",null,$(c.amount),1),m("td",null,[r(Ce,null,{default:d(()=>[r(We,{modelValue:c.is_paid,"onUpdate:modelValue":X=>c.is_paid=X,"true-value":1,"false-value":0,disabled:c.is_paid===1,onChange:X=>O.confirmPayment(c.id)},{default:d(()=>[r(Ue,{activator:"parent",location:"top"},{default:d(()=>g[26]||(g[26]=[q(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:2},1024)])]))),128))])]),_:1})):De("",!0)])]),_:1}),r(L,{cols:"12",md:"6"},{default:d(()=>[m("div",null,[g[31]||(g[31]=m("strong",null," Saldos ",-1)),y(p).balance_payments&&y(p).balance_payments.length>0?(S(),be(st,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[g[30]||(g[30]=m("thead",null,[m("tr",null,[m("th",null," Propiedad "),m("th",null," Fecha "),m("th",null," Monto "),m("th")])],-1)),m("tbody",null,[(S(!0),R(se,null,pe(y(p).balance_payments,c=>(S(),R("tr",{key:c.id},[m("td",null,$(c.property_title),1),m("td",null,$(c.date),1),m("td",null,$(c.amount),1),m("td",null,[r(We,{modelValue:c.is_paid,"onUpdate:modelValue":X=>c.is_paid=X,"true-value":1,"false-value":0,disabled:c.is_paid===1,onChange:X=>O.confirmPayment(c.id)},{default:d(()=>[r(Ue,{activator:"parent",location:"top"},{default:d(()=>g[29]||(g[29]=[q(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])]))),128))])]),_:1})):De("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r($e,{value:"delivery",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[m("div",Tl,[g[32]||(g[32]=m("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),y(p).sales.length>0?(S(),R("div",Sl,[(S(!0),R(se,null,pe(y(p).sales,c=>(S(),R("div",{key:c.id},[(S(!0),R(se,null,pe(c.properties,X=>(S(),R("div",{key:X.id,class:"d-flex align-center justify-between"},[r(_n,{size:"50",rounded:""},{default:d(()=>[m("img",{src:y(sn),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,kl)]),_:1}),r(L,{cols:"12",md:"7"},{default:d(()=>[r(En,{class:"font-weight-medium"},{default:d(()=>[q($(X.project_title)+" | "+$(X.title),1)]),_:2},1024),r(wn,{class:"text-disabled d-flex justify-between mt-1"},{default:d(()=>[m("span",null,$(y(ft)(X.pivot_price)),1)]),_:2},1024)]),_:2},1024)]))),128))]))),128))])):De("",!0)]),m("div",xl,[g[34]||(g[34]=m("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),y(p).procedure&&y(p).procedure.length>0?(S(),R("div",Ol,[(S(!0),R(se,null,pe(y(p).procedure,c=>(S(),R("div",{key:c.id},[r(Xt,{color:c.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:X=>fe(c.id,c.pivot.is_check)},{default:d(()=>[c.pivot.is_check?(S(),be(Ee,{key:0,icon:"tabler-check",class:"mr-2"})):De("",!0),q(" "+$(c.title),1)]),_:2},1032,["color","onClick"]),r(Ue,{activator:"parent",location:"top"},{default:d(()=>[q($(c.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(S(),R("div",Pl,g[33]||(g[33]=[m("span",null,"No hay procedimientos disponibles.",-1)])))]),r(ke,{class:"d-flex justify-center mt-4"},{default:d(()=>[r(ie,{color:"primary",size:"small"},{default:d(()=>g[35]||(g[35]=[q(" Finalizar Oportunidad ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Nl={class:"kanban"},Ml=["data-column-title"],Rl={class:"kanban-column-header"},Fl={class:"column-title"},$l={class:"small-badge"},Ul=["onClick"],Bl={class:"d-flex align-center",style:{gap:"10px","margin-block-end":"10px"}},zl={style:{flex:"7"}},jl={style:{margin:"0","font-size":"small"}},Ll={style:{margin:"0","font-size":"small"}},Xl={class:"d-flex align-center justify-end gap-2",style:{flex:"0 1 30%"}},Yl={class:"kanban-header"},Hl={class:"d-flex gap-1"},Kl={class:"label-info"},ql={class:"project-info"},Gl={key:0,class:"label-name",style:{"font-size":"small"}},Wl={key:1,class:"label-name",style:{display:"flex","align-items":"center",gap:"8px"}},Ql={class:"price"},Jl={class:"kanban-details"},Zl={style:{color:"rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity))","font-size":"small","font-weight":"700"}},ea={__name:"Kanban",setup(e){const{allOpportunityKanbanForUser:o,kanban:t,getOpportunitybyId:n,opportunity:l,changeStatusByOpportunity:a}=Tt(),{getallTypeActivities:s,typeActivities:u}=Zt(),i=J(null),h=J(!1),b=J(!1),f=J(!1),E=J(null),_=J(!1),F=J(!1),p=J(null),G=C=>{p.value={column:C.from.closest(".kanban-column"),index:Array.from(C.from.children).indexOf(C.item)},E.value=C.from.closest(".kanban-column").dataset.columnTitle,console.log("Elemento arrastrado desde:",E.value)},w=C=>{const D=C.data,T=C.from.closest(".kanban-column").dataset.columnTitle,W=C.to.closest(".kanban-column").dataset.columnTitle,M=t.value.find(le=>le.title===T),te=t.value.find(le=>le.title===W);if(M&&te){const le=te.items.findIndex(fe=>fe.id===D.id);if(le!==-1){const[fe]=te.items.splice(le,1);console.log("Elemento eliminado de la columna de destino"),M.items.push(fe),M.items.sort((O,g)=>O.id-g.id),console.log("Elemento restaurado en la columna de origen")}else console.log("Elemento no encontrado en la columna de destino")}else console.log("No se encontraron las columnas de origen o destino")},B=async C=>{},I=async(C,D)=>{console.log("change sattus entro qqui"),await a(C.id,D,{})},P=()=>{_.value=!0},Y=C=>{const D=C.from.closest(".kanban-column").dataset.columnTitle,T=C.to.closest(".kanban-column").dataset.columnTitle;return N(D,T)?(console.log(`Movimiento permitido de ${D} a ${T}`),!0):(console.log(`Movimiento NO permitido de ${D} a ${T}`),!1)},ne=async C=>{console.log(C);const D=C.from.closest(".kanban-column").dataset.columnTitle,T=C.to.closest(".kanban-column").dataset.columnTitle;if(!N(D,T))return console.log(`Movimiento NO permitido de ${D} a ${T}`),!1;if(console.log("Elemento movido de",D,"a",T),D!==T){const W=C.data;switch(T){case"LEAD":console.log("Movido a LEAD");break;case"PROSPECTO":console.log("Movido a PROSPECTO"),i.value=W,f.value=!0;break;case"PREVENTA":console.log("Movido a PREVENTA"),i.value=W,I(i.value,Fe.PRESALE.value);break;case"VENTA":await n(W.id),console.log("Movido a VENTA"),F.value=!0,console.log(l),i.value=l.value;break;case"ENTREGA":console.log("Movido a ENTREGA"),I(i.value,Fe.DELIVERY.value);break;default:console.log("Movimiento a una columna no definida");break}}He(_,W=>W&&w(C)),_.value=!1},k=C=>{i.value=C,h.value=!0},z={LEAD:["PROSPECTO","PREVENTA"],PROSPECTO:["PREVENTA"],PREVENTA:["VENTA"],VENTA:["ENTREGA"],ENTREGA:[]},N=(C,D)=>(z[C]||[]).includes(D);return Jt(async()=>{await o(),await s()}),(C,D)=>(S(),R(se,null,[m("div",Nl,[(S(!0),R(se,null,pe(y(t),(T,W)=>(S(),R("div",{key:W,class:"kanban-column","data-column-title":T.title},[m("div",Rl,[m("div",Fl,[m("h2",null,$(T.title),1),m("span",$l,$(T.items.length),1)])]),r(y(hl),{modelValue:T.items,"onUpdate:modelValue":M=>T.items=M,group:{name:T.name,pull:!0,put:!0},class:"kanban-items",onStart:G,onMove:Y,onEnd:ne},{default:d(()=>[(S(!0),R(se,null,pe(T.items,M=>(S(),R("div",{key:M.id,class:"kanban-item",onClick:te=>k(M)},[m("div",Bl,[m("div",zl,[m("p",jl,[m("strong",null,$(M.name),1)]),m("span",Ll,$(M.type_customer),1)]),m("div",Xl,[M.stage!=="VENTA"&&M.stage!=="ENTREGA"?(S(),be(ie,{key:0,color:"warning",class:"icon-container",title:"Dar de Baja",variant:"tonal",onClick:[D[0]||(D[0]=Re(()=>{},["stop"])),Re(te=>B(M),["prevent"])]},{default:d(()=>[r(Ee,{icon:"tabler-trash",class:"icon-small"})]),_:2},1032,["onClick"])):De("",!0),M.stage==="ENTREGA"?(S(),be(ie,{key:1,color:"success",title:"Completar Oportunidad",class:"icon-container",variant:"tonal",onClick:[D[1]||(D[1]=Re(()=>{},["stop"])),Re(te=>I(M,y(Fe).FINISHED.value),["prevent"])]},{default:d(()=>[r(Ee,{icon:"tabler-check"})]),_:2},1032,["onClick"])):De("",!0)])]),m("div",Yl,[m("div",Hl,[m("div",null,[m("p",Kl,$(M.property_type),1),m("div",ql,[M.property?(S(),R("span",Gl,$(M.project+" | "+M.property),1)):De("",!0),M.property==null?(S(),R("span",Wl,[r(Xt,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"30px","inline-size":"30px"}},{default:d(()=>[r(Ee,{size:"20",icon:"tabler-home"})]),_:1}),D[6]||(D[6]=m("strong",{style:{"font-size":"small"}}," Indefinido ",-1))])):De("",!0),D[7]||(D[7]=m("h4",{class:"department-code"},null,-1))]),m("p",Ql,[m("strong",null,$(y(ft)(M.price)),1)])])]),m("div",Jl,[D[8]||(D[8]=m("p",{class:"label-info"}," 10 de octubre 2024 ",-1)),m("p",Zl,$(M.phone),1)])])],8,Ul))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])],8,Ml))),128))]),r(Il,{"is-dialog-visible":h.value,"onUpdate:isDialogVisible":D[2]||(D[2]=T=>h.value=T),"opportunity-kanban":i.value,onFormCancelled:P},null,8,["is-dialog-visible","opportunity-kanban"]),r(bl,{"is-dialog-visible":b.value,"onUpdate:isDialogVisible":D[3]||(D[3]=T=>b.value=T),"opportunity-kanban":i.value},null,8,["is-dialog-visible","opportunity-kanban"]),r(un,{modelValue:F.value,"onUpdate:modelValue":D[4]||(D[4]=T=>F.value=T),opportunity:i.value,stage:"PRESALE",onFormCancelled:P},null,8,["modelValue","opportunity"]),r(yl,{"is-dialog-visible":f.value,"onUpdate:isDialogVisible":D[5]||(D[5]=T=>f.value=T),"opportunity-kanban":i.value,"type-activities":y(u),onFormCancelled:P},null,8,["is-dialog-visible","opportunity-kanban","type-activities"])],64))}},ta={__name:"AddOportunity",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,n=o,l=J(null),a=J({title:"",description:""}),{propertiesAvailbles:s,properties:u}=Oo(),{allCustomerPaginate:i,customers:h}=Cn(),b=async()=>{if(!l.value||!a.value.title){alert("Por favor selecciona un cliente y llena todos los campos requeridos.");return}const f={customer_id:l.value,...a.value};try{n("submit",f),n("update:isDialogVisible",!1)}catch(E){console.error("Error al agregar la oportunidad:",E)}};return Jt(async()=>{await i({page:1,itemsPerPage:1e3}),await s()}),(f,E)=>{const _=St,F=xo;return S(),be(kt,{"max-width":"600","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":E[4]||(E[4]=p=>f.$emit("update:isDialogVisible",p))},{default:d(()=>[r(_,{onClick:E[0]||(E[0]=p=>f.$emit("update:isDialogVisible",!1))}),r(we,{title:"Agregar Oportunidad"},{default:d(()=>[r(ke,null,{default:d(()=>[r(Ce,null,{default:d(()=>[r(L,{cols:"12"},{default:d(()=>[r(F,{modelValue:l.value,"onUpdate:modelValue":E[1]||(E[1]=p=>l.value=p),label:"Cliente",placeholder:"Selecciona un Cliente",items:y(h).map(p=>({title:p.name,value:p.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),r(L,{cols:"12",sm:"6"},{default:d(()=>[r(_t,{label:"Propiedad de Interes",placeholder:"Selecciona una Propiedad",items:y(u),outlined:""},null,8,["items"])]),_:1}),r(L,{cols:"12",sm:"6"},{default:d(()=>[r(_t,{label:"Asesor Encargado",placeholder:"Seleccine un Asesor",outlined:""})]),_:1}),r(L,{cols:"12"},{default:d(()=>[r(mn,{modelValue:a.value.description,"onUpdate:modelValue":E[2]||(E[2]=p=>a.value.description=p),label:"Descripción",placeholder:"Agrega una descripción",rows:"4",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(pn,null,{default:d(()=>[r(Dn),r(ie,{color:"secondary",onClick:E[3]||(E[3]=p=>f.$emit("update:isDialogVisible",!1))},{default:d(()=>E[5]||(E[5]=[q(" Cancelar ")])),_:1}),r(ie,{color:"primary",onClick:b},{default:d(()=>E[6]||(E[6]=[q(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const oa={class:"body-kanban"},na={class:"toolbar"},la={class:"breadcrumbs"},aa={class:"filters"},ia=["onClick"],ra={class:"filter-controls"},sa={class:"date-picker d-flex align-center justify-center"},ua={__name:"myContacts",setup(e){const o=J(!1),t=J([new Date(2024,9,10),new Date(2024,10,10)]),n=J(["Todos","PORA"]),l=J("Todos");return(a,s)=>{const u=Wt;return S(),R(se,null,[m("div",oa,[m("div",na,[m("div",la,[m("div",aa,[(S(!0),R(se,null,pe(y(n),i=>(S(),R("button",{key:i,class:rn({active:y(l)===i}),onClick:h=>l.value=i},$(i),11,ia))),128))])]),m("div",ra,[m("div",sa,[r(u,{modelValue:y(t)[0],"onUpdate:modelValue":s[0]||(s[0]=i=>y(t)[0]=i),style:{"inline-size":"200px"},label:"Desde",placeholder:"Seleccione Fecha",config:{dateFormat:"F j, Y"}},null,8,["modelValue"]),r(u,{modelValue:y(t)[1],"onUpdate:modelValue":s[1]||(s[1]=i=>y(t)[1]=i),label:"Hasta",style:{"inline-size":"200px"},placeholder:"Seleccione Fecha",config:{dateFormat:"F j, Y"}},null,8,["modelValue"])])])]),m("div",null,[r(ea)])]),r(ta,{"is-dialog-visible":y(o),"onUpdate:isDialogVisible":s[2]||(s[2]=i=>mt(o)?o.value=i:null)},null,8,["is-dialog-visible"])],64)}}},hi=Vn(ua,[["__scopeId","data-v-3956130a"]]);export{hi as default};
