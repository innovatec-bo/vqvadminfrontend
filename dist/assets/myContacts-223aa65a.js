import{_ as Qt}from"./AppTextField-44fc1f10.js";import{M as en,a2 as Ne,cr as tn,n as _,r as Q,bS as on,N as nn,cm as Jt,w as Qe,cW as ln,H as Ao,an as So,a0 as Nt,o as k,f as we,e as d,b as r,a4 as ue,v as W,a3 as Ue,a as ao,c as R,F as fe,i as be,x as F,$ as Te,d as m,z as Ae,y as an}from"./index-1b227831.js";import{u as Zt,p as rn,_ as sn}from"./PreSaleForm-0e45343d.js";import{u as kt,S as Me,a as un,b as dn}from"./usePaymentPlans-c7156831.js";import{f as bt}from"./currencyFormatter-92ad4b3c.js";import{s as io,S as ct}from"./notifications-b6da0b75.js";import{_ as eo}from"./DialogCloseBtn-ba5be469.js";import{_ as cn}from"./AddQuoteInvoice-356f3936.js";import{u as Vo}from"./useQuote-823cff2b.js";import{P as pt}from"./InvoiceAddMoney-f3ee645f.js";import{V as ke,a as pn,b as xo}from"./VCard-09efc574.js";import{V as Le}from"./VCardText-520eb94b.js";import{V as Oe}from"./VRow-aab3da1d.js";import{V as j}from"./VCol-69c08ae0.js";import{V as to}from"./VDialog-08e76cbf.js";import{_ as ko}from"./AppTextarea-eb830d45.js";import{_ as Oo}from"./AppDateTimePicker-f030c3a9.js";import{_ as Po}from"./AppSelect-daf71013.js";import{V as Xt}from"./VForm-7774cbfe.js";import{_ as mn}from"./AppAutocomplete-6bc2cbc4.js";import{u as fn}from"./useProperty-6af143e7.js";import{u as vn}from"./useSales-02195e43.js";import{V as hn,a as gn}from"./VTabs-7aad081d.js";import{V as bn,a as ze}from"./VWindowItem-cd64fa67.js";import{V as yn}from"./VDataTable-7a312186.js";import{V as mt}from"./VTable-34b44b52.js";import{V as et}from"./VCheckbox-7902ce07.js";import{V as Xe}from"./VTooltip-999127b3.js";import{V as Yt}from"./VChip-ecf02ebd.js";import{V as _n}from"./VAvatar-a01bde99.js";import{b as En,c as wn}from"./VList-6d5356af.js";import{_ as Cn}from"./_plugin-vue_export-helper-c27b6911.js";import"./form-593ede5a.js";import"./VTextField-e8500e6f.js";/* empty css                   */import"./VCounter-dcd827ab.js";import"./VImg-8d00fb1c.js";import"./VField-689ad7b3.js";import"./easing-9f15041e.js";import"./VInput-bbd3a5f5.js";import"./forwardRefs-8348545e.js";import"./api-33861f4a.js";import"./index-9c720871.js";import"./constants-f448659b.js";import"./validators-dea6e3a5.js";import"./helpers-61e4df1a.js";import"./VNodeRenderer-d54312e8.js";import"./VDivider-ed4e04b7.js";import"./VOverlay-03ad66c9.js";import"./lazy-7bf81604.js";import"./scopeId-b3dc2386.js";import"./dialog-transition-a4b1c076.js";import"./VSelect-68fca8ea.js";import"./VMenu-4335078d.js";import"./VCheckboxBtn-50b671c1.js";import"./VSelectionControl-3345e294.js";import"./filter-31e12615.js";import"./VSlideGroup-3c10e4d8.js";import"./ssrBoot-6076e3ab.js";var Dn=Object.defineProperty,Dt=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,ro=(e,o,t)=>o in e?Dn(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,qe=(e,o)=>{for(var t in o||(o={}))No.call(o,t)&&ro(e,t,o[t]);if(Dt)for(var t of Dt(o))Io.call(o,t)&&ro(e,t,o[t]);return e},Mo=(e,o)=>{var t={};for(var n in e)No.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&Dt)for(var n of Dt(e))o.indexOf(n)<0&&Io.call(e,n)&&(t[n]=e[n]);return t};const Ro="[vue-draggable-plus]: ";function Tn(e){console.warn(Ro+e)}function An(e){console.error(Ro+e)}function so(e,o,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(o,1)[0]),e}function Sn(e){return e.replace(/-(\w)/g,(o,t)=>t?t.toUpperCase():"")}function Vn(e){return Object.keys(e).reduce((o,t)=>(typeof e[t]<"u"&&(o[Sn(t)]=e[t]),o),{})}function uo(e,o){return Array.isArray(e)&&e.splice(o,1),e}function co(e,o,t){return Array.isArray(e)&&e.splice(o,0,t),e}function xn(e){return typeof e>"u"}function kn(e){return typeof e=="string"}function po(e,o,t){const n=e.children[t];e.insertBefore(o,n)}function It(e){e.parentNode&&e.parentNode.removeChild(e)}function On(e,o=document){var t;let n=null;return typeof(o==null?void 0:o.querySelector)=="function"?n=(t=o==null?void 0:o.querySelector)==null?void 0:t.call(o,e):n=document.querySelector(e),n||Tn(`Element not found: ${e}`),n}function Pn(e,o,t=null){return function(...n){return e.apply(t,n),o.apply(t,n)}}function Nn(e,o){const t=qe({},e);return Object.keys(o).forEach(n=>{t[n]?t[n]=Pn(e[n],o[n]):t[n]=o[n]}),t}function In(e){return e instanceof HTMLElement}function mo(e,o){Object.keys(e).forEach(t=>{o(t,e[t])})}function Mn(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const Rn=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function fo(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,n)}return t}function De(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?fo(Object(t),!0).forEach(function(n){Fn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fo(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function yt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yt=function(o){return typeof o}:yt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yt(e)}function Fn(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function Ve(){return Ve=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ve.apply(this,arguments)}function Bn(e,o){if(e==null)return{};var t={},n=Object.keys(e),l,a;for(a=0;a<n.length;a++)l=n[a],!(o.indexOf(l)>=0)&&(t[l]=e[l]);return t}function $n(e,o){if(e==null)return{};var t=Bn(e,o),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Ln="1.15.2";function Se(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var xe=Se(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ut=Se(/Edge/i),vo=Se(/firefox/i),lt=Se(/safari/i)&&!Se(/chrome/i)&&!Se(/android/i),Fo=Se(/iP(ad|od|hone)/i),Bo=Se(/chrome/i)&&Se(/android/i),$o={capture:!1,passive:!1};function U(e,o,t){e.addEventListener(o,t,!xe&&$o)}function B(e,o,t){e.removeEventListener(o,t,!xe&&$o)}function Tt(e,o){if(o){if(o[0]===">"&&(o=o.substring(1)),e)try{if(e.matches)return e.matches(o);if(e.msMatchesSelector)return e.msMatchesSelector(o);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(o)}catch{return!1}return!1}}function Un(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ee(e,o,t,n){if(e){t=t||document;do{if(o!=null&&(o[0]===">"?e.parentNode===t&&Tt(e,o):Tt(e,o))||n&&e===t)return e;if(e===t)break}while(e=Un(e))}return null}var ho=/\s+/g;function pe(e,o,t){if(e&&o)if(e.classList)e.classList[t?"add":"remove"](o);else{var n=(" "+e.className+" ").replace(ho," ").replace(" "+o+" "," ");e.className=(n+(t?" "+o:"")).replace(ho," ")}}function T(e,o,t){var n=e&&e.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),o===void 0?t:t[o];!(o in n)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),n[o]=t+(typeof t=="string"?"":"px")}}function We(e,o){var t="";if(typeof e=="string")t=e;else do{var n=T(e,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!o&&(e=e.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Lo(e,o,t){if(e){var n=e.getElementsByTagName(o),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function Ce(){var e=document.scrollingElement;return e||document.documentElement}function ee(e,o,t,n,l){if(!(!e.getBoundingClientRect&&e!==window)){var a,s,u,i,v,y,b;if(e!==window&&e.parentNode&&e!==Ce()?(a=e.getBoundingClientRect(),s=a.top,u=a.left,i=a.bottom,v=a.right,y=a.height,b=a.width):(s=0,u=0,i=window.innerHeight,v=window.innerWidth,y=window.innerHeight,b=window.innerWidth),(o||t)&&e!==window&&(l=l||e.parentNode,!xe))do if(l&&l.getBoundingClientRect&&(T(l,"transform")!=="none"||t&&T(l,"position")!=="static")){var O=l.getBoundingClientRect();s-=O.top+parseInt(T(l,"border-top-width")),u-=O.left+parseInt(T(l,"border-left-width")),i=s+a.height,v=u+a.width;break}while(l=l.parentNode);if(n&&e!==window){var E=We(l||e),h=E&&E.a,P=E&&E.d;E&&(s/=P,u/=h,b/=h,y/=P,i=s+y,v=u+b)}return{top:s,left:u,bottom:i,right:v,width:b,height:y}}}function go(e,o,t){for(var n=Re(e,!0),l=ee(e)[o];n;){var a=ee(n)[t],s=void 0;if(s=l>=a,!s)return n;if(n===Ce())break;n=Re(n,!1)}return!1}function Je(e,o,t,n){for(var l=0,a=0,s=e.children;a<s.length;){if(s[a].style.display!=="none"&&s[a]!==A.ghost&&(n||s[a]!==A.dragged)&&Ee(s[a],t.draggable,e,!1)){if(l===o)return s[a];l++}a++}return null}function oo(e,o){for(var t=e.lastElementChild;t&&(t===A.ghost||T(t,"display")==="none"||o&&!Tt(t,o));)t=t.previousElementSibling;return t||null}function ye(e,o){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==A.clone&&(!o||Tt(e,o))&&t++;return t}function bo(e){var o=0,t=0,n=Ce();if(e)do{var l=We(e),a=l.a,s=l.d;o+=e.scrollLeft*a,t+=e.scrollTop*s}while(e!==n&&(e=e.parentNode));return[o,t]}function jn(e,o){for(var t in e)if(e.hasOwnProperty(t)){for(var n in o)if(o.hasOwnProperty(n)&&o[n]===e[t][n])return Number(t)}return-1}function Re(e,o){if(!e||!e.getBoundingClientRect)return Ce();var t=e,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=T(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ce();if(n||o)return t;n=!0}}while(t=t.parentNode);return Ce()}function zn(e,o){if(e&&o)for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}function Mt(e,o){return Math.round(e.top)===Math.round(o.top)&&Math.round(e.left)===Math.round(o.left)&&Math.round(e.height)===Math.round(o.height)&&Math.round(e.width)===Math.round(o.width)}var at;function Uo(e,o){return function(){if(!at){var t=arguments,n=this;t.length===1?e.call(n,t[0]):e.apply(n,t),at=setTimeout(function(){at=void 0},o)}}}function Xn(){clearTimeout(at),at=void 0}function jo(e,o,t){e.scrollLeft+=o,e.scrollTop+=t}function zo(e){var o=window.Polymer,t=window.jQuery||window.Zepto;return o&&o.dom?o.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Xo(e,o,t){var n={};return Array.from(e.children).forEach(function(l){var a,s,u,i;if(!(!Ee(l,o.draggable,e,!1)||l.animated||l===t)){var v=ee(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,v.left),n.top=Math.min((s=n.top)!==null&&s!==void 0?s:1/0,v.top),n.right=Math.max((u=n.right)!==null&&u!==void 0?u:-1/0,v.right),n.bottom=Math.max((i=n.bottom)!==null&&i!==void 0?i:-1/0,v.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ve="Sortable"+new Date().getTime();function Yn(){var e=[],o;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(n){if(!(T(n,"display")==="none"||n===A.ghost)){e.push({target:n,rect:ee(n)});var l=De({},e[e.length-1].rect);if(n.thisAnimationDuration){var a=We(n,!0);a&&(l.top-=a.f,l.left-=a.e)}n.fromRect=l}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(jn(e,{target:t}),1)},animateAll:function(t){var n=this;if(!this.options.animation){clearTimeout(o),typeof t=="function"&&t();return}var l=!1,a=0;e.forEach(function(s){var u=0,i=s.target,v=i.fromRect,y=ee(i),b=i.prevFromRect,O=i.prevToRect,E=s.rect,h=We(i,!0);h&&(y.top-=h.f,y.left-=h.e),i.toRect=y,i.thisAnimationDuration&&Mt(b,y)&&!Mt(v,y)&&(E.top-y.top)/(E.left-y.left)===(v.top-y.top)/(v.left-y.left)&&(u=Hn(E,b,O,n.options)),Mt(y,v)||(i.prevFromRect=v,i.prevToRect=y,u||(u=n.options.animation),n.animate(i,E,y,u)),u&&(l=!0,a=Math.max(a,u),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},u),i.thisAnimationDuration=u)}),clearTimeout(o),l?o=setTimeout(function(){typeof t=="function"&&t()},a):typeof t=="function"&&t(),e=[]},animate:function(t,n,l,a){if(a){T(t,"transition",""),T(t,"transform","");var s=We(this.el),u=s&&s.a,i=s&&s.d,v=(n.left-l.left)/(u||1),y=(n.top-l.top)/(i||1);t.animatingX=!!v,t.animatingY=!!y,T(t,"transform","translate3d("+v+"px,"+y+"px,0)"),this.forRepaintDummy=Kn(t),T(t,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),T(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){T(t,"transition",""),T(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},a)}}}}function Kn(e){return e.offsetWidth}function Hn(e,o,t,n){return Math.sqrt(Math.pow(o.top-e.top,2)+Math.pow(o.left-e.left,2))/Math.sqrt(Math.pow(o.top-t.top,2)+Math.pow(o.left-t.left,2))*n.animation}var Ye=[],Rt={initializeByDefault:!0},dt={mount:function(e){for(var o in Rt)Rt.hasOwnProperty(o)&&!(o in e)&&(e[o]=Rt[o]);Ye.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ye.push(e)},pluginEvent:function(e,o,t){var n=this;this.eventCanceled=!1,t.cancel=function(){n.eventCanceled=!0};var l=e+"Global";Ye.forEach(function(a){o[a.pluginName]&&(o[a.pluginName][l]&&o[a.pluginName][l](De({sortable:o},t)),o.options[a.pluginName]&&o[a.pluginName][e]&&o[a.pluginName][e](De({sortable:o},t)))})},initializePlugins:function(e,o,t,n){Ye.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var i=new s(e,o,e.options);i.sortable=e,i.options=e.options,e[u]=i,Ve(t,i.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var a=this.modifyOption(e,l,e.options[l]);typeof a<"u"&&(e.options[l]=a)}},getEventProperties:function(e,o){var t={};return Ye.forEach(function(n){typeof n.eventProperties=="function"&&Ve(t,n.eventProperties.call(o[n.pluginName],e))}),t},modifyOption:function(e,o,t){var n;return Ye.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(n=l.optionListeners[o].call(e[l.pluginName],t))}),n}};function qn(e){var o=e.sortable,t=e.rootEl,n=e.name,l=e.targetEl,a=e.cloneEl,s=e.toEl,u=e.fromEl,i=e.oldIndex,v=e.newIndex,y=e.oldDraggableIndex,b=e.newDraggableIndex,O=e.originalEvent,E=e.putSortable,h=e.extraEventProperties;if(o=o||t&&t[ve],!!o){var P,K=o.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!xe&&!ut?P=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(P=document.createEvent("Event"),P.initEvent(n,!0,!0)),P.to=s||t,P.from=u||t,P.item=l||t,P.clone=a,P.oldIndex=i,P.newIndex=v,P.oldDraggableIndex=y,P.newDraggableIndex=b,P.originalEvent=O,P.pullMode=E?E.lastPutMode:void 0;var $=De(De({},h),dt.getEventProperties(n,o));for(var S in $)P[S]=$[S];t&&t.dispatchEvent(P),K[w]&&K[w].call(o,P)}}var Gn=["evt"],de=function(e,o){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.evt,l=$n(t,Gn);dt.pluginEvent.bind(A)(e,o,De({dragEl:g,parentEl:G,ghostEl:x,rootEl:Y,nextEl:$e,lastDownEl:_t,cloneEl:q,cloneHidden:Ie,dragStarted:tt,putSortable:oe,activeSortable:A.active,originalEvent:n,oldIndex:Ge,oldDraggableIndex:it,newIndex:me,newDraggableIndex:Pe,hideGhostForTarget:qo,unhideGhostForTarget:Go,cloneNowHidden:function(){Ie=!0},cloneNowShown:function(){Ie=!1},dispatchSortableEvent:function(a){se({sortable:o,name:a,originalEvent:n})}},l))};function se(e){qn(De({putSortable:oe,cloneEl:q,targetEl:g,rootEl:Y,oldIndex:Ge,oldDraggableIndex:it,newIndex:me,newDraggableIndex:Pe},e))}var g,G,x,Y,$e,_t,q,Ie,Ge,me,it,Pe,ft,oe,He=!1,At=!1,St=[],Fe,_e,Ft,Bt,yo,_o,tt,Ke,rt,st=!1,vt=!1,Et,ie,$t=[],Kt=!1,Vt=[],Ot=typeof document<"u",ht=Fo,Eo=ut||xe?"cssFloat":"float",Wn=Ot&&!Bo&&!Fo&&"draggable"in document.createElement("div"),Yo=function(){if(Ot){if(xe)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ko=function(e,o){var t=T(e),n=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Je(e,0,o),a=Je(e,1,o),s=l&&T(l),u=a&&T(a),i=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ee(l).width,v=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ee(a).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var y=s.float==="left"?"left":"right";return a&&(u.clear==="both"||u.clear===y)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||i>=n&&t[Eo]==="none"||a&&t[Eo]==="none"&&i+v>n)?"vertical":"horizontal"},Qn=function(e,o,t){var n=t?e.left:e.top,l=t?e.right:e.bottom,a=t?e.width:e.height,s=t?o.left:o.top,u=t?o.right:o.bottom,i=t?o.width:o.height;return n===s||l===u||n+a/2===s+i/2},Jn=function(e,o){var t;return St.some(function(n){var l=n[ve].options.emptyInsertThreshold;if(!(!l||oo(n))){var a=ee(n),s=e>=a.left-l&&e<=a.right+l,u=o>=a.top-l&&o<=a.bottom+l;if(s&&u)return t=n}}),t},Ho=function(e){function o(l,a){return function(s,u,i,v){var y=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(l==null&&(a||y))return!0;if(l==null||l===!1)return!1;if(a&&l==="clone")return l;if(typeof l=="function")return o(l(s,u,i,v),a)(s,u,i,v);var b=(a?s:u).options.group.name;return l===!0||typeof l=="string"&&l===b||l.join&&l.indexOf(b)>-1}}var t={},n=e.group;(!n||yt(n)!="object")&&(n={name:n}),t.name=n.name,t.checkPull=o(n.pull,!0),t.checkPut=o(n.put),t.revertClone=n.revertClone,e.group=t},qo=function(){!Yo&&x&&T(x,"display","none")},Go=function(){!Yo&&x&&T(x,"display","")};Ot&&!Bo&&document.addEventListener("click",function(e){if(At)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),At=!1,!1},!0);var Be=function(e){if(g){e=e.touches?e.touches[0]:e;var o=Jn(e.clientX,e.clientY);if(o){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.target=t.rootEl=o,t.preventDefault=void 0,t.stopPropagation=void 0,o[ve]._onDragOver(t)}}},Zn=function(e){g&&g.parentNode[ve]._isOutsideThisEl(e.target)};function A(e,o){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=o=Ve({},o),e[ve]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ko(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!lt,emptyInsertThreshold:5};dt.initializePlugins(this,e,t);for(var n in t)!(n in o)&&(o[n]=t[n]);Ho(o);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=o.forceFallback?!1:Wn,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?U(e,"pointerdown",this._onTapStart):(U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),St.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),Ve(this,Yn())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ke=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,g):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,t=this.el,n=this.options,l=n.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,i=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,v=n.filter;if(rl(t),!g&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||n.disabled)&&!i.isContentEditable&&!(!this.nativeDraggable&&lt&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Ee(u,n.draggable,t,!1),!(u&&u.animated)&&_t!==u)){if(Ge=ye(u),it=ye(u,n.draggable),typeof v=="function"){if(v.call(this,e,u,this)){se({sortable:o,rootEl:i,name:"filter",targetEl:u,toEl:t,fromEl:t}),de("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(v&&(v=v.split(",").some(function(y){if(y=Ee(i,y.trim(),t,!1),y)return se({sortable:o,rootEl:y,name:"filter",targetEl:u,fromEl:t,toEl:t}),de("filter",o,{evt:e}),!0}),v)){l&&e.cancelable&&e.preventDefault();return}n.handle&&!Ee(i,n.handle,t,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,o,t){var n=this,l=n.el,a=n.options,s=l.ownerDocument,u;if(t&&!g&&t.parentNode===l){var i=ee(t);if(Y=l,g=t,G=g.parentNode,$e=g.nextSibling,_t=t,ft=a.group,A.dragged=g,Fe={target:g,clientX:(o||e).clientX,clientY:(o||e).clientY},yo=Fe.clientX-i.left,_o=Fe.clientY-i.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,g.style["will-change"]="all",u=function(){if(de("delayEnded",n,{evt:e}),A.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!vo&&n.nativeDraggable&&(g.draggable=!0),n._triggerDragStart(e,o),se({sortable:n,name:"choose",originalEvent:e}),pe(g,a.chosenClass,!0)},a.ignore.split(",").forEach(function(v){Lo(g,v.trim(),Lt)}),U(s,"dragover",Be),U(s,"mousemove",Be),U(s,"touchmove",Be),U(s,"mouseup",n._onDrop),U(s,"touchend",n._onDrop),U(s,"touchcancel",n._onDrop),vo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),de("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(ut||xe))){if(A.eventCanceled){this._onDrop();return}U(s,"mouseup",n._disableDelayedDrag),U(s,"touchend",n._disableDelayedDrag),U(s,"touchcancel",n._disableDelayedDrag),U(s,"mousemove",n._delayedDragTouchMoveHandler),U(s,"touchmove",n._delayedDragTouchMoveHandler),a.supportPointer&&U(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(u,a.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&Lt(g),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._disableDelayedDrag),B(e,"touchend",this._disableDelayedDrag),B(e,"touchcancel",this._disableDelayedDrag),B(e,"mousemove",this._delayedDragTouchMoveHandler),B(e,"touchmove",this._delayedDragTouchMoveHandler),B(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?U(document,"pointermove",this._onTouchMove):o?U(document,"touchmove",this._onTouchMove):U(document,"mousemove",this._onTouchMove):(U(g,"dragend",this),U(Y,"dragstart",this._onDragStart));try{document.selection?wt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(He=!1,Y&&g){de("dragStarted",this,{evt:o}),this.nativeDraggable&&U(document,"dragover",Zn);var t=this.options;!e&&pe(g,t.dragClass,!1),pe(g,t.ghostClass,!0),A.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(_e){this._lastX=_e.clientX,this._lastY=_e.clientY,qo();for(var e=document.elementFromPoint(_e.clientX,_e.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(_e.clientX,_e.clientY),e!==o);)o=e;if(g.parentNode[ve]._isOutsideThisEl(e),o)do{if(o[ve]){var t=void 0;if(t=o[ve]._onDragOver({clientX:_e.clientX,clientY:_e.clientY,target:e,rootEl:o}),t&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);Go()}},_onTouchMove:function(e){if(Fe){var o=this.options,t=o.fallbackTolerance,n=o.fallbackOffset,l=e.touches?e.touches[0]:e,a=x&&We(x,!0),s=x&&a&&a.a,u=x&&a&&a.d,i=ht&&ie&&bo(ie),v=(l.clientX-Fe.clientX+n.x)/(s||1)+(i?i[0]-$t[0]:0)/(s||1),y=(l.clientY-Fe.clientY+n.y)/(u||1)+(i?i[1]-$t[1]:0)/(u||1);if(!A.active&&!He){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(x){a?(a.e+=v-(Ft||0),a.f+=y-(Bt||0)):a={a:1,b:0,c:0,d:1,e:v,f:y};var b="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");T(x,"webkitTransform",b),T(x,"mozTransform",b),T(x,"msTransform",b),T(x,"transform",b),Ft=v,Bt=y,_e=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!x){var e=this.options.fallbackOnBody?document.body:Y,o=ee(g,!0,ht,!0,e),t=this.options;if(ht){for(ie=e;T(ie,"position")==="static"&&T(ie,"transform")==="none"&&ie!==document;)ie=ie.parentNode;ie!==document.body&&ie!==document.documentElement?(ie===document&&(ie=Ce()),o.top+=ie.scrollTop,o.left+=ie.scrollLeft):ie=Ce(),$t=bo(ie)}x=g.cloneNode(!0),pe(x,t.ghostClass,!1),pe(x,t.fallbackClass,!0),pe(x,t.dragClass,!0),T(x,"transition",""),T(x,"transform",""),T(x,"box-sizing","border-box"),T(x,"margin",0),T(x,"top",o.top),T(x,"left",o.left),T(x,"width",o.width),T(x,"height",o.height),T(x,"opacity","0.8"),T(x,"position",ht?"absolute":"fixed"),T(x,"zIndex","100000"),T(x,"pointerEvents","none"),A.ghost=x,e.appendChild(x),T(x,"transform-origin",yo/parseInt(x.style.width)*100+"% "+_o/parseInt(x.style.height)*100+"%")}},_onDragStart:function(e,o){var t=this,n=e.dataTransfer,l=t.options;if(de("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}de("setupClone",this),A.eventCanceled||(q=zo(g),q.removeAttribute("id"),q.draggable=!1,q.style["will-change"]="",this._hideClone(),pe(q,this.options.chosenClass,!1),A.clone=q),t.cloneId=wt(function(){de("clone",t),!A.eventCanceled&&(t.options.removeCloneOnHide||Y.insertBefore(q,g),t._hideClone(),se({sortable:t,name:"clone"}))}),!o&&pe(g,l.dragClass,!0),o?(At=!0,t._loopId=setInterval(t._emulateDragOver,50)):(B(document,"mouseup",t._onDrop),B(document,"touchend",t._onDrop),B(document,"touchcancel",t._onDrop),n&&(n.effectAllowed="move",l.setData&&l.setData.call(t,n,g)),U(document,"drop",t),T(g,"transform","translateZ(0)")),He=!0,t._dragStartId=wt(t._dragStarted.bind(t,o,e)),U(document,"selectstart",t),tt=!0,lt&&T(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,t=e.target,n,l,a,s=this.options,u=s.group,i=A.active,v=ft===u,y=s.sort,b=oe||i,O,E=this,h=!1;if(Kt)return;function P(D,f){de(D,E,De({evt:e,isOwner:v,axis:O?"vertical":"horizontal",revert:a,dragRect:n,targetRect:l,canSort:y,fromSortable:b,target:t,completed:w,onMove:function(c,C){return gt(Y,o,g,n,c,ee(c),e,C)},changed:$},f))}function K(){P("dragOverAnimationCapture"),E.captureAnimationState(),E!==b&&b.captureAnimationState()}function w(D){return P("dragOverCompleted",{insertion:D}),D&&(v?i._hideClone():i._showClone(E),E!==b&&(pe(g,oe?oe.options.ghostClass:i.options.ghostClass,!1),pe(g,s.ghostClass,!0)),oe!==E&&E!==A.active?oe=E:E===A.active&&oe&&(oe=null),b===E&&(E._ignoreWhileAnimating=t),E.animateAll(function(){P("dragOverAnimationComplete"),E._ignoreWhileAnimating=null}),E!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(t===g&&!g.animated||t===o&&!t.animated)&&(Ke=null),!s.dragoverBubble&&!e.rootEl&&t!==document&&(g.parentNode[ve]._isOutsideThisEl(e.target),!D&&Be(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function $(){me=ye(g),Pe=ye(g,s.draggable),se({sortable:E,name:"change",toEl:o,newIndex:me,newDraggableIndex:Pe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Ee(t,s.draggable,o,!0),P("dragOver"),A.eventCanceled)return h;if(g.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||E._ignoreWhileAnimating===t)return w(!1);if(At=!1,i&&!s.disabled&&(v?y||(a=G!==Y):oe===this||(this.lastPutMode=ft.checkPull(this,i,g,e))&&u.checkPut(this,i,g,e))){if(O=this._getDirection(e,t)==="vertical",n=ee(g),P("dragOverValid"),A.eventCanceled)return h;if(a)return G=Y,K(),this._hideClone(),P("revert"),A.eventCanceled||($e?Y.insertBefore(g,$e):Y.appendChild(g)),w(!0);var S=oo(o,s.draggable);if(!S||nl(e,O,this)&&!S.animated){if(S===g)return w(!1);if(S&&o===e.target&&(t=S),t&&(l=ee(t)),gt(Y,o,g,n,t,l,e,!!t)!==!1)return K(),S&&S.nextSibling?o.insertBefore(g,S.nextSibling):o.appendChild(g),G=o,$(),w(!0)}else if(S&&ol(e,O,this)){var I=Je(o,0,s,!0);if(I===g)return w(!1);if(t=I,l=ee(t),gt(Y,o,g,n,t,l,e,!1)!==!1)return K(),o.insertBefore(g,I),G=o,$(),w(!0)}else if(t.parentNode===o){l=ee(t);var H=0,ce,V=g.parentNode!==o,N=!Qn(g.animated&&g.toRect||n,t.animated&&t.toRect||l,O),L=O?"top":"left",X=go(t,"top","top")||go(g,"top","top"),ne=X?X.scrollTop:void 0;Ke!==t&&(ce=l[L],st=!1,vt=!N&&s.invertSwap||V),H=ll(e,t,l,O,N?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,vt,Ke===t);var J;if(H!==0){var re=ye(g);do re-=H,J=G.children[re];while(J&&(T(J,"display")==="none"||J===x))}if(H===0||J===t)return w(!1);Ke=t,rt=H;var le=t.nextElementSibling,he=!1;he=H===1;var ge=gt(Y,o,g,n,t,l,e,he);if(ge!==!1)return(ge===1||ge===-1)&&(he=ge===1),Kt=!0,setTimeout(tl,30),K(),he&&!le?o.appendChild(g):t.parentNode.insertBefore(g,he?le:t),X&&jo(X,0,ne-X.scrollTop),G=g.parentNode,ce!==void 0&&!vt&&(Et=Math.abs(ce-ee(t)[L])),$(),w(!0)}if(o.contains(g))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){B(document,"mousemove",this._onTouchMove),B(document,"touchmove",this._onTouchMove),B(document,"pointermove",this._onTouchMove),B(document,"dragover",Be),B(document,"mousemove",Be),B(document,"touchmove",Be)},_offUpEvents:function(){var e=this.el.ownerDocument;B(e,"mouseup",this._onDrop),B(e,"touchend",this._onDrop),B(e,"pointerup",this._onDrop),B(e,"touchcancel",this._onDrop),B(document,"selectstart",this)},_onDrop:function(e){var o=this.el,t=this.options;if(me=ye(g),Pe=ye(g,t.draggable),de("drop",this,{evt:e}),G=g&&g.parentNode,me=ye(g),Pe=ye(g,t.draggable),A.eventCanceled){this._nulling();return}He=!1,vt=!1,st=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ht(this.cloneId),Ht(this._dragStartId),this.nativeDraggable&&(B(document,"drop",this),B(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),lt&&T(document.body,"user-select",""),T(g,"transform",""),e&&(tt&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(Y===G||oe&&oe.lastPutMode!=="clone")&&q&&q.parentNode&&q.parentNode.removeChild(q),g&&(this.nativeDraggable&&B(g,"dragend",this),Lt(g),g.style["will-change"]="",tt&&!He&&pe(g,oe?oe.options.ghostClass:this.options.ghostClass,!1),pe(g,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:G,newIndex:null,newDraggableIndex:null,originalEvent:e}),Y!==G?(me>=0&&(se({rootEl:G,name:"add",toEl:G,fromEl:Y,originalEvent:e}),se({sortable:this,name:"remove",toEl:G,originalEvent:e}),se({rootEl:G,name:"sort",toEl:G,fromEl:Y,originalEvent:e}),se({sortable:this,name:"sort",toEl:G,originalEvent:e})),oe&&oe.save()):me!==Ge&&me>=0&&(se({sortable:this,name:"update",toEl:G,originalEvent:e}),se({sortable:this,name:"sort",toEl:G,originalEvent:e})),A.active&&((me==null||me===-1)&&(me=Ge,Pe=it),se({sortable:this,name:"end",toEl:G,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){de("nulling",this),Y=g=G=x=$e=q=_t=Ie=Fe=_e=tt=me=Pe=Ge=it=Ke=rt=oe=ft=A.dragged=A.ghost=A.clone=A.active=null,Vt.forEach(function(e){e.checked=!0}),Vt.length=Ft=Bt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":g&&(this._onDragOver(e),el(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,t=this.el.children,n=0,l=t.length,a=this.options;n<l;n++)o=t[n],Ee(o,a.draggable,this.el,!1)&&e.push(o.getAttribute(a.dataIdAttr)||il(o));return e},sort:function(e,o){var t={},n=this.el;this.toArray().forEach(function(l,a){var s=n.children[a];Ee(s,this.options.draggable,n,!1)&&(t[l]=s)},this),o&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(n.removeChild(t[l]),n.appendChild(t[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return Ee(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var t=this.options;if(o===void 0)return t[e];var n=dt.modifyOption(this,e,o);typeof n<"u"?t[e]=n:t[e]=o,e==="group"&&Ho(t)},destroy:function(){de("destroy",this);var e=this.el;e[ve]=null,B(e,"mousedown",this._onTapStart),B(e,"touchstart",this._onTapStart),B(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(B(e,"dragover",this),B(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),St.splice(St.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ie){if(de("hideClone",this),A.eventCanceled)return;T(q,"display","none"),this.options.removeCloneOnHide&&q.parentNode&&q.parentNode.removeChild(q),Ie=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ie){if(de("showClone",this),A.eventCanceled)return;g.parentNode==Y&&!this.options.group.revertClone?Y.insertBefore(q,g):$e?Y.insertBefore(q,$e):Y.appendChild(q),this.options.group.revertClone&&this.animate(g,q),T(q,"display",""),Ie=!1}}};function el(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function gt(e,o,t,n,l,a,s,u){var i,v=e[ve],y=v.options.onMove,b;return window.CustomEvent&&!xe&&!ut?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=o,i.from=e,i.dragged=t,i.draggedRect=n,i.related=l||o,i.relatedRect=a||ee(o),i.willInsertAfter=u,i.originalEvent=s,e.dispatchEvent(i),y&&(b=y.call(v,i,s)),b}function Lt(e){e.draggable=!1}function tl(){Kt=!1}function ol(e,o,t){var n=ee(Je(t.el,0,t.options,!0)),l=Xo(t.el,t.options,x),a=10;return o?e.clientX<l.left-a||e.clientY<n.top&&e.clientX<n.right:e.clientY<l.top-a||e.clientY<n.bottom&&e.clientX<n.left}function nl(e,o,t){var n=ee(oo(t.el,t.options.draggable)),l=Xo(t.el,t.options,x),a=10;return o?e.clientX>l.right+a||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>l.bottom+a||e.clientX>n.right&&e.clientY>n.top}function ll(e,o,t,n,l,a,s,u){var i=n?e.clientY:e.clientX,v=n?t.height:t.width,y=n?t.top:t.left,b=n?t.bottom:t.right,O=!1;if(!s){if(u&&Et<v*l){if(!st&&(rt===1?i>y+v*a/2:i<b-v*a/2)&&(st=!0),st)O=!0;else if(rt===1?i<y+Et:i>b-Et)return-rt}else if(i>y+v*(1-l)/2&&i<b-v*(1-l)/2)return al(o)}return O=O||s,O&&(i<y+v*a/2||i>b-v*a/2)?i>y+v/2?1:-1:0}function al(e){return ye(g)<ye(e)?1:-1}function il(e){for(var o=e.tagName+e.className+e.src+e.href+e.textContent,t=o.length,n=0;t--;)n+=o.charCodeAt(t);return n.toString(36)}function rl(e){Vt.length=0;for(var o=e.getElementsByTagName("input"),t=o.length;t--;){var n=o[t];n.checked&&Vt.push(n)}}function wt(e){return setTimeout(e,0)}function Ht(e){return clearTimeout(e)}Ot&&U(document,"touchmove",function(e){(A.active||He)&&e.cancelable&&e.preventDefault()});A.utils={on:U,off:B,css:T,find:Lo,is:function(e,o){return!!Ee(e,o,e,!1)},extend:zn,throttle:Uo,closest:Ee,toggleClass:pe,clone:zo,index:ye,nextTick:wt,cancelNextTick:Ht,detectDirection:Ko,getChild:Je};A.get=function(e){return e[ve]};A.mount=function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];o[0].constructor===Array&&(o=o[0]),o.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(A.utils=De(De({},A.utils),n.utils)),dt.mount(n)})};A.create=function(e,o){return new A(e,o)};A.version=Ln;var Z=[],ot,qt,Gt=!1,Ut,jt,xt,nt;function sl(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return e.prototype={dragStarted:function(o){var t=o.originalEvent;this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):this.options.supportPointer?U(document,"pointermove",this._handleFallbackAutoScroll):t.touches?U(document,"touchmove",this._handleFallbackAutoScroll):U(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var t=o.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):(B(document,"pointermove",this._handleFallbackAutoScroll),B(document,"touchmove",this._handleFallbackAutoScroll),B(document,"mousemove",this._handleFallbackAutoScroll)),wo(),Ct(),Xn()},nulling:function(){xt=qt=ot=Gt=nt=Ut=jt=null,Z.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,t){var n=this,l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,s=document.elementFromPoint(l,a);if(xt=o,t||this.options.forceAutoScrollFallback||ut||xe||lt){zt(o,this.options,s,t);var u=Re(s,!0);Gt&&(!nt||l!==Ut||a!==jt)&&(nt&&wo(),nt=setInterval(function(){var i=Re(document.elementFromPoint(l,a),!0);i!==u&&(u=i,Ct()),zt(o,n.options,i,t)},10),Ut=l,jt=a)}else{if(!this.options.bubbleScroll||Re(s,!0)===Ce()){Ct();return}zt(o,this.options,Re(s,!1),!1)}}},Ve(e,{pluginName:"scroll",initializeByDefault:!0})}function Ct(){Z.forEach(function(e){clearInterval(e.pid)}),Z=[]}function wo(){clearInterval(nt)}var zt=Uo(function(e,o,t,n){if(o.scroll){var l=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=o.scrollSensitivity,u=o.scrollSpeed,i=Ce(),v=!1,y;qt!==t&&(qt=t,Ct(),ot=o.scroll,y=o.scrollFn,ot===!0&&(ot=Re(t,!0)));var b=0,O=ot;do{var E=O,h=ee(E),P=h.top,K=h.bottom,w=h.left,$=h.right,S=h.width,I=h.height,H=void 0,ce=void 0,V=E.scrollWidth,N=E.scrollHeight,L=T(E),X=E.scrollLeft,ne=E.scrollTop;E===i?(H=S<V&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),ce=I<N&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(H=S<V&&(L.overflowX==="auto"||L.overflowX==="scroll"),ce=I<N&&(L.overflowY==="auto"||L.overflowY==="scroll"));var J=H&&(Math.abs($-l)<=s&&X+S<V)-(Math.abs(w-l)<=s&&!!X),re=ce&&(Math.abs(K-a)<=s&&ne+I<N)-(Math.abs(P-a)<=s&&!!ne);if(!Z[b])for(var le=0;le<=b;le++)Z[le]||(Z[le]={});(Z[b].vx!=J||Z[b].vy!=re||Z[b].el!==E)&&(Z[b].el=E,Z[b].vx=J,Z[b].vy=re,clearInterval(Z[b].pid),(J!=0||re!=0)&&(v=!0,Z[b].pid=setInterval((function(){n&&this.layer===0&&A.active._onTouchMove(xt);var he=Z[this.layer].vy?Z[this.layer].vy*u:0,ge=Z[this.layer].vx?Z[this.layer].vx*u:0;typeof y=="function"&&y.call(A.dragged.parentNode[ve],ge,he,e,xt,Z[this.layer].el)!=="continue"||jo(Z[this.layer].el,ge,he)}).bind({layer:b}),24))),b++}while(o.bubbleScroll&&O!==i&&(O=Re(O,!1)));Gt=v}},30),Wo=function(e){var o=e.originalEvent,t=e.putSortable,n=e.dragEl,l=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var i=t||l;s();var v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,y=document.elementFromPoint(v.clientX,v.clientY);u(),i&&!i.el.contains(y)&&(a("spill"),this.onSpill({dragEl:n,putSortable:t}))}};function no(){}no.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var n=Je(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(o,n):this.sortable.el.appendChild(o),this.sortable.animateAll(),t&&t.animateAll()},drop:Wo};Ve(no,{pluginName:"revertOnSpill"});function lo(){}lo.prototype={onSpill:function(e){var o=e.dragEl,t=e.putSortable,n=t||this.sortable;n.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),n.animateAll()},drop:Wo};Ve(lo,{pluginName:"removeOnSpill"});A.mount(new sl);A.mount(lo,no);function ul(e){return e==null?e:JSON.parse(JSON.stringify(e))}function dl(e){Jt()&&ln(e)}function cl(e){Jt()?Ao(e):So(e)}let Qo=null,Jo=null;function Co(e=null,o=null){Qo=e,Jo=o}function pl(){return{data:Qo,clonedData:Jo}}const Do=Symbol("cloneElement");function ml(...e){var o,t;const n=(o=Jt())==null?void 0:o.proxy,l=e[0];let[,a,s]=e;Array.isArray(_(a))||(s=a,a=null);let u=null;const{immediate:i=!0,clone:v=ul,customUpdate:y}=(t=_(s))!=null?t:{};function b(V){var N;const L=_((N=_(a))==null?void 0:N[V.oldIndex]),X=v(L);Co(L,X),V.item[Do]=X}function O(V){const N=V.item[Do];if(!xn(N)){if(It(V.item),Nt(a)){const L=[..._(a)];a.value=co(L,V.newDraggableIndex,N);return}co(_(a),V.newDraggableIndex,N)}}function E(V){const{from:N,item:L,oldIndex:X,oldDraggableIndex:ne,pullMode:J,clone:re}=V;if(po(N,L,X),J==="clone"){It(re);return}if(Nt(a)){const le=[..._(a)];a.value=uo(le,ne);return}uo(_(a),ne)}function h(V){if(y){y(V);return}const{from:N,item:L,oldIndex:X,newIndex:ne}=V;if(It(L),po(N,L,X),Nt(a)){const J=[..._(a)];a.value=so(J,X,ne);return}so(_(a),X,ne)}function P(){So(()=>{Co()})}const K={onUpdate:h,onStart:b,onAdd:O,onRemove:E,onEnd:P};function w(V){const N=_(l);return V||(V=kn(N)?On(N,n==null?void 0:n.$el):N),V&&!In(V)&&(V=V.$el),V||An("Root element not found"),V}function $(){var V;const N=(V=_(s))!=null?V:{},L=Mo(N,["immediate","clone"]);return mo(L,(X,ne)=>{Mn(X)&&(L[X]=(J,...re)=>{const le=pl();return Rn(J,le),ne(J,...re)})}),Nn(a===null?{}:K,L)}const S=V=>{V=w(V),u&&I.destroy(),u=new A(V,$())};Qe(()=>s,()=>{u&&mo($(),(V,N)=>{u==null||u.option(V,N)})},{deep:!0});const I={option:(V,N)=>u==null?void 0:u.option(V,N),destroy:()=>{u==null||u.destroy(),u=null},save:()=>u==null?void 0:u.save(),toArray:()=>u==null?void 0:u.toArray(),closest:(...V)=>u==null?void 0:u.closest(...V)},H=()=>I==null?void 0:I.option("disabled",!0),ce=()=>I==null?void 0:I.option("disabled",!1);return cl(()=>{i&&S()}),dl(I.destroy),qe({start:S,pause:H,resume:ce},I)}const Wt=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],fl=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Wt.map(e=>`on${e.replace(/^\S/,o=>o.toUpperCase())}`)],vl=en({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:fl,emits:["update:modelValue",...Wt],setup(e,{slots:o,emit:t,expose:n,attrs:l}){const a=Wt.reduce((y,b)=>{const O=`on${b.replace(/^\S/,E=>E.toUpperCase())}`;return y[O]=(...E)=>t(b,...E),y},{}),s=Ne(()=>{const y=tn(e),b=Mo(y,["modelValue"]),O=Object.entries(b).reduce((E,[h,P])=>{const K=_(P);return K!==void 0&&(E[h]=K),E},{});return qe(qe({},a),Vn(qe(qe({},l),O)))}),u=Ne({get:()=>e.modelValue,set:y=>t("update:modelValue",y)}),i=Q(),v=on(ml(e.target||i,u,s));return n(v),()=>{var y;return nn(e.tag||"div",{ref:i},(y=o==null?void 0:o.default)==null?void 0:y.call(o,v))}}}),hl={__name:"AddQuoteDialog",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:String,required:!0}},emits:["update:isDialogVisible","submit"],setup(e,{emit:o}){const t=e,{generateQuote:n}=Vo(),{getOpportunitybyId:l,opportunity:a,changeStatusByOpportunity:s}=kt(),u=Q(!1),i=Q({social_reason:"",nit:"",address:"",email:"",phone:"",landline:"",workplace:"",expiration_date:null,creation_date:new Date().toISOString().split("T")[0],observations:"",payment_method:null,amount:null,initial_fee:null,percentage_initial_fee:null,balance:null,opportunity_id:null,customer_id:null,properties:[{property_id:null,price:null,price_it:null,price_contrato:null,property_type:pt.DEPARTAMENT.value,property_type_name:pt.DEPARTAMENT.label},{property_id:null,price:null,price_it:null,price_contrato:null,property_type:pt.PARK.value,property_type_name:pt.PARK.label}],differs_initial_fee:[],differs_balance:[]}),v=Ne(()=>i.value.social_reason&&i.value.nit&&i.value.phone&&i.value.amount&&i.value.creation_date&&i.value.expiration_date&&i.value.payment_method&&i.value.customer_id),y=Ne(()=>i.value.properties.every(w=>w.property_id!==null&&w.price!==null&&w.price_it!==null&&w.price_contrato!==null)),b=Ne(()=>i.value.differs_initial_fee.length===0?!0:i.value.differs_initial_fee.every(w=>w.amount!==null)),O=Ne(()=>{if(i.value.differs_initial_fee.length===0)return!0;const w=i.value.differs_initial_fee.reduce((I,H)=>I+(H.amount||0),0),$=parseFloat(w),S=parseFloat(i.value.initial_fee);return $===S}),E=Ne(()=>v.value&&y.value&&b.value),h=w=>{i.value.properties.push(w)},P=w=>{i.value.properties.splice(w,1)},K=async()=>{if(!E.value){io("Validación fallida","Completa todos los campos obligatorios.");return}if(!O.value){io("Validación fallida","La suma de las diferencias del anticipo no son correctas");return}u.value=!0;try{console.log(i),await n(i.value),await s(t.opportunityKanban.id,Me.PRESALE.value,{})}catch(w){console.error("Error generando la venta:",w)}finally{u.value=!1}};return Qe(()=>i.value.properties,w=>{let $=0;w.forEach(S=>{if(S.price){const I=parseFloat(S.price)||0;S.price_it=I*.03,S.price_contrato=I+S.price_it,$+=S.price_contrato}else S.price_it=null}),i.value.amount=$},{deep:!0}),Qe(()=>t.isDialogVisible,async w=>{w&&(console.log("El diálogo se ha abierto"),await l(t.opportunityKanban.id),console.log("Datos de la oportunidad cargados:",a.value),i.value.customer_id=a.value.customer.id,a.value&&(i.value.social_reason=a.value.customer.name,i.value.email=a.value.customer.email,i.value.phone=a.value.customer.phone,i.value.nit=a.value.customer.ci,i.value.opportunity_id=a.value.id,a.value.property_id!==null?(a.value.property.property_type==="PARK"&&(i.value.properties[1].property_id=a.value.property_id,i.value.properties[0].property_id=null,i.value.properties[0].price=null,i.value.properties[0].price_it=null,i.value.properties[0].price_contrato=null),a.value.property.property_type==="DEPARTAMENT"&&(i.value.properties[0].property_id=a.value.property_id,i.value.properties[1].property_id=null,i.value.properties[1].price=null,i.value.properties[1].price_it=null,i.value.properties[1].price_contrato=null)):(i.value.properties[1].property_id=null,i.value.properties[1].price=null,i.value.properties[1].price_it=null,i.value.properties[1].price_contrato=null,i.value.properties[0].property_id=null,i.value.properties[0].price=null,i.value.properties[0].price_it=null,i.value.properties[0].price_contrato=null)))}),(w,$)=>{const S=eo;return k(),we(to,{"max-width":"987","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":$[2]||($[2]=I=>w.$emit("update:isDialogVisible",I))},{default:d(()=>[r(S,{onClick:$[0]||($[0]=I=>w.$emit("update:isDialogVisible",!1))}),r(ke,null,{default:d(()=>[r(Le,null,{default:d(()=>[r(Oe,null,{default:d(()=>[r(j,{cols:"12"},{default:d(()=>[r(cn,{data:i.value,onPush:h,onRemove:P},null,8,["data"])]),_:1}),r(j,{cols:"12",class:"d-flex justify-end align-center gap-x-4"},{default:d(()=>[r(ue,{loading:u.value,disabled:u.value,color:"primary",onClick:K},{default:d(()=>$[3]||($[3]=[W(" Guardar Cotizaciónasa ")])),_:1},8,["loading","disabled"]),r(ue,{text:"",color:"error",onClick:$[1]||($[1]=I=>w.$emit("update:isDialogVisible",!1))},{default:d(()=>$[4]||($[4]=[W(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},gl={__name:"AddActivity",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0},typeActivities:{type:Array,default:()=>[]}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{registerActivity:l,loadingActivity:a}=Zt(),{generateProspect:s}=kt(),u=Q({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null}),i=()=>{n("formCancelled"),n("update:isDialogVisible",!1)},v=async()=>{await l(u.value),console.log("opportunityKanban",t.opportunityKanban.stage),t.opportunityKanban.stage==="LEAD"&&await s(t.opportunityKanban.id,{}),u.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},n("update:isDialogVisible",!1)};return Qe(()=>t.isDialogVisible,async y=>{var b,O;y===!0&&(u.value.opportunity_id=((b=t.opportunityKanban)==null?void 0:b.id)??null,u.value.assigned_to=((O=t.opportunityKanban)==null?void 0:O.user_id)??null,console.log(t.opportunityKanban))}),(y,b)=>{const O=eo,E=Qt,h=Po,P=Oo,K=ko;return k(),we(to,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":i},{default:d(()=>[r(O,{onClick:i}),r(ke,{class:"pa-sm-8"},{default:d(()=>[r(pn,null,{default:d(()=>[r(xo,{class:"text-h3 font-weight-medium mb-3"},{default:d(()=>b[4]||(b[4]=[W(" Agregar Actividad ")])),_:1}),r(Le,null,{default:d(()=>[r(Xt,{onSubmit:Ue(v,["prevent"])},{default:d(()=>[r(Oe,null,{default:d(()=>[r(j,{cols:"12"},{default:d(()=>[r(E,{modelValue:u.value.title,"onUpdate:modelValue":b[0]||(b[0]=w=>u.value.title=w),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(h,{modelValue:u.value.type_activity_id,"onUpdate:modelValue":b[1]||(b[1]=w=>u.value.type_activity_id=w),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:t.typeActivities.map(w=>({title:w.name,value:w.id}))},null,8,["modelValue","items"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(P,{modelValue:u.value.scheduled_at,"onUpdate:modelValue":b[2]||(b[2]=w=>u.value.scheduled_at=w),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),r(j,{cols:"12"},{default:d(()=>[r(K,{modelValue:u.value.description,"onUpdate:modelValue":b[3]||(b[3]=w=>u.value.description=w),label:"Detalla tu Actividad",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",class:"text-center"},{default:d(()=>[r(ue,{type:"submit",class:"me-3",disabled:_(a),loading:_(a)},{default:d(()=>b[5]||(b[5]=[W(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),r(ue,{color:"secondary",variant:"tonal",onClick:i},{default:d(()=>b[6]||(b[6]=[W(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},To={PENDING:{value:"PENDING",label:"PENDIENTE"},COMPLETED:{value:"COMPLETED",label:"COMPLETADO"},CANCELED:{value:"CANCELED",label:"CANCELADO"}},bl={key:0},yl={key:1,class:"text-center my-5"},_l={class:"d-flex"},El={class:"my-5"},wl={key:0,class:"d-flex flex-wrap gap-2 my-5"},Cl={key:1},Dl={class:"mb-4"},Tl={class:"my-5"},Al={key:0},Sl=["src"],Vl={class:"my-5"},xl={key:0,class:"d-flex flex-wrap gap-2 my-5"},kl={key:1},Ol={__name:"TaskKanban",props:{isDialogVisible:{type:Boolean,required:!0},opportunityKanban:{type:Object,required:!0}},emits:["update:isDialogVisible","formCancelled"],setup(e,{emit:o}){const t=e,n=o,{changeStatusQuotesCustomer:l}=Vo(),{checkProcessForOpportunity:a}=un(),{propertiesAvailbles:s,properties:u}=fn(),{getallTypeActivities:i,typeActivities:v,registerActivity:y,loadingActivity:b,changeStatusActivity:O}=Zt(),{getOpportunitybyId:E,opportunity:h,changeOpportunity:P,loadingOpportunity:K}=kt(),{SaleChangeSignature:w}=vn(),{confirmPaymentPlans:$}=dn(),S=Q({title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:h.value.id,assigned_to:null}),I=()=>{n("update:isDialogVisible",!1)},H=Q([{title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}]),ce=f=>f==="CASH"?"Al Contado":f==="DIRECTCREDIT"?"Crédito Directo":f==="BANKCREDIT"?"Crédito Bancario":f,V=f=>f==="SALE"?"VENDIDO":f==="DISCARD"?"CANCELADO":f==="DELIVERY"?"ENTREGADO":f,N=Q(H.value[0].value),L=async()=>{var f;(f=t.opportunityKanban)!=null&&f.id&&await E(t.opportunityKanban.id)},X=async()=>{S.value.opportunity_id=h.value.id,await y(S.value),S.value={title:null,description:null,type_activity_id:null,scheduled_at:null,opportunity_id:null,assigned_to:null},I()},ne=async()=>{console.log("antes del save:",h);const f={id:h.value.id,stage_id:h.value.stage_id,description:h.value.description,property_id:h.value.property_id,customer:{id:h.value.customer.id,name:h.value.customer.name,email:h.value.customer.email,ci:h.value.customer.ci,cod_phone:h.value.cod_phone,phone:h.value.customer.phone,type_customer:h.value.customer.type_customer}};await P(h.value.id,f),I()},J=async f=>{await O(f,{state_activity:To.COMPLETED.value}),I()},re=()=>{const f=[];f.push({title:"Informacion",value:"information"},{title:"Agregar Actividad",value:"add_activity"},{title:"Lista de Actividades",value:"activity_list"}),t.opportunityKanban.stage===Me.DELIVERY.label&&f.push({title:"Entrega",value:"delivery"}),t.opportunityKanban.stage===Me.SALE.label&&f.push({title:"Ventas",value:"sales"}),t.opportunityKanban.stage===Me.PRESALE.label&&f.push({title:"Cotizaciones",value:"quotations"}),H.value=f,N.value=H.value[0].value};Qe(()=>t.isDialogVisible,async f=>{f&&(await L(),re(),await s(),await i())});const le=async(f,c)=>{const C=c==="APPROVED"?"NOT_APPROVED":"APPROVED";console.log(`Procedimiento ${f} marcado como: ${c}`),await l(f,{status:C})},he=async f=>{console.log("entra a firma"),await w(f)},ge=async f=>{console.log(`Procedimiento ${f.id} marcado como: ${f.pivot.is_check?"realizado":"no realizado"}`),await a(h.value.id,f.id,{is_check:!f.pivot.is_check}),f.pivot.is_check=!f.pivot.is_check},D=async f=>{await $(f)};return(f,c)=>{const C=eo,te=Qt,M=Po,ae=mn,je=ko,Pt=Oo,Ze=ao("RouterLink"),Zo=ao("IconBtn");return k(),we(to,{"max-width":"1000","model-value":t.isDialogVisible,persistent:"","close-on-esc":!1,"onUpdate:modelValue":I},{default:d(()=>[r(C,{onClick:I}),r(j,{cols:"12",style:{display:"flex","flex-direction":"column"}},{default:d(()=>[r(ke,{class:"pa-sm-4"},{default:d(()=>[r(hn,{modelValue:N.value,"onUpdate:modelValue":c[0]||(c[0]=p=>N.value=p)},{default:d(()=>[(k(!0),R(fe,null,be(H.value,p=>(k(),we(gn,{key:p.value,value:p.value},{default:d(()=>[W(F(p.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(bn,{modelValue:N.value,"onUpdate:modelValue":c[13]||(c[13]=p=>N.value=p)},{default:d(()=>[r(ze,{value:"information",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(ke,{title:"Información del Cliente y Oportunidad"},{default:d(()=>[r(Le,null,{default:d(()=>[r(Xt,{onSubmit:Ue(ne,["prevent"])},{default:d(()=>[r(Oe,null,{default:d(()=>[r(j,{cols:"12",md:"6"},{default:d(()=>[r(te,{modelValue:_(h).customer.name,"onUpdate:modelValue":c[1]||(c[1]=p=>_(h).customer.name=p),label:"Nombre del Cliente",placeholder:"Ingresa el nombre",outlined:""},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(te,{modelValue:_(h).customer.email,"onUpdate:modelValue":c[2]||(c[2]=p=>_(h).customer.email=p),label:"Email del Cliente",placeholder:"Ingresa el email",outlined:""},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(Oe,null,{default:d(()=>[r(j,{cols:"4"},{default:d(()=>[r(M,{modelValue:_(h).customer.cod_phone,"onUpdate:modelValue":c[3]||(c[3]=p=>_(h).customer.cod_phone=p),label:"Código",items:["+1","+52","+55","+54","+49","+33","+34","+39","+86","+81","+7","+591"],placeholder:"Cód.",outlined:""},null,8,["modelValue"])]),_:1}),r(j,{cols:"8"},{default:d(()=>[r(te,{modelValue:_(h).customer.phone,"onUpdate:modelValue":c[4]||(c[4]=p=>_(h).customer.phone=p),label:"Número de Teléfono",placeholder:"Ingresa el teléfono",outlined:"",dense:"",maxlength:"9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(te,{modelValue:_(h).customer.ci,"onUpdate:modelValue":c[5]||(c[5]=p=>_(h).customer.ci=p),label:"CI del Cliente",placeholder:"Ingresa el CI",outlined:""},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(ae,{modelValue:_(h).property_id,"onUpdate:modelValue":c[6]||(c[6]=p=>_(h).property_id=p),label:"Departamento de Interés",placeholder:"Selecciona un Departamento",items:_(u).map(p=>({title:p.title,value:p.id})),outlined:""},null,8,["modelValue","items"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(M,{modelValue:_(h).customer.type_customer,"onUpdate:modelValue":c[7]||(c[7]=p=>_(h).customer.type_customer=p),label:"Tipo de Cliente",items:["Olvidadizo","Familiar","Decidido","Indeciso","Exigente","Referido","Inversionista","Recuperado","Curioso"],placeholder:"Tipo de Cliente",outlined:""},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(je,{modelValue:_(h).description,"onUpdate:modelValue":c[8]||(c[8]=p=>_(h).description=p),label:"Descripción de la Oportunidad",placeholder:"Ingresa una descripción",rows:"2","auto-grow":"",outlined:""},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6",class:"text-center mt-5"},{default:d(()=>[r(ue,{type:"submit",color:"primary",class:"me-3",disabled:_(K),loading:_(K)},{default:d(()=>c[14]||(c[14]=[W(" Guardar Cambios ")])),_:1},8,["disabled","loading"]),r(ue,{color:"error",onClick:I},{default:d(()=>c[15]||(c[15]=[W(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(ze,{value:"add_activity",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(ke,{title:"Agregar Actividad"},{default:d(()=>[r(Le,null,{default:d(()=>[r(Xt,{onSubmit:Ue(X,["prevent"])},{default:d(()=>[r(Oe,null,{default:d(()=>[r(j,{cols:"12",md:"6"},{default:d(()=>[r(te,{modelValue:S.value.title,"onUpdate:modelValue":c[9]||(c[9]=p=>S.value.title=p),label:"Titulo de la Actividad",placeholder:"Escribe un Titulo"},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(M,{modelValue:S.value.type_activity_id,"onUpdate:modelValue":c[10]||(c[10]=p=>S.value.type_activity_id=p),label:"Seleccione una Actividad",placeholder:"Seleccione una Actividad",items:_(v).map(p=>({title:p.name,value:p.id}))},null,8,["modelValue","items"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(Pt,{modelValue:S.value.scheduled_at,"onUpdate:modelValue":c[11]||(c[11]=p=>S.value.scheduled_at=p),label:"Fecha",placeholder:"Seleccione una Fecha",config:{enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[r(je,{modelValue:S.value.description,"onUpdate:modelValue":c[12]||(c[12]=p=>S.value.description=p),label:"Detalla tu Actividad",rows:"2",placeholder:"Describe la actividad"},null,8,["modelValue"])]),_:1}),r(j,{cols:"12",class:"text-center"},{default:d(()=>[r(ue,{type:"submit",class:"me-3",disabled:_(b),loading:_(b)},{default:d(()=>c[16]||(c[16]=[W(" Agregar Actividad ")])),_:1},8,["disabled","loading"]),r(ue,{color:"error",onClick:I},{default:d(()=>c[17]||(c[17]=[W(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(ze,{value:"activity_list",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(ke,{title:"Lista de Actividades"},{default:d(()=>[r(_(yn),{headers:[{title:"Actividad",value:"title"},{title:"Fecha",value:"scheduled_at"},{title:"Estado",value:"state_activity"},{title:"Descripción",value:"description"},{title:"Acciones",value:"actions",sortable:!1}],items:_(h).activities,"item-value":"id",class:"elevation-1","items-per-page":5},{"item.actions":d(({item:p})=>[r(ue,{title:"Marcar Como Realizada",color:"primary",disabled:p.state_activity!==_(To).PENDING.value,onClick:z=>J(p.id)},{default:d(()=>[r(Te,{icon:"tabler-checkbox"})]),_:2},1032,["disabled","onClick"])]),_:2},1032,["items"])]),_:1})]),_:1}),r(ze,{value:"quotations",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(ke,null,{default:d(()=>[r(xo,{class:"d-flex justify-space-between align-center"},{default:d(()=>[c[19]||(c[19]=m("span",{class:"text-h5 font-weight-medium"},"Cotizaciones",-1)),r(Ze,{to:{name:"quote-add-quote"},class:"text-white"},{default:d(()=>[r(ue,{color:"primary",variant:"outlined",size:"small"},{default:d(()=>[r(Te,{icon:"tabler-plus"}),c[18]||(c[18]=W(" Agregar nueva cotización "))]),_:1})]),_:1})]),_:1}),r(Le,null,{default:d(()=>[m("div",null,[_(h).quotes&&_(h).quotes.length>0?(k(),R("div",bl,[r(mt,{density:"compact",class:"text-no-wrap"},{default:d(()=>[c[20]||(c[20]=m("thead",null,[m("tr",null,[m("th",null,"Propiedad"),m("th",null,"Fecha"),m("th",null,"Monto"),m("th",null,"Acciones")])],-1)),m("tbody",null,[(k(!0),R(fe,null,be(_(h).quotes,p=>(k(),R("tr",{key:p.id},[m("td",null,F(p.properties[0].title),1),m("td",null,F(p.created_at),1),m("td",null,F(_(bt)(p.amount)),1),m("td",null,[r(Oe,{class:"d-flex align-center gap-2"},{default:d(()=>[r(et,{modelValue:p.status,"onUpdate:modelValue":z=>p.status=z,"true-value":"APPROVED","false-value":"NOT_APPROVED",disabled:""},null,8,["modelValue","onUpdate:modelValue"]),r(et,{modelValue:p.status_customer,"onUpdate:modelValue":z=>p.status_customer=z,"true-value":"APPROVED","false-value":"NOT_APPROVED",onClick:z=>le(p.id,p.status_customer)},{default:d(()=>[r(Xe,{activator:"parent",location:"top"},{default:d(()=>[W(F(p.status_customer==="NOT_APPROVED"?"No aprobado por cliente":"Aprobado por cliente"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"]),r(Ze,{to:{name:"quote-id",params:{id:p.id}}},{default:d(()=>[r(ue,{icon:"",variant:"plain"},{default:d(()=>[r(Te,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)])]))),128))])]),_:1})])):(k(),R("div",yl,c[21]||(c[21]=[m("span",null,"No hay procedimientos disponibles.",-1)])))])]),_:1})]),_:1})]),_:1}),r(ze,{value:"sales",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[r(ke,{title:"Ventas"},{default:d(()=>[r(Le,null,{default:d(()=>[r(mt,{density:"compact",class:"text-no-wrap my-2"},{default:d(()=>[c[23]||(c[23]=m("thead",null,[m("tr",null,[m("th",null," ID "),m("th",null," Metodo de Pago "),m("th",null," Propiedades "),m("th",null," Total "),m("th",null," Estado "),m("th",null," Fecha "),m("th",null," Accion ")])],-1)),m("tbody",null,[(k(!0),R(fe,null,be(_(h).sales,p=>(k(),R("tr",{key:p.id},[m("td",null,F(p.id),1),m("td",null,F(ce(p.payment_method)),1),m("td",null,[(k(!0),R(fe,null,be(p.properties,z=>(k(),R("div",{key:z.id,class:"d-flex gap-x-2"},F(z.title)+" | "+F(z.code),1))),128))]),m("td",null,F(_(bt)(p.amount)),1),m("td",null,F(V(p.status)),1),m("td",null,F(p.creation_date),1),m("td",null,[m("div",_l,[r(Ze,{to:{name:"sale-id",params:{id:p.id}}},{default:d(()=>[r(Zo,null,{default:d(()=>[r(Te,{icon:"tabler-eye"})]),_:1})]),_:2},1032,["to"]),r(et,{modelValue:p.confirmation_signature,"onUpdate:modelValue":z=>p.confirmation_signature=z,"true-value":1,"false-value":0,class:"my-2",onChange:z=>he(p.id)},{default:d(()=>[r(Xe,{activator:"parent",location:"top"},{default:d(()=>c[22]||(c[22]=[W(" Confirmar firma ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])])]))),128))])]),_:1}),m("div",El,[c[25]||(c[25]=m("strong",null," Procesos ",-1)),_(h).procedure&&_(h).procedure.length>0?(k(),R("div",wl,[(k(!0),R(fe,null,be(_(h).procedure,p=>(k(),R("div",{key:p.id},[r(Yt,{color:p.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:z=>ge(p)},{default:d(()=>[p.pivot.is_check?(k(),we(Te,{key:0,icon:"tabler-check",class:"mr-2"})):Ae("",!0),W(" "+F(p.title),1)]),_:2},1032,["color","onClick"]),r(Xe,{activator:"parent",location:"top"},{default:d(()=>[W(F(p.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(k(),R("div",Cl,c[24]||(c[24]=[m("span",null,"No hay procedimientos disponibles.",-1)])))]),r(Oe,null,{default:d(()=>[r(j,{cols:"12",md:"6"},{default:d(()=>[m("div",Dl,[c[28]||(c[28]=m("strong",null," Anticipo ",-1)),_(h).initial_payments&&_(h).initial_payments.length>0?(k(),we(mt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[c[27]||(c[27]=m("thead",null,[m("tr",null,[m("th",null," Propiedad "),m("th",null," Fecha "),m("th",null," Monto "),m("th")])],-1)),m("tbody",null,[(k(!0),R(fe,null,be(_(h).initial_payments,p=>(k(),R("tr",{key:p.id},[m("td",null,F(p.property_title),1),m("td",null,F(p.date),1),m("td",null,F(p.amount),1),m("td",null,[r(Oe,null,{default:d(()=>[r(et,{modelValue:p.is_paid,"onUpdate:modelValue":z=>p.is_paid=z,"true-value":1,"false-value":0,disabled:p.is_paid===1,onChange:z=>D(p.id)},{default:d(()=>[r(Xe,{activator:"parent",location:"top"},{default:d(()=>c[26]||(c[26]=[W(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:2},1024)])]))),128))])]),_:1})):Ae("",!0)])]),_:1}),r(j,{cols:"12",md:"6"},{default:d(()=>[m("div",null,[c[31]||(c[31]=m("strong",null," Saldos ",-1)),_(h).balance_payments&&_(h).balance_payments.length>0?(k(),we(mt,{key:0,density:"compact",class:"text-no-wrap my-2",style:{"font-size":"12px"}},{default:d(()=>[c[30]||(c[30]=m("thead",null,[m("tr",null,[m("th",null," Propiedad "),m("th",null," Fecha "),m("th",null," Monto "),m("th")])],-1)),m("tbody",null,[(k(!0),R(fe,null,be(_(h).balance_payments,p=>(k(),R("tr",{key:p.id},[m("td",null,F(p.property_title),1),m("td",null,F(p.date),1),m("td",null,F(p.amount),1),m("td",null,[r(et,{modelValue:p.is_paid,"onUpdate:modelValue":z=>p.is_paid=z,"true-value":1,"false-value":0,disabled:p.is_paid===1,onChange:z=>D(p.id)},{default:d(()=>[r(Xe,{activator:"parent",location:"top"},{default:d(()=>c[29]||(c[29]=[W(" Confirmar Pago ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])]))),128))])]),_:1})):Ae("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(ze,{value:"delivery",style:{"max-block-size":"90vh","overflow-y":"auto"}},{default:d(()=>[m("div",Tl,[c[32]||(c[32]=m("span",{style:{"font-size":"14px","font-weight":"500"}}," Propiedades ",-1)),_(h).sales.length>0?(k(),R("div",Al,[(k(!0),R(fe,null,be(_(h).sales,p=>(k(),R("div",{key:p.id},[(k(!0),R(fe,null,be(p.properties,z=>(k(),R("div",{key:z.id,class:"d-flex align-center justify-between"},[r(_n,{size:"50",rounded:""},{default:d(()=>[m("img",{src:_(rn),alt:"Logo pora",style:{"border-radius":"30%"}},null,8,Sl)]),_:1}),r(j,{cols:"12",md:"7"},{default:d(()=>[r(En,{class:"font-weight-medium"},{default:d(()=>[W(F(z.project_title)+" | "+F(z.title),1)]),_:2},1024),r(wn,{class:"text-disabled d-flex justify-between mt-1"},{default:d(()=>[m("span",null,F(_(bt)(z.pivot_price)),1)]),_:2},1024)]),_:2},1024)]))),128))]))),128))])):Ae("",!0)]),m("div",Vl,[c[34]||(c[34]=m("span",{style:{"font-size":"14px","font-weight":"500"}}," Procesos ",-1)),_(h).procedure&&_(h).procedure.length>0?(k(),R("div",xl,[(k(!0),R(fe,null,be(_(h).procedure,p=>(k(),R("div",{key:p.id},[r(Yt,{color:p.pivot.is_check?"primary":"secondary",variant:"outlined",class:"my-1",style:{cursor:"pointer"},"fill-dot":"",onClick:z=>ge(p.id,p.pivot.is_check)},{default:d(()=>[p.pivot.is_check?(k(),we(Te,{key:0,icon:"tabler-check",class:"mr-2"})):Ae("",!0),W(" "+F(p.title),1)]),_:2},1032,["color","onClick"]),r(Xe,{activator:"parent",location:"top"},{default:d(()=>[W(F(p.pivot.is_check?"Deshacer Proceso":"Confirmar Proceso"),1)]),_:2},1024)]))),128))])):(k(),R("div",kl,c[33]||(c[33]=[m("span",null,"No hay procedimientos disponibles.",-1)])))]),r(Le,{class:"d-flex justify-center mt-4"},{default:d(()=>[r(ue,{color:"primary",size:"small"},{default:d(()=>c[35]||(c[35]=[W(" Finalizar Oportunidad ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}};const Pl={class:"kanban-header-container"},Nl={class:"search-container"},Il={class:"kanban"},Ml=["data-column-title"],Rl={class:"kanban-column-header"},Fl={class:"column-title"},Bl={class:"small-badge"},$l=["onClick"],Ll={class:"d-flex align-center",style:{gap:"10px","margin-block-end":"10px"}},Ul={style:{flex:"7"}},jl={style:{margin:"0","font-size":"small"}},zl={style:{margin:"0","font-size":"small"}},Xl={class:"d-flex align-center justify-end gap-2",style:{flex:"0 1 30%"}},Yl={class:"kanban-header"},Kl={class:"d-flex gap-1"},Hl={class:"label-info"},ql={class:"project-info"},Gl={key:0,class:"label-name",style:{"font-size":"small"}},Wl={key:1,class:"label-name",style:{display:"flex","align-items":"center",gap:"8px"}},Ql={class:"price"},Jl={class:"kanban-details"},Zl={class:"label-info"},ea={style:{color:"rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity))","font-size":"small","font-weight":"700"}},ta={__name:"Kanban",setup(e){const o=Q(""),{allOpportunityKanbanForUser:t,kanban:n,getOpportunitybyId:l,opportunity:a,changeStatusByOpportunity:s}=kt(),{getallTypeActivities:u,typeActivities:i}=Zt(),v=Q(null),y=Q(!1),b=Q(!1),O=Q(!1),E=Q(null),h=Q(!1),P=Q(!1),K=Q(null),w=D=>{const f=new Date(D),c=f.getDate(),te=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][f.getMonth()],M=f.getHours().toString().padStart(2,"0"),ae=f.getMinutes().toString().padStart(2,"0");return`${c} de ${te}, ${M}:${ae}`},$=D=>{K.value={column:D.from.closest(".kanban-column"),index:Array.from(D.from.children).indexOf(D.item)},E.value=D.from.closest(".kanban-column").dataset.columnTitle,console.log("Elemento arrastrado desde:",E.value)},S=D=>{const f=D.data,c=D.from.closest(".kanban-column").dataset.columnTitle,C=D.to.closest(".kanban-column").dataset.columnTitle,te=n.value.find(ae=>ae.title===c),M=n.value.find(ae=>ae.title===C);if(te&&M){const ae=M.items.findIndex(je=>je.id===f.id);if(ae!==-1){const[je]=M.items.splice(ae,1);console.log("Elemento eliminado de la columna de destino"),te.items.push(je),te.items.sort((Pt,Ze)=>Pt.id-Ze.id),console.log("Elemento restaurado en la columna de origen")}else console.log("Elemento no encontrado en la columna de destino")}else console.log("No se encontraron las columnas de origen o destino")},I=async D=>{ct.fire({title:"Quieres dar de baja al cliente ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirmar"}).then(f=>{f.isConfirmed&&(H(D,Me.LOSS.value),V(D),closeNavigationDrawer(),ct.fire({text:"EL cliente fue dado de baja",icon:"success"}))})},H=async(D,f)=>{await s(D.id,f,{}),await t()},ce=async D=>{ct.fire({title:"Quieres completar la oportunidad?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirmar"}).then(f=>{f.isConfirmed&&(s(D.id,Me.FINISHED.value,{}),V(D),closeNavigationDrawer(),ct.fire({text:"EL cliente fue completado",icon:"success"}))})},V=D=>{const f=n.value.find(c=>c.items.some(C=>C.id===D.id));if(f){const c=f.items.findIndex(C=>C.id===D.id);c!==-1?(f.items.splice(c,1),console.log("Elemento eliminado")):console.log("Elemento no encontrado en el tablero")}else console.log("El elemento no se encuentra en ningún tablero")},N=()=>{h.value=!0},L=D=>{const f=D.from.closest(".kanban-column").dataset.columnTitle,c=D.to.closest(".kanban-column").dataset.columnTitle;return re(f,c)?(console.log(`Movimiento permitido de ${f} a ${c}`),!0):(console.log(`Movimiento NO permitido de ${f} a ${c}`),!1)},X=async D=>{console.log(D);const f=D.from.closest(".kanban-column").dataset.columnTitle,c=D.to.closest(".kanban-column").dataset.columnTitle;if(!re(f,c))return console.log(`Movimiento NO permitido de ${f} a ${c}`),!1;if(console.log("Elemento movido de",f,"a",c),f!==c){const C=D.data;switch(c){case"LEAD":console.log("Movido a LEAD");break;case"PROSPECTO":console.log("Movido a PROSPECTO"),v.value=C,O.value=!0;break;case"PREVENTA":console.log("Movido a PREVENTA"),v.value=C,H(v.value,Me.PRESALE.value);break;case"VENTA":await l(C.id),console.log("Movido a VENTA"),v.value=a.value,P.value=!0;break;case"ENTREGA":console.log("Movido a ENTREGA"),v.value=C,H(v.value,Me.DELIVERY.value);break;default:console.log("Movimiento a una columna no definida");break}}Qe(h,C=>C&&S(D)),h.value=!1},ne=D=>{v.value=D,y.value=!0},J={LEAD:["PROSPECTO","PREVENTA"],PROSPECTO:["PREVENTA"],PREVENTA:["VENTA"],VENTA:["ENTREGA"],ENTREGA:[]},re=(D,f)=>(J[D]||[]).includes(f);Ao(async()=>{await t(),await u()});const le=async()=>{await t()},he=()=>{o.value=""},ge=Ne(()=>o.value.trim()?n.value.map(D=>{const f=D.items.map(C=>{var te,M,ae;return{...C,isFiltered:(((te=C.name)==null?void 0:te.toLowerCase())||"").includes(o.value.toLowerCase())||(((M=C.type_customer)==null?void 0:M.toLowerCase())||"").includes(o.value.toLowerCase())||(C.phone||"").includes(o.value)||(((ae=C.property)==null?void 0:ae.toLowerCase())||"").includes(o.value.toLowerCase()),isNotFiltered:!1}}).filter(C=>C.isFiltered),c=D.items.map(C=>({...C,isFiltered:!1,isNotFiltered:!0})).filter(C=>!f.some(te=>te.id===C.id));return{...D,items:[...f,...c]}}):n.value);return(D,f)=>{const c=Qt;return k(),R(fe,null,[m("div",Pl,[m("div",Nl,[r(c,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=C=>o.value=C),class:"search-input",placeholder:"Buscar...",density:"compact"},null,8,["modelValue"]),r(ue,{class:"clear-search-btn",icon:"tabler-filter-x",onClick:he})])]),m("div",Il,[(k(!0),R(fe,null,be(_(ge),(C,te)=>(k(),R("div",{key:te,class:"kanban-column","data-column-title":C.title},[m("div",Rl,[m("div",Fl,[m("h2",null,F(C.title),1),m("span",Bl,F(C.items.length),1)])]),r(_(vl),{modelValue:C.items,"onUpdate:modelValue":M=>C.items=M,group:{name:C.name,pull:!0,put:!0},class:"kanban-items",onStart:$,onMove:L,onEnd:X},{default:d(()=>[(k(!0),R(fe,null,be(C.items,M=>(k(),R("div",{key:M.id,class:an(["kanban-item",{"filtered-item":M.isFiltered,"not-filtered-item":M.isNotFiltered}]),onClick:ae=>ne(M)},[m("div",Ll,[m("div",Ul,[m("p",jl,[m("strong",null,F(M.name),1)]),m("span",zl,F(M.type_customer),1)]),m("div",Xl,[M.stage!=="VENTA"&&M.stage!=="ENTREGA"?(k(),we(ue,{key:0,color:"warning",class:"icon-container",title:"Dar de Baja",variant:"tonal",onClick:[f[1]||(f[1]=Ue(()=>{},["stop"])),Ue(ae=>I(M),["prevent"])]},{default:d(()=>[r(Te,{icon:"tabler-trash",class:"icon-small"})]),_:2},1032,["onClick"])):Ae("",!0),M.stage==="ENTREGA"?(k(),we(ue,{key:1,color:"success",title:"Completar Oportunidad",class:"icon-container",variant:"tonal",onClick:[f[2]||(f[2]=Ue(()=>{},["stop"])),Ue(ae=>ce(M),["prevent"])]},{default:d(()=>[r(Te,{icon:"tabler-check"})]),_:2},1032,["onClick"])):Ae("",!0)])]),m("div",Yl,[m("div",Kl,[m("div",null,[m("p",Hl,F(M.property_type),1),m("div",ql,[M.property?(k(),R("span",Gl,F(M.project+" | "+M.property),1)):Ae("",!0),M.property==null?(k(),R("span",Wl,[r(Yt,{class:"d-flex justify-center align-center",style:{display:"inline-flex","border-radius":"4px","block-size":"30px","inline-size":"30px"}},{default:d(()=>[r(Te,{size:"20",icon:"tabler-home"})]),_:1}),f[7]||(f[7]=m("strong",{style:{"font-size":"small"}}," Indefinido ",-1))])):Ae("",!0),f[8]||(f[8]=m("h4",{class:"department-code"},null,-1))]),m("p",Ql,[m("strong",null,F(_(bt)(M.price)),1)])])]),m("div",Jl,[m("p",Zl,F(w(M.created_at)),1),m("p",ea,F(M.phone),1)])])],10,$l))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","group"])],8,Ml))),128))]),r(Ol,{"is-dialog-visible":y.value,"onUpdate:isDialogVisible":f[3]||(f[3]=C=>y.value=C),"opportunity-kanban":v.value,onFormCancelled:N,onFormRefresh:le},null,8,["is-dialog-visible","opportunity-kanban"]),r(hl,{"is-dialog-visible":b.value,"onUpdate:isDialogVisible":f[4]||(f[4]=C=>b.value=C),"opportunity-kanban":v.value},null,8,["is-dialog-visible","opportunity-kanban"]),r(sn,{"is-dialog-visible":P.value,"onUpdate:isDialogVisible":f[5]||(f[5]=C=>P.value=C),opportunity:v.value,stage:"PRESALE",onFormCancelled:N,onFormRefresh:le},null,8,["is-dialog-visible","opportunity"]),r(gl,{"is-dialog-visible":O.value,"onUpdate:isDialogVisible":f[6]||(f[6]=C=>O.value=C),"opportunity-kanban":v.value,"type-activities":_(i),onFormCancelled:N},null,8,["is-dialog-visible","opportunity-kanban","type-activities"])],64)}}};const oa={class:""},na={__name:"myContacts",setup(e){return Q(!1),Q([new Date(2024,9,10),new Date(2024,10,10)]),Q(["Todos","PORA"]),Q("Todos"),Q(),(o,t)=>(k(),R("div",oa,[m("div",null,[r(ta)])]))}},ui=Cn(na,[["__scopeId","data-v-65e1bacb"]]);export{ui as default};
