import{_ as M}from"./AppSelect-e68dd25c.js";import{_ as j}from"./AppTextField-6b4dd3fe.js";import{u as N}from"./useConversation-ac827514.js";import{p as T}from"./paginationMeta-4ad053a4.js";import{l as B}from"./lodash-87e1f296.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{V as I}from"./VCard-b235f28f.js";import{V as z}from"./VCardText-2182b6b6.js";import{V}from"./VDivider-7b130088.js";import{V as F}from"./VDataTableServer-6963629f.js";import{V as R}from"./VRow-8bf5a8f8.js";import{V as H}from"./VChip-c467351c.js";import{V as L}from"./VCheckbox-d392d724.js";import{V as O}from"./VTooltip-cdb65b69.js";import{V as Q}from"./VPagination-00319be1.js";import{r as u,w as q,o as G,c as J,b as s,e as o,d as l,n as a,a0 as f,x as m,v,a4 as h,s as x}from"./index-58ddfcb5.js";import"./form-d7616de9.js";import"./VSelect-e9d4d82f.js";import"./VTextField-6e57fb09.js";/* empty css                   */import"./VCounter-961cae3c.js";import"./VImg-8966969b.js";import"./VField-12118d36.js";import"./easing-9f15041e.js";import"./VInput-177e801d.js";import"./forwardRefs-8348545e.js";import"./VList-7ae1745a.js";import"./ssrBoot-cffaea7c.js";import"./VAvatar-15d76695.js";import"./dialog-transition-ca47a9b3.js";import"./VMenu-b8ecf363.js";import"./VOverlay-08dd500e.js";import"./lazy-29843bc1.js";import"./scopeId-f9a2c9e4.js";import"./VCheckboxBtn-a279f651.js";import"./VSelectionControl-a9e226b9.js";import"./api-746fe373.js";import"./index-9c720871.js";import"./constants-f3b5ca65.js";import"./notifications-81bc0416.js";import"./VDataTable-0bb91b64.js";import"./VTable-143d3a29.js";import"./filter-9074054f.js";const K={class:"d-flex justify-space-between flex-wrap gap-y-4"},W={class:"d-flex flex-row gap-4 align-center flex-wrap"},X={class:"d-flex gap-x-2"},Y=["href"],Z={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ee={class:"text-sm text-disabled mb-0"},te={__name:"list-conversation",setup(oe){const{allConversationsPaginate:y,totalConversations:g,conversations:C,updateConversationStatus:b}=N(),d=u(""),n=u(10),r=u(1);u(),u();const w=[{title:"Celular",key:"phone"},{title:"Es Cliente ?",key:"isCustomer"},{title:"Ultimo Mensaje",key:"last_message"},{title:"Estado",key:"ia_status"},{title:"Acción",key:"action"}],P=i=>{r.value=i.page,n.value=i.itemsPerPage},S=()=>{y({page:r.value,itemsPerPage:n.value,search:d.value})},D=B.debounce(S,300);q([d,n,r],D,{immediate:!0});const k=async i=>{const t=u(0);i.ia_status&&(t.value=1),await b(i.id,t.value)},A=i=>{const t=new Date(i),c=t.getDate(),e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][t.getMonth()],_=t.getHours().toString().padStart(2,"0"),$=t.getMinutes().toString().padStart(2,"0");return`${c} de ${e}, ${_}:${$}`},U=i=>{const t=new Date,c=new Date(i),p=(t-c)/(1e3*60*60);return console.log(p),p>=12?"error":p>=6?"warning":p>=3?"info":"succes"};return(i,t)=>{const c=j,p=M;return G(),J("div",null,[s(I,{title:"Lista de Conversación con la IA"},{default:o(()=>[s(z,null,{default:o(()=>[l("div",K,[s(c,{modelValue:a(d),"onUpdate:modelValue":t[0]||(t[0]=e=>f(d)?d.value=e:null),style:{"max-inline-size":"200px","min-inline-size":"200px"},placeholder:"Search ..",density:"compact"},null,8,["modelValue"]),l("div",W,[s(p,{modelValue:a(n),"onUpdate:modelValue":t[1]||(t[1]=e=>f(n)?n.value=e:null),density:"compact",items:[5,10,20,50,100]},null,8,["modelValue"])])])]),_:1}),s(V),s(a(F),{"items-per-page":a(n),"onUpdate:itemsPerPage":t[3]||(t[3]=e=>f(n)?n.value=e:null),page:a(r),"onUpdate:page":t[4]||(t[4]=e=>f(r)?r.value=e:null),items:a(C),headers:w,"items-length":a(g),class:"text-no-wrap","onUpdate:options":P},{"item.phone":o(({item:e})=>[l("div",X,[l("a",{href:`https://api.whatsapp.com/send?phone=${e.phone}`,target:"_blank",rel:"noopener noreferrer",class:"text-body-1"},m(e.cod_phone)+" "+m(e.phone),9,Y)])]),"item.last_message":o(({item:e})=>[s(R,{class:"gap-2 align-center"},{default:o(()=>[s(H,{color:U(e.last_message)},{default:o(()=>[v(m(A(e.last_message)),1)]),_:2},1032,["color"])]),_:2},1024)]),"item.ia_status":o(({item:e})=>[l("span",null,m(e.ia_status?"Activado":"No activado"),1)]),"item.isCustomer":o(({item:e})=>[l("span",null,m(e.isCustomer?"Sí":"No"),1)]),"item.action":o(({item:e})=>[s(L,{modelValue:e.ia_status,"onUpdate:modelValue":_=>e.ia_status=_,"true-value":1,"false-value":0,onChange:_=>k(e)},{default:o(()=>[s(O,{activator:"parent",location:"top"},{default:o(()=>[v(m(e.ia_status?"Desactivar IA":"Activar IA"),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),bottom:o(()=>[s(V),l("div",Z,[l("p",ee,m(a(T)({page:a(r),itemsPerPage:a(n)},a(g))),1),s(Q,{modelValue:a(r),"onUpdate:modelValue":t[2]||(t[2]=e=>f(r)?r.value=e:null),length:Math.ceil(a(g)/a(n)),"total-visible":i.$vuetify.display.xs?1:Math.min(Math.ceil(a(g)/a(n)),5)},{prev:o(e=>[s(h,x({variant:"tonal",color:"default"},e,{icon:!1}),{default:o(()=>t[5]||(t[5]=[v(" Previous ")])),_:2},1040)]),next:o(e=>[s(h,x({variant:"tonal",color:"default"},e,{icon:!1}),{default:o(()=>t[6]||(t[6]=[v(" Next ")])),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})])}}},qe=E(te,[["__scopeId","data-v-4fc919de"]]);export{qe as default};
